function gJ(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Ov(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LM={exports:{}},Vy={},DM={exports:{}},Kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF;function vJ(){if(sF)return Kn;sF=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function h(F){return F===null||typeof F!="object"?null:(F=f&&F[f]||F["@@iterator"],typeof F=="function"?F:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function _(F,ie,he){this.props=F,this.context=ie,this.refs=v,this.updater=he||p}_.prototype.isReactComponent={},_.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function S(){}S.prototype=_.prototype;function A(F,ie,he){this.props=F,this.context=ie,this.refs=v,this.updater=he||p}var T=A.prototype=new S;T.constructor=A,g(T,_.prototype),T.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,L={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function k(F,ie,he){var pe,ye={},Be=null,Me=null;if(ie!=null)for(pe in ie.ref!==void 0&&(Me=ie.ref),ie.key!==void 0&&(Be=""+ie.key),ie)C.call(ie,pe)&&!P.hasOwnProperty(pe)&&(ye[pe]=ie[pe]);var Le=arguments.length-2;if(Le===1)ye.children=he;else if(1<Le){for(var je=Array(Le),lt=0;lt<Le;lt++)je[lt]=arguments[lt+2];ye.children=je}if(F&&F.defaultProps)for(pe in Le=F.defaultProps,Le)ye[pe]===void 0&&(ye[pe]=Le[pe]);return{$$typeof:n,type:F,key:Be,ref:Me,props:ye,_owner:L.current}}function I(F,ie){return{$$typeof:n,type:F.type,key:ie,ref:F.ref,props:F.props,_owner:F._owner}}function D(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function G(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ie[he]})}var H=/\/+/g;function q(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?G(""+F.key):ie.toString(36)}function W(F,ie,he,pe,ye){var Be=typeof F;(Be==="undefined"||Be==="boolean")&&(F=null);var Me=!1;if(F===null)Me=!0;else switch(Be){case"string":case"number":Me=!0;break;case"object":switch(F.$$typeof){case n:case e:Me=!0}}if(Me)return Me=F,ye=ye(Me),F=pe===""?"."+q(Me,0):pe,b(ye)?(he="",F!=null&&(he=F.replace(H,"$&/")+"/"),W(ye,ie,he,"",function(lt){return lt})):ye!=null&&(D(ye)&&(ye=I(ye,he+(!ye.key||Me&&Me.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+F)),ie.push(ye)),1;if(Me=0,pe=pe===""?".":pe+":",b(F))for(var Le=0;Le<F.length;Le++){Be=F[Le];var je=pe+q(Be,Le);Me+=W(Be,ie,he,je,ye)}else if(je=h(F),typeof je=="function")for(F=je.call(F),Le=0;!(Be=F.next()).done;)Be=Be.value,je=pe+q(Be,Le++),Me+=W(Be,ie,he,je,ye);else if(Be==="object")throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Me}function te(F,ie,he){if(F==null)return F;var pe=[],ye=0;return W(F,pe,"","",function(Be){return ie.call(he,Be,ye++)}),pe}function ee(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var ne={current:null},Y={transition:null},Q={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Y,ReactCurrentOwner:L};return Kn.Children={map:te,forEach:function(F,ie,he){te(F,function(){ie.apply(this,arguments)},he)},count:function(F){var ie=0;return te(F,function(){ie++}),ie},toArray:function(F){return te(F,function(ie){return ie})||[]},only:function(F){if(!D(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Kn.Component=_,Kn.Fragment=t,Kn.Profiler=r,Kn.PureComponent=A,Kn.StrictMode=i,Kn.Suspense=l,Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Kn.cloneElement=function(F,ie,he){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var pe=g({},F.props),ye=F.key,Be=F.ref,Me=F._owner;if(ie!=null){if(ie.ref!==void 0&&(Be=ie.ref,Me=L.current),ie.key!==void 0&&(ye=""+ie.key),F.type&&F.type.defaultProps)var Le=F.type.defaultProps;for(je in ie)C.call(ie,je)&&!P.hasOwnProperty(je)&&(pe[je]=ie[je]===void 0&&Le!==void 0?Le[je]:ie[je])}var je=arguments.length-2;if(je===1)pe.children=he;else if(1<je){Le=Array(je);for(var lt=0;lt<je;lt++)Le[lt]=arguments[lt+2];pe.children=Le}return{$$typeof:n,type:F.type,key:ye,ref:Be,props:pe,_owner:Me}},Kn.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},Kn.createElement=k,Kn.createFactory=function(F){var ie=k.bind(null,F);return ie.type=F,ie},Kn.createRef=function(){return{current:null}},Kn.forwardRef=function(F){return{$$typeof:a,render:F}},Kn.isValidElement=D,Kn.lazy=function(F){return{$$typeof:u,_payload:{_status:-1,_result:F},_init:ee}},Kn.memo=function(F,ie){return{$$typeof:c,type:F,compare:ie===void 0?null:ie}},Kn.startTransition=function(F){var ie=Y.transition;Y.transition={};try{F()}finally{Y.transition=ie}},Kn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Kn.useCallback=function(F,ie){return ne.current.useCallback(F,ie)},Kn.useContext=function(F){return ne.current.useContext(F)},Kn.useDebugValue=function(){},Kn.useDeferredValue=function(F){return ne.current.useDeferredValue(F)},Kn.useEffect=function(F,ie){return ne.current.useEffect(F,ie)},Kn.useId=function(){return ne.current.useId()},Kn.useImperativeHandle=function(F,ie,he){return ne.current.useImperativeHandle(F,ie,he)},Kn.useInsertionEffect=function(F,ie){return ne.current.useInsertionEffect(F,ie)},Kn.useLayoutEffect=function(F,ie){return ne.current.useLayoutEffect(F,ie)},Kn.useMemo=function(F,ie){return ne.current.useMemo(F,ie)},Kn.useReducer=function(F,ie,he){return ne.current.useReducer(F,ie,he)},Kn.useRef=function(F){return ne.current.useRef(F)},Kn.useState=function(F){return ne.current.useState(F)},Kn.useSyncExternalStore=function(F,ie,he){return ne.current.useSyncExternalStore(F,ie,he)},Kn.useTransition=function(){return ne.current.useTransition()},Kn.version="18.2.0",Kn}var oF;function zw(){return oF||(oF=1,DM.exports=vJ()),DM.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF;function yJ(){if(aF)return Vy;aF=1;var n=zw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,f={},h=null,p=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)i.call(l,u)&&!s.hasOwnProperty(u)&&(f[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:p,props:f,_owner:r.current}}return Vy.Fragment=t,Vy.jsx=o,Vy.jsxs=o,Vy}var lF;function xJ(){return lF||(lF=1,LM.exports=yJ()),LM.exports}var ge=xJ(),O=zw();const de=Ov(O),_J=gJ({__proto__:null,default:de},[O]);var lE={},BM={exports:{}},ta={},kM={exports:{}},OM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF;function SJ(){return cF||(cF=1,function(n){function e(Y,Q){var F=Y.length;Y.push(Q);e:for(;0<F;){var ie=F-1>>>1,he=Y[ie];if(0<r(he,Q))Y[ie]=Q,Y[F]=he,F=ie;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Q=Y[0],F=Y.pop();if(F!==Q){Y[0]=F;e:for(var ie=0,he=Y.length,pe=he>>>1;ie<pe;){var ye=2*(ie+1)-1,Be=Y[ye],Me=ye+1,Le=Y[Me];if(0>r(Be,F))Me<he&&0>r(Le,Be)?(Y[ie]=Le,Y[Me]=F,ie=Me):(Y[ie]=Be,Y[ye]=F,ie=ye);else if(Me<he&&0>r(Le,F))Y[ie]=Le,Y[Me]=F,ie=Me;else break e}}return Q}function r(Y,Q){var F=Y.sortIndex-Q.sortIndex;return F!==0?F:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,p=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Y){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=Y)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function b(Y){if(v=!1,T(Y),!g)if(t(l)!==null)g=!0,ee(C);else{var Q=t(c);Q!==null&&ne(b,Q.startTime-Y)}}function C(Y,Q){g=!1,v&&(v=!1,S(k),k=-1),p=!0;var F=h;try{for(T(Q),f=t(l);f!==null&&(!(f.expirationTime>Q)||Y&&!G());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,h=f.priorityLevel;var he=ie(f.expirationTime<=Q);Q=n.unstable_now(),typeof he=="function"?f.callback=he:f===t(l)&&i(l),T(Q)}else i(l);f=t(l)}if(f!==null)var pe=!0;else{var ye=t(c);ye!==null&&ne(b,ye.startTime-Q),pe=!1}return pe}finally{f=null,h=F,p=!1}}var L=!1,P=null,k=-1,I=5,D=-1;function G(){return!(n.unstable_now()-D<I)}function H(){if(P!==null){var Y=n.unstable_now();D=Y;var Q=!0;try{Q=P(!0,Y)}finally{Q?q():(L=!1,P=null)}}else L=!1}var q;if(typeof A=="function")q=function(){A(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,te=W.port2;W.port1.onmessage=H,q=function(){te.postMessage(null)}}else q=function(){_(H,0)};function ee(Y){P=Y,L||(L=!0,q())}function ne(Y,Q){k=_(function(){Y(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,ee(C))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var F=h;h=Q;try{return Y()}finally{h=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var F=h;h=Y;try{return Q()}finally{h=F}},n.unstable_scheduleCallback=function(Y,Q,F){var ie=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,Y){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=F+he,Y={id:u++,callback:Q,priorityLevel:Y,startTime:F,expirationTime:he,sortIndex:-1},F>ie?(Y.sortIndex=F,e(c,Y),t(l)===null&&Y===t(c)&&(v?(S(k),k=-1):v=!0,ne(b,F-ie))):(Y.sortIndex=he,e(l,Y),g||p||(g=!0,ee(C))),Y},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(Y){var Q=h;return function(){var F=h;h=Q;try{return Y.apply(this,arguments)}finally{h=F}}}}(OM)),OM}var uF;function EJ(){return uF||(uF=1,kM.exports=SJ()),kM.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fF;function AJ(){if(fF)return ta;fF=1;var n=zw(),e=EJ();function t(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,E=1;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(r[d]=m,d=0;d<m.length;d++)i.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function h(d){return l.call(f,d)?!0:l.call(u,d)?!1:c.test(d)?f[d]=!0:(u[d]=!0,!1)}function p(d,m,E,M){if(E!==null&&E.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return M?!1:E!==null?!E.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function g(d,m,E,M){if(m===null||typeof m>"u"||p(d,m,E,M))return!0;if(M)return!1;if(E!==null)switch(E.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function v(d,m,E,M,B,U,X){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=M,this.attributeNamespace=B,this.mustUseProperty=E,this.propertyName=d,this.type=m,this.sanitizeURL=U,this.removeEmptyString=X}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];_[m]=new v(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(S,A);_[m]=new v(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(S,A);_[m]=new v(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(S,A);_[m]=new v(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function T(d,m,E,M){var B=_.hasOwnProperty(m)?_[m]:null;(B!==null?B.type!==0:M||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,E,B,M)&&(E=null),M||B===null?h(m)&&(E===null?d.removeAttribute(m):d.setAttribute(m,""+E)):B.mustUseProperty?d[B.propertyName]=E===null?B.type===3?!1:"":E:(m=B.attributeName,M=B.attributeNamespace,E===null?d.removeAttribute(m):(B=B.type,E=B===3||B===4&&E===!0?"":""+E,M?d.setAttributeNS(M,m,E):d.setAttribute(m,E))))}var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),L=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),G=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Q(d){return d===null||typeof d!="object"?null:(d=Y&&d[Y]||d["@@iterator"],typeof d=="function"?d:null)}var F=Object.assign,ie;function he(d){if(ie===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);ie=m&&m[1]||""}return`
`+ie+d}var pe=!1;function ye(d,m){if(!d||pe)return"";pe=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Fe){var M=Fe}Reflect.construct(d,[],m)}else{try{m.call()}catch(Fe){M=Fe}d.call(m.prototype)}else{try{throw Error()}catch(Fe){M=Fe}d()}}catch(Fe){if(Fe&&M&&typeof Fe.stack=="string"){for(var B=Fe.stack.split(`
`),U=M.stack.split(`
`),X=B.length-1,ce=U.length-1;1<=X&&0<=ce&&B[X]!==U[ce];)ce--;for(;1<=X&&0<=ce;X--,ce--)if(B[X]!==U[ce]){if(X!==1||ce!==1)do if(X--,ce--,0>ce||B[X]!==U[ce]){var xe=`
`+B[X].replace(" at new "," at ");return d.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",d.displayName)),xe}while(1<=X&&0<=ce);break}}}finally{pe=!1,Error.prepareStackTrace=E}return(d=d?d.displayName||d.name:"")?he(d):""}function Be(d){switch(d.tag){case 5:return he(d.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return d=ye(d.type,!1),d;case 11:return d=ye(d.type.render,!1),d;case 1:return d=ye(d.type,!0),d;default:return""}}function Me(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case P:return"Fragment";case L:return"Portal";case I:return"Profiler";case k:return"StrictMode";case q:return"Suspense";case W:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case G:return(d.displayName||"Context")+".Consumer";case D:return(d._context.displayName||"Context")+".Provider";case H:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case te:return m=d.displayName||null,m!==null?m:Me(d.type)||"Memo";case ee:m=d._payload,d=d._init;try{return Me(d(m))}catch{}}return null}function Le(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(m);case 8:return m===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function je(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function lt(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function bt(d){var m=lt(d)?"checked":"value",E=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),M=""+d[m];if(!d.hasOwnProperty(m)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var B=E.get,U=E.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return B.call(this)},set:function(X){M=""+X,U.call(this,X)}}),Object.defineProperty(d,m,{enumerable:E.enumerable}),{getValue:function(){return M},setValue:function(X){M=""+X},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function gt(d){d._valueTracker||(d._valueTracker=bt(d))}function ue(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var E=m.getValue(),M="";return d&&(M=lt(d)?d.checked?"true":"false":d.value),d=M,d!==E?(m.setValue(d),!0):!1}function Ne(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function ke(d,m){var E=m.checked;return F({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??d._wrapperState.initialChecked})}function Ze(d,m){var E=m.defaultValue==null?"":m.defaultValue,M=m.checked!=null?m.checked:m.defaultChecked;E=je(m.value!=null?m.value:E),d._wrapperState={initialChecked:M,initialValue:E,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function We(d,m){m=m.checked,m!=null&&T(d,"checked",m,!1)}function _e(d,m){We(d,m);var E=je(m.value),M=m.type;if(E!=null)M==="number"?(E===0&&d.value===""||d.value!=E)&&(d.value=""+E):d.value!==""+E&&(d.value=""+E);else if(M==="submit"||M==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?dt(d,m.type,E):m.hasOwnProperty("defaultValue")&&dt(d,m.type,je(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function ft(d,m,E){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var M=m.type;if(!(M!=="submit"&&M!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,E||m===d.value||(d.value=m),d.defaultValue=m}E=d.name,E!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,E!==""&&(d.name=E)}function dt(d,m,E){(m!=="number"||Ne(d.ownerDocument)!==d)&&(E==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+E&&(d.defaultValue=""+E))}var Rt=Array.isArray;function Dt(d,m,E,M){if(d=d.options,m){m={};for(var B=0;B<E.length;B++)m["$"+E[B]]=!0;for(E=0;E<d.length;E++)B=m.hasOwnProperty("$"+d[E].value),d[E].selected!==B&&(d[E].selected=B),B&&M&&(d[E].defaultSelected=!0)}else{for(E=""+je(E),m=null,B=0;B<d.length;B++){if(d[B].value===E){d[B].selected=!0,M&&(d[B].defaultSelected=!0);return}m!==null||d[B].disabled||(m=d[B])}m!==null&&(m.selected=!0)}}function gn(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return F({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Z(d,m){var E=m.value;if(E==null){if(E=m.children,m=m.defaultValue,E!=null){if(m!=null)throw Error(t(92));if(Rt(E)){if(1<E.length)throw Error(t(93));E=E[0]}m=E}m==null&&(m=""),E=m}d._wrapperState={initialValue:je(E)}}function j(d,m){var E=je(m.value),M=je(m.defaultValue);E!=null&&(E=""+E,E!==d.value&&(d.value=E),m.defaultValue==null&&d.defaultValue!==E&&(d.defaultValue=E)),M!=null&&(d.defaultValue=""+M)}function Ee(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function Xe(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?Xe(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Je,St=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,E,M,B){MSApp.execUnsafeLocalFunction(function(){return d(m,E,M,B)})}:d}(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(Je=Je||document.createElement("div"),Je.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Je.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function nt(d,m){if(m){var E=d.firstChild;if(E&&E===d.lastChild&&E.nodeType===3){E.nodeValue=m;return}}d.textContent=m}var vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pt=["Webkit","ms","Moz","O"];Object.keys(vt).forEach(function(d){Pt.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),vt[m]=vt[d]})});function cn(d,m,E){return m==null||typeof m=="boolean"||m===""?"":E||typeof m!="number"||m===0||vt.hasOwnProperty(d)&&vt[d]?(""+m).trim():m+"px"}function Ke(d,m){d=d.style;for(var E in m)if(m.hasOwnProperty(E)){var M=E.indexOf("--")===0,B=cn(E,m[E],M);E==="float"&&(E="cssFloat"),M?d.setProperty(E,B):d[E]=B}}var wn=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $t(d,m){if(m){if(wn[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Mt(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=null;function et(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var qe=null,ve=null,yt=null;function rt(d){if(d=Gl(d)){if(typeof qe!="function")throw Error(t(280));var m=d.stateNode;m&&(m=Sg(m),qe(d.stateNode,d.type,m))}}function ze(d){ve?yt?yt.push(d):yt=[d]:ve=d}function ut(){if(ve){var d=ve,m=yt;if(yt=ve=null,rt(d),m)for(d=0;d<m.length;d++)rt(m[d])}}function qt(d,m){return d(m)}function En(){}var Ft=!1;function kt(d,m,E){if(Ft)return d(m,E);Ft=!0;try{return qt(d,m,E)}finally{Ft=!1,(ve!==null||yt!==null)&&(En(),ut())}}function Ut(d,m){var E=d.stateNode;if(E===null)return null;var M=Sg(E);if(M===null)return null;E=M[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(d=d.type,M=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!M;break e;default:d=!1}if(d)return null;if(E&&typeof E!="function")throw Error(t(231,m,typeof E));return E}var at=!1;if(a)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){at=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{at=!1}function Kt(d,m,E,M,B,U,X,ce,xe){var Fe=Array.prototype.slice.call(arguments,3);try{m.apply(E,Fe)}catch(ot){this.onError(ot)}}var rn=!1,Qn=null,on=!1,Gt=null,Ii={onError:function(d){rn=!0,Qn=d}};function ci(d,m,E,M,B,U,X,ce,xe){rn=!1,Qn=null,Kt.apply(Ii,arguments)}function $(d,m,E,M,B,U,X,ce,xe){if(ci.apply(this,arguments),rn){if(rn){var Fe=Qn;rn=!1,Qn=null}else throw Error(t(198));on||(on=!0,Gt=Fe)}}function J(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,m.flags&4098&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function me(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function z(d){if(J(d)!==d)throw Error(t(188))}function se(d){var m=d.alternate;if(!m){if(m=J(d),m===null)throw Error(t(188));return m!==d?null:d}for(var E=d,M=m;;){var B=E.return;if(B===null)break;var U=B.alternate;if(U===null){if(M=B.return,M!==null){E=M;continue}break}if(B.child===U.child){for(U=B.child;U;){if(U===E)return z(B),d;if(U===M)return z(B),m;U=U.sibling}throw Error(t(188))}if(E.return!==M.return)E=B,M=U;else{for(var X=!1,ce=B.child;ce;){if(ce===E){X=!0,E=B,M=U;break}if(ce===M){X=!0,M=B,E=U;break}ce=ce.sibling}if(!X){for(ce=U.child;ce;){if(ce===E){X=!0,E=U,M=B;break}if(ce===M){X=!0,M=U,E=B;break}ce=ce.sibling}if(!X)throw Error(t(189))}}if(E.alternate!==M)throw Error(t(190))}if(E.tag!==3)throw Error(t(188));return E.stateNode.current===E?d:m}function oe(d){return d=se(d),d!==null?fe(d):null}function fe(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=fe(d);if(m!==null)return m;d=d.sibling}return null}var le=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,Oe=e.unstable_shouldYield,Ve=e.unstable_requestPaint,we=e.unstable_now,pt=e.unstable_getCurrentPriorityLevel,Ye=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,Bt=e.unstable_NormalPriority,Qt=e.unstable_LowPriority,zt=e.unstable_IdlePriority,sn=null,Et=null;function xt(d){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(sn,d,void 0,(d.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:ui,un=Math.log,vn=Math.LN2;function ui(d){return d>>>=0,d===0?32:31-(un(d)/vn|0)|0}var wi=64,pi=4194304;function Nn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Pn(d,m){var E=d.pendingLanes;if(E===0)return 0;var M=0,B=d.suspendedLanes,U=d.pingedLanes,X=E&268435455;if(X!==0){var ce=X&~B;ce!==0?M=Nn(ce):(U&=X,U!==0&&(M=Nn(U)))}else X=E&~B,X!==0?M=Nn(X):U!==0&&(M=Nn(U));if(M===0)return 0;if(m!==0&&m!==M&&!(m&B)&&(B=M&-M,U=m&-m,B>=U||B===16&&(U&4194240)!==0))return m;if(M&4&&(M|=E&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=M;0<m;)E=31-mn(m),B=1<<E,M|=d[E],m&=~B;return M}function Hi(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cn(d,m){for(var E=d.suspendedLanes,M=d.pingedLanes,B=d.expirationTimes,U=d.pendingLanes;0<U;){var X=31-mn(U),ce=1<<X,xe=B[X];xe===-1?(!(ce&E)||ce&M)&&(B[X]=Hi(ce,m)):xe<=m&&(d.expiredLanes|=ce),U&=~ce}}function Un(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function mi(){var d=wi;return wi<<=1,!(wi&4194240)&&(wi=64),d}function Gs(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function yr(d,m,E){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-mn(m),d[m]=E}function Wa(d,m){var E=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var M=d.eventTimes;for(d=d.expirationTimes;0<E;){var B=31-mn(E),U=1<<B;m[B]=0,M[B]=-1,d[B]=-1,E&=~U}}function Of(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var M=31-mn(E),B=1<<M;B&m|d[M]&m&&(d[M]|=m),E&=~B}}var ni=0;function Ff(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Rd,ey,pS,zm,$m,xu=!1,Wm=[],ja=null,Bn=null,Ll=null,_u=new Map,Nf=new Map,yc=[],iM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xr(d,m){switch(d){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":_u.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(m.pointerId)}}function Su(d,m,E,M,B,U){return d===null||d.nativeEvent!==U?(d={blockedOn:m,domEventName:E,eventSystemFlags:M,nativeEvent:U,targetContainers:[B]},m!==null&&(m=Gl(m),m!==null&&ey(m)),d):(d.eventSystemFlags|=M,m=d.targetContainers,B!==null&&m.indexOf(B)===-1&&m.push(B),d)}function rM(d,m,E,M,B){switch(m){case"focusin":return ja=Su(ja,d,m,E,M,B),!0;case"dragenter":return Bn=Su(Bn,d,m,E,M,B),!0;case"mouseover":return Ll=Su(Ll,d,m,E,M,B),!0;case"pointerover":var U=B.pointerId;return _u.set(U,Su(_u.get(U)||null,d,m,E,M,B)),!0;case"gotpointercapture":return U=B.pointerId,Nf.set(U,Su(Nf.get(U)||null,d,m,E,M,B)),!0}return!1}function jm(d){var m=wc(d.target);if(m!==null){var E=J(m);if(E!==null){if(m=E.tag,m===13){if(m=me(E),m!==null){d.blockedOn=m,$m(d.priority,function(){pS(E)});return}}else if(m===3&&E.stateNode.current.memoizedState.isDehydrated){d.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Km(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var E=Ho(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(E===null){E=d.nativeEvent;var M=new E.constructor(E.type,E);At=M,E.target.dispatchEvent(M),At=null}else return m=Gl(E),m!==null&&ey(m),d.blockedOn=E,!1;m.shift()}return!0}function Pd(d,m,E){Km(d)&&E.delete(m)}function Ka(){xu=!1,ja!==null&&Km(ja)&&(ja=null),Bn!==null&&Km(Bn)&&(Bn=null),Ll!==null&&Km(Ll)&&(Ll=null),_u.forEach(Pd),Nf.forEach(Pd)}function Id(d,m){d.blockedOn===m&&(d.blockedOn=null,xu||(xu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ka)))}function Ld(d){function m(B){return Id(B,d)}if(0<Wm.length){Id(Wm[0],d);for(var E=1;E<Wm.length;E++){var M=Wm[E];M.blockedOn===d&&(M.blockedOn=null)}}for(ja!==null&&Id(ja,d),Bn!==null&&Id(Bn,d),Ll!==null&&Id(Ll,d),_u.forEach(m),Nf.forEach(m),E=0;E<yc.length;E++)M=yc[E],M.blockedOn===d&&(M.blockedOn=null);for(;0<yc.length&&(E=yc[0],E.blockedOn===null);)jm(E),E.blockedOn===null&&yc.shift()}var Es=b.ReactCurrentBatchConfig,Vo=!0;function Xm(d,m,E,M){var B=ni,U=Es.transition;Es.transition=null;try{ni=1,Ym(d,m,E,M)}finally{ni=B,Es.transition=U}}function ty(d,m,E,M){var B=ni,U=Es.transition;Es.transition=null;try{ni=4,Ym(d,m,E,M)}finally{ni=B,Es.transition=U}}function Ym(d,m,E,M){if(Vo){var B=Ho(d,m,E,M);if(B===null)mg(d,m,M,qm,E),xr(d,M);else if(rM(B,d,m,E,M))M.stopPropagation();else if(xr(d,M),m&4&&-1<iM.indexOf(d)){for(;B!==null;){var U=Gl(B);if(U!==null&&Rd(U),U=Ho(d,m,E,M),U===null&&mg(d,m,M,qm,E),U===B)break;B=U}B!==null&&M.stopPropagation()}else mg(d,m,M,null,E)}}var qm=null;function Ho(d,m,E,M){if(qm=null,d=et(M),d=wc(d),d!==null)if(m=J(d),m===null)d=null;else if(E=m.tag,E===13){if(d=me(m),d!==null)return d;d=null}else if(E===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return qm=d,null}function mS(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pt()){case Ye:return 1;case it:return 4;case Bt:case Qt:return 16;case zt:return 536870912;default:return 16}default:return 16}}var va=null,ny=null,Vs=null;function Dd(){if(Vs)return Vs;var d,m=ny,E=m.length,M,B="value"in va?va.value:va.textContent,U=B.length;for(d=0;d<E&&m[d]===B[d];d++);var X=E-d;for(M=1;M<=X&&m[E-M]===B[U-M];M++);return Vs=B.slice(d,1<M?1-M:void 0)}function Eu(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function Dl(){return!0}function Jm(){return!1}function As(d){function m(E,M,B,U,X){this._reactName=E,this._targetInst=B,this.type=M,this.nativeEvent=U,this.target=X,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(E=d[ce],this[ce]=E?E(U):U[ce]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Dl:Jm,this.isPropagationStopped=Jm,this}return F(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),m}var Au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=As(Au),Tu=F({},Au,{view:0,detail:0}),Uf=As(Tu),Hs,zo,$o,Gf=F({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_c,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==$o&&($o&&d.type==="mousemove"?(Hs=d.screenX-$o.screenX,zo=d.screenY-$o.screenY):zo=Hs=0,$o=d),Hs)},movementY:function(d){return"movementY"in d?d.movementY:zo}}),iy=As(Gf),Bl=F({},Gf,{dataTransfer:0}),xc=As(Bl),Qm=F({},Tu,{relatedTarget:0}),Zm=As(Qm),eg=F({},Au,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=As(eg),vS=F({},Au,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),ry=As(vS),tg=F({},Au,{data:0}),sy=As(tg),yS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vf(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=oy[d])?!!m[d]:!1}function _c(){return Vf}var ng=F({},Tu,{key:function(d){if(d.key){var m=yS[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=Eu(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?xS[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_c,charCode:function(d){return d.type==="keypress"?Eu(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Eu(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),ig=As(ng),Wo=F({},Gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),po=As(Wo),wu=F({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_c}),kl=As(wu),Ol=F({},Au,{propertyName:0,elapsedTime:0,pseudoElement:0}),bu=As(Ol),_S=F({},Gf,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),ay=As(_S),ly=[9,13,27,32],Ts=a&&"CompositionEvent"in window,Kr=null;a&&"documentMode"in document&&(Kr=document.documentMode);var Li=a&&"TextEvent"in window&&!Kr,Hf=a&&(!Ts||Kr&&8<Kr&&11>=Kr),jo=" ",cy=!1;function uy(d,m){switch(d){case"keyup":return ly.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Sc=!1;function SS(d,m){switch(d){case"compositionend":return rg(m);case"keypress":return m.which!==32?null:(cy=!0,jo);case"textInput":return d=m.data,d===jo&&cy?null:d;default:return null}}function kd(d,m){if(Sc)return d==="compositionend"||!Ts&&uy(d,m)?(d=Dd(),Vs=ny=va=null,Sc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Hf&&m.locale!=="ko"?null:m.data;default:return null}}var zf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!zf[d.type]:m==="textarea"}function $f(d,m,E,M){ze(M),m=gg(m,"onChange"),0<m.length&&(E=new Bd("onChange","change",null,E,M),d.push({event:E,listeners:m}))}var Ec=null,Wf=null;function ES(d){Yf(d,0)}function Fl(d){var m=Ji(d);if(ue(m))return d}function AS(d,m){if(d==="change")return m}var jf=!1;if(a){var zs;if(a){var Mu="oninput"in document;if(!Mu){var Cu=document.createElement("div");Cu.setAttribute("oninput","return;"),Mu=typeof Cu.oninput=="function"}zs=Mu}else zs=!1;jf=zs&&(!document.documentMode||9<document.documentMode)}function ya(){Ec&&(Ec.detachEvent("onpropertychange",og),Wf=Ec=null)}function og(d){if(d.propertyName==="value"&&Fl(Wf)){var m=[];$f(m,Wf,d,et(d)),kt(ES,m)}}function Kf(d,m,E){d==="focusin"?(ya(),Ec=m,Wf=E,Ec.attachEvent("onpropertychange",og)):d==="focusout"&&ya()}function TS(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Fl(Wf)}function fy(d,m){if(d==="click")return Fl(m)}function zi(d,m){if(d==="input"||d==="change")return Fl(m)}function ag(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var mo=typeof Object.is=="function"?Object.is:ag;function Ru(d,m){if(mo(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),M=Object.keys(m);if(E.length!==M.length)return!1;for(M=0;M<E.length;M++){var B=E[M];if(!l.call(m,B)||!mo(d[B],m[B]))return!1}return!0}function Od(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function go(d,m){var E=Od(d);d=0;for(var M;E;){if(E.nodeType===3){if(M=d+E.textContent.length,d<=m&&M>=m)return{node:E,offset:m-d};d=M}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Od(E)}}function Pu(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?Pu(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function $i(){for(var d=window,m=Ne();m instanceof d.HTMLIFrameElement;){try{var E=typeof m.contentWindow.location.href=="string"}catch{E=!1}if(E)d=m.contentWindow;else break;m=Ne(d.document)}return m}function Pr(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function Ir(d){var m=$i(),E=d.focusedElem,M=d.selectionRange;if(m!==E&&E&&E.ownerDocument&&Pu(E.ownerDocument.documentElement,E)){if(M!==null&&Pr(E)){if(m=M.start,d=M.end,d===void 0&&(d=m),"selectionStart"in E)E.selectionStart=m,E.selectionEnd=Math.min(d,E.value.length);else if(d=(m=E.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var B=E.textContent.length,U=Math.min(M.start,B);M=M.end===void 0?U:Math.min(M.end,B),!d.extend&&U>M&&(B=M,M=U,U=B),B=go(E,U);var X=go(E,M);B&&X&&(d.rangeCount!==1||d.anchorNode!==B.node||d.anchorOffset!==B.offset||d.focusNode!==X.node||d.focusOffset!==X.offset)&&(m=m.createRange(),m.setStart(B.node,B.offset),d.removeAllRanges(),U>M?(d.addRange(m),d.extend(X.node,X.offset)):(m.setEnd(X.node,X.offset),d.addRange(m)))}}for(m=[],d=E;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<m.length;E++)d=m[E],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var lg=a&&"documentMode"in document&&11>=document.documentMode,Xa=null,Iu=null,Fd=null,Lr=!1;function cg(d,m,E){var M=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Lr||Xa==null||Xa!==Ne(M)||(M=Xa,"selectionStart"in M&&Pr(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Fd&&Ru(Fd,M)||(Fd=M,M=gg(Iu,"onSelect"),0<M.length&&(m=new Bd("onSelect","select",null,m,E),d.push({event:m,listeners:M}),m.target=Xa)))}function Xf(d,m){var E={};return E[d.toLowerCase()]=m.toLowerCase(),E["Webkit"+d]="webkit"+m,E["Moz"+d]="moz"+m,E}var Ac={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},xa={},_a={};a&&(_a=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function Ya(d){if(xa[d])return xa[d];if(!Ac[d])return d;var m=Ac[d],E;for(E in m)if(m.hasOwnProperty(E)&&E in _a)return xa[d]=m[E];return d}var Nd=Ya("animationend"),Ud=Ya("animationiteration"),hy=Ya("animationstart"),dy=Ya("transitionend"),py=new Map,my="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(d,m){py.set(d,m),s(m,[d])}for(var ug=0;ug<my.length;ug++){var Gd=my[ug],Vd=Gd.toLowerCase(),wS=Gd[0].toUpperCase()+Gd.slice(1);Nl(Vd,"on"+wS)}Nl(Nd,"onAnimationEnd"),Nl(Ud,"onAnimationIteration"),Nl(hy,"onAnimationStart"),Nl("dblclick","onDoubleClick"),Nl("focusin","onFocus"),Nl("focusout","onBlur"),Nl(dy,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function hg(d,m,E){var M=d.type||"unknown-event";d.currentTarget=E,$(M,m,void 0,d),d.currentTarget=null}function Yf(d,m){m=(m&4)!==0;for(var E=0;E<d.length;E++){var M=d[E],B=M.event;M=M.listeners;e:{var U=void 0;if(m)for(var X=M.length-1;0<=X;X--){var ce=M[X],xe=ce.instance,Fe=ce.currentTarget;if(ce=ce.listener,xe!==U&&B.isPropagationStopped())break e;hg(B,ce,Fe),U=xe}else for(X=0;X<M.length;X++){if(ce=M[X],xe=ce.instance,Fe=ce.currentTarget,ce=ce.listener,xe!==U&&B.isPropagationStopped())break e;hg(B,ce,Fe),U=xe}}}if(on)throw d=Gt,on=!1,Gt=null,d}function _i(d,m){var E=m[Bu];E===void 0&&(E=m[Bu]=new Set);var M=d+"__bubble";E.has(M)||(pg(m,d,2,!1),E.add(M))}function dg(d,m,E){var M=0;m&&(M|=4),pg(E,d,M,m)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function qf(d){if(!d[Hd]){d[Hd]=!0,i.forEach(function(E){E!=="selectionchange"&&(fg.has(E)||dg(E,!1,d),dg(E,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[Hd]||(m[Hd]=!0,dg("selectionchange",!1,m))}}function pg(d,m,E,M){switch(mS(m)){case 1:var B=Xm;break;case 4:B=ty;break;default:B=Ym}E=B.bind(null,m,E,d),B=void 0,!at||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(B=!0),M?B!==void 0?d.addEventListener(m,E,{capture:!0,passive:B}):d.addEventListener(m,E,!0):B!==void 0?d.addEventListener(m,E,{passive:B}):d.addEventListener(m,E,!1)}function mg(d,m,E,M,B){var U=M;if(!(m&1)&&!(m&2)&&M!==null)e:for(;;){if(M===null)return;var X=M.tag;if(X===3||X===4){var ce=M.stateNode.containerInfo;if(ce===B||ce.nodeType===8&&ce.parentNode===B)break;if(X===4)for(X=M.return;X!==null;){var xe=X.tag;if((xe===3||xe===4)&&(xe=X.stateNode.containerInfo,xe===B||xe.nodeType===8&&xe.parentNode===B))return;X=X.return}for(;ce!==null;){if(X=wc(ce),X===null)return;if(xe=X.tag,xe===5||xe===6){M=U=X;continue e}ce=ce.parentNode}}M=M.return}kt(function(){var Fe=U,ot=et(E),ct=[];e:{var st=py.get(d);if(st!==void 0){var Nt=Bd,Zt=d;switch(d){case"keypress":if(Eu(E)===0)break e;case"keydown":case"keyup":Nt=ig;break;case"focusin":Zt="focus",Nt=Zm;break;case"focusout":Zt="blur",Nt=Zm;break;case"beforeblur":case"afterblur":Nt=Zm;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=kl;break;case Nd:case Ud:case hy:Nt=gS;break;case dy:Nt=bu;break;case"scroll":Nt=Uf;break;case"wheel":Nt=ay;break;case"copy":case"cut":case"paste":Nt=ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=po}var tn=(m&4)!==0,Er=!tn&&d==="scroll",Re=tn?st!==null?st+"Capture":null:st;tn=[];for(var Se=Fe,Ie;Se!==null;){Ie=Se;var _t=Ie.stateNode;if(Ie.tag===5&&_t!==null&&(Ie=_t,Re!==null&&(_t=Ut(Se,Re),_t!=null&&tn.push(Jf(Se,_t,Ie)))),Er)break;Se=Se.return}0<tn.length&&(st=new Nt(st,Zt,null,E,ot),ct.push({event:st,listeners:tn}))}}if(!(m&7)){e:{if(st=d==="mouseover"||d==="pointerover",Nt=d==="mouseout"||d==="pointerout",st&&E!==At&&(Zt=E.relatedTarget||E.fromElement)&&(wc(Zt)||Zt[vo]))break e;if((Nt||st)&&(st=ot.window===ot?ot:(st=ot.ownerDocument)?st.defaultView||st.parentWindow:window,Nt?(Zt=E.relatedTarget||E.toElement,Nt=Fe,Zt=Zt?wc(Zt):null,Zt!==null&&(Er=J(Zt),Zt!==Er||Zt.tag!==5&&Zt.tag!==6)&&(Zt=null)):(Nt=null,Zt=Fe),Nt!==Zt)){if(tn=iy,_t="onMouseLeave",Re="onMouseEnter",Se="mouse",(d==="pointerout"||d==="pointerover")&&(tn=po,_t="onPointerLeave",Re="onPointerEnter",Se="pointer"),Er=Nt==null?st:Ji(Nt),Ie=Zt==null?st:Ji(Zt),st=new tn(_t,Se+"leave",Nt,E,ot),st.target=Er,st.relatedTarget=Ie,_t=null,wc(ot)===Fe&&(tn=new tn(Re,Se+"enter",Zt,E,ot),tn.target=Ie,tn.relatedTarget=Er,_t=tn),Er=_t,Nt&&Zt)t:{for(tn=Nt,Re=Zt,Se=0,Ie=tn;Ie;Ie=Lu(Ie))Se++;for(Ie=0,_t=Re;_t;_t=Lu(_t))Ie++;for(;0<Se-Ie;)tn=Lu(tn),Se--;for(;0<Ie-Se;)Re=Lu(Re),Ie--;for(;Se--;){if(tn===Re||Re!==null&&tn===Re.alternate)break t;tn=Lu(tn),Re=Lu(Re)}tn=null}else tn=null;Nt!==null&&bS(ct,st,Nt,tn,!1),Zt!==null&&Er!==null&&bS(ct,Er,Zt,tn,!0)}}e:{if(st=Fe?Ji(Fe):window,Nt=st.nodeName&&st.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&st.type==="file")var nn=AS;else if(sg(st))if(jf)nn=zi;else{nn=TS;var fn=Kf}else(Nt=st.nodeName)&&Nt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(nn=fy);if(nn&&(nn=nn(d,Fe))){$f(ct,nn,E,ot);break e}fn&&fn(d,st,Fe),d==="focusout"&&(fn=st._wrapperState)&&fn.controlled&&st.type==="number"&&dt(st,"number",st.value)}switch(fn=Fe?Ji(Fe):window,d){case"focusin":(sg(fn)||fn.contentEditable==="true")&&(Xa=fn,Iu=Fe,Fd=null);break;case"focusout":Fd=Iu=Xa=null;break;case"mousedown":Lr=!0;break;case"contextmenu":case"mouseup":case"dragend":Lr=!1,cg(ct,E,ot);break;case"selectionchange":if(lg)break;case"keydown":case"keyup":cg(ct,E,ot)}var hn;if(Ts)e:{switch(d){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else Sc?uy(d,E)&&(Tn="onCompositionEnd"):d==="keydown"&&E.keyCode===229&&(Tn="onCompositionStart");Tn&&(Hf&&E.locale!=="ko"&&(Sc||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&Sc&&(hn=Dd()):(va=ot,ny="value"in va?va.value:va.textContent,Sc=!0)),fn=gg(Fe,Tn),0<fn.length&&(Tn=new sy(Tn,d,null,E,ot),ct.push({event:Tn,listeners:fn}),hn?Tn.data=hn:(hn=rg(E),hn!==null&&(Tn.data=hn)))),(hn=Li?SS(d,E):kd(d,E))&&(Fe=gg(Fe,"onBeforeInput"),0<Fe.length&&(ot=new sy("onBeforeInput","beforeinput",null,E,ot),ct.push({event:ot,listeners:Fe}),ot.data=hn))}Yf(ct,m)})}function Jf(d,m,E){return{instance:d,listener:m,currentTarget:E}}function gg(d,m){for(var E=m+"Capture",M=[];d!==null;){var B=d,U=B.stateNode;B.tag===5&&U!==null&&(B=U,U=Ut(d,E),U!=null&&M.unshift(Jf(d,U,B)),U=Ut(d,m),U!=null&&M.push(Jf(d,U,B))),d=d.return}return M}function Lu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function bS(d,m,E,M,B){for(var U=m._reactName,X=[];E!==null&&E!==M;){var ce=E,xe=ce.alternate,Fe=ce.stateNode;if(xe!==null&&xe===M)break;ce.tag===5&&Fe!==null&&(ce=Fe,B?(xe=Ut(E,U),xe!=null&&X.unshift(Jf(E,xe,ce))):B||(xe=Ut(E,U),xe!=null&&X.push(Jf(E,xe,ce)))),E=E.return}X.length!==0&&d.push({event:m,listeners:X})}var sM=/\r\n?/g,MS=/\u0000|\uFFFD/g;function gy(d){return(typeof d=="string"?d:""+d).replace(sM,`
`).replace(MS,"")}function zd(d,m,E){if(m=gy(m),gy(d)!==m&&E)throw Error(t(425))}function $d(){}var Qf=null,vy=null;function yy(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var xy=typeof setTimeout=="function"?setTimeout:void 0,_y=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,oM=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(d){return vg.resolve(null).then(d).catch(CS)}:xy;function CS(d){setTimeout(function(){throw d})}function yg(d,m){var E=m,M=0;do{var B=E.nextSibling;if(d.removeChild(E),B&&B.nodeType===8)if(E=B.data,E==="/$"){if(M===0){d.removeChild(B),Ld(m);return}M--}else E!=="$"&&E!=="$?"&&E!=="$!"||M++;E=B}while(E);Ld(m)}function Ul(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function Sy(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="$"||E==="$!"||E==="$?"){if(m===0)return d;m--}else E==="/$"&&m++}d=d.previousSibling}return null}var Du=Math.random().toString(36).slice(2),_r="__reactFiber$"+Du,Zf="__reactProps$"+Du,vo="__reactContainer$"+Du,Bu="__reactEvents$"+Du,xg="__reactListeners$"+Du,_g="__reactHandles$"+Du;function wc(d){var m=d[_r];if(m)return m;for(var E=d.parentNode;E;){if(m=E[vo]||E[_r]){if(E=m.alternate,m.child!==null||E!==null&&E.child!==null)for(d=Sy(d);d!==null;){if(E=d[_r])return E;d=Sy(d)}return m}d=E,E=d.parentNode}return null}function Gl(d){return d=d[_r]||d[vo],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ji(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Sg(d){return d[Zf]||null}var Ey=[],Dr=-1;function Ki(d){return{current:d}}function Si(d){0>Dr||(d.current=Ey[Dr],Ey[Dr]=null,Dr--)}function gi(d,m){Dr++,Ey[Dr]=d.current,d.current=m}var Vl={},Xr=Ki(Vl),ws=Ki(!1),Hl=Vl;function ku(d,m){var E=d.type.contextTypes;if(!E)return Vl;var M=d.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===m)return M.__reactInternalMemoizedMaskedChildContext;var B={},U;for(U in E)B[U]=m[U];return M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=B),B}function ls(d){return d=d.childContextTypes,d!=null}function Wd(){Si(ws),Si(Xr)}function Ay(d,m,E){if(Xr.current!==Vl)throw Error(t(168));gi(Xr,m),gi(ws,E)}function jd(d,m,E){var M=d.stateNode;if(m=m.childContextTypes,typeof M.getChildContext!="function")return E;M=M.getChildContext();for(var B in M)if(!(B in m))throw Error(t(108,Le(d)||"Unknown",B));return F({},E,M)}function Ou(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Vl,Hl=Xr.current,gi(Xr,d),gi(ws,ws.current),!0}function Ty(d,m,E){var M=d.stateNode;if(!M)throw Error(t(169));E?(d=jd(d,m,Hl),M.__reactInternalMemoizedMergedChildContext=d,Si(ws),Si(Xr),gi(Xr,d)):Si(ws),gi(ws,E)}var Sa=null,Kd=!1,Eg=!1;function Xd(d){Sa===null?Sa=[d]:Sa.push(d)}function RS(d){Kd=!0,Xd(d)}function qa(){if(!Eg&&Sa!==null){Eg=!0;var d=0,m=ni;try{var E=Sa;for(ni=1;d<E.length;d++){var M=E[d];do M=M(!0);while(M!==null)}Sa=null,Kd=!1}catch(B){throw Sa!==null&&(Sa=Sa.slice(d+1)),le(Ye,qa),B}finally{ni=m,Eg=!1}}return null}var Fu=[],$s=0,Ag=null,Tg=0,bs=[],Br=0,Nu=null,Tt=1,Ko="";function zl(d,m){Fu[$s++]=Tg,Fu[$s++]=Ag,Ag=d,Tg=m}function wy(d,m,E){bs[Br++]=Tt,bs[Br++]=Ko,bs[Br++]=Nu,Nu=d;var M=Tt;d=Ko;var B=32-mn(M)-1;M&=~(1<<B),E+=1;var U=32-mn(m)+B;if(30<U){var X=B-B%5;U=(M&(1<<X)-1).toString(32),M>>=X,B-=X,Tt=1<<32-mn(m)+B|E<<B|M,Ko=U+d}else Tt=1<<U|E<<B|M,Ko=d}function by(d){d.return!==null&&(zl(d,1),wy(d,1,0))}function $l(d){for(;d===Ag;)Ag=Fu[--$s],Fu[$s]=null,Tg=Fu[--$s],Fu[$s]=null;for(;d===Nu;)Nu=bs[--Br],bs[Br]=null,Ko=bs[--Br],bs[Br]=null,Tt=bs[--Br],bs[Br]=null}var Yr=null,Ms=null,bi=!1,Xo=null;function My(d,m){var E=nl(5,null,null,0);E.elementType="DELETED",E.stateNode=m,E.return=d,m=d.deletions,m===null?(d.deletions=[E],d.flags|=16):m.push(E)}function Cy(d,m){switch(d.tag){case 5:var E=d.type;return m=m.nodeType!==1||E.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Yr=d,Ms=Ul(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Yr=d,Ms=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(E=Nu!==null?{id:Tt,overflow:Ko}:null,d.memoizedState={dehydrated:m,treeContext:E,retryLane:1073741824},E=nl(18,null,null,0),E.stateNode=m,E.return=d,d.child=E,Yr=d,Ms=null,!0):!1;default:return!1}}function wg(d){return(d.mode&1)!==0&&(d.flags&128)===0}function bg(d){if(bi){var m=Ms;if(m){var E=m;if(!Cy(d,m)){if(wg(d))throw Error(t(418));m=Ul(E.nextSibling);var M=Yr;m&&Cy(d,m)?My(M,E):(d.flags=d.flags&-4097|2,bi=!1,Yr=d)}}else{if(wg(d))throw Error(t(418));d.flags=d.flags&-4097|2,bi=!1,Yr=d}}}function Mg(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Yr=d}function eh(d){if(d!==Yr)return!1;if(!bi)return Mg(d),bi=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!yy(d.type,d.memoizedProps)),m&&(m=Ms)){if(wg(d))throw Ry(),Error(t(418));for(;m;)My(d,m),m=Ul(m.nextSibling)}if(Mg(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="/$"){if(m===0){Ms=Ul(d.nextSibling);break e}m--}else E!=="$"&&E!=="$!"&&E!=="$?"||m++}d=d.nextSibling}Ms=null}}else Ms=Yr?Ul(d.stateNode.nextSibling):null;return!0}function Ry(){for(var d=Ms;d;)d=Ul(d.nextSibling)}function bc(){Ms=Yr=null,bi=!1}function th(d){Xo===null?Xo=[d]:Xo.push(d)}var aM=b.ReactCurrentBatchConfig;function Ea(d,m){if(d&&d.defaultProps){m=F({},m),d=d.defaultProps;for(var E in d)m[E]===void 0&&(m[E]=d[E]);return m}return m}var Yd=Ki(null),qd=null,Uu=null,Cg=null;function nh(){Cg=Uu=qd=null}function ih(d){var m=Yd.current;Si(Yd),d._currentValue=m}function rh(d,m,E){for(;d!==null;){var M=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,M!==null&&(M.childLanes|=m)):M!==null&&(M.childLanes&m)!==m&&(M.childLanes|=m),d===E)break;d=d.return}}function Wl(d,m){qd=d,Cg=Uu=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&m&&(Ot=!0),d.firstContext=null)}function Cs(d){var m=d._currentValue;if(Cg!==d)if(d={context:d,memoizedValue:m,next:null},Uu===null){if(qd===null)throw Error(t(308));Uu=d,qd.dependencies={lanes:0,firstContext:d}}else Uu=Uu.next=d;return m}var Aa=null;function Jd(d){Aa===null?Aa=[d]:Aa.push(d)}function Rg(d,m,E,M){var B=m.interleaved;return B===null?(E.next=E,Jd(m)):(E.next=B.next,B.next=E),m.interleaved=E,Ta(d,M)}function Ta(d,m){d.lanes|=m;var E=d.alternate;for(E!==null&&(E.lanes|=m),E=d,d=d.return;d!==null;)d.childLanes|=m,E=d.alternate,E!==null&&(E.childLanes|=m),E=d,d=d.return;return E.tag===3?E.stateNode:null}var jl=!1;function Qd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PS(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Yo(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function Ja(d,m,E){var M=d.updateQueue;if(M===null)return null;if(M=M.shared,si&2){var B=M.pending;return B===null?m.next=m:(m.next=B.next,B.next=m),M.pending=m,Ta(d,E)}return B=M.interleaved,B===null?(m.next=m,Jd(M)):(m.next=B.next,B.next=m),M.interleaved=m,Ta(d,E)}function Di(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194240)!==0)){var M=m.lanes;M&=d.pendingLanes,E|=M,m.lanes=E,Of(d,E)}}function Dn(d,m){var E=d.updateQueue,M=d.alternate;if(M!==null&&(M=M.updateQueue,E===M)){var B=null,U=null;if(E=E.firstBaseUpdate,E!==null){do{var X={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};U===null?B=U=X:U=U.next=X,E=E.next}while(E!==null);U===null?B=U=m:U=U.next=m}else B=U=m;E={baseState:M.baseState,firstBaseUpdate:B,lastBaseUpdate:U,shared:M.shared,effects:M.effects},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}function Wi(d,m,E,M){var B=d.updateQueue;jl=!1;var U=B.firstBaseUpdate,X=B.lastBaseUpdate,ce=B.shared.pending;if(ce!==null){B.shared.pending=null;var xe=ce,Fe=xe.next;xe.next=null,X===null?U=Fe:X.next=Fe,X=xe;var ot=d.alternate;ot!==null&&(ot=ot.updateQueue,ce=ot.lastBaseUpdate,ce!==X&&(ce===null?ot.firstBaseUpdate=Fe:ce.next=Fe,ot.lastBaseUpdate=xe))}if(U!==null){var ct=B.baseState;X=0,ot=Fe=xe=null,ce=U;do{var st=ce.lane,Nt=ce.eventTime;if((M&st)===st){ot!==null&&(ot=ot.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Zt=d,tn=ce;switch(st=m,Nt=E,tn.tag){case 1:if(Zt=tn.payload,typeof Zt=="function"){ct=Zt.call(Nt,ct,st);break e}ct=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=tn.payload,st=typeof Zt=="function"?Zt.call(Nt,ct,st):Zt,st==null)break e;ct=F({},ct,st);break e;case 2:jl=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,st=B.effects,st===null?B.effects=[ce]:st.push(ce))}else Nt={eventTime:Nt,lane:st,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ot===null?(Fe=ot=Nt,xe=ct):ot=ot.next=Nt,X|=st;if(ce=ce.next,ce===null){if(ce=B.shared.pending,ce===null)break;st=ce,ce=st.next,st.next=null,B.lastBaseUpdate=st,B.shared.pending=null}}while(!0);if(ot===null&&(xe=ct),B.baseState=xe,B.firstBaseUpdate=Fe,B.lastBaseUpdate=ot,m=B.shared.interleaved,m!==null){B=m;do X|=B.lane,B=B.next;while(B!==m)}else U===null&&(B.shared.lanes=0);sp|=X,d.lanes=X,d.memoizedState=ct}}function Qi(d,m,E){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var M=d[m],B=M.callback;if(B!==null){if(M.callback=null,M=E,typeof B!="function")throw Error(t(191,B));B.call(M)}}}var kr=new n.Component().refs;function Rs(d,m,E,M){m=d.memoizedState,E=E(M,m),E=E==null?m:F({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var Kl={isMounted:function(d){return(d=d._reactInternals)?J(d)===d:!1},enqueueSetState:function(d,m,E){d=d._reactInternals;var M=So(),B=mh(d),U=Yo(M,B);U.payload=m,E!=null&&(U.callback=E),m=Ja(d,U,B),m!==null&&(Jl(m,d,B,M),Di(m,d,B))},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var M=So(),B=mh(d),U=Yo(M,B);U.tag=1,U.payload=m,E!=null&&(U.callback=E),m=Ja(d,U,B),m!==null&&(Jl(m,d,B,M),Di(m,d,B))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=So(),M=mh(d),B=Yo(E,M);B.tag=2,m!=null&&(B.callback=m),m=Ja(d,B,M),m!==null&&(Jl(m,d,M,E),Di(m,d,M))}};function lr(d,m,E,M,B,U,X){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(M,U,X):m.prototype&&m.prototype.isPureReactComponent?!Ru(E,M)||!Ru(B,U):!0}function sh(d,m,E){var M=!1,B=Vl,U=m.contextType;return typeof U=="object"&&U!==null?U=Cs(U):(B=ls(m)?Hl:Xr.current,M=m.contextTypes,U=(M=M!=null)?ku(d,B):Vl),m=new m(E,U),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Kl,d.stateNode=m,m._reactInternals=d,M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=B,d.__reactInternalMemoizedMaskedChildContext=U),m}function Gu(d,m,E,M){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,M),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,M),m.state!==d&&Kl.enqueueReplaceState(m,m.state,null)}function oh(d,m,E,M){var B=d.stateNode;B.props=E,B.state=d.memoizedState,B.refs=kr,Qd(d);var U=m.contextType;typeof U=="object"&&U!==null?B.context=Cs(U):(U=ls(m)?Hl:Xr.current,B.context=ku(d,U)),B.state=d.memoizedState,U=m.getDerivedStateFromProps,typeof U=="function"&&(Rs(d,m,U,E),B.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(m=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),m!==B.state&&Kl.enqueueReplaceState(B,B.state,null),Wi(d,E,B,M),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308)}function Vu(d,m,E){if(d=E.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(t(309));var M=E.stateNode}if(!M)throw Error(t(147,d));var B=M,U=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===U?m.ref:(m=function(X){var ce=B.refs;ce===kr&&(ce=B.refs={}),X===null?delete ce[U]:ce[U]=X},m._stringRef=U,m)}if(typeof d!="string")throw Error(t(284));if(!E._owner)throw Error(t(290,d))}return d}function Mc(d,m){throw d=Object.prototype.toString.call(m),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function Ps(d){var m=d._init;return m(d._payload)}function Pg(d){function m(Re,Se){if(d){var Ie=Re.deletions;Ie===null?(Re.deletions=[Se],Re.flags|=16):Ie.push(Se)}}function E(Re,Se){if(!d)return null;for(;Se!==null;)m(Re,Se),Se=Se.sibling;return null}function M(Re,Se){for(Re=new Map;Se!==null;)Se.key!==null?Re.set(Se.key,Se):Re.set(Se.index,Se),Se=Se.sibling;return Re}function B(Re,Se){return Re=vh(Re,Se),Re.index=0,Re.sibling=null,Re}function U(Re,Se,Ie){return Re.index=Ie,d?(Ie=Re.alternate,Ie!==null?(Ie=Ie.index,Ie<Se?(Re.flags|=2,Se):Ie):(Re.flags|=2,Se)):(Re.flags|=1048576,Se)}function X(Re){return d&&Re.alternate===null&&(Re.flags|=2),Re}function ce(Re,Se,Ie,_t){return Se===null||Se.tag!==6?(Se=bM(Ie,Re.mode,_t),Se.return=Re,Se):(Se=B(Se,Ie),Se.return=Re,Se)}function xe(Re,Se,Ie,_t){var nn=Ie.type;return nn===P?ot(Re,Se,Ie.props.children,_t,Ie.key):Se!==null&&(Se.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===ee&&Ps(nn)===Se.type)?(_t=B(Se,Ie.props),_t.ref=Vu(Re,Se,Ie),_t.return=Re,_t):(_t=eE(Ie.type,Ie.key,Ie.props,null,Re.mode,_t),_t.ref=Vu(Re,Se,Ie),_t.return=Re,_t)}function Fe(Re,Se,Ie,_t){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ie.containerInfo||Se.stateNode.implementation!==Ie.implementation?(Se=MM(Ie,Re.mode,_t),Se.return=Re,Se):(Se=B(Se,Ie.children||[]),Se.return=Re,Se)}function ot(Re,Se,Ie,_t,nn){return Se===null||Se.tag!==7?(Se=cp(Ie,Re.mode,_t,nn),Se.return=Re,Se):(Se=B(Se,Ie),Se.return=Re,Se)}function ct(Re,Se,Ie){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=bM(""+Se,Re.mode,Ie),Se.return=Re,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:return Ie=eE(Se.type,Se.key,Se.props,null,Re.mode,Ie),Ie.ref=Vu(Re,null,Se),Ie.return=Re,Ie;case L:return Se=MM(Se,Re.mode,Ie),Se.return=Re,Se;case ee:var _t=Se._init;return ct(Re,_t(Se._payload),Ie)}if(Rt(Se)||Q(Se))return Se=cp(Se,Re.mode,Ie,null),Se.return=Re,Se;Mc(Re,Se)}return null}function st(Re,Se,Ie,_t){var nn=Se!==null?Se.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return nn!==null?null:ce(Re,Se,""+Ie,_t);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ie.key===nn?xe(Re,Se,Ie,_t):null;case L:return Ie.key===nn?Fe(Re,Se,Ie,_t):null;case ee:return nn=Ie._init,st(Re,Se,nn(Ie._payload),_t)}if(Rt(Ie)||Q(Ie))return nn!==null?null:ot(Re,Se,Ie,_t,null);Mc(Re,Ie)}return null}function Nt(Re,Se,Ie,_t,nn){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return Re=Re.get(Ie)||null,ce(Se,Re,""+_t,nn);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case C:return Re=Re.get(_t.key===null?Ie:_t.key)||null,xe(Se,Re,_t,nn);case L:return Re=Re.get(_t.key===null?Ie:_t.key)||null,Fe(Se,Re,_t,nn);case ee:var fn=_t._init;return Nt(Re,Se,Ie,fn(_t._payload),nn)}if(Rt(_t)||Q(_t))return Re=Re.get(Ie)||null,ot(Se,Re,_t,nn,null);Mc(Se,_t)}return null}function Zt(Re,Se,Ie,_t){for(var nn=null,fn=null,hn=Se,Tn=Se=0,fs=null;hn!==null&&Tn<Ie.length;Tn++){hn.index>Tn?(fs=hn,hn=null):fs=hn.sibling;var li=st(Re,hn,Ie[Tn],_t);if(li===null){hn===null&&(hn=fs);break}d&&hn&&li.alternate===null&&m(Re,hn),Se=U(li,Se,Tn),fn===null?nn=li:fn.sibling=li,fn=li,hn=fs}if(Tn===Ie.length)return E(Re,hn),bi&&zl(Re,Tn),nn;if(hn===null){for(;Tn<Ie.length;Tn++)hn=ct(Re,Ie[Tn],_t),hn!==null&&(Se=U(hn,Se,Tn),fn===null?nn=hn:fn.sibling=hn,fn=hn);return bi&&zl(Re,Tn),nn}for(hn=M(Re,hn);Tn<Ie.length;Tn++)fs=Nt(hn,Re,Tn,Ie[Tn],_t),fs!==null&&(d&&fs.alternate!==null&&hn.delete(fs.key===null?Tn:fs.key),Se=U(fs,Se,Tn),fn===null?nn=fs:fn.sibling=fs,fn=fs);return d&&hn.forEach(function(yh){return m(Re,yh)}),bi&&zl(Re,Tn),nn}function tn(Re,Se,Ie,_t){var nn=Q(Ie);if(typeof nn!="function")throw Error(t(150));if(Ie=nn.call(Ie),Ie==null)throw Error(t(151));for(var fn=nn=null,hn=Se,Tn=Se=0,fs=null,li=Ie.next();hn!==null&&!li.done;Tn++,li=Ie.next()){hn.index>Tn?(fs=hn,hn=null):fs=hn.sibling;var yh=st(Re,hn,li.value,_t);if(yh===null){hn===null&&(hn=fs);break}d&&hn&&yh.alternate===null&&m(Re,hn),Se=U(yh,Se,Tn),fn===null?nn=yh:fn.sibling=yh,fn=yh,hn=fs}if(li.done)return E(Re,hn),bi&&zl(Re,Tn),nn;if(hn===null){for(;!li.done;Tn++,li=Ie.next())li=ct(Re,li.value,_t),li!==null&&(Se=U(li,Se,Tn),fn===null?nn=li:fn.sibling=li,fn=li);return bi&&zl(Re,Tn),nn}for(hn=M(Re,hn);!li.done;Tn++,li=Ie.next())li=Nt(hn,Re,Tn,li.value,_t),li!==null&&(d&&li.alternate!==null&&hn.delete(li.key===null?Tn:li.key),Se=U(li,Se,Tn),fn===null?nn=li:fn.sibling=li,fn=li);return d&&hn.forEach(function(mJ){return m(Re,mJ)}),bi&&zl(Re,Tn),nn}function Er(Re,Se,Ie,_t){if(typeof Ie=="object"&&Ie!==null&&Ie.type===P&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:e:{for(var nn=Ie.key,fn=Se;fn!==null;){if(fn.key===nn){if(nn=Ie.type,nn===P){if(fn.tag===7){E(Re,fn.sibling),Se=B(fn,Ie.props.children),Se.return=Re,Re=Se;break e}}else if(fn.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===ee&&Ps(nn)===fn.type){E(Re,fn.sibling),Se=B(fn,Ie.props),Se.ref=Vu(Re,fn,Ie),Se.return=Re,Re=Se;break e}E(Re,fn);break}else m(Re,fn);fn=fn.sibling}Ie.type===P?(Se=cp(Ie.props.children,Re.mode,_t,Ie.key),Se.return=Re,Re=Se):(_t=eE(Ie.type,Ie.key,Ie.props,null,Re.mode,_t),_t.ref=Vu(Re,Se,Ie),_t.return=Re,Re=_t)}return X(Re);case L:e:{for(fn=Ie.key;Se!==null;){if(Se.key===fn)if(Se.tag===4&&Se.stateNode.containerInfo===Ie.containerInfo&&Se.stateNode.implementation===Ie.implementation){E(Re,Se.sibling),Se=B(Se,Ie.children||[]),Se.return=Re,Re=Se;break e}else{E(Re,Se);break}else m(Re,Se);Se=Se.sibling}Se=MM(Ie,Re.mode,_t),Se.return=Re,Re=Se}return X(Re);case ee:return fn=Ie._init,Er(Re,Se,fn(Ie._payload),_t)}if(Rt(Ie))return Zt(Re,Se,Ie,_t);if(Q(Ie))return tn(Re,Se,Ie,_t);Mc(Re,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,Se!==null&&Se.tag===6?(E(Re,Se.sibling),Se=B(Se,Ie),Se.return=Re,Re=Se):(E(Re,Se),Se=bM(Ie,Re.mode,_t),Se.return=Re,Re=Se),X(Re)):E(Re,Se)}return Er}var Cc=Pg(!0),Hu=Pg(!1),Rc={},qo=Ki(Rc),Jo=Ki(Rc),Pc=Ki(Rc);function Ws(d){if(d===Rc)throw Error(t(174));return d}function ah(d,m){switch(gi(Pc,m),gi(Jo,d),gi(qo,Rc),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:He(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=He(m,d)}Si(qo),gi(qo,m)}function Qa(){Si(qo),Si(Jo),Si(Pc)}function Ig(d){Ws(Pc.current);var m=Ws(qo.current),E=He(m,d.type);m!==E&&(gi(Jo,d),gi(qo,E))}function lh(d){Jo.current===d&&(Si(qo),Si(Jo))}var Ei=Ki(0);function Or(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Za=[];function js(){for(var d=0;d<Za.length;d++)Za[d]._workInProgressVersionPrimary=null;Za.length=0}var zu=b.ReactCurrentDispatcher,cs=b.ReactCurrentBatchConfig,Ic=0,Mi=null,Zi=null,Fr=null,wa=!1,ch=!1,uh=0,Py=0;function Xi(){throw Error(t(321))}function Lg(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!mo(d[E],m[E]))return!1;return!0}function Dg(d,m,E,M,B,U){if(Ic=U,Mi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,zu.current=d===null||d.memoizedState===null?x:w,d=E(M,B),ch){U=0;do{if(ch=!1,uh=0,25<=U)throw Error(t(301));U+=1,Fr=Zi=null,m.updateQueue=null,zu.current=R,d=E(M,B)}while(ch)}if(zu.current=y,m=Zi!==null&&Zi.next!==null,Ic=0,Fr=Zi=Mi=null,wa=!1,m)throw Error(t(300));return d}function Zd(){var d=uh!==0;return uh=0,d}function yo(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Mi.memoizedState=Fr=d:Fr=Fr.next=d,Fr}function Qo(){if(Zi===null){var d=Mi.alternate;d=d!==null?d.memoizedState:null}else d=Zi.next;var m=Fr===null?Mi.memoizedState:Fr.next;if(m!==null)Fr=m,Zi=d;else{if(d===null)throw Error(t(310));Zi=d,d={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},Fr===null?Mi.memoizedState=Fr=d:Fr=Fr.next=d}return Fr}function ep(d,m){return typeof m=="function"?m(d):m}function Bg(d){var m=Qo(),E=m.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=d;var M=Zi,B=M.baseQueue,U=E.pending;if(U!==null){if(B!==null){var X=B.next;B.next=U.next,U.next=X}M.baseQueue=B=U,E.pending=null}if(B!==null){U=B.next,M=M.baseState;var ce=X=null,xe=null,Fe=U;do{var ot=Fe.lane;if((Ic&ot)===ot)xe!==null&&(xe=xe.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),M=Fe.hasEagerState?Fe.eagerState:d(M,Fe.action);else{var ct={lane:ot,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};xe===null?(ce=xe=ct,X=M):xe=xe.next=ct,Mi.lanes|=ot,sp|=ot}Fe=Fe.next}while(Fe!==null&&Fe!==U);xe===null?X=M:xe.next=ce,mo(M,m.memoizedState)||(Ot=!0),m.memoizedState=M,m.baseState=X,m.baseQueue=xe,E.lastRenderedState=M}if(d=E.interleaved,d!==null){B=d;do U=B.lane,Mi.lanes|=U,sp|=U,B=B.next;while(B!==d)}else B===null&&(E.lanes=0);return[m.memoizedState,E.dispatch]}function kg(d){var m=Qo(),E=m.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=d;var M=E.dispatch,B=E.pending,U=m.memoizedState;if(B!==null){E.pending=null;var X=B=B.next;do U=d(U,X.action),X=X.next;while(X!==B);mo(U,m.memoizedState)||(Ot=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),E.lastRenderedState=U}return[U,M]}function Lc(){}function IS(d,m){var E=Mi,M=Qo(),B=m(),U=!mo(M.memoizedState,B);if(U&&(M.memoizedState=B,Ot=!0),M=M.queue,ip(Is.bind(null,E,M,d),[d]),M.getSnapshot!==m||U||Fr!==null&&Fr.memoizedState.tag&1){if(E.flags|=2048,tp(9,Iy.bind(null,E,M,B,m),void 0,null),us===null)throw Error(t(349));Ic&30||Dc(E,m,B)}return B}function Dc(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=Mi.updateQueue,m===null?(m={lastEffect:null,stores:null},Mi.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function Iy(d,m,E,M){m.value=E,m.getSnapshot=M,LS(m)&&Ly(d)}function Is(d,m,E){return E(function(){LS(m)&&Ly(d)})}function LS(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!mo(d,E)}catch{return!0}}function Ly(d){var m=Ta(d,1);m!==null&&Jl(m,d,1,-1)}function DS(d){var m=yo();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:d},m.queue=d,d=d.dispatch=NS.bind(null,Mi,d),[m.memoizedState,d]}function tp(d,m,E,M){return d={tag:d,create:m,destroy:E,deps:M,next:null},m=Mi.updateQueue,m===null?(m={lastEffect:null,stores:null},Mi.updateQueue=m,m.lastEffect=d.next=d):(E=m.lastEffect,E===null?m.lastEffect=d.next=d:(M=E.next,E.next=d,d.next=M,m.lastEffect=d)),d}function Dy(){return Qo().memoizedState}function np(d,m,E,M){var B=yo();Mi.flags|=d,B.memoizedState=tp(1|m,E,void 0,M===void 0?null:M)}function Og(d,m,E,M){var B=Qo();M=M===void 0?null:M;var U=void 0;if(Zi!==null){var X=Zi.memoizedState;if(U=X.destroy,M!==null&&Lg(M,X.deps)){B.memoizedState=tp(m,E,U,M);return}}Mi.flags|=d,B.memoizedState=tp(1|m,E,U,M)}function xo(d,m){return np(8390656,8,d,m)}function ip(d,m){return Og(2048,8,d,m)}function BS(d,m){return Og(4,2,d,m)}function Xl(d,m){return Og(4,4,d,m)}function rp(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function Bc(d,m,E){return E=E!=null?E.concat([d]):null,Og(4,4,rp.bind(null,m,d),E)}function fh(){}function Fg(d,m){var E=Qo();m=m===void 0?null:m;var M=E.memoizedState;return M!==null&&m!==null&&Lg(m,M[1])?M[0]:(E.memoizedState=[d,m],d)}function Ng(d,m){var E=Qo();m=m===void 0?null:m;var M=E.memoizedState;return M!==null&&m!==null&&Lg(m,M[1])?M[0]:(d=d(),E.memoizedState=[d,m],d)}function kS(d,m,E){return Ic&21?(mo(E,m)||(E=mi(),Mi.lanes|=E,sp|=E,d.baseState=!0),m):(d.baseState&&(d.baseState=!1,Ot=!0),d.memoizedState=E)}function OS(d,m){var E=ni;ni=E!==0&&4>E?E:4,d(!0);var M=cs.transition;cs.transition={};try{d(!1),m()}finally{ni=E,cs.transition=M}}function By(){return Qo().memoizedState}function FS(d,m,E){var M=mh(d);if(E={lane:M,action:E,hasEagerState:!1,eagerState:null,next:null},Ug(d))US(m,E);else if(E=Rg(d,m,E,M),E!==null){var B=So();Jl(E,d,M,B),GS(E,m,M)}}function NS(d,m,E){var M=mh(d),B={lane:M,action:E,hasEagerState:!1,eagerState:null,next:null};if(Ug(d))US(m,B);else{var U=d.alternate;if(d.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var X=m.lastRenderedState,ce=U(X,E);if(B.hasEagerState=!0,B.eagerState=ce,mo(ce,X)){var xe=m.interleaved;xe===null?(B.next=B,Jd(m)):(B.next=xe.next,xe.next=B),m.interleaved=B;return}}catch{}finally{}E=Rg(d,m,B,M),E!==null&&(B=So(),Jl(E,d,M,B),GS(E,m,M))}}function Ug(d){var m=d.alternate;return d===Mi||m!==null&&m===Mi}function US(d,m){ch=wa=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function GS(d,m,E){if(E&4194240){var M=m.lanes;M&=d.pendingLanes,E|=M,m.lanes=E,Of(d,E)}}var y={readContext:Cs,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},x={readContext:Cs,useCallback:function(d,m){return yo().memoizedState=[d,m===void 0?null:m],d},useContext:Cs,useEffect:xo,useImperativeHandle:function(d,m,E){return E=E!=null?E.concat([d]):null,np(4194308,4,rp.bind(null,m,d),E)},useLayoutEffect:function(d,m){return np(4194308,4,d,m)},useInsertionEffect:function(d,m){return np(4,2,d,m)},useMemo:function(d,m){var E=yo();return m=m===void 0?null:m,d=d(),E.memoizedState=[d,m],d},useReducer:function(d,m,E){var M=yo();return m=E!==void 0?E(m):m,M.memoizedState=M.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},M.queue=d,d=d.dispatch=FS.bind(null,Mi,d),[M.memoizedState,d]},useRef:function(d){var m=yo();return d={current:d},m.memoizedState=d},useState:DS,useDebugValue:fh,useDeferredValue:function(d){return yo().memoizedState=d},useTransition:function(){var d=DS(!1),m=d[0];return d=OS.bind(null,d[1]),yo().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,E){var M=Mi,B=yo();if(bi){if(E===void 0)throw Error(t(407));E=E()}else{if(E=m(),us===null)throw Error(t(349));Ic&30||Dc(M,m,E)}B.memoizedState=E;var U={value:E,getSnapshot:m};return B.queue=U,xo(Is.bind(null,M,U,d),[d]),M.flags|=2048,tp(9,Iy.bind(null,M,U,E,m),void 0,null),E},useId:function(){var d=yo(),m=us.identifierPrefix;if(bi){var E=Ko,M=Tt;E=(M&~(1<<32-mn(M)-1)).toString(32)+E,m=":"+m+"R"+E,E=uh++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=Py++,m=":"+m+"r"+E.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},w={readContext:Cs,useCallback:Fg,useContext:Cs,useEffect:ip,useImperativeHandle:Bc,useInsertionEffect:BS,useLayoutEffect:Xl,useMemo:Ng,useReducer:Bg,useRef:Dy,useState:function(){return Bg(ep)},useDebugValue:fh,useDeferredValue:function(d){var m=Qo();return kS(m,Zi.memoizedState,d)},useTransition:function(){var d=Bg(ep)[0],m=Qo().memoizedState;return[d,m]},useMutableSource:Lc,useSyncExternalStore:IS,useId:By,unstable_isNewReconciler:!1},R={readContext:Cs,useCallback:Fg,useContext:Cs,useEffect:ip,useImperativeHandle:Bc,useInsertionEffect:BS,useLayoutEffect:Xl,useMemo:Ng,useReducer:kg,useRef:Dy,useState:function(){return kg(ep)},useDebugValue:fh,useDeferredValue:function(d){var m=Qo();return Zi===null?m.memoizedState=d:kS(m,Zi.memoizedState,d)},useTransition:function(){var d=kg(ep)[0],m=Qo().memoizedState;return[d,m]},useMutableSource:Lc,useSyncExternalStore:IS,useId:By,unstable_isNewReconciler:!1};function N(d,m){try{var E="",M=m;do E+=Be(M),M=M.return;while(M);var B=E}catch(U){B=`
Error generating stack: `+U.message+`
`+U.stack}return{value:d,source:m,stack:B,digest:null}}function V(d,m,E){return{value:d,source:null,stack:E??null,digest:m??null}}function ae(d,m){try{console.error(m.value)}catch(E){setTimeout(function(){throw E})}}var Ae=typeof WeakMap=="function"?WeakMap:Map;function $e(d,m,E){E=Yo(-1,E),E.tag=3,E.payload={element:null};var M=m.value;return E.callback=function(){XS||(XS=!0,yM=M),ae(d,m)},E}function mt(d,m,E){E=Yo(-1,E),E.tag=3;var M=d.type.getDerivedStateFromError;if(typeof M=="function"){var B=m.value;E.payload=function(){return M(B)},E.callback=function(){ae(d,m)}}var U=d.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(E.callback=function(){ae(d,m),typeof M!="function"&&(dh===null?dh=new Set([this]):dh.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})}),E}function Vt(d,m,E){var M=d.pingCache;if(M===null){M=d.pingCache=new Ae;var B=new Set;M.set(m,B)}else B=M.get(m),B===void 0&&(B=new Set,M.set(m,B));B.has(E)||(B.add(E),d=rJ.bind(null,d,m,E),m.then(d,d))}function bn(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function an(d,m,E,M,B){return d.mode&1?(d.flags|=65536,d.lanes=B,d):(d===m?d.flags|=65536:(d.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(m=Yo(-1,1),m.tag=2,Ja(E,m,1))),E.lanes|=1),d)}var vi=b.ReactCurrentOwner,Ot=!1;function ai(d,m,E,M){m.child=d===null?Hu(m,null,E,M):Cc(m,d.child,E,M)}function _o(d,m,E,M,B){E=E.render;var U=m.ref;return Wl(m,B),M=Dg(d,m,E,M,U,B),E=Zd(),d!==null&&!Ot?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~B,$u(d,m,B)):(bi&&E&&by(m),m.flags|=1,ai(d,m,M,B),m.child)}function De(d,m,E,M,B){if(d===null){var U=E.type;return typeof U=="function"&&!wM(U)&&U.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(m.tag=15,m.type=U,Te(d,m,U,M,B)):(d=eE(E.type,null,M,m,m.mode,B),d.ref=m.ref,d.return=m,m.child=d)}if(U=d.child,!(d.lanes&B)){var X=U.memoizedProps;if(E=E.compare,E=E!==null?E:Ru,E(X,M)&&d.ref===m.ref)return $u(d,m,B)}return m.flags|=1,d=vh(U,M),d.ref=m.ref,d.return=m,m.child=d}function Te(d,m,E,M,B){if(d!==null){var U=d.memoizedProps;if(Ru(U,M)&&d.ref===m.ref)if(Ot=!1,m.pendingProps=M=U,(d.lanes&B)!==0)d.flags&131072&&(Ot=!0);else return m.lanes=d.lanes,$u(d,m,B)}return en(d,m,E,M,B)}function Ge(d,m,E){var M=m.pendingProps,B=M.children,U=d!==null?d.memoizedState:null;if(M.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},gi(Vg,ba),ba|=E;else{if(!(E&1073741824))return d=U!==null?U.baseLanes|E:E,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,gi(Vg,ba),ba|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=U!==null?U.baseLanes:E,gi(Vg,ba),ba|=M}else U!==null?(M=U.baseLanes|E,m.memoizedState=null):M=E,gi(Vg,ba),ba|=M;return ai(d,m,B,E),m.child}function It(d,m){var E=m.ref;(d===null&&E!==null||d!==null&&d.ref!==E)&&(m.flags|=512,m.flags|=2097152)}function en(d,m,E,M,B){var U=ls(E)?Hl:Xr.current;return U=ku(m,U),Wl(m,B),E=Dg(d,m,E,M,U,B),M=Zd(),d!==null&&!Ot?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~B,$u(d,m,B)):(bi&&M&&by(m),m.flags|=1,ai(d,m,E,B),m.child)}function In(d,m,E,M,B){if(ls(E)){var U=!0;Ou(m)}else U=!1;if(Wl(m,B),m.stateNode===null)zS(d,m),sh(m,E,M),oh(m,E,M,B),M=!0;else if(d===null){var X=m.stateNode,ce=m.memoizedProps;X.props=ce;var xe=X.context,Fe=E.contextType;typeof Fe=="object"&&Fe!==null?Fe=Cs(Fe):(Fe=ls(E)?Hl:Xr.current,Fe=ku(m,Fe));var ot=E.getDerivedStateFromProps,ct=typeof ot=="function"||typeof X.getSnapshotBeforeUpdate=="function";ct||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ce!==M||xe!==Fe)&&Gu(m,X,M,Fe),jl=!1;var st=m.memoizedState;X.state=st,Wi(m,M,X,B),xe=m.memoizedState,ce!==M||st!==xe||ws.current||jl?(typeof ot=="function"&&(Rs(m,E,ot,M),xe=m.memoizedState),(ce=jl||lr(m,E,ce,M,st,xe,Fe))?(ct||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(m.flags|=4194308)):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=M,m.memoizedState=xe),X.props=M,X.state=xe,X.context=Fe,M=ce):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),M=!1)}else{X=m.stateNode,PS(d,m),ce=m.memoizedProps,Fe=m.type===m.elementType?ce:Ea(m.type,ce),X.props=Fe,ct=m.pendingProps,st=X.context,xe=E.contextType,typeof xe=="object"&&xe!==null?xe=Cs(xe):(xe=ls(E)?Hl:Xr.current,xe=ku(m,xe));var Nt=E.getDerivedStateFromProps;(ot=typeof Nt=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ce!==ct||st!==xe)&&Gu(m,X,M,xe),jl=!1,st=m.memoizedState,X.state=st,Wi(m,M,X,B);var Zt=m.memoizedState;ce!==ct||st!==Zt||ws.current||jl?(typeof Nt=="function"&&(Rs(m,E,Nt,M),Zt=m.memoizedState),(Fe=jl||lr(m,E,Fe,M,st,Zt,xe)||!1)?(ot||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(M,Zt,xe),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(M,Zt,xe)),typeof X.componentDidUpdate=="function"&&(m.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof X.componentDidUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=1024),m.memoizedProps=M,m.memoizedState=Zt),X.props=M,X.state=Zt,X.context=xe,M=Fe):(typeof X.componentDidUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=1024),M=!1)}return An(d,m,E,M,U,B)}function An(d,m,E,M,B,U){It(d,m);var X=(m.flags&128)!==0;if(!M&&!X)return B&&Ty(m,E,!1),$u(d,m,U);M=m.stateNode,vi.current=m;var ce=X&&typeof E.getDerivedStateFromError!="function"?null:M.render();return m.flags|=1,d!==null&&X?(m.child=Cc(m,d.child,null,U),m.child=Cc(m,null,ce,U)):ai(d,m,ce,U),m.memoizedState=M.state,B&&Ty(m,E,!0),m.child}function ei(d){var m=d.stateNode;m.pendingContext?Ay(d,m.pendingContext,m.pendingContext!==m.context):m.context&&Ay(d,m.context,!1),ah(d,m.containerInfo)}function Sr(d,m,E,M,B){return bc(),th(B),m.flags|=256,ai(d,m,E,M),m.child}var Zn={dehydrated:null,treeContext:null,retryLane:0};function el(d){return{baseLanes:d,cachePool:null,transitions:null}}function VS(d,m,E){var M=m.pendingProps,B=Ei.current,U=!1,X=(m.flags&128)!==0,ce;if((ce=X)||(ce=d!==null&&d.memoizedState===null?!1:(B&2)!==0),ce?(U=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(B|=1),gi(Ei,B&1),d===null)return bg(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(m.mode&1?d.data==="$!"?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(X=M.children,d=M.fallback,U?(M=m.mode,U=m.child,X={mode:"hidden",children:X},!(M&1)&&U!==null?(U.childLanes=0,U.pendingProps=X):U=tE(X,M,0,null),d=cp(d,M,E,null),U.return=m,d.return=m,U.sibling=d,m.child=U,m.child.memoizedState=el(E),m.memoizedState=Zn,d):lM(m,X));if(B=d.memoizedState,B!==null&&(ce=B.dehydrated,ce!==null))return jq(d,m,X,M,ce,B,E);if(U){U=M.fallback,X=m.mode,B=d.child,ce=B.sibling;var xe={mode:"hidden",children:M.children};return!(X&1)&&m.child!==B?(M=m.child,M.childLanes=0,M.pendingProps=xe,m.deletions=null):(M=vh(B,xe),M.subtreeFlags=B.subtreeFlags&14680064),ce!==null?U=vh(ce,U):(U=cp(U,X,E,null),U.flags|=2),U.return=m,M.return=m,M.sibling=U,m.child=M,M=U,U=m.child,X=d.child.memoizedState,X=X===null?el(E):{baseLanes:X.baseLanes|E,cachePool:null,transitions:X.transitions},U.memoizedState=X,U.childLanes=d.childLanes&~E,m.memoizedState=Zn,M}return U=d.child,d=U.sibling,M=vh(U,{mode:"visible",children:M.children}),!(m.mode&1)&&(M.lanes=E),M.return=m,M.sibling=null,d!==null&&(E=m.deletions,E===null?(m.deletions=[d],m.flags|=16):E.push(d)),m.child=M,m.memoizedState=null,M}function lM(d,m){return m=tE({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function HS(d,m,E,M){return M!==null&&th(M),Cc(m,d.child,null,E),d=lM(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function jq(d,m,E,M,B,U,X){if(E)return m.flags&256?(m.flags&=-257,M=V(Error(t(422))),HS(d,m,X,M)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(U=M.fallback,B=m.mode,M=tE({mode:"visible",children:M.children},B,0,null),U=cp(U,B,X,null),U.flags|=2,M.return=m,U.return=m,M.sibling=U,m.child=M,m.mode&1&&Cc(m,d.child,null,X),m.child.memoizedState=el(X),m.memoizedState=Zn,U);if(!(m.mode&1))return HS(d,m,X,null);if(B.data==="$!"){if(M=B.nextSibling&&B.nextSibling.dataset,M)var ce=M.dgst;return M=ce,U=Error(t(419)),M=V(U,M,void 0),HS(d,m,X,M)}if(ce=(X&d.childLanes)!==0,Ot||ce){if(M=us,M!==null){switch(X&-X){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=B&(M.suspendedLanes|X)?0:B,B!==0&&B!==U.retryLane&&(U.retryLane=B,Ta(d,B),Jl(M,d,B,-1))}return TM(),M=V(Error(t(421))),HS(d,m,X,M)}return B.data==="$?"?(m.flags|=128,m.child=d.child,m=sJ.bind(null,d),B._reactRetry=m,null):(d=U.treeContext,Ms=Ul(B.nextSibling),Yr=m,bi=!0,Xo=null,d!==null&&(bs[Br++]=Tt,bs[Br++]=Ko,bs[Br++]=Nu,Tt=d.id,Ko=d.overflow,Nu=m),m=lM(m,M.children),m.flags|=4096,m)}function CO(d,m,E){d.lanes|=m;var M=d.alternate;M!==null&&(M.lanes|=m),rh(d.return,m,E)}function cM(d,m,E,M,B){var U=d.memoizedState;U===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:M,tail:E,tailMode:B}:(U.isBackwards=m,U.rendering=null,U.renderingStartTime=0,U.last=M,U.tail=E,U.tailMode=B)}function RO(d,m,E){var M=m.pendingProps,B=M.revealOrder,U=M.tail;if(ai(d,m,M.children,E),M=Ei.current,M&2)M=M&1|2,m.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&CO(d,E,m);else if(d.tag===19)CO(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}M&=1}if(gi(Ei,M),!(m.mode&1))m.memoizedState=null;else switch(B){case"forwards":for(E=m.child,B=null;E!==null;)d=E.alternate,d!==null&&Or(d)===null&&(B=E),E=E.sibling;E=B,E===null?(B=m.child,m.child=null):(B=E.sibling,E.sibling=null),cM(m,!1,B,E,U);break;case"backwards":for(E=null,B=m.child,m.child=null;B!==null;){if(d=B.alternate,d!==null&&Or(d)===null){m.child=B;break}d=B.sibling,B.sibling=E,E=B,B=d}cM(m,!0,E,null,U);break;case"together":cM(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function zS(d,m){!(m.mode&1)&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function $u(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),sp|=m.lanes,!(E&m.childLanes))return null;if(d!==null&&m.child!==d.child)throw Error(t(153));if(m.child!==null){for(d=m.child,E=vh(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=vh(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function Kq(d,m,E){switch(m.tag){case 3:ei(m),bc();break;case 5:Ig(m);break;case 1:ls(m.type)&&Ou(m);break;case 4:ah(m,m.stateNode.containerInfo);break;case 10:var M=m.type._context,B=m.memoizedProps.value;gi(Yd,M._currentValue),M._currentValue=B;break;case 13:if(M=m.memoizedState,M!==null)return M.dehydrated!==null?(gi(Ei,Ei.current&1),m.flags|=128,null):E&m.child.childLanes?VS(d,m,E):(gi(Ei,Ei.current&1),d=$u(d,m,E),d!==null?d.sibling:null);gi(Ei,Ei.current&1);break;case 19:if(M=(E&m.childLanes)!==0,d.flags&128){if(M)return RO(d,m,E);m.flags|=128}if(B=m.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),gi(Ei,Ei.current),M)break;return null;case 22:case 23:return m.lanes=0,Ge(d,m,E)}return $u(d,m,E)}var PO,uM,IO,LO;PO=function(d,m){for(var E=m.child;E!==null;){if(E.tag===5||E.tag===6)d.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},uM=function(){},IO=function(d,m,E,M){var B=d.memoizedProps;if(B!==M){d=m.stateNode,Ws(qo.current);var U=null;switch(E){case"input":B=ke(d,B),M=ke(d,M),U=[];break;case"select":B=F({},B,{value:void 0}),M=F({},M,{value:void 0}),U=[];break;case"textarea":B=gn(d,B),M=gn(d,M),U=[];break;default:typeof B.onClick!="function"&&typeof M.onClick=="function"&&(d.onclick=$d)}$t(E,M);var X;E=null;for(Fe in B)if(!M.hasOwnProperty(Fe)&&B.hasOwnProperty(Fe)&&B[Fe]!=null)if(Fe==="style"){var ce=B[Fe];for(X in ce)ce.hasOwnProperty(X)&&(E||(E={}),E[X]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(r.hasOwnProperty(Fe)?U||(U=[]):(U=U||[]).push(Fe,null));for(Fe in M){var xe=M[Fe];if(ce=B!=null?B[Fe]:void 0,M.hasOwnProperty(Fe)&&xe!==ce&&(xe!=null||ce!=null))if(Fe==="style")if(ce){for(X in ce)!ce.hasOwnProperty(X)||xe&&xe.hasOwnProperty(X)||(E||(E={}),E[X]="");for(X in xe)xe.hasOwnProperty(X)&&ce[X]!==xe[X]&&(E||(E={}),E[X]=xe[X])}else E||(U||(U=[]),U.push(Fe,E)),E=xe;else Fe==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,ce=ce?ce.__html:void 0,xe!=null&&ce!==xe&&(U=U||[]).push(Fe,xe)):Fe==="children"?typeof xe!="string"&&typeof xe!="number"||(U=U||[]).push(Fe,""+xe):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(r.hasOwnProperty(Fe)?(xe!=null&&Fe==="onScroll"&&_i("scroll",d),U||ce===xe||(U=[])):(U=U||[]).push(Fe,xe))}E&&(U=U||[]).push("style",E);var Fe=U;(m.updateQueue=Fe)&&(m.flags|=4)}},LO=function(d,m,E,M){E!==M&&(m.flags|=4)};function ky(d,m){if(!bi)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var M=null;E!==null;)E.alternate!==null&&(M=E),E=E.sibling;M===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:M.sibling=null}}function Ks(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,M=0;if(m)for(var B=d.child;B!==null;)E|=B.lanes|B.childLanes,M|=B.subtreeFlags&14680064,M|=B.flags&14680064,B.return=d,B=B.sibling;else for(B=d.child;B!==null;)E|=B.lanes|B.childLanes,M|=B.subtreeFlags,M|=B.flags,B.return=d,B=B.sibling;return d.subtreeFlags|=M,d.childLanes=E,m}function Xq(d,m,E){var M=m.pendingProps;switch($l(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(m),null;case 1:return ls(m.type)&&Wd(),Ks(m),null;case 3:return M=m.stateNode,Qa(),Si(ws),Si(Xr),js(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(d===null||d.child===null)&&(eh(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Xo!==null&&(SM(Xo),Xo=null))),uM(d,m),Ks(m),null;case 5:lh(m);var B=Ws(Pc.current);if(E=m.type,d!==null&&m.stateNode!=null)IO(d,m,E,M,B),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!M){if(m.stateNode===null)throw Error(t(166));return Ks(m),null}if(d=Ws(qo.current),eh(m)){M=m.stateNode,E=m.type;var U=m.memoizedProps;switch(M[_r]=m,M[Zf]=U,d=(m.mode&1)!==0,E){case"dialog":_i("cancel",M),_i("close",M);break;case"iframe":case"object":case"embed":_i("load",M);break;case"video":case"audio":for(B=0;B<Tc.length;B++)_i(Tc[B],M);break;case"source":_i("error",M);break;case"img":case"image":case"link":_i("error",M),_i("load",M);break;case"details":_i("toggle",M);break;case"input":Ze(M,U),_i("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!U.multiple},_i("invalid",M);break;case"textarea":Z(M,U),_i("invalid",M)}$t(E,U),B=null;for(var X in U)if(U.hasOwnProperty(X)){var ce=U[X];X==="children"?typeof ce=="string"?M.textContent!==ce&&(U.suppressHydrationWarning!==!0&&zd(M.textContent,ce,d),B=["children",ce]):typeof ce=="number"&&M.textContent!==""+ce&&(U.suppressHydrationWarning!==!0&&zd(M.textContent,ce,d),B=["children",""+ce]):r.hasOwnProperty(X)&&ce!=null&&X==="onScroll"&&_i("scroll",M)}switch(E){case"input":gt(M),ft(M,U,!0);break;case"textarea":gt(M),Ee(M);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(M.onclick=$d)}M=B,m.updateQueue=M,M!==null&&(m.flags|=4)}else{X=B.nodeType===9?B:B.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=Xe(E)),d==="http://www.w3.org/1999/xhtml"?E==="script"?(d=X.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof M.is=="string"?d=X.createElement(E,{is:M.is}):(d=X.createElement(E),E==="select"&&(X=d,M.multiple?X.multiple=!0:M.size&&(X.size=M.size))):d=X.createElementNS(d,E),d[_r]=m,d[Zf]=M,PO(d,m,!1,!1),m.stateNode=d;e:{switch(X=Mt(E,M),E){case"dialog":_i("cancel",d),_i("close",d),B=M;break;case"iframe":case"object":case"embed":_i("load",d),B=M;break;case"video":case"audio":for(B=0;B<Tc.length;B++)_i(Tc[B],d);B=M;break;case"source":_i("error",d),B=M;break;case"img":case"image":case"link":_i("error",d),_i("load",d),B=M;break;case"details":_i("toggle",d),B=M;break;case"input":Ze(d,M),B=ke(d,M),_i("invalid",d);break;case"option":B=M;break;case"select":d._wrapperState={wasMultiple:!!M.multiple},B=F({},M,{value:void 0}),_i("invalid",d);break;case"textarea":Z(d,M),B=gn(d,M),_i("invalid",d);break;default:B=M}$t(E,B),ce=B;for(U in ce)if(ce.hasOwnProperty(U)){var xe=ce[U];U==="style"?Ke(d,xe):U==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,xe!=null&&St(d,xe)):U==="children"?typeof xe=="string"?(E!=="textarea"||xe!=="")&&nt(d,xe):typeof xe=="number"&&nt(d,""+xe):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(r.hasOwnProperty(U)?xe!=null&&U==="onScroll"&&_i("scroll",d):xe!=null&&T(d,U,xe,X))}switch(E){case"input":gt(d),ft(d,M,!1);break;case"textarea":gt(d),Ee(d);break;case"option":M.value!=null&&d.setAttribute("value",""+je(M.value));break;case"select":d.multiple=!!M.multiple,U=M.value,U!=null?Dt(d,!!M.multiple,U,!1):M.defaultValue!=null&&Dt(d,!!M.multiple,M.defaultValue,!0);break;default:typeof B.onClick=="function"&&(d.onclick=$d)}switch(E){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ks(m),null;case 6:if(d&&m.stateNode!=null)LO(d,m,d.memoizedProps,M);else{if(typeof M!="string"&&m.stateNode===null)throw Error(t(166));if(E=Ws(Pc.current),Ws(qo.current),eh(m)){if(M=m.stateNode,E=m.memoizedProps,M[_r]=m,(U=M.nodeValue!==E)&&(d=Yr,d!==null))switch(d.tag){case 3:zd(M.nodeValue,E,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&zd(M.nodeValue,E,(d.mode&1)!==0)}U&&(m.flags|=4)}else M=(E.nodeType===9?E:E.ownerDocument).createTextNode(M),M[_r]=m,m.stateNode=M}return Ks(m),null;case 13:if(Si(Ei),M=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(bi&&Ms!==null&&m.mode&1&&!(m.flags&128))Ry(),bc(),m.flags|=98560,U=!1;else if(U=eh(m),M!==null&&M.dehydrated!==null){if(d===null){if(!U)throw Error(t(318));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(t(317));U[_r]=m}else bc(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Ks(m),U=!1}else Xo!==null&&(SM(Xo),Xo=null),U=!0;if(!U)return m.flags&65536?m:null}return m.flags&128?(m.lanes=E,m):(M=M!==null,M!==(d!==null&&d.memoizedState!==null)&&M&&(m.child.flags|=8192,m.mode&1&&(d===null||Ei.current&1?qr===0&&(qr=3):TM())),m.updateQueue!==null&&(m.flags|=4),Ks(m),null);case 4:return Qa(),uM(d,m),d===null&&qf(m.stateNode.containerInfo),Ks(m),null;case 10:return ih(m.type._context),Ks(m),null;case 17:return ls(m.type)&&Wd(),Ks(m),null;case 19:if(Si(Ei),U=m.memoizedState,U===null)return Ks(m),null;if(M=(m.flags&128)!==0,X=U.rendering,X===null)if(M)ky(U,!1);else{if(qr!==0||d!==null&&d.flags&128)for(d=m.child;d!==null;){if(X=Or(d),X!==null){for(m.flags|=128,ky(U,!1),M=X.updateQueue,M!==null&&(m.updateQueue=M,m.flags|=4),m.subtreeFlags=0,M=E,E=m.child;E!==null;)U=E,d=M,U.flags&=14680066,X=U.alternate,X===null?(U.childLanes=0,U.lanes=d,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=X.childLanes,U.lanes=X.lanes,U.child=X.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=X.memoizedProps,U.memoizedState=X.memoizedState,U.updateQueue=X.updateQueue,U.type=X.type,d=X.dependencies,U.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),E=E.sibling;return gi(Ei,Ei.current&1|2),m.child}d=d.sibling}U.tail!==null&&we()>Hg&&(m.flags|=128,M=!0,ky(U,!1),m.lanes=4194304)}else{if(!M)if(d=Or(X),d!==null){if(m.flags|=128,M=!0,E=d.updateQueue,E!==null&&(m.updateQueue=E,m.flags|=4),ky(U,!0),U.tail===null&&U.tailMode==="hidden"&&!X.alternate&&!bi)return Ks(m),null}else 2*we()-U.renderingStartTime>Hg&&E!==1073741824&&(m.flags|=128,M=!0,ky(U,!1),m.lanes=4194304);U.isBackwards?(X.sibling=m.child,m.child=X):(E=U.last,E!==null?E.sibling=X:m.child=X,U.last=X)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=we(),m.sibling=null,E=Ei.current,gi(Ei,M?E&1|2:E&1),m):(Ks(m),null);case 22:case 23:return AM(),M=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==M&&(m.flags|=8192),M&&m.mode&1?ba&1073741824&&(Ks(m),m.subtreeFlags&6&&(m.flags|=8192)):Ks(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function Yq(d,m){switch($l(m),m.tag){case 1:return ls(m.type)&&Wd(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return Qa(),Si(ws),Si(Xr),js(),d=m.flags,d&65536&&!(d&128)?(m.flags=d&-65537|128,m):null;case 5:return lh(m),null;case 13:if(Si(Ei),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(t(340));bc()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return Si(Ei),null;case 4:return Qa(),null;case 10:return ih(m.type._context),null;case 22:case 23:return AM(),null;case 24:return null;default:return null}}var $S=!1,Xs=!1,qq=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function Gg(d,m){var E=d.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(M){cr(d,m,M)}else E.current=null}function fM(d,m,E){try{E()}catch(M){cr(d,m,M)}}var DO=!1;function Jq(d,m){if(Qf=Vo,d=$i(),Pr(d)){if("selectionStart"in d)var E={start:d.selectionStart,end:d.selectionEnd};else e:{E=(E=d.ownerDocument)&&E.defaultView||window;var M=E.getSelection&&E.getSelection();if(M&&M.rangeCount!==0){E=M.anchorNode;var B=M.anchorOffset,U=M.focusNode;M=M.focusOffset;try{E.nodeType,U.nodeType}catch{E=null;break e}var X=0,ce=-1,xe=-1,Fe=0,ot=0,ct=d,st=null;t:for(;;){for(var Nt;ct!==E||B!==0&&ct.nodeType!==3||(ce=X+B),ct!==U||M!==0&&ct.nodeType!==3||(xe=X+M),ct.nodeType===3&&(X+=ct.nodeValue.length),(Nt=ct.firstChild)!==null;)st=ct,ct=Nt;for(;;){if(ct===d)break t;if(st===E&&++Fe===B&&(ce=X),st===U&&++ot===M&&(xe=X),(Nt=ct.nextSibling)!==null)break;ct=st,st=ct.parentNode}ct=Nt}E=ce===-1||xe===-1?null:{start:ce,end:xe}}else E=null}E=E||{start:0,end:0}}else E=null;for(vy={focusedElem:d,selectionRange:E},Vo=!1,Wt=m;Wt!==null;)if(m=Wt,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,Wt=d;else for(;Wt!==null;){m=Wt;try{var Zt=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Zt!==null){var tn=Zt.memoizedProps,Er=Zt.memoizedState,Re=m.stateNode,Se=Re.getSnapshotBeforeUpdate(m.elementType===m.type?tn:Ea(m.type,tn),Er);Re.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Ie=m.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_t){cr(m,m.return,_t)}if(d=m.sibling,d!==null){d.return=m.return,Wt=d;break}Wt=m.return}return Zt=DO,DO=!1,Zt}function Oy(d,m,E){var M=m.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var B=M=M.next;do{if((B.tag&d)===d){var U=B.destroy;B.destroy=void 0,U!==void 0&&fM(m,E,U)}B=B.next}while(B!==M)}}function WS(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&d)===d){var M=E.create;E.destroy=M()}E=E.next}while(E!==m)}}function hM(d){var m=d.ref;if(m!==null){var E=d.stateNode;switch(d.tag){case 5:d=E;break;default:d=E}typeof m=="function"?m(d):m.current=d}}function BO(d){var m=d.alternate;m!==null&&(d.alternate=null,BO(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[_r],delete m[Zf],delete m[Bu],delete m[xg],delete m[_g])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function kO(d){return d.tag===5||d.tag===3||d.tag===4}function OO(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||kO(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function dM(d,m,E){var M=d.tag;if(M===5||M===6)d=d.stateNode,m?E.nodeType===8?E.parentNode.insertBefore(d,m):E.insertBefore(d,m):(E.nodeType===8?(m=E.parentNode,m.insertBefore(d,E)):(m=E,m.appendChild(d)),E=E._reactRootContainer,E!=null||m.onclick!==null||(m.onclick=$d));else if(M!==4&&(d=d.child,d!==null))for(dM(d,m,E),d=d.sibling;d!==null;)dM(d,m,E),d=d.sibling}function pM(d,m,E){var M=d.tag;if(M===5||M===6)d=d.stateNode,m?E.insertBefore(d,m):E.appendChild(d);else if(M!==4&&(d=d.child,d!==null))for(pM(d,m,E),d=d.sibling;d!==null;)pM(d,m,E),d=d.sibling}var Ls=null,Yl=!1;function hh(d,m,E){for(E=E.child;E!==null;)FO(d,m,E),E=E.sibling}function FO(d,m,E){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(sn,E)}catch{}switch(E.tag){case 5:Xs||Gg(E,m);case 6:var M=Ls,B=Yl;Ls=null,hh(d,m,E),Ls=M,Yl=B,Ls!==null&&(Yl?(d=Ls,E=E.stateNode,d.nodeType===8?d.parentNode.removeChild(E):d.removeChild(E)):Ls.removeChild(E.stateNode));break;case 18:Ls!==null&&(Yl?(d=Ls,E=E.stateNode,d.nodeType===8?yg(d.parentNode,E):d.nodeType===1&&yg(d,E),Ld(d)):yg(Ls,E.stateNode));break;case 4:M=Ls,B=Yl,Ls=E.stateNode.containerInfo,Yl=!0,hh(d,m,E),Ls=M,Yl=B;break;case 0:case 11:case 14:case 15:if(!Xs&&(M=E.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){B=M=M.next;do{var U=B,X=U.destroy;U=U.tag,X!==void 0&&(U&2||U&4)&&fM(E,m,X),B=B.next}while(B!==M)}hh(d,m,E);break;case 1:if(!Xs&&(Gg(E,m),M=E.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=E.memoizedProps,M.state=E.memoizedState,M.componentWillUnmount()}catch(ce){cr(E,m,ce)}hh(d,m,E);break;case 21:hh(d,m,E);break;case 22:E.mode&1?(Xs=(M=Xs)||E.memoizedState!==null,hh(d,m,E),Xs=M):hh(d,m,E);break;default:hh(d,m,E)}}function NO(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var E=d.stateNode;E===null&&(E=d.stateNode=new qq),m.forEach(function(M){var B=oJ.bind(null,d,M);E.has(M)||(E.add(M),M.then(B,B))})}}function ql(d,m){var E=m.deletions;if(E!==null)for(var M=0;M<E.length;M++){var B=E[M];try{var U=d,X=m,ce=X;e:for(;ce!==null;){switch(ce.tag){case 5:Ls=ce.stateNode,Yl=!1;break e;case 3:Ls=ce.stateNode.containerInfo,Yl=!0;break e;case 4:Ls=ce.stateNode.containerInfo,Yl=!0;break e}ce=ce.return}if(Ls===null)throw Error(t(160));FO(U,X,B),Ls=null,Yl=!1;var xe=B.alternate;xe!==null&&(xe.return=null),B.return=null}catch(Fe){cr(B,m,Fe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)UO(m,d),m=m.sibling}function UO(d,m){var E=d.alternate,M=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(ql(m,d),kc(d),M&4){try{Oy(3,d,d.return),WS(3,d)}catch(tn){cr(d,d.return,tn)}try{Oy(5,d,d.return)}catch(tn){cr(d,d.return,tn)}}break;case 1:ql(m,d),kc(d),M&512&&E!==null&&Gg(E,E.return);break;case 5:if(ql(m,d),kc(d),M&512&&E!==null&&Gg(E,E.return),d.flags&32){var B=d.stateNode;try{nt(B,"")}catch(tn){cr(d,d.return,tn)}}if(M&4&&(B=d.stateNode,B!=null)){var U=d.memoizedProps,X=E!==null?E.memoizedProps:U,ce=d.type,xe=d.updateQueue;if(d.updateQueue=null,xe!==null)try{ce==="input"&&U.type==="radio"&&U.name!=null&&We(B,U),Mt(ce,X);var Fe=Mt(ce,U);for(X=0;X<xe.length;X+=2){var ot=xe[X],ct=xe[X+1];ot==="style"?Ke(B,ct):ot==="dangerouslySetInnerHTML"?St(B,ct):ot==="children"?nt(B,ct):T(B,ot,ct,Fe)}switch(ce){case"input":_e(B,U);break;case"textarea":j(B,U);break;case"select":var st=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!U.multiple;var Nt=U.value;Nt!=null?Dt(B,!!U.multiple,Nt,!1):st!==!!U.multiple&&(U.defaultValue!=null?Dt(B,!!U.multiple,U.defaultValue,!0):Dt(B,!!U.multiple,U.multiple?[]:"",!1))}B[Zf]=U}catch(tn){cr(d,d.return,tn)}}break;case 6:if(ql(m,d),kc(d),M&4){if(d.stateNode===null)throw Error(t(162));B=d.stateNode,U=d.memoizedProps;try{B.nodeValue=U}catch(tn){cr(d,d.return,tn)}}break;case 3:if(ql(m,d),kc(d),M&4&&E!==null&&E.memoizedState.isDehydrated)try{Ld(m.containerInfo)}catch(tn){cr(d,d.return,tn)}break;case 4:ql(m,d),kc(d);break;case 13:ql(m,d),kc(d),B=d.child,B.flags&8192&&(U=B.memoizedState!==null,B.stateNode.isHidden=U,!U||B.alternate!==null&&B.alternate.memoizedState!==null||(vM=we())),M&4&&NO(d);break;case 22:if(ot=E!==null&&E.memoizedState!==null,d.mode&1?(Xs=(Fe=Xs)||ot,ql(m,d),Xs=Fe):ql(m,d),kc(d),M&8192){if(Fe=d.memoizedState!==null,(d.stateNode.isHidden=Fe)&&!ot&&d.mode&1)for(Wt=d,ot=d.child;ot!==null;){for(ct=Wt=ot;Wt!==null;){switch(st=Wt,Nt=st.child,st.tag){case 0:case 11:case 14:case 15:Oy(4,st,st.return);break;case 1:Gg(st,st.return);var Zt=st.stateNode;if(typeof Zt.componentWillUnmount=="function"){M=st,E=st.return;try{m=M,Zt.props=m.memoizedProps,Zt.state=m.memoizedState,Zt.componentWillUnmount()}catch(tn){cr(M,E,tn)}}break;case 5:Gg(st,st.return);break;case 22:if(st.memoizedState!==null){HO(ct);continue}}Nt!==null?(Nt.return=st,Wt=Nt):HO(ct)}ot=ot.sibling}e:for(ot=null,ct=d;;){if(ct.tag===5){if(ot===null){ot=ct;try{B=ct.stateNode,Fe?(U=B.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(ce=ct.stateNode,xe=ct.memoizedProps.style,X=xe!=null&&xe.hasOwnProperty("display")?xe.display:null,ce.style.display=cn("display",X))}catch(tn){cr(d,d.return,tn)}}}else if(ct.tag===6){if(ot===null)try{ct.stateNode.nodeValue=Fe?"":ct.memoizedProps}catch(tn){cr(d,d.return,tn)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===d)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===d)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===d)break e;ot===ct&&(ot=null),ct=ct.return}ot===ct&&(ot=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:ql(m,d),kc(d),M&4&&NO(d);break;case 21:break;default:ql(m,d),kc(d)}}function kc(d){var m=d.flags;if(m&2){try{e:{for(var E=d.return;E!==null;){if(kO(E)){var M=E;break e}E=E.return}throw Error(t(160))}switch(M.tag){case 5:var B=M.stateNode;M.flags&32&&(nt(B,""),M.flags&=-33);var U=OO(d);pM(d,U,B);break;case 3:case 4:var X=M.stateNode.containerInfo,ce=OO(d);dM(d,ce,X);break;default:throw Error(t(161))}}catch(xe){cr(d,d.return,xe)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function Qq(d,m,E){Wt=d,GO(d)}function GO(d,m,E){for(var M=(d.mode&1)!==0;Wt!==null;){var B=Wt,U=B.child;if(B.tag===22&&M){var X=B.memoizedState!==null||$S;if(!X){var ce=B.alternate,xe=ce!==null&&ce.memoizedState!==null||Xs;ce=$S;var Fe=Xs;if($S=X,(Xs=xe)&&!Fe)for(Wt=B;Wt!==null;)X=Wt,xe=X.child,X.tag===22&&X.memoizedState!==null?zO(B):xe!==null?(xe.return=X,Wt=xe):zO(B);for(;U!==null;)Wt=U,GO(U),U=U.sibling;Wt=B,$S=ce,Xs=Fe}VO(d)}else B.subtreeFlags&8772&&U!==null?(U.return=B,Wt=U):VO(d)}}function VO(d){for(;Wt!==null;){var m=Wt;if(m.flags&8772){var E=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Xs||WS(5,m);break;case 1:var M=m.stateNode;if(m.flags&4&&!Xs)if(E===null)M.componentDidMount();else{var B=m.elementType===m.type?E.memoizedProps:Ea(m.type,E.memoizedProps);M.componentDidUpdate(B,E.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var U=m.updateQueue;U!==null&&Qi(m,U,M);break;case 3:var X=m.updateQueue;if(X!==null){if(E=null,m.child!==null)switch(m.child.tag){case 5:E=m.child.stateNode;break;case 1:E=m.child.stateNode}Qi(m,X,E)}break;case 5:var ce=m.stateNode;if(E===null&&m.flags&4){E=ce;var xe=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":xe.autoFocus&&E.focus();break;case"img":xe.src&&(E.src=xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Fe=m.alternate;if(Fe!==null){var ot=Fe.memoizedState;if(ot!==null){var ct=ot.dehydrated;ct!==null&&Ld(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xs||m.flags&512&&hM(m)}catch(st){cr(m,m.return,st)}}if(m===d){Wt=null;break}if(E=m.sibling,E!==null){E.return=m.return,Wt=E;break}Wt=m.return}}function HO(d){for(;Wt!==null;){var m=Wt;if(m===d){Wt=null;break}var E=m.sibling;if(E!==null){E.return=m.return,Wt=E;break}Wt=m.return}}function zO(d){for(;Wt!==null;){var m=Wt;try{switch(m.tag){case 0:case 11:case 15:var E=m.return;try{WS(4,m)}catch(xe){cr(m,E,xe)}break;case 1:var M=m.stateNode;if(typeof M.componentDidMount=="function"){var B=m.return;try{M.componentDidMount()}catch(xe){cr(m,B,xe)}}var U=m.return;try{hM(m)}catch(xe){cr(m,U,xe)}break;case 5:var X=m.return;try{hM(m)}catch(xe){cr(m,X,xe)}}}catch(xe){cr(m,m.return,xe)}if(m===d){Wt=null;break}var ce=m.sibling;if(ce!==null){ce.return=m.return,Wt=ce;break}Wt=m.return}}var Zq=Math.ceil,jS=b.ReactCurrentDispatcher,mM=b.ReactCurrentOwner,tl=b.ReactCurrentBatchConfig,si=0,us=null,Nr=null,Ds=0,ba=0,Vg=Ki(0),qr=0,Fy=null,sp=0,KS=0,gM=0,Ny=null,Zo=null,vM=0,Hg=1/0,Wu=null,XS=!1,yM=null,dh=null,YS=!1,ph=null,qS=0,Uy=0,xM=null,JS=-1,QS=0;function So(){return si&6?we():JS!==-1?JS:JS=we()}function mh(d){return d.mode&1?si&2&&Ds!==0?Ds&-Ds:aM.transition!==null?(QS===0&&(QS=mi()),QS):(d=ni,d!==0||(d=window.event,d=d===void 0?16:mS(d.type)),d):1}function Jl(d,m,E,M){if(50<Uy)throw Uy=0,xM=null,Error(t(185));yr(d,E,M),(!(si&2)||d!==us)&&(d===us&&(!(si&2)&&(KS|=E),qr===4&&gh(d,Ds)),ea(d,M),E===1&&si===0&&!(m.mode&1)&&(Hg=we()+500,Kd&&qa()))}function ea(d,m){var E=d.callbackNode;Cn(d,m);var M=Pn(d,d===us?Ds:0);if(M===0)E!==null&&be(E),d.callbackNode=null,d.callbackPriority=0;else if(m=M&-M,d.callbackPriority!==m){if(E!=null&&be(E),m===1)d.tag===0?RS(WO.bind(null,d)):Xd(WO.bind(null,d)),oM(function(){!(si&6)&&qa()}),E=null;else{switch(Ff(M)){case 1:E=Ye;break;case 4:E=it;break;case 16:E=Bt;break;case 536870912:E=zt;break;default:E=Bt}E=ZO(E,$O.bind(null,d))}d.callbackPriority=m,d.callbackNode=E}}function $O(d,m){if(JS=-1,QS=0,si&6)throw Error(t(327));var E=d.callbackNode;if(zg()&&d.callbackNode!==E)return null;var M=Pn(d,d===us?Ds:0);if(M===0)return null;if(M&30||M&d.expiredLanes||m)m=ZS(d,M);else{m=M;var B=si;si|=2;var U=KO();(us!==d||Ds!==m)&&(Wu=null,Hg=we()+500,ap(d,m));do try{nJ();break}catch(ce){jO(d,ce)}while(!0);nh(),jS.current=U,si=B,Nr!==null?m=0:(us=null,Ds=0,m=qr)}if(m!==0){if(m===2&&(B=Un(d),B!==0&&(M=B,m=_M(d,B))),m===1)throw E=Fy,ap(d,0),gh(d,M),ea(d,we()),E;if(m===6)gh(d,M);else{if(B=d.current.alternate,!(M&30)&&!eJ(B)&&(m=ZS(d,M),m===2&&(U=Un(d),U!==0&&(M=U,m=_M(d,U))),m===1))throw E=Fy,ap(d,0),gh(d,M),ea(d,we()),E;switch(d.finishedWork=B,d.finishedLanes=M,m){case 0:case 1:throw Error(t(345));case 2:lp(d,Zo,Wu);break;case 3:if(gh(d,M),(M&130023424)===M&&(m=vM+500-we(),10<m)){if(Pn(d,0)!==0)break;if(B=d.suspendedLanes,(B&M)!==M){So(),d.pingedLanes|=d.suspendedLanes&B;break}d.timeoutHandle=xy(lp.bind(null,d,Zo,Wu),m);break}lp(d,Zo,Wu);break;case 4:if(gh(d,M),(M&4194240)===M)break;for(m=d.eventTimes,B=-1;0<M;){var X=31-mn(M);U=1<<X,X=m[X],X>B&&(B=X),M&=~U}if(M=B,M=we()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*Zq(M/1960))-M,10<M){d.timeoutHandle=xy(lp.bind(null,d,Zo,Wu),M);break}lp(d,Zo,Wu);break;case 5:lp(d,Zo,Wu);break;default:throw Error(t(329))}}}return ea(d,we()),d.callbackNode===E?$O.bind(null,d):null}function _M(d,m){var E=Ny;return d.current.memoizedState.isDehydrated&&(ap(d,m).flags|=256),d=ZS(d,m),d!==2&&(m=Zo,Zo=E,m!==null&&SM(m)),d}function SM(d){Zo===null?Zo=d:Zo.push.apply(Zo,d)}function eJ(d){for(var m=d;;){if(m.flags&16384){var E=m.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var M=0;M<E.length;M++){var B=E[M],U=B.getSnapshot;B=B.value;try{if(!mo(U(),B))return!1}catch{return!1}}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function gh(d,m){for(m&=~gM,m&=~KS,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var E=31-mn(m),M=1<<E;d[E]=-1,m&=~M}}function WO(d){if(si&6)throw Error(t(327));zg();var m=Pn(d,0);if(!(m&1))return ea(d,we()),null;var E=ZS(d,m);if(d.tag!==0&&E===2){var M=Un(d);M!==0&&(m=M,E=_M(d,M))}if(E===1)throw E=Fy,ap(d,0),gh(d,m),ea(d,we()),E;if(E===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,lp(d,Zo,Wu),ea(d,we()),null}function EM(d,m){var E=si;si|=1;try{return d(m)}finally{si=E,si===0&&(Hg=we()+500,Kd&&qa())}}function op(d){ph!==null&&ph.tag===0&&!(si&6)&&zg();var m=si;si|=1;var E=tl.transition,M=ni;try{if(tl.transition=null,ni=1,d)return d()}finally{ni=M,tl.transition=E,si=m,!(si&6)&&qa()}}function AM(){ba=Vg.current,Si(Vg)}function ap(d,m){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;if(E!==-1&&(d.timeoutHandle=-1,_y(E)),Nr!==null)for(E=Nr.return;E!==null;){var M=E;switch($l(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Wd();break;case 3:Qa(),Si(ws),Si(Xr),js();break;case 5:lh(M);break;case 4:Qa();break;case 13:Si(Ei);break;case 19:Si(Ei);break;case 10:ih(M.type._context);break;case 22:case 23:AM()}E=E.return}if(us=d,Nr=d=vh(d.current,null),Ds=ba=m,qr=0,Fy=null,gM=KS=sp=0,Zo=Ny=null,Aa!==null){for(m=0;m<Aa.length;m++)if(E=Aa[m],M=E.interleaved,M!==null){E.interleaved=null;var B=M.next,U=E.pending;if(U!==null){var X=U.next;U.next=B,M.next=X}E.pending=M}Aa=null}return d}function jO(d,m){do{var E=Nr;try{if(nh(),zu.current=y,wa){for(var M=Mi.memoizedState;M!==null;){var B=M.queue;B!==null&&(B.pending=null),M=M.next}wa=!1}if(Ic=0,Fr=Zi=Mi=null,ch=!1,uh=0,mM.current=null,E===null||E.return===null){qr=1,Fy=m,Nr=null;break}e:{var U=d,X=E.return,ce=E,xe=m;if(m=Ds,ce.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var Fe=xe,ot=ce,ct=ot.tag;if(!(ot.mode&1)&&(ct===0||ct===11||ct===15)){var st=ot.alternate;st?(ot.updateQueue=st.updateQueue,ot.memoizedState=st.memoizedState,ot.lanes=st.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var Nt=bn(X);if(Nt!==null){Nt.flags&=-257,an(Nt,X,ce,U,m),Nt.mode&1&&Vt(U,Fe,m),m=Nt,xe=Fe;var Zt=m.updateQueue;if(Zt===null){var tn=new Set;tn.add(xe),m.updateQueue=tn}else Zt.add(xe);break e}else{if(!(m&1)){Vt(U,Fe,m),TM();break e}xe=Error(t(426))}}else if(bi&&ce.mode&1){var Er=bn(X);if(Er!==null){!(Er.flags&65536)&&(Er.flags|=256),an(Er,X,ce,U,m),th(N(xe,ce));break e}}U=xe=N(xe,ce),qr!==4&&(qr=2),Ny===null?Ny=[U]:Ny.push(U),U=X;do{switch(U.tag){case 3:U.flags|=65536,m&=-m,U.lanes|=m;var Re=$e(U,xe,m);Dn(U,Re);break e;case 1:ce=xe;var Se=U.type,Ie=U.stateNode;if(!(U.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(dh===null||!dh.has(Ie)))){U.flags|=65536,m&=-m,U.lanes|=m;var _t=mt(U,ce,m);Dn(U,_t);break e}}U=U.return}while(U!==null)}YO(E)}catch(nn){m=nn,Nr===E&&E!==null&&(Nr=E=E.return);continue}break}while(!0)}function KO(){var d=jS.current;return jS.current=y,d===null?y:d}function TM(){(qr===0||qr===3||qr===2)&&(qr=4),us===null||!(sp&268435455)&&!(KS&268435455)||gh(us,Ds)}function ZS(d,m){var E=si;si|=2;var M=KO();(us!==d||Ds!==m)&&(Wu=null,ap(d,m));do try{tJ();break}catch(B){jO(d,B)}while(!0);if(nh(),si=E,jS.current=M,Nr!==null)throw Error(t(261));return us=null,Ds=0,qr}function tJ(){for(;Nr!==null;)XO(Nr)}function nJ(){for(;Nr!==null&&!Oe();)XO(Nr)}function XO(d){var m=QO(d.alternate,d,ba);d.memoizedProps=d.pendingProps,m===null?YO(d):Nr=m,mM.current=null}function YO(d){var m=d;do{var E=m.alternate;if(d=m.return,m.flags&32768){if(E=Yq(E,m),E!==null){E.flags&=32767,Nr=E;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{qr=6,Nr=null;return}}else if(E=Xq(E,m,ba),E!==null){Nr=E;return}if(m=m.sibling,m!==null){Nr=m;return}Nr=m=d}while(m!==null);qr===0&&(qr=5)}function lp(d,m,E){var M=ni,B=tl.transition;try{tl.transition=null,ni=1,iJ(d,m,E,M)}finally{tl.transition=B,ni=M}return null}function iJ(d,m,E,M){do zg();while(ph!==null);if(si&6)throw Error(t(327));E=d.finishedWork;var B=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var U=E.lanes|E.childLanes;if(Wa(d,U),d===us&&(Nr=us=null,Ds=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||YS||(YS=!0,ZO(Bt,function(){return zg(),null})),U=(E.flags&15990)!==0,E.subtreeFlags&15990||U){U=tl.transition,tl.transition=null;var X=ni;ni=1;var ce=si;si|=4,mM.current=null,Jq(d,E),UO(E,d),Ir(vy),Vo=!!Qf,vy=Qf=null,d.current=E,Qq(E),Ve(),si=ce,ni=X,tl.transition=U}else d.current=E;if(YS&&(YS=!1,ph=d,qS=B),U=d.pendingLanes,U===0&&(dh=null),xt(E.stateNode),ea(d,we()),m!==null)for(M=d.onRecoverableError,E=0;E<m.length;E++)B=m[E],M(B.value,{componentStack:B.stack,digest:B.digest});if(XS)throw XS=!1,d=yM,yM=null,d;return qS&1&&d.tag!==0&&zg(),U=d.pendingLanes,U&1?d===xM?Uy++:(Uy=0,xM=d):Uy=0,qa(),null}function zg(){if(ph!==null){var d=Ff(qS),m=tl.transition,E=ni;try{if(tl.transition=null,ni=16>d?16:d,ph===null)var M=!1;else{if(d=ph,ph=null,qS=0,si&6)throw Error(t(331));var B=si;for(si|=4,Wt=d.current;Wt!==null;){var U=Wt,X=U.child;if(Wt.flags&16){var ce=U.deletions;if(ce!==null){for(var xe=0;xe<ce.length;xe++){var Fe=ce[xe];for(Wt=Fe;Wt!==null;){var ot=Wt;switch(ot.tag){case 0:case 11:case 15:Oy(8,ot,U)}var ct=ot.child;if(ct!==null)ct.return=ot,Wt=ct;else for(;Wt!==null;){ot=Wt;var st=ot.sibling,Nt=ot.return;if(BO(ot),ot===Fe){Wt=null;break}if(st!==null){st.return=Nt,Wt=st;break}Wt=Nt}}}var Zt=U.alternate;if(Zt!==null){var tn=Zt.child;if(tn!==null){Zt.child=null;do{var Er=tn.sibling;tn.sibling=null,tn=Er}while(tn!==null)}}Wt=U}}if(U.subtreeFlags&2064&&X!==null)X.return=U,Wt=X;else e:for(;Wt!==null;){if(U=Wt,U.flags&2048)switch(U.tag){case 0:case 11:case 15:Oy(9,U,U.return)}var Re=U.sibling;if(Re!==null){Re.return=U.return,Wt=Re;break e}Wt=U.return}}var Se=d.current;for(Wt=Se;Wt!==null;){X=Wt;var Ie=X.child;if(X.subtreeFlags&2064&&Ie!==null)Ie.return=X,Wt=Ie;else e:for(X=Se;Wt!==null;){if(ce=Wt,ce.flags&2048)try{switch(ce.tag){case 0:case 11:case 15:WS(9,ce)}}catch(nn){cr(ce,ce.return,nn)}if(ce===X){Wt=null;break e}var _t=ce.sibling;if(_t!==null){_t.return=ce.return,Wt=_t;break e}Wt=ce.return}}if(si=B,qa(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(sn,d)}catch{}M=!0}return M}finally{ni=E,tl.transition=m}}return!1}function qO(d,m,E){m=N(E,m),m=$e(d,m,1),d=Ja(d,m,1),m=So(),d!==null&&(yr(d,1,m),ea(d,m))}function cr(d,m,E){if(d.tag===3)qO(d,d,E);else for(;m!==null;){if(m.tag===3){qO(m,d,E);break}else if(m.tag===1){var M=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(dh===null||!dh.has(M))){d=N(E,d),d=mt(m,d,1),m=Ja(m,d,1),d=So(),m!==null&&(yr(m,1,d),ea(m,d));break}}m=m.return}}function rJ(d,m,E){var M=d.pingCache;M!==null&&M.delete(m),m=So(),d.pingedLanes|=d.suspendedLanes&E,us===d&&(Ds&E)===E&&(qr===4||qr===3&&(Ds&130023424)===Ds&&500>we()-vM?ap(d,0):gM|=E),ea(d,m)}function JO(d,m){m===0&&(d.mode&1?(m=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):m=1);var E=So();d=Ta(d,m),d!==null&&(yr(d,m,E),ea(d,E))}function sJ(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),JO(d,E)}function oJ(d,m){var E=0;switch(d.tag){case 13:var M=d.stateNode,B=d.memoizedState;B!==null&&(E=B.retryLane);break;case 19:M=d.stateNode;break;default:throw Error(t(314))}M!==null&&M.delete(m),JO(d,E)}var QO;QO=function(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps||ws.current)Ot=!0;else{if(!(d.lanes&E)&&!(m.flags&128))return Ot=!1,Kq(d,m,E);Ot=!!(d.flags&131072)}else Ot=!1,bi&&m.flags&1048576&&wy(m,Tg,m.index);switch(m.lanes=0,m.tag){case 2:var M=m.type;zS(d,m),d=m.pendingProps;var B=ku(m,Xr.current);Wl(m,E),B=Dg(null,m,M,d,B,E);var U=Zd();return m.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ls(M)?(U=!0,Ou(m)):U=!1,m.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,Qd(m),B.updater=Kl,m.stateNode=B,B._reactInternals=m,oh(m,M,d,E),m=An(null,m,M,!0,U,E)):(m.tag=0,bi&&U&&by(m),ai(null,m,B,E),m=m.child),m;case 16:M=m.elementType;e:{switch(zS(d,m),d=m.pendingProps,B=M._init,M=B(M._payload),m.type=M,B=m.tag=lJ(M),d=Ea(M,d),B){case 0:m=en(null,m,M,d,E);break e;case 1:m=In(null,m,M,d,E);break e;case 11:m=_o(null,m,M,d,E);break e;case 14:m=De(null,m,M,Ea(M.type,d),E);break e}throw Error(t(306,M,""))}return m;case 0:return M=m.type,B=m.pendingProps,B=m.elementType===M?B:Ea(M,B),en(d,m,M,B,E);case 1:return M=m.type,B=m.pendingProps,B=m.elementType===M?B:Ea(M,B),In(d,m,M,B,E);case 3:e:{if(ei(m),d===null)throw Error(t(387));M=m.pendingProps,U=m.memoizedState,B=U.element,PS(d,m),Wi(m,M,null,E);var X=m.memoizedState;if(M=X.element,U.isDehydrated)if(U={element:M,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){B=N(Error(t(423)),m),m=Sr(d,m,M,E,B);break e}else if(M!==B){B=N(Error(t(424)),m),m=Sr(d,m,M,E,B);break e}else for(Ms=Ul(m.stateNode.containerInfo.firstChild),Yr=m,bi=!0,Xo=null,E=Hu(m,null,M,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(bc(),M===B){m=$u(d,m,E);break e}ai(d,m,M,E)}m=m.child}return m;case 5:return Ig(m),d===null&&bg(m),M=m.type,B=m.pendingProps,U=d!==null?d.memoizedProps:null,X=B.children,yy(M,B)?X=null:U!==null&&yy(M,U)&&(m.flags|=32),It(d,m),ai(d,m,X,E),m.child;case 6:return d===null&&bg(m),null;case 13:return VS(d,m,E);case 4:return ah(m,m.stateNode.containerInfo),M=m.pendingProps,d===null?m.child=Cc(m,null,M,E):ai(d,m,M,E),m.child;case 11:return M=m.type,B=m.pendingProps,B=m.elementType===M?B:Ea(M,B),_o(d,m,M,B,E);case 7:return ai(d,m,m.pendingProps,E),m.child;case 8:return ai(d,m,m.pendingProps.children,E),m.child;case 12:return ai(d,m,m.pendingProps.children,E),m.child;case 10:e:{if(M=m.type._context,B=m.pendingProps,U=m.memoizedProps,X=B.value,gi(Yd,M._currentValue),M._currentValue=X,U!==null)if(mo(U.value,X)){if(U.children===B.children&&!ws.current){m=$u(d,m,E);break e}}else for(U=m.child,U!==null&&(U.return=m);U!==null;){var ce=U.dependencies;if(ce!==null){X=U.child;for(var xe=ce.firstContext;xe!==null;){if(xe.context===M){if(U.tag===1){xe=Yo(-1,E&-E),xe.tag=2;var Fe=U.updateQueue;if(Fe!==null){Fe=Fe.shared;var ot=Fe.pending;ot===null?xe.next=xe:(xe.next=ot.next,ot.next=xe),Fe.pending=xe}}U.lanes|=E,xe=U.alternate,xe!==null&&(xe.lanes|=E),rh(U.return,E,m),ce.lanes|=E;break}xe=xe.next}}else if(U.tag===10)X=U.type===m.type?null:U.child;else if(U.tag===18){if(X=U.return,X===null)throw Error(t(341));X.lanes|=E,ce=X.alternate,ce!==null&&(ce.lanes|=E),rh(X,E,m),X=U.sibling}else X=U.child;if(X!==null)X.return=U;else for(X=U;X!==null;){if(X===m){X=null;break}if(U=X.sibling,U!==null){U.return=X.return,X=U;break}X=X.return}U=X}ai(d,m,B.children,E),m=m.child}return m;case 9:return B=m.type,M=m.pendingProps.children,Wl(m,E),B=Cs(B),M=M(B),m.flags|=1,ai(d,m,M,E),m.child;case 14:return M=m.type,B=Ea(M,m.pendingProps),B=Ea(M.type,B),De(d,m,M,B,E);case 15:return Te(d,m,m.type,m.pendingProps,E);case 17:return M=m.type,B=m.pendingProps,B=m.elementType===M?B:Ea(M,B),zS(d,m),m.tag=1,ls(M)?(d=!0,Ou(m)):d=!1,Wl(m,E),sh(m,M,B),oh(m,M,B,E),An(null,m,M,!0,d,E);case 19:return RO(d,m,E);case 22:return Ge(d,m,E)}throw Error(t(156,m.tag))};function ZO(d,m){return le(d,m)}function aJ(d,m,E,M){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(d,m,E,M){return new aJ(d,m,E,M)}function wM(d){return d=d.prototype,!(!d||!d.isReactComponent)}function lJ(d){if(typeof d=="function")return wM(d)?1:0;if(d!=null){if(d=d.$$typeof,d===H)return 11;if(d===te)return 14}return 2}function vh(d,m){var E=d.alternate;return E===null?(E=nl(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&14680064,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E}function eE(d,m,E,M,B,U){var X=2;if(M=d,typeof d=="function")wM(d)&&(X=1);else if(typeof d=="string")X=5;else e:switch(d){case P:return cp(E.children,B,U,m);case k:X=8,B|=8;break;case I:return d=nl(12,E,m,B|2),d.elementType=I,d.lanes=U,d;case q:return d=nl(13,E,m,B),d.elementType=q,d.lanes=U,d;case W:return d=nl(19,E,m,B),d.elementType=W,d.lanes=U,d;case ne:return tE(E,B,U,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case D:X=10;break e;case G:X=9;break e;case H:X=11;break e;case te:X=14;break e;case ee:X=16,M=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return m=nl(X,E,m,B),m.elementType=d,m.type=M,m.lanes=U,m}function cp(d,m,E,M){return d=nl(7,d,M,m),d.lanes=E,d}function tE(d,m,E,M){return d=nl(22,d,M,m),d.elementType=ne,d.lanes=E,d.stateNode={isHidden:!1},d}function bM(d,m,E){return d=nl(6,d,null,m),d.lanes=E,d}function MM(d,m,E){return m=nl(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function cJ(d,m,E,M,B){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gs(0),this.expirationTimes=Gs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gs(0),this.identifierPrefix=M,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function CM(d,m,E,M,B,U,X,ce,xe){return d=new cJ(d,m,E,ce,xe),m===1?(m=1,U===!0&&(m|=8)):m=0,U=nl(3,null,null,m),d.current=U,U.stateNode=d,U.memoizedState={element:M,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(U),d}function uJ(d,m,E){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:M==null?null:""+M,children:d,containerInfo:m,implementation:E}}function eF(d){if(!d)return Vl;d=d._reactInternals;e:{if(J(d)!==d||d.tag!==1)throw Error(t(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ls(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(d.tag===1){var E=d.type;if(ls(E))return jd(d,E,m)}return m}function tF(d,m,E,M,B,U,X,ce,xe){return d=CM(E,M,!0,d,B,U,X,ce,xe),d.context=eF(null),E=d.current,M=So(),B=mh(E),U=Yo(M,B),U.callback=m??null,Ja(E,U,B),d.current.lanes=B,yr(d,B,M),ea(d,M),d}function nE(d,m,E,M){var B=m.current,U=So(),X=mh(B);return E=eF(E),m.context===null?m.context=E:m.pendingContext=E,m=Yo(U,X),m.payload={element:d},M=M===void 0?null:M,M!==null&&(m.callback=M),d=Ja(B,m,X),d!==null&&(Jl(d,B,X,U),Di(d,B,X)),X}function iE(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function nF(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function RM(d,m){nF(d,m),(d=d.alternate)&&nF(d,m)}function fJ(){return null}var iF=typeof reportError=="function"?reportError:function(d){console.error(d)};function PM(d){this._internalRoot=d}rE.prototype.render=PM.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(t(409));nE(d,m,null,null)},rE.prototype.unmount=PM.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;op(function(){nE(null,d,null,null)}),m[vo]=null}};function rE(d){this._internalRoot=d}rE.prototype.unstable_scheduleHydration=function(d){if(d){var m=zm();d={blockedOn:null,target:d,priority:m};for(var E=0;E<yc.length&&m!==0&&m<yc[E].priority;E++);yc.splice(E,0,d),E===0&&jm(d)}};function IM(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function sE(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function rF(){}function hJ(d,m,E,M,B){if(B){if(typeof M=="function"){var U=M;M=function(){var Fe=iE(X);U.call(Fe)}}var X=tF(m,M,d,0,null,!1,!1,"",rF);return d._reactRootContainer=X,d[vo]=X.current,qf(d.nodeType===8?d.parentNode:d),op(),X}for(;B=d.lastChild;)d.removeChild(B);if(typeof M=="function"){var ce=M;M=function(){var Fe=iE(xe);ce.call(Fe)}}var xe=CM(d,0,!1,null,null,!1,!1,"",rF);return d._reactRootContainer=xe,d[vo]=xe.current,qf(d.nodeType===8?d.parentNode:d),op(function(){nE(m,xe,E,M)}),xe}function oE(d,m,E,M,B){var U=E._reactRootContainer;if(U){var X=U;if(typeof B=="function"){var ce=B;B=function(){var xe=iE(X);ce.call(xe)}}nE(m,X,d,B)}else X=hJ(E,m,d,B,M);return iE(X)}Rd=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var E=Nn(m.pendingLanes);E!==0&&(Of(m,E|1),ea(m,we()),!(si&6)&&(Hg=we()+500,qa()))}break;case 13:op(function(){var M=Ta(d,1);if(M!==null){var B=So();Jl(M,d,1,B)}}),RM(d,1)}},ey=function(d){if(d.tag===13){var m=Ta(d,134217728);if(m!==null){var E=So();Jl(m,d,134217728,E)}RM(d,134217728)}},pS=function(d){if(d.tag===13){var m=mh(d),E=Ta(d,m);if(E!==null){var M=So();Jl(E,d,m,M)}RM(d,m)}},zm=function(){return ni},$m=function(d,m){var E=ni;try{return ni=d,m()}finally{ni=E}},qe=function(d,m,E){switch(m){case"input":if(_e(d,E),m=E.name,E.type==="radio"&&m!=null){for(E=d;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<E.length;m++){var M=E[m];if(M!==d&&M.form===d.form){var B=Sg(M);if(!B)throw Error(t(90));ue(M),_e(M,B)}}}break;case"textarea":j(d,E);break;case"select":m=E.value,m!=null&&Dt(d,!!E.multiple,m,!1)}},qt=EM,En=op;var dJ={usingClientEntryPoint:!1,Events:[Gl,Ji,Sg,ze,ut,EM]},Gy={findFiberByHostInstance:wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pJ={bundleType:Gy.bundleType,version:Gy.version,rendererPackageName:Gy.rendererPackageName,rendererConfig:Gy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=oe(d),d===null?null:d.stateNode},findFiberByHostInstance:Gy.findFiberByHostInstance||fJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aE.isDisabled&&aE.supportsFiber)try{sn=aE.inject(pJ),Et=aE}catch{}}return ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dJ,ta.createPortal=function(d,m){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IM(m))throw Error(t(200));return uJ(d,m,null,E)},ta.createRoot=function(d,m){if(!IM(d))throw Error(t(299));var E=!1,M="",B=iF;return m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(M=m.identifierPrefix),m.onRecoverableError!==void 0&&(B=m.onRecoverableError)),m=CM(d,1,!1,null,null,E,!1,M,B),d[vo]=m.current,qf(d.nodeType===8?d.parentNode:d),new PM(m)},ta.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=oe(m),d=d===null?null:d.stateNode,d},ta.flushSync=function(d){return op(d)},ta.hydrate=function(d,m,E){if(!sE(m))throw Error(t(200));return oE(null,d,m,!0,E)},ta.hydrateRoot=function(d,m,E){if(!IM(d))throw Error(t(405));var M=E!=null&&E.hydratedSources||null,B=!1,U="",X=iF;if(E!=null&&(E.unstable_strictMode===!0&&(B=!0),E.identifierPrefix!==void 0&&(U=E.identifierPrefix),E.onRecoverableError!==void 0&&(X=E.onRecoverableError)),m=tF(m,null,d,1,E??null,B,!1,U,X),d[vo]=m.current,qf(d),M)for(d=0;d<M.length;d++)E=M[d],B=E._getVersion,B=B(E._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[E,B]:m.mutableSourceEagerHydrationData.push(E,B);return new rE(m)},ta.render=function(d,m,E){if(!sE(m))throw Error(t(200));return oE(null,d,m,!1,E)},ta.unmountComponentAtNode=function(d){if(!sE(d))throw Error(t(40));return d._reactRootContainer?(op(function(){oE(null,null,d,!1,function(){d._reactRootContainer=null,d[vo]=null})}),!0):!1},ta.unstable_batchedUpdates=EM,ta.unstable_renderSubtreeIntoContainer=function(d,m,E,M){if(!sE(E))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return oE(d,m,E,!1,M)},ta.version="18.2.0-next-9e3b772b8-20220608",ta}var hF;function Pz(){if(hF)return BM.exports;hF=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),BM.exports=AJ(),BM.exports}var dF;function TJ(){if(dF)return lE;dF=1;var n=Pz();return lE.createRoot=n.createRoot,lE.hydrateRoot=n.hydrateRoot,lE}var OD=TJ();function Vi(){return Vi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vi.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const w1="159",wJ={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bJ={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Iz=0,NP=1,Lz=2,MJ=3,CJ=0,FD=1,ND=2,Uc=3,uu=0,Fo=1,xl=2,RJ=2,Qc=0,im=1,UP=2,GP=3,VP=4,Dz=5,Nh=100,Bz=101,kz=102,HP=103,zP=104,Oz=200,Fz=201,Nz=202,Uz=203,RT=204,PT=205,Gz=206,Vz=207,Hz=208,zz=209,$z=210,Wz=211,jz=212,Kz=213,Xz=214,Yz=0,qz=1,Jz=2,E_=3,Qz=4,Zz=5,e$=6,t$=7,b1=0,n$=1,i$=2,Zc=0,r$=1,s$=2,o$=3,UD=4,a$=5,$P="attached",l$="detached",rd=300,fu=301,sd=302,_m=303,A_=304,Fv=306,hu=1e3,Ri=1001,fv=1002,pr=1003,T_=1004,PJ=1004,J0=1005,IJ=1005,oi=1006,$w=1007,LJ=1007,du=1008,WP=1008,wl=1009,GD=1010,VD=1011,Ww=1012,jw=1013,Kc=1014,Wr=1015,ys=1016,HD=1017,zD=1018,Yh=1020,c$=1021,ts=1023,u$=1024,f$=1025,qh=1026,Sm=1027,$D=1028,WD=1029,h$=1030,jD=1031,KD=1033,YA=33776,qA=33777,JA=33778,QA=33779,jP=35840,KP=35841,XP=35842,YP=35843,XD=36196,qP=37492,JP=37496,QP=37808,ZP=37809,eI=37810,tI=37811,nI=37812,iI=37813,rI=37814,sI=37815,oI=37816,aI=37817,lI=37818,cI=37819,uI=37820,fI=37821,ZA=36492,hI=36494,dI=36495,d$=36283,pI=36284,mI=36285,gI=36286,p$=2200,m$=2201,g$=2202,hv=2300,Em=2301,eT=2302,Hp=2400,zp=2401,w_=2402,Kw=2500,YD=2501,v$=0,qD=1,IT=2,Xw=3e3,eu=3001,y$=3200,x$=3201,Sd=0,_$=1,Da="",Hr="srgb",Ha="srgb-linear",Yw="display-p3",M1="display-p3-linear",b_="linear",ki="srgb",M_="rec709",C_="p3",DJ=0,Cp=7680,BJ=7681,kJ=7682,OJ=7683,FJ=34055,NJ=34056,UJ=5386,GJ=512,VJ=513,HJ=514,zJ=515,$J=516,WJ=517,jJ=518,vI=519,S$=512,E$=513,A$=514,JD=515,T$=516,w$=517,b$=518,M$=519,R_=35044,Rp=35048,KJ=35040,XJ=35045,YJ=35049,qJ=35041,JJ=35046,QJ=35050,ZJ=35042,eQ="100",yI="300 es",LT=1035,cc=2e3,dv=2001;class Lf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let pF=1234567;const rm=Math.PI/180,pv=180/Math.PI;function Na(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ys[n&255]+Ys[n>>8&255]+Ys[n>>16&255]+Ys[n>>24&255]+"-"+Ys[e&255]+Ys[e>>8&255]+"-"+Ys[e>>16&15|64]+Ys[e>>24&255]+"-"+Ys[t&63|128]+Ys[t>>8&255]+"-"+Ys[t>>16&255]+Ys[t>>24&255]+Ys[i&255]+Ys[i>>8&255]+Ys[i>>16&255]+Ys[i>>24&255]).toLowerCase()}function mr(n,e,t){return Math.max(e,Math.min(t,n))}function QD(n,e){return(n%e+e)%e}function tQ(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function nQ(n,e,t){return n!==e?(t-n)/(e-n):0}function Gx(n,e,t){return(1-t)*n+t*e}function iQ(n,e,t,i){return Gx(n,e,1-Math.exp(-t*i))}function rQ(n,e=1){return e-Math.abs(QD(n,e*2)-e)}function sQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function oQ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function aQ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function lQ(n,e){return n+Math.random()*(e-n)}function cQ(n){return n*(.5-Math.random())}function uQ(n){n!==void 0&&(pF=n);let e=pF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fQ(n){return n*rm}function hQ(n){return n*pv}function xI(n){return(n&n-1)===0&&n!==0}function dQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function DT(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pQ(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),p=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*p,a*c);break;case"YXY":n.set(l*p,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ca(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Fn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Gn={DEG2RAD:rm,RAD2DEG:pv,generateUUID:Na,clamp:mr,euclideanModulo:QD,mapLinear:tQ,inverseLerp:nQ,lerp:Gx,damp:iQ,pingpong:rQ,smoothstep:sQ,smootherstep:oQ,randInt:aQ,randFloat:lQ,randFloatSpread:cQ,seededRandom:uQ,degToRad:fQ,radToDeg:hQ,isPowerOfTwo:xI,ceilPowerOfTwo:dQ,floorPowerOfTwo:DT,setQuaternionFromProperEuler:pQ,normalize:Fn,denormalize:ca};class Qe{constructor(e=0,t=0){Qe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class On{constructor(e,t,i,r,s,o,a,l,c){On.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],p=i[5],g=i[8],v=r[0],_=r[3],S=r[6],A=r[1],T=r[4],b=r[7],C=r[2],L=r[5],P=r[8];return s[0]=o*v+a*A+l*C,s[3]=o*_+a*T+l*L,s[6]=o*S+a*b+l*P,s[1]=c*v+u*A+f*C,s[4]=c*_+u*T+f*L,s[7]=c*S+u*b+f*P,s[2]=h*v+p*A+g*C,s[5]=h*_+p*T+g*L,s[8]=h*S+p*b+g*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,p=c*s-o*l,g=t*f+i*h+r*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(r*c-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=h*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=p*v,e[7]=(i*l-c*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(FM.makeScale(e,t)),this}rotate(e){return this.premultiply(FM.makeRotation(-e)),this}translate(e,t){return this.premultiply(FM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const FM=new On;function C$(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const mQ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function P0(n,e){return new mQ[n](e)}function P_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function R$(){const n=P_("canvas");return n.style.display="block",n}const mF={};function Vx(n){n in mF||(mF[n]=!0,console.warn(n))}const gF=new On().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),vF=new On().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),cE={[Ha]:{transfer:b_,primaries:M_,toReference:n=>n,fromReference:n=>n},[Hr]:{transfer:ki,primaries:M_,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[M1]:{transfer:b_,primaries:C_,toReference:n=>n.applyMatrix3(vF),fromReference:n=>n.applyMatrix3(gF)},[Yw]:{transfer:ki,primaries:C_,toReference:n=>n.convertSRGBToLinear().applyMatrix3(vF),fromReference:n=>n.applyMatrix3(gF).convertLinearToSRGB()}},gQ=new Set([Ha,M1]),yi={enabled:!0,_workingColorSpace:Ha,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!gQ.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=cE[e].toReference,r=cE[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return cE[n].primaries},getTransfer:function(n){return n===Da?b_:cE[n].transfer}};function Q0(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function NM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let $g;class ZD{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{$g===void 0&&($g=P_("canvas")),$g.width=e.width,$g.height=e.height;const i=$g.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=$g}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=P_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Q0(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Q0(t[i]/255)*255):t[i]=Q0(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vQ=0;class $p{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vQ++}),this.uuid=Na(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(UM(r[o].image)):s.push(UM(r[o]))}else s=UM(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function UM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ZD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yQ=0;class ri extends Lf{constructor(e=ri.DEFAULT_IMAGE,t=ri.DEFAULT_MAPPING,i=Ri,r=Ri,s=oi,o=du,a=ts,l=wl,c=ri.DEFAULT_ANISOTROPY,u=Da){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yQ++}),this.uuid=Na(),this.name="",this.source=new $p(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Vx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===eu?Hr:Da),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hu:e.x=e.x-Math.floor(e.x);break;case Ri:e.x=e.x<0?0:1;break;case fv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hu:e.y=e.y-Math.floor(e.y);break;case Ri:e.y=e.y<0?0:1;break;case fv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Vx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Hr?eu:Xw}set encoding(e){Vx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===eu?Hr:Da}}ri.DEFAULT_IMAGE=null;ri.DEFAULT_MAPPING=rd;ri.DEFAULT_ANISOTROPY=1;class qn{constructor(e=0,t=0,i=0,r=1){qn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],p=l[5],g=l[9],v=l[2],_=l[6],S=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-v)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+v)<.1&&Math.abs(g+_)<.1&&Math.abs(c+p+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(c+1)/2,b=(p+1)/2,C=(S+1)/2,L=(u+h)/4,P=(f+v)/4,k=(g+_)/4;return T>b&&T>C?T<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(T),r=L/i,s=P/i):b>C?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=L/r,s=k/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=P/s,r=k/s),this.set(i,r,s,t),this}let A=Math.sqrt((_-g)*(_-g)+(f-v)*(f-v)+(h-u)*(h-u));return Math.abs(A)<.001&&(A=1),this.x=(_-g)/A,this.y=(f-v)/A,this.z=(h-u)/A,this.w=Math.acos((c+p+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class P$ extends Lf{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qn(0,0,e,t),this.scissorTest=!1,this.viewport=new qn(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Vx("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===eu?Hr:Da),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new ri(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $p(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class No extends P${constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class qw extends ri{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=pr,this.minFilter=pr,this.wrapR=Ri,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xQ extends No{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new qw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class e2 extends ri{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=pr,this.minFilter=pr,this.wrapR=Ri,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _Q extends No{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new e2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class SQ extends No{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Pi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=s[o+0],p=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(f!==v||l!==h||c!==p||u!==g){let _=1-a;const S=l*h+c*p+u*g+f*v,A=S>=0?1:-1,T=1-S*S;if(T>Number.EPSILON){const C=Math.sqrt(T),L=Math.atan2(C,S*A);_=Math.sin(_*L)/C,a=Math.sin(a*L)/C}const b=a*A;if(l=l*_+h*b,c=c*_+p*b,u=u*_+g*b,f=f*_+v*b,_===1-a){const C=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=C,c*=C,u*=C,f*=C}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],h=s[o+1],p=s[o+2],g=s[o+3];return e[t]=a*g+u*f+l*p-c*h,e[t+1]=l*g+u*h+c*f-a*p,e[t+2]=c*g+u*p+a*h-l*f,e[t+3]=u*g-a*f-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),h=l(i/2),p=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*p*g,this._y=c*p*f-h*u*g,this._z=c*u*g+h*p*f,this._w=c*u*f-h*p*g;break;case"YXZ":this._x=h*u*f+c*p*g,this._y=c*p*f-h*u*g,this._z=c*u*g-h*p*f,this._w=c*u*f+h*p*g;break;case"ZXY":this._x=h*u*f-c*p*g,this._y=c*p*f+h*u*g,this._z=c*u*g+h*p*f,this._w=c*u*f-h*p*g;break;case"ZYX":this._x=h*u*f-c*p*g,this._y=c*p*f+h*u*g,this._z=c*u*g-h*p*f,this._w=c*u*f+h*p*g;break;case"YZX":this._x=h*u*f+c*p*g,this._y=c*p*f+h*u*g,this._z=c*u*g-h*p*f,this._w=c*u*f-h*p*g;break;case"XZY":this._x=h*u*f-c*p*g,this._y=c*p*f-h*u*g,this._z=c*u*g+h*p*f,this._w=c*u*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],h=i+a+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(i>a&&i>f){const p=2*Math.sqrt(1+i-a-f);this._w=(u-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>f){const p=2*Math.sqrt(1+a-i-f);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+f-i-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mr(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*i+t*this._x,this._y=p*r+t*this._y,this._z=p*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,i=0){re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return GM.copy(this).projectOnVector(e),this.sub(GM)}reflect(e){return this.sub(GM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const GM=new re,yF=new Pi;class Fs{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ql.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ql.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ql.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ql):Ql.fromBufferAttribute(s,o),Ql.applyMatrix4(e.matrixWorld),this.expandByPoint(Ql);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),uE.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),uE.copy(i.boundingBox)),uE.applyMatrix4(e.matrixWorld),this.union(uE)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ql),Ql.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hy),fE.subVectors(this.max,Hy),Wg.subVectors(e.a,Hy),jg.subVectors(e.b,Hy),Kg.subVectors(e.c,Hy),xh.subVectors(jg,Wg),_h.subVectors(Kg,jg),up.subVectors(Wg,Kg);let t=[0,-xh.z,xh.y,0,-_h.z,_h.y,0,-up.z,up.y,xh.z,0,-xh.x,_h.z,0,-_h.x,up.z,0,-up.x,-xh.y,xh.x,0,-_h.y,_h.x,0,-up.y,up.x,0];return!VM(t,Wg,jg,Kg,fE)||(t=[1,0,0,0,1,0,0,0,1],!VM(t,Wg,jg,Kg,fE))?!1:(hE.crossVectors(xh,_h),t=[hE.x,hE.y,hE.z],VM(t,Wg,jg,Kg,fE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ql).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ql).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ju[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ju[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ju[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ju[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ju[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ju[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ju[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ju[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ju),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ju=[new re,new re,new re,new re,new re,new re,new re,new re],Ql=new re,uE=new Fs,Wg=new re,jg=new re,Kg=new re,xh=new re,_h=new re,up=new re,Hy=new re,fE=new re,hE=new re,fp=new re;function VM(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){fp.fromArray(n,s);const a=r.x*Math.abs(fp.x)+r.y*Math.abs(fp.y)+r.z*Math.abs(fp.z),l=e.dot(fp),c=t.dot(fp),u=i.dot(fp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const EQ=new Fs,zy=new re,HM=new re;class xs{constructor(e=new re,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):EQ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zy.subVectors(e,this.center);const t=zy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(zy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(HM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zy.copy(e.center).add(HM)),this.expandByPoint(zy.copy(e.center).sub(HM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ku=new re,zM=new re,dE=new re,Sh=new re,$M=new re,pE=new re,WM=new re;class Nv{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ku)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ku.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ku.copy(this.origin).addScaledVector(this.direction,t),Ku.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){zM.copy(e).add(t).multiplyScalar(.5),dE.copy(t).sub(e).normalize(),Sh.copy(this.origin).sub(zM);const s=e.distanceTo(t)*.5,o=-this.direction.dot(dE),a=Sh.dot(this.direction),l=-Sh.dot(dE),c=Sh.lengthSq(),u=Math.abs(1-o*o);let f,h,p,g;if(u>0)if(f=o*l-a,h=o*a-l,g=s*u,f>=0)if(h>=-g)if(h<=g){const v=1/u;f*=v,h*=v,p=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;else h<=-g?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+c):h<=g?(f=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(zM).addScaledVector(dE,h),p}intersectSphere(e,t){Ku.subVectors(e.center,this.origin);const i=Ku.dot(this.direction),r=Ku.dot(Ku)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ku)!==null}intersectTriangle(e,t,i,r,s){$M.subVectors(t,e),pE.subVectors(i,e),WM.crossVectors($M,pE);let o=this.direction.dot(WM),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Sh.subVectors(this.origin,e);const l=a*this.direction.dot(pE.crossVectors(Sh,pE));if(l<0)return null;const c=a*this.direction.dot($M.cross(Sh));if(c<0||l+c>o)return null;const u=-a*Sh.dot(WM);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Lt{constructor(e,t,i,r,s,o,a,l,c,u,f,h,p,g,v,_){Lt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,h,p,g,v,_)}set(e,t,i,r,s,o,a,l,c,u,f,h,p,g,v,_){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=o,S[9]=a,S[13]=l,S[2]=c,S[6]=u,S[10]=f,S[14]=h,S[3]=p,S[7]=g,S[11]=v,S[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Lt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Xg.setFromMatrixColumn(e,0).length(),s=1/Xg.setFromMatrixColumn(e,1).length(),o=1/Xg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,p=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=p+g*c,t[5]=h-v*c,t[9]=-a*l,t[2]=v-h*c,t[6]=g+p*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*f,g=c*u,v=c*f;t[0]=h+v*a,t[4]=g*a-p,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=p*a-g,t[6]=v+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*f,g=c*u,v=c*f;t[0]=h-v*a,t[4]=-o*f,t[8]=g+p*a,t[1]=p+g*a,t[5]=o*u,t[9]=v-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*f,g=a*u,v=a*f;t[0]=l*u,t[4]=g*c-p,t[8]=h*c+v,t[1]=l*f,t[5]=v*c+h,t[9]=p*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-h*f,t[8]=g*f+p,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*f+g,t[10]=h-v*f}else if(e.order==="XZY"){const h=o*l,p=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=h*f+v,t[5]=o*u,t[9]=p*f-g,t[2]=g*f-p,t[6]=a*u,t[10]=v*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(AQ,e,TQ)}lookAt(e,t,i){const r=this.elements;return Ma.subVectors(e,t),Ma.lengthSq()===0&&(Ma.z=1),Ma.normalize(),Eh.crossVectors(i,Ma),Eh.lengthSq()===0&&(Math.abs(i.z)===1?Ma.x+=1e-4:Ma.z+=1e-4,Ma.normalize(),Eh.crossVectors(i,Ma)),Eh.normalize(),mE.crossVectors(Ma,Eh),r[0]=Eh.x,r[4]=mE.x,r[8]=Ma.x,r[1]=Eh.y,r[5]=mE.y,r[9]=Ma.y,r[2]=Eh.z,r[6]=mE.z,r[10]=Ma.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],p=i[13],g=i[2],v=i[6],_=i[10],S=i[14],A=i[3],T=i[7],b=i[11],C=i[15],L=r[0],P=r[4],k=r[8],I=r[12],D=r[1],G=r[5],H=r[9],q=r[13],W=r[2],te=r[6],ee=r[10],ne=r[14],Y=r[3],Q=r[7],F=r[11],ie=r[15];return s[0]=o*L+a*D+l*W+c*Y,s[4]=o*P+a*G+l*te+c*Q,s[8]=o*k+a*H+l*ee+c*F,s[12]=o*I+a*q+l*ne+c*ie,s[1]=u*L+f*D+h*W+p*Y,s[5]=u*P+f*G+h*te+p*Q,s[9]=u*k+f*H+h*ee+p*F,s[13]=u*I+f*q+h*ne+p*ie,s[2]=g*L+v*D+_*W+S*Y,s[6]=g*P+v*G+_*te+S*Q,s[10]=g*k+v*H+_*ee+S*F,s[14]=g*I+v*q+_*ne+S*ie,s[3]=A*L+T*D+b*W+C*Y,s[7]=A*P+T*G+b*te+C*Q,s[11]=A*k+T*H+b*ee+C*F,s[15]=A*I+T*q+b*ne+C*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],p=e[14],g=e[3],v=e[7],_=e[11],S=e[15];return g*(+s*l*f-r*c*f-s*a*h+i*c*h+r*a*p-i*l*p)+v*(+t*l*p-t*c*h+s*o*h-r*o*p+r*c*u-s*l*u)+_*(+t*c*f-t*a*p-s*o*f+i*o*p+s*a*u-i*c*u)+S*(-r*a*u-t*l*f+t*a*h+r*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],p=e[11],g=e[12],v=e[13],_=e[14],S=e[15],A=f*_*c-v*h*c+v*l*p-a*_*p-f*l*S+a*h*S,T=g*h*c-u*_*c-g*l*p+o*_*p+u*l*S-o*h*S,b=u*v*c-g*f*c+g*a*p-o*v*p-u*a*S+o*f*S,C=g*f*l-u*v*l-g*a*h+o*v*h+u*a*_-o*f*_,L=t*A+i*T+r*b+s*C;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/L;return e[0]=A*P,e[1]=(v*h*s-f*_*s-v*r*p+i*_*p+f*r*S-i*h*S)*P,e[2]=(a*_*s-v*l*s+v*r*c-i*_*c-a*r*S+i*l*S)*P,e[3]=(f*l*s-a*h*s-f*r*c+i*h*c+a*r*p-i*l*p)*P,e[4]=T*P,e[5]=(u*_*s-g*h*s+g*r*p-t*_*p-u*r*S+t*h*S)*P,e[6]=(g*l*s-o*_*s-g*r*c+t*_*c+o*r*S-t*l*S)*P,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*p+t*l*p)*P,e[8]=b*P,e[9]=(g*f*s-u*v*s-g*i*p+t*v*p+u*i*S-t*f*S)*P,e[10]=(o*v*s-g*a*s+g*i*c-t*v*c-o*i*S+t*a*S)*P,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*p-t*a*p)*P,e[12]=C*P,e[13]=(u*v*r-g*f*r+g*i*h-t*v*h-u*i*_+t*f*_)*P,e[14]=(g*a*r-o*v*r-g*i*l+t*v*l+o*i*_-t*a*_)*P,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*h+t*a*h)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,h=s*c,p=s*u,g=s*f,v=o*u,_=o*f,S=a*f,A=l*c,T=l*u,b=l*f,C=i.x,L=i.y,P=i.z;return r[0]=(1-(v+S))*C,r[1]=(p+b)*C,r[2]=(g-T)*C,r[3]=0,r[4]=(p-b)*L,r[5]=(1-(h+S))*L,r[6]=(_+A)*L,r[7]=0,r[8]=(g+T)*P,r[9]=(_-A)*P,r[10]=(1-(h+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Xg.set(r[0],r[1],r[2]).length();const o=Xg.set(r[4],r[5],r[6]).length(),a=Xg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Zl.copy(this);const c=1/s,u=1/o,f=1/a;return Zl.elements[0]*=c,Zl.elements[1]*=c,Zl.elements[2]*=c,Zl.elements[4]*=u,Zl.elements[5]*=u,Zl.elements[6]*=u,Zl.elements[8]*=f,Zl.elements[9]*=f,Zl.elements[10]*=f,t.setFromRotationMatrix(Zl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=cc){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),h=(i+r)/(i-r);let p,g;if(a===cc)p=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===dv)p=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=cc){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),h=(t+e)*c,p=(i+r)*u;let g,v;if(a===cc)g=(o+s)*f,v=-2*f;else if(a===dv)g=s*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Xg=new re,Zl=new Lt,AQ=new re(0,0,0),TQ=new re(1,1,1),Eh=new re,mE=new re,Ma=new re,xF=new Lt,_F=new Pi;class so{constructor(e=0,t=0,i=0,r=so.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(mr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-mr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(mr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-mr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(mr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-mr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return xF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(xF,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _F.setFromEuler(this),this.setFromQuaternion(_F,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}so.DEFAULT_ORDER="XYZ";class sm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let wQ=0;const SF=new re,Yg=new Pi,Xu=new Lt,gE=new re,$y=new re,bQ=new re,MQ=new Pi,EF=new re(1,0,0),AF=new re(0,1,0),TF=new re(0,0,1),CQ={type:"added"},RQ={type:"removed"};class Hn extends Lf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wQ++}),this.uuid=Na(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const e=new re,t=new so,i=new Pi,r=new re(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Lt},normalMatrix:{value:new On}}),this.matrix=new Lt,this.matrixWorld=new Lt,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Yg.setFromAxisAngle(e,t),this.quaternion.multiply(Yg),this}rotateOnWorldAxis(e,t){return Yg.setFromAxisAngle(e,t),this.quaternion.premultiply(Yg),this}rotateX(e){return this.rotateOnAxis(EF,e)}rotateY(e){return this.rotateOnAxis(AF,e)}rotateZ(e){return this.rotateOnAxis(TF,e)}translateOnAxis(e,t){return SF.copy(e).applyQuaternion(this.quaternion),this.position.add(SF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(EF,e)}translateY(e){return this.translateOnAxis(AF,e)}translateZ(e){return this.translateOnAxis(TF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xu.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?gE.copy(e):gE.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),$y.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xu.lookAt($y,gE,this.up):Xu.lookAt(gE,$y,this.up),this.quaternion.setFromRotationMatrix(Xu),r&&(Xu.extractRotation(r.matrixWorld),Yg.setFromRotationMatrix(Xu),this.quaternion.premultiply(Yg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(CQ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(RQ)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($y,e,bQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($y,MQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Hn.DEFAULT_UP=new re(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ec=new re,Yu=new re,jM=new re,qu=new re,qg=new re,Jg=new re,wF=new re,KM=new re,XM=new re,YM=new re;let vE=!1;class la{constructor(e=new re,t=new re,i=new re){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ec.subVectors(e,t),r.cross(ec);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ec.subVectors(r,t),Yu.subVectors(i,t),jM.subVectors(e,t);const o=ec.dot(ec),a=ec.dot(Yu),l=ec.dot(jM),c=Yu.dot(Yu),u=Yu.dot(jM),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,p=(c*l-a*u)*h,g=(o*u-a*l)*h;return s.set(1-p-g,g,p)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,qu),qu.x>=0&&qu.y>=0&&qu.x+qu.y<=1}static getUV(e,t,i,r,s,o,a,l){return vE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vE=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,qu),l.setScalar(0),l.addScaledVector(s,qu.x),l.addScaledVector(o,qu.y),l.addScaledVector(a,qu.z),l}static isFrontFacing(e,t,i,r){return ec.subVectors(i,t),Yu.subVectors(e,t),ec.cross(Yu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ec.subVectors(this.c,this.b),Yu.subVectors(this.a,this.b),ec.cross(Yu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return la.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return la.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return vE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vE=!0),la.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return la.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return la.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return la.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;qg.subVectors(r,i),Jg.subVectors(s,i),KM.subVectors(e,i);const l=qg.dot(KM),c=Jg.dot(KM);if(l<=0&&c<=0)return t.copy(i);XM.subVectors(e,r);const u=qg.dot(XM),f=Jg.dot(XM);if(u>=0&&f<=u)return t.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(qg,o);YM.subVectors(e,s);const p=qg.dot(YM),g=Jg.dot(YM);if(g>=0&&p<=g)return t.copy(s);const v=p*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Jg,a);const _=u*g-p*f;if(_<=0&&f-u>=0&&p-g>=0)return wF.subVectors(s,r),a=(f-u)/(f-u+(p-g)),t.copy(r).addScaledVector(wF,a);const S=1/(_+v+h);return o=v*S,a=h*S,t.copy(i).addScaledVector(qg,o).addScaledVector(Jg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const I$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ah={h:0,s:0,l:0},yE={h:0,s:0,l:0};function qM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let ht=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Hr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yi.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=yi.workingColorSpace){return this.r=e,this.g=t,this.b=i,yi.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=yi.workingColorSpace){if(e=QD(e,1),t=mr(t,0,1),i=mr(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=qM(o,s,e+1/3),this.g=qM(o,s,e),this.b=qM(o,s,e-1/3)}return yi.toWorkingColorSpace(this,r),this}setStyle(e,t=Hr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Hr){const i=I$[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Q0(e.r),this.g=Q0(e.g),this.b=Q0(e.b),this}copyLinearToSRGB(e){return this.r=NM(e.r),this.g=NM(e.g),this.b=NM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hr){return yi.fromWorkingColorSpace(qs.copy(this),e),Math.round(mr(qs.r*255,0,255))*65536+Math.round(mr(qs.g*255,0,255))*256+Math.round(mr(qs.b*255,0,255))}getHexString(e=Hr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yi.workingColorSpace){yi.fromWorkingColorSpace(qs.copy(this),t);const i=qs.r,r=qs.g,s=qs.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=yi.workingColorSpace){return yi.fromWorkingColorSpace(qs.copy(this),t),e.r=qs.r,e.g=qs.g,e.b=qs.b,e}getStyle(e=Hr){yi.fromWorkingColorSpace(qs.copy(this),e);const t=qs.r,i=qs.g,r=qs.b;return e!==Hr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ah),this.setHSL(Ah.h+e,Ah.s+t,Ah.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ah),e.getHSL(yE);const i=Gx(Ah.h,yE.h,t),r=Gx(Ah.s,yE.s,t),s=Gx(Ah.l,yE.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const qs=new ht;ht.NAMES=I$;let PQ=0;class is extends Lf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:PQ++}),this.uuid=Na(),this.name="",this.type="Material",this.blending=im,this.side=uu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=RT,this.blendDst=PT,this.blendEquation=Nh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ht(0,0,0),this.blendAlpha=0,this.depthFunc=E_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cp,this.stencilZFail=Cp,this.stencilZPass=Cp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==im&&(i.blending=this.blending),this.side!==uu&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==RT&&(i.blendSrc=this.blendSrc),this.blendDst!==PT&&(i.blendDst=this.blendDst),this.blendEquation!==Nh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==E_&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vI&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cp&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Cp&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Cp&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ua extends is{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const uf=IQ();function IQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function na(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=mr(n,-65504,65504),uf.floatView[0]=n;const e=uf.uint32View[0],t=e>>23&511;return uf.baseTable[t]+((e&8388607)>>uf.shiftTable[t])}function Ax(n){const e=n>>10;return uf.uint32View[0]=uf.mantissaTable[uf.offsetTable[e]+(n&1023)]+uf.exponentTable[e],uf.floatView[0]}const Wp={toHalfFloat:na,fromHalfFloat:Ax},Ur=new re,xE=new Qe;class Jn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=R_,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Wr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)xE.fromBufferAttribute(this,t),xE.applyMatrix3(e),this.setXY(t,xE.x,xE.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix3(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ca(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Fn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ca(t,this.array)),t}setX(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ca(t,this.array)),t}setY(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ca(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ca(t,this.array)),t}setW(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array),s=Fn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==R_&&(e.usage=this.usage),e}}class LQ extends Jn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class DQ extends Jn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class BQ extends Jn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class kQ extends Jn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class C1 extends Jn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class OQ extends Jn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class t2 extends Jn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class FQ extends Jn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ax(this.array[e*this.itemSize]);return this.normalized&&(t=ca(t,this.array)),t}setX(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize]=na(t),this}getY(e){let t=Ax(this.array[e*this.itemSize+1]);return this.normalized&&(t=ca(t,this.array)),t}setY(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+1]=na(t),this}getZ(e){let t=Ax(this.array[e*this.itemSize+2]);return this.normalized&&(t=ca(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+2]=na(t),this}getW(e){let t=Ax(this.array[e*this.itemSize+3]);return this.normalized&&(t=ca(t,this.array)),t}setW(e,t){return this.normalized&&(t=Fn(t,this.array)),this.array[e*this.itemSize+3]=na(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(i),this.array[e+2]=na(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array),s=Fn(s,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(i),this.array[e+2]=na(r),this.array[e+3]=na(s),this}}class Ht extends Jn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class NQ extends Jn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let UQ=0;const il=new Lt,JM=new Hn,Qg=new re,Ca=new Fs,Wy=new Fs,hs=new re;class Mn extends Lf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:UQ++}),this.uuid=Na(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(C$(e)?t2:C1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new On().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return il.makeRotationFromQuaternion(e),this.applyMatrix4(il),this}rotateX(e){return il.makeRotationX(e),this.applyMatrix4(il),this}rotateY(e){return il.makeRotationY(e),this.applyMatrix4(il),this}rotateZ(e){return il.makeRotationZ(e),this.applyMatrix4(il),this}translate(e,t,i){return il.makeTranslation(e,t,i),this.applyMatrix4(il),this}scale(e,t,i){return il.makeScale(e,t,i),this.applyMatrix4(il),this}lookAt(e){return JM.lookAt(e),JM.updateMatrix(),this.applyMatrix4(JM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qg).negate(),this.translate(Qg.x,Qg.y,Qg.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ht(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ca.setFromBufferAttribute(s),this.morphTargetsRelative?(hs.addVectors(this.boundingBox.min,Ca.min),this.boundingBox.expandByPoint(hs),hs.addVectors(this.boundingBox.max,Ca.max),this.boundingBox.expandByPoint(hs)):(this.boundingBox.expandByPoint(Ca.min),this.boundingBox.expandByPoint(Ca.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new re,1/0);return}if(e){const i=this.boundingSphere.center;if(Ca.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Wy.setFromBufferAttribute(a),this.morphTargetsRelative?(hs.addVectors(Ca.min,Wy.min),Ca.expandByPoint(hs),hs.addVectors(Ca.max,Wy.max),Ca.expandByPoint(hs)):(Ca.expandByPoint(Wy.min),Ca.expandByPoint(Wy.max))}Ca.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)hs.fromBufferAttribute(a,c),l&&(Qg.fromBufferAttribute(e,c),hs.add(Qg)),r=Math.max(r,i.distanceToSquared(hs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let D=0;D<a;D++)c[D]=new re,u[D]=new re;const f=new re,h=new re,p=new re,g=new Qe,v=new Qe,_=new Qe,S=new re,A=new re;function T(D,G,H){f.fromArray(r,D*3),h.fromArray(r,G*3),p.fromArray(r,H*3),g.fromArray(o,D*2),v.fromArray(o,G*2),_.fromArray(o,H*2),h.sub(f),p.sub(f),v.sub(g),_.sub(g);const q=1/(v.x*_.y-_.x*v.y);isFinite(q)&&(S.copy(h).multiplyScalar(_.y).addScaledVector(p,-v.y).multiplyScalar(q),A.copy(p).multiplyScalar(v.x).addScaledVector(h,-_.x).multiplyScalar(q),c[D].add(S),c[G].add(S),c[H].add(S),u[D].add(A),u[G].add(A),u[H].add(A))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let D=0,G=b.length;D<G;++D){const H=b[D],q=H.start,W=H.count;for(let te=q,ee=q+W;te<ee;te+=3)T(i[te+0],i[te+1],i[te+2])}const C=new re,L=new re,P=new re,k=new re;function I(D){P.fromArray(s,D*3),k.copy(P);const G=c[D];C.copy(G),C.sub(P.multiplyScalar(P.dot(G))).normalize(),L.crossVectors(k,G);const q=L.dot(u[D])<0?-1:1;l[D*4]=C.x,l[D*4+1]=C.y,l[D*4+2]=C.z,l[D*4+3]=q}for(let D=0,G=b.length;D<G;++D){const H=b[D],q=H.start,W=H.count;for(let te=q,ee=q+W;te<ee;te+=3)I(i[te+0]),I(i[te+1]),I(i[te+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Jn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const r=new re,s=new re,o=new re,a=new re,l=new re,c=new re,u=new re,f=new re;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),v=e.getX(h+1),_=e.getX(h+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,_),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,_),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hs.fromBufferAttribute(e,t),hs.normalize(),e.setXYZ(t,hs.x,hs.y,hs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let p=0,g=0;for(let v=0,_=l.length;v<_;v++){a.isInterleavedBufferAttribute?p=l[v]*a.data.stride+a.offset:p=l[v]*u;for(let S=0;S<u;S++)h[g++]=c[p++]}return new Jn(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],p=e(h,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const p=c[f];u.push(p.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,p=f.length;h<p;h++)u.push(f[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const bF=new Lt,hp=new Nv,_E=new xs,MF=new re,Zg=new re,e0=new re,t0=new re,QM=new re,SE=new re,EE=new Qe,AE=new Qe,TE=new Qe,CF=new re,RF=new re,PF=new re,wE=new re,bE=new re;class Ni extends Hn{constructor(e=new Mn,t=new ua){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){SE.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(QM.fromBufferAttribute(f,e),o?SE.addScaledVector(QM,u):SE.addScaledVector(QM.sub(t),u))}t.add(SE)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),_E.copy(i.boundingSphere),_E.applyMatrix4(s),hp.copy(e.ray).recast(e.near),!(_E.containsPoint(hp.origin)===!1&&(hp.intersectSphere(_E,MF)===null||hp.origin.distanceToSquared(MF)>(e.far-e.near)**2))&&(bF.copy(s).invert(),hp.copy(e.ray).applyMatrix4(bF),!(i.boundingBox!==null&&hp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,hp)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){const _=h[g],S=o[_.materialIndex],A=Math.max(_.start,p.start),T=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let b=A,C=T;b<C;b+=3){const L=a.getX(b),P=a.getX(b+1),k=a.getX(b+2);r=ME(this,S,e,i,c,u,f,L,P,k),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const g=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let _=g,S=v;_<S;_+=3){const A=a.getX(_),T=a.getX(_+1),b=a.getX(_+2);r=ME(this,o,e,i,c,u,f,A,T,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=h.length;g<v;g++){const _=h[g],S=o[_.materialIndex],A=Math.max(_.start,p.start),T=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let b=A,C=T;b<C;b+=3){const L=b,P=b+1,k=b+2;r=ME(this,S,e,i,c,u,f,L,P,k),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let _=g,S=v;_<S;_+=3){const A=_,T=_+1,b=_+2;r=ME(this,o,e,i,c,u,f,A,T,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function GQ(n,e,t,i,r,s,o,a){let l;if(e.side===Fo?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===uu,a),l===null)return null;bE.copy(a),bE.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(bE);return c<t.near||c>t.far?null:{distance:c,point:bE.clone(),object:n}}function ME(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Zg),n.getVertexPosition(l,e0),n.getVertexPosition(c,t0);const u=GQ(n,e,t,i,Zg,e0,t0,wE);if(u){r&&(EE.fromBufferAttribute(r,a),AE.fromBufferAttribute(r,l),TE.fromBufferAttribute(r,c),u.uv=la.getInterpolation(wE,Zg,e0,t0,EE,AE,TE,new Qe)),s&&(EE.fromBufferAttribute(s,a),AE.fromBufferAttribute(s,l),TE.fromBufferAttribute(s,c),u.uv1=la.getInterpolation(wE,Zg,e0,t0,EE,AE,TE,new Qe),u.uv2=u.uv1),o&&(CF.fromBufferAttribute(o,a),RF.fromBufferAttribute(o,l),PF.fromBufferAttribute(o,c),u.normal=la.getInterpolation(wE,Zg,e0,t0,CF,RF,PF,new re),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new re,materialIndex:0};la.getNormal(Zg,e0,t0,f.normal),u.face=f}return u}class Ed extends Mn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(f,2));function g(v,_,S,A,T,b,C,L,P,k,I){const D=b/P,G=C/k,H=b/2,q=C/2,W=L/2,te=P+1,ee=k+1;let ne=0,Y=0;const Q=new re;for(let F=0;F<ee;F++){const ie=F*G-q;for(let he=0;he<te;he++){const pe=he*D-H;Q[v]=pe*A,Q[_]=ie*T,Q[S]=W,c.push(Q.x,Q.y,Q.z),Q[v]=0,Q[_]=0,Q[S]=L>0?1:-1,u.push(Q.x,Q.y,Q.z),f.push(he/P),f.push(1-F/k),ne+=1}}for(let F=0;F<k;F++)for(let ie=0;ie<P;ie++){const he=h+ie+te*F,pe=h+ie+te*(F+1),ye=h+(ie+1)+te*(F+1),Be=h+(ie+1)+te*F;l.push(he,pe,Be),l.push(pe,ye,Be),Y+=6}a.addGroup(p,Y,I),p+=Y,h+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ed(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mv(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function bo(n){const e={};for(let t=0;t<n.length;t++){const i=mv(n[t]);for(const r in i)e[r]=i[r]}return e}function VQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function L$(n){return n.getRenderTarget()===null?n.outputColorSpace:yi.workingColorSpace}const n2={clone:mv,merge:bo};var HQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fo extends is{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HQ,this.fragmentShader=zQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mv(e.uniforms),this.uniformsGroups=VQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class R1 extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Lt,this.projectionMatrix=new Lt,this.projectionMatrixInverse=new Lt,this.coordinateSystem=cc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class $r extends R1{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=pv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(rm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return pv*2*Math.atan(Math.tan(rm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(rm*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const n0=-90,i0=1;class D$ extends Hn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new $r(n0,i0,e,t);r.layers=this.layers,this.add(r);const s=new $r(n0,i0,e,t);s.layers=this.layers,this.add(s);const o=new $r(n0,i0,e,t);o.layers=this.layers,this.add(o);const a=new $r(n0,i0,e,t);a.layers=this.layers,this.add(a);const l=new $r(n0,i0,e,t);l.layers=this.layers,this.add(l);const c=new $r(n0,i0,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===cc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===dv)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,h,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class P1 extends ri{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:fu,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class i2 extends No{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Vx("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===eu?Hr:Da),this.texture=new P1(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ed(5,5,5),s=new fo({name:"CubemapFromEquirect",uniforms:mv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Fo,blending:Qc});s.uniforms.tEquirect.value=t;const o=new Ni(r,s),a=t.minFilter;return t.minFilter===du&&(t.minFilter=oi),new D$(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ZM=new re,$Q=new re,WQ=new On;class Oh{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ZM.subVectors(i,t).cross($Q.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ZM),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WQ.getNormalMatrix(e),r=this.coplanarPoint(ZM).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const dp=new xs,CE=new re;class I1{constructor(e=new Oh,t=new Oh,i=new Oh,r=new Oh,s=new Oh,o=new Oh){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=cc){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],h=r[7],p=r[8],g=r[9],v=r[10],_=r[11],S=r[12],A=r[13],T=r[14],b=r[15];if(i[0].setComponents(l-s,h-c,_-p,b-S).normalize(),i[1].setComponents(l+s,h+c,_+p,b+S).normalize(),i[2].setComponents(l+o,h+u,_+g,b+A).normalize(),i[3].setComponents(l-o,h-u,_-g,b-A).normalize(),i[4].setComponents(l-a,h-f,_-v,b-T).normalize(),t===cc)i[5].setComponents(l+a,h+f,_+v,b+T).normalize();else if(t===dv)i[5].setComponents(a,f,v,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),dp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),dp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dp)}intersectsSprite(e){return dp.center.set(0,0,0),dp.radius=.7071067811865476,dp.applyMatrix4(e.matrixWorld),this.intersectsSphere(dp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(CE.x=r.normal.x>0?e.max.x:e.min.x,CE.y=r.normal.y>0?e.max.y:e.min.y,CE.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(CE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function B$(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function jQ(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,h=c.usage,p=f.byteLength,g=n.createBuffer();n.bindBuffer(u,g),n.bufferData(u,f,h),c.onUploadCallback();let v;if(f instanceof Float32Array)v=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=n.SHORT;else if(f instanceof Uint32Array)v=n.UNSIGNED_INT;else if(f instanceof Int32Array)v=n.INT;else if(f instanceof Int8Array)v=n.BYTE;else if(f instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:g,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:p}}function s(c,u,f){const h=u.array,p=u._updateRange,g=u.updateRanges;if(n.bindBuffer(f,c),p.count===-1&&g.length===0&&n.bufferSubData(f,0,h),g.length!==0){for(let v=0,_=g.length;v<_;v++){const S=g[v];t?n.bufferSubData(f,S.start*h.BYTES_PER_ELEMENT,h,S.start,S.count):n.bufferSubData(f,S.start*h.BYTES_PER_ELEMENT,h.subarray(S.start,S.start+S.count))}u.clearUpdateRanges()}p.count!==-1&&(t?n.bufferSubData(f,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):n.bufferSubData(f,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);if(f===void 0)i.set(c,r(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class Df extends Mn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,h=t/l,p=[],g=[],v=[],_=[];for(let S=0;S<u;S++){const A=S*h-o;for(let T=0;T<c;T++){const b=T*f-s;g.push(b,-A,0),v.push(0,0,1),_.push(T/a),_.push(1-S/l)}}for(let S=0;S<l;S++)for(let A=0;A<a;A++){const T=A+c*S,b=A+c*(S+1),C=A+1+c*(S+1),L=A+1+c*S;p.push(T,b,L),p.push(b,C,L)}this.setIndex(p),this.setAttribute("position",new Ht(g,3)),this.setAttribute("normal",new Ht(v,3)),this.setAttribute("uv",new Ht(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.width,e.height,e.widthSegments,e.heightSegments)}}var KQ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,XQ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,YQ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JQ=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZQ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tZ=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,iZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,oZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,mZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_Z=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,SZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",TZ=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,wZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bZ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,MZ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,IZ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,LZ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,DZ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,BZ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,kZ=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,OZ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,FZ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,NZ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,UZ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,GZ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,VZ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HZ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zZ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$Z=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,WZ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jZ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,KZ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,XZ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,YZ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,qZ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,JZ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,QZ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ZZ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,eee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,tee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,nee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,iee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ree=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,see=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,oee=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,lee=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,cee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fee=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,vee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,yee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_ee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,See=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Eee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Aee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Tee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bee=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Mee=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Cee=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ree=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Pee=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Iee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lee=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Dee=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Bee=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,kee=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Oee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Fee=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Nee=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Uee=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Gee=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Vee=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Hee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$ee=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Wee=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jee=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Kee=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Yee=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jee=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Qee=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Zee=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ete=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tte=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,nte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ite=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ste=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ote=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ate=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ute=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_te=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ste=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ete=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ate=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,kn={alphahash_fragment:KQ,alphahash_pars_fragment:XQ,alphamap_fragment:YQ,alphamap_pars_fragment:qQ,alphatest_fragment:JQ,alphatest_pars_fragment:QQ,aomap_fragment:ZQ,aomap_pars_fragment:eZ,batching_pars_vertex:tZ,batching_vertex:nZ,begin_vertex:iZ,beginnormal_vertex:rZ,bsdfs:sZ,iridescence_fragment:oZ,bumpmap_pars_fragment:aZ,clipping_planes_fragment:lZ,clipping_planes_pars_fragment:cZ,clipping_planes_pars_vertex:uZ,clipping_planes_vertex:fZ,color_fragment:hZ,color_pars_fragment:dZ,color_pars_vertex:pZ,color_vertex:mZ,common:gZ,cube_uv_reflection_fragment:vZ,defaultnormal_vertex:yZ,displacementmap_pars_vertex:xZ,displacementmap_vertex:_Z,emissivemap_fragment:SZ,emissivemap_pars_fragment:EZ,colorspace_fragment:AZ,colorspace_pars_fragment:TZ,envmap_fragment:wZ,envmap_common_pars_fragment:bZ,envmap_pars_fragment:MZ,envmap_pars_vertex:CZ,envmap_physical_pars_fragment:GZ,envmap_vertex:RZ,fog_vertex:PZ,fog_pars_vertex:IZ,fog_fragment:LZ,fog_pars_fragment:DZ,gradientmap_pars_fragment:BZ,lightmap_fragment:kZ,lightmap_pars_fragment:OZ,lights_lambert_fragment:FZ,lights_lambert_pars_fragment:NZ,lights_pars_begin:UZ,lights_toon_fragment:VZ,lights_toon_pars_fragment:HZ,lights_phong_fragment:zZ,lights_phong_pars_fragment:$Z,lights_physical_fragment:WZ,lights_physical_pars_fragment:jZ,lights_fragment_begin:KZ,lights_fragment_maps:XZ,lights_fragment_end:YZ,logdepthbuf_fragment:qZ,logdepthbuf_pars_fragment:JZ,logdepthbuf_pars_vertex:QZ,logdepthbuf_vertex:ZZ,map_fragment:eee,map_pars_fragment:tee,map_particle_fragment:nee,map_particle_pars_fragment:iee,metalnessmap_fragment:ree,metalnessmap_pars_fragment:see,morphcolor_vertex:oee,morphnormal_vertex:aee,morphtarget_pars_vertex:lee,morphtarget_vertex:cee,normal_fragment_begin:uee,normal_fragment_maps:fee,normal_pars_fragment:hee,normal_pars_vertex:dee,normal_vertex:pee,normalmap_pars_fragment:mee,clearcoat_normal_fragment_begin:gee,clearcoat_normal_fragment_maps:vee,clearcoat_pars_fragment:yee,iridescence_pars_fragment:xee,opaque_fragment:_ee,packing:See,premultiplied_alpha_fragment:Eee,project_vertex:Aee,dithering_fragment:Tee,dithering_pars_fragment:wee,roughnessmap_fragment:bee,roughnessmap_pars_fragment:Mee,shadowmap_pars_fragment:Cee,shadowmap_pars_vertex:Ree,shadowmap_vertex:Pee,shadowmask_pars_fragment:Iee,skinbase_vertex:Lee,skinning_pars_vertex:Dee,skinning_vertex:Bee,skinnormal_vertex:kee,specularmap_fragment:Oee,specularmap_pars_fragment:Fee,tonemapping_fragment:Nee,tonemapping_pars_fragment:Uee,transmission_fragment:Gee,transmission_pars_fragment:Vee,uv_pars_fragment:Hee,uv_pars_vertex:zee,uv_vertex:$ee,worldpos_vertex:Wee,background_vert:jee,background_frag:Kee,backgroundCube_vert:Xee,backgroundCube_frag:Yee,cube_vert:qee,cube_frag:Jee,depth_vert:Qee,depth_frag:Zee,distanceRGBA_vert:ete,distanceRGBA_frag:tte,equirect_vert:nte,equirect_frag:ite,linedashed_vert:rte,linedashed_frag:ste,meshbasic_vert:ote,meshbasic_frag:ate,meshlambert_vert:lte,meshlambert_frag:cte,meshmatcap_vert:ute,meshmatcap_frag:fte,meshnormal_vert:hte,meshnormal_frag:dte,meshphong_vert:pte,meshphong_frag:mte,meshphysical_vert:gte,meshphysical_frag:vte,meshtoon_vert:yte,meshtoon_frag:xte,points_vert:_te,points_frag:Ste,shadow_vert:Ete,shadow_frag:Ate,sprite_vert:Tte,sprite_frag:wte},Ct={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new On}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new On}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new On}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new On},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new On},normalScale:{value:new Qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new On},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new On}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new On}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new On}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}}},ac={basic:{uniforms:bo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:kn.meshbasic_vert,fragmentShader:kn.meshbasic_frag},lambert:{uniforms:bo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new ht(0)}}]),vertexShader:kn.meshlambert_vert,fragmentShader:kn.meshlambert_frag},phong:{uniforms:bo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:kn.meshphong_vert,fragmentShader:kn.meshphong_frag},standard:{uniforms:bo([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:kn.meshphysical_vert,fragmentShader:kn.meshphysical_frag},toon:{uniforms:bo([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new ht(0)}}]),vertexShader:kn.meshtoon_vert,fragmentShader:kn.meshtoon_frag},matcap:{uniforms:bo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:kn.meshmatcap_vert,fragmentShader:kn.meshmatcap_frag},points:{uniforms:bo([Ct.points,Ct.fog]),vertexShader:kn.points_vert,fragmentShader:kn.points_frag},dashed:{uniforms:bo([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:kn.linedashed_vert,fragmentShader:kn.linedashed_frag},depth:{uniforms:bo([Ct.common,Ct.displacementmap]),vertexShader:kn.depth_vert,fragmentShader:kn.depth_frag},normal:{uniforms:bo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:kn.meshnormal_vert,fragmentShader:kn.meshnormal_frag},sprite:{uniforms:bo([Ct.sprite,Ct.fog]),vertexShader:kn.sprite_vert,fragmentShader:kn.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:kn.background_vert,fragmentShader:kn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:kn.backgroundCube_vert,fragmentShader:kn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:kn.cube_vert,fragmentShader:kn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:kn.equirect_vert,fragmentShader:kn.equirect_frag},distanceRGBA:{uniforms:bo([Ct.common,Ct.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:kn.distanceRGBA_vert,fragmentShader:kn.distanceRGBA_frag},shadow:{uniforms:bo([Ct.lights,Ct.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:kn.shadow_vert,fragmentShader:kn.shadow_frag}};ac.physical={uniforms:bo([ac.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new On},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new On},clearcoatNormalScale:{value:new Qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new On},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new On},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new On},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new On},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new On},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new On},transmissionSamplerSize:{value:new Qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new On},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new On},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new On},anisotropyVector:{value:new Qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new On}}]),vertexShader:kn.meshphysical_vert,fragmentShader:kn.meshphysical_frag};const RE={r:0,b:0,g:0};function bte(n,e,t,i,r,s,o){const a=new ht(0);let l=s===!0?0:1,c,u,f=null,h=0,p=null;function g(_,S){let A=!1,T=S.isScene===!0?S.background:null;T&&T.isTexture&&(T=(S.backgroundBlurriness>0?t:e).get(T)),T===null?v(a,l):T&&T.isColor&&(v(T,1),A=!0);const b=n.xr.getEnvironmentBlendMode();b==="additive"?i.buffers.color.setClear(0,0,0,1,o):b==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),T&&(T.isCubeTexture||T.mapping===Fv)?(u===void 0&&(u=new Ni(new Ed(1,1,1),new fo({name:"BackgroundCubeMaterial",uniforms:mv(ac.backgroundCube.uniforms),vertexShader:ac.backgroundCube.vertexShader,fragmentShader:ac.backgroundCube.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,L,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=T,u.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=yi.getTransfer(T.colorSpace)!==ki,(f!==T||h!==T.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=T,h=T.version,p=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new Ni(new Df(2,2),new fo({name:"BackgroundMaterial",uniforms:mv(ac.background.uniforms),vertexShader:ac.background.vertexShader,fragmentShader:ac.background.fragmentShader,side:uu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=yi.getTransfer(T.colorSpace)!==ki,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(f!==T||h!==T.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,f=T,h=T.version,p=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function v(_,S){_.getRGB(RE,L$(n)),i.buffers.color.setClear(RE.r,RE.g,RE.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(_,S=1){a.set(_),l=S,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,v(a,l)},render:g}}function Mte(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l,u=!1;function f(W,te,ee,ne,Y){let Q=!1;if(o){const F=v(ne,ee,te);c!==F&&(c=F,p(c.object)),Q=S(W,ne,ee,Y),Q&&A(W,ne,ee,Y)}else{const F=te.wireframe===!0;(c.geometry!==ne.id||c.program!==ee.id||c.wireframe!==F)&&(c.geometry=ne.id,c.program=ee.id,c.wireframe=F,Q=!0)}Y!==null&&t.update(Y,n.ELEMENT_ARRAY_BUFFER),(Q||u)&&(u=!1,k(W,te,ee,ne),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Y).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function p(W){return i.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function g(W){return i.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function v(W,te,ee){const ne=ee.wireframe===!0;let Y=a[W.id];Y===void 0&&(Y={},a[W.id]=Y);let Q=Y[te.id];Q===void 0&&(Q={},Y[te.id]=Q);let F=Q[ne];return F===void 0&&(F=_(h()),Q[ne]=F),F}function _(W){const te=[],ee=[],ne=[];for(let Y=0;Y<r;Y++)te[Y]=0,ee[Y]=0,ne[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:ee,attributeDivisors:ne,object:W,attributes:{},index:null}}function S(W,te,ee,ne){const Y=c.attributes,Q=te.attributes;let F=0;const ie=ee.getAttributes();for(const he in ie)if(ie[he].location>=0){const ye=Y[he];let Be=Q[he];if(Be===void 0&&(he==="instanceMatrix"&&W.instanceMatrix&&(Be=W.instanceMatrix),he==="instanceColor"&&W.instanceColor&&(Be=W.instanceColor)),ye===void 0||ye.attribute!==Be||Be&&ye.data!==Be.data)return!0;F++}return c.attributesNum!==F||c.index!==ne}function A(W,te,ee,ne){const Y={},Q=te.attributes;let F=0;const ie=ee.getAttributes();for(const he in ie)if(ie[he].location>=0){let ye=Q[he];ye===void 0&&(he==="instanceMatrix"&&W.instanceMatrix&&(ye=W.instanceMatrix),he==="instanceColor"&&W.instanceColor&&(ye=W.instanceColor));const Be={};Be.attribute=ye,ye&&ye.data&&(Be.data=ye.data),Y[he]=Be,F++}c.attributes=Y,c.attributesNum=F,c.index=ne}function T(){const W=c.newAttributes;for(let te=0,ee=W.length;te<ee;te++)W[te]=0}function b(W){C(W,0)}function C(W,te){const ee=c.newAttributes,ne=c.enabledAttributes,Y=c.attributeDivisors;ee[W]=1,ne[W]===0&&(n.enableVertexAttribArray(W),ne[W]=1),Y[W]!==te&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,te),Y[W]=te)}function L(){const W=c.newAttributes,te=c.enabledAttributes;for(let ee=0,ne=te.length;ee<ne;ee++)te[ee]!==W[ee]&&(n.disableVertexAttribArray(ee),te[ee]=0)}function P(W,te,ee,ne,Y,Q,F){F===!0?n.vertexAttribIPointer(W,te,ee,Y,Q):n.vertexAttribPointer(W,te,ee,ne,Y,Q)}function k(W,te,ee,ne){if(i.isWebGL2===!1&&(W.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const Y=ne.attributes,Q=ee.getAttributes(),F=te.defaultAttributeValues;for(const ie in Q){const he=Q[ie];if(he.location>=0){let pe=Y[ie];if(pe===void 0&&(ie==="instanceMatrix"&&W.instanceMatrix&&(pe=W.instanceMatrix),ie==="instanceColor"&&W.instanceColor&&(pe=W.instanceColor)),pe!==void 0){const ye=pe.normalized,Be=pe.itemSize,Me=t.get(pe);if(Me===void 0)continue;const Le=Me.buffer,je=Me.type,lt=Me.bytesPerElement,bt=i.isWebGL2===!0&&(je===n.INT||je===n.UNSIGNED_INT||pe.gpuType===jw);if(pe.isInterleavedBufferAttribute){const gt=pe.data,ue=gt.stride,Ne=pe.offset;if(gt.isInstancedInterleavedBuffer){for(let ke=0;ke<he.locationSize;ke++)C(he.location+ke,gt.meshPerAttribute);W.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let ke=0;ke<he.locationSize;ke++)b(he.location+ke);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let ke=0;ke<he.locationSize;ke++)P(he.location+ke,Be/he.locationSize,je,ye,ue*lt,(Ne+Be/he.locationSize*ke)*lt,bt)}else{if(pe.isInstancedBufferAttribute){for(let gt=0;gt<he.locationSize;gt++)C(he.location+gt,pe.meshPerAttribute);W.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let gt=0;gt<he.locationSize;gt++)b(he.location+gt);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let gt=0;gt<he.locationSize;gt++)P(he.location+gt,Be/he.locationSize,je,ye,Be*lt,Be/he.locationSize*gt*lt,bt)}}else if(F!==void 0){const ye=F[ie];if(ye!==void 0)switch(ye.length){case 2:n.vertexAttrib2fv(he.location,ye);break;case 3:n.vertexAttrib3fv(he.location,ye);break;case 4:n.vertexAttrib4fv(he.location,ye);break;default:n.vertexAttrib1fv(he.location,ye)}}}}L()}function I(){H();for(const W in a){const te=a[W];for(const ee in te){const ne=te[ee];for(const Y in ne)g(ne[Y].object),delete ne[Y];delete te[ee]}delete a[W]}}function D(W){if(a[W.id]===void 0)return;const te=a[W.id];for(const ee in te){const ne=te[ee];for(const Y in ne)g(ne[Y].object),delete ne[Y];delete te[ee]}delete a[W.id]}function G(W){for(const te in a){const ee=a[te];if(ee[W.id]===void 0)continue;const ne=ee[W.id];for(const Y in ne)g(ne[Y].object),delete ne[Y];delete ee[W.id]}}function H(){q(),u=!0,c!==l&&(c=l,p(c.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:H,resetDefaultState:q,dispose:I,releaseStatesOfGeometry:D,releaseStatesOfProgram:G,initAttributes:T,enableAttribute:b,disableUnusedAttributes:L}}function Cte(n,e,t,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,h){if(h===0)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,u,f,h),t.update(f,s,h)}function c(u,f,h){if(h===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<h;g++)this.render(u[g],f[g]);else{p.multiDrawArraysWEBGL(s,u,0,f,0,h);let g=0;for(let v=0;v<h;v++)g+=f[v];t.update(g,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function Rte(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=h>0,b=o||e.has("OES_texture_float"),C=T&&b,L=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:_,maxVaryings:S,maxFragmentUniforms:A,vertexTextures:T,floatFragmentTextures:b,floatVertexTextures:C,maxSamples:L}}function Pte(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Oh,a=new On,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||i!==0||r;return r=h,i=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=u(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,v=f.clipIntersection,_=f.clipShadows,S=n.get(f);if(!r||g===null||g.length===0||s&&!_)s?u(null):c();else{const A=s?0:i,T=A*4;let b=S.clippingState||null;l.value=b,b=u(g,h,T,p);for(let C=0;C!==T;++C)b[C]=t[C];S.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,p,g){const v=f!==null?f.length:0;let _=null;if(v!==0){if(_=l.value,g!==!0||_===null){const S=p+v*4,A=h.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<S)&&(_=new Float32Array(S));for(let T=0,b=p;T!==v;++T,b+=4)o.copy(f[T]).applyMatrix4(A,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function Ite(n){let e=new WeakMap;function t(o,a){return a===_m?o.mapping=fu:a===A_&&(o.mapping=sd),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===_m||a===A_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new i2(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ad extends R1{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const I0=4,IF=[.125,.215,.35,.446,.526,.582],Gp=20,eC=new Ad,LF=new ht;let tC=null,nC=0,iC=0;const Pp=(1+Math.sqrt(5))/2,r0=1/Pp,DF=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,Pp,r0),new re(0,Pp,-r0),new re(r0,0,Pp),new re(-r0,0,Pp),new re(Pp,r0,0),new re(-Pp,r0,0)];class _I{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){tC=this._renderer.getRenderTarget(),nC=this._renderer.getActiveCubeFace(),iC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=OF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(tC,nC,iC),e.scissorTest=!1,PE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fu||e.mapping===sd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),tC=this._renderer.getRenderTarget(),nC=this._renderer.getActiveCubeFace(),iC=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:ys,format:ts,colorSpace:Ha,depthBuffer:!1},r=BF(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BF(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Lte(s)),this._blurMaterial=Dte(s,e,t)}return r}_compileMaterial(e){const t=new Ni(this._lodPlanes[0],e);this._renderer.compile(t,eC)}_sceneToCubeUV(e,t,i,r){const a=new $r(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(LF),u.toneMapping=Zc,u.autoClear=!1;const p=new ua({name:"PMREM.Background",side:Fo,depthWrite:!1,depthTest:!1}),g=new Ni(new Ed,p);let v=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,v=!0):(p.color.copy(LF),v=!0);for(let S=0;S<6;S++){const A=S%3;A===0?(a.up.set(0,l[S],0),a.lookAt(c[S],0,0)):A===1?(a.up.set(0,0,l[S]),a.lookAt(0,c[S],0)):(a.up.set(0,l[S],0),a.lookAt(0,0,c[S]));const T=this._cubeSize;PE(r,A*T,S>2?T:0,T,T),u.setRenderTarget(r),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===fu||e.mapping===sd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=OF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kF());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ni(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;PE(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,eC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=DF[(r-1)%DF.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Ni(this._lodPlanes[r],c),h=c.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Gp-1),v=s/g,_=isFinite(s)?1+Math.floor(u*v):Gp;_>Gp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Gp}`);const S=[];let A=0;for(let P=0;P<Gp;++P){const k=P/v,I=Math.exp(-k*k/2);S.push(I),P===0?A+=I:P<_&&(A+=2*I)}for(let P=0;P<S.length;P++)S[P]=S[P]/A;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=S,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:T}=this;h.dTheta.value=g,h.mipInt.value=T-i;const b=this._sizeLods[r],C=3*b*(r>T-I0?r-T+I0:0),L=4*(this._cubeSize-b);PE(t,C,L,3*b,2*b),l.setRenderTarget(t),l.render(f,eC)}}function Lte(n){const e=[],t=[],i=[];let r=n;const s=n-I0+1+IF.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-I0?l=IF[o-n+I0-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],p=6,g=6,v=3,_=2,S=1,A=new Float32Array(v*g*p),T=new Float32Array(_*g*p),b=new Float32Array(S*g*p);for(let L=0;L<p;L++){const P=L%3*2/3-1,k=L>2?0:-1,I=[P,k,0,P+2/3,k,0,P+2/3,k+1,0,P,k,0,P+2/3,k+1,0,P,k+1,0];A.set(I,v*g*L),T.set(h,_*g*L);const D=[L,L,L,L,L,L];b.set(D,S*g*L)}const C=new Mn;C.setAttribute("position",new Jn(A,v)),C.setAttribute("uv",new Jn(T,_)),C.setAttribute("faceIndex",new Jn(b,S)),e.push(C),r>I0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function BF(n,e,t){const i=new No(n,e,t);return i.texture.mapping=Fv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function PE(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Dte(n,e,t){const i=new Float32Array(Gp),r=new re(0,1,0);return new fo({name:"SphericalGaussianBlur",defines:{n:Gp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:r2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qc,depthTest:!1,depthWrite:!1})}function kF(){return new fo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:r2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qc,depthTest:!1,depthWrite:!1})}function OF(){return new fo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:r2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qc,depthTest:!1,depthWrite:!1})}function r2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bte(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===_m||l===A_,u=l===fu||l===sd;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new _I(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){t===null&&(t=new _I(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function kte(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Ote(n,e,t,i){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);for(const g in h.morphAttributes){const v=h.morphAttributes[g];for(let _=0,S=v.length;_<S;_++)e.remove(v[_])}h.removeEventListener("dispose",o),delete r[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const g in h)e.update(h[g],n.ARRAY_BUFFER);const p=f.morphAttributes;for(const g in p){const v=p[g];for(let _=0,S=v.length;_<S;_++)e.update(v[_],n.ARRAY_BUFFER)}}function c(f){const h=[],p=f.index,g=f.attributes.position;let v=0;if(p!==null){const A=p.array;v=p.version;for(let T=0,b=A.length;T<b;T+=3){const C=A[T+0],L=A[T+1],P=A[T+2];h.push(C,L,L,P,P,C)}}else if(g!==void 0){const A=g.array;v=g.version;for(let T=0,b=A.length/3-1;T<b;T+=3){const C=T+0,L=T+1,P=T+2;h.push(C,L,L,P,P,C)}}else return;const _=new(C$(h)?t2:C1)(h,1);_.version=v;const S=s.get(f);S&&e.remove(S),s.set(f,_)}function u(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Fte(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function c(p){a=p.type,l=p.bytesPerElement}function u(p,g){n.drawElements(s,g,a,p*l),t.update(g,s,1)}function f(p,g,v){if(v===0)return;let _,S;if(r)_=n,S="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[S](s,g,a,p*l,v),t.update(g,s,v)}function h(p,g,v){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<v;S++)this.render(p[S]/l,g[S]);else{_.multiDrawElementsWEBGL(s,g,0,a,p,0,v);let S=0;for(let A=0;A<v;A++)S+=g[A];t.update(S,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=h}function Nte(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Ute(n,e){return n[0]-e[0]}function Gte(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Vte(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new qn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=g!==void 0?g.length:0;let _=s.get(u);if(_===void 0||_.count!==v){let te=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",te)};var p=te;_!==void 0&&_.texture.dispose();const T=u.morphAttributes.position!==void 0,b=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,L=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],k=u.morphAttributes.color||[];let I=0;T===!0&&(I=1),b===!0&&(I=2),C===!0&&(I=3);let D=u.attributes.position.count*I,G=1;D>e.maxTextureSize&&(G=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const H=new Float32Array(D*G*4*v),q=new qw(H,D,G,v);q.type=Wr,q.needsUpdate=!0;const W=I*4;for(let ee=0;ee<v;ee++){const ne=L[ee],Y=P[ee],Q=k[ee],F=D*G*4*ee;for(let ie=0;ie<ne.count;ie++){const he=ie*W;T===!0&&(o.fromBufferAttribute(ne,ie),H[F+he+0]=o.x,H[F+he+1]=o.y,H[F+he+2]=o.z,H[F+he+3]=0),b===!0&&(o.fromBufferAttribute(Y,ie),H[F+he+4]=o.x,H[F+he+5]=o.y,H[F+he+6]=o.z,H[F+he+7]=0),C===!0&&(o.fromBufferAttribute(Q,ie),H[F+he+8]=o.x,H[F+he+9]=o.y,H[F+he+10]=o.z,H[F+he+11]=Q.itemSize===4?o.w:1)}}_={count:v,texture:q,size:new Qe(D,G)},s.set(u,_),u.addEventListener("dispose",te)}let S=0;for(let T=0;T<h.length;T++)S+=h[T];const A=u.morphTargetsRelative?1:1-S;f.getUniforms().setValue(n,"morphTargetBaseInfluence",A),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const g=h===void 0?0:h.length;let v=i[u.id];if(v===void 0||v.length!==g){v=[];for(let b=0;b<g;b++)v[b]=[b,0];i[u.id]=v}for(let b=0;b<g;b++){const C=v[b];C[0]=b,C[1]=h[b]}v.sort(Gte);for(let b=0;b<8;b++)b<g&&v[b][1]?(a[b][0]=v[b][0],a[b][1]=v[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(Ute);const _=u.morphAttributes.position,S=u.morphAttributes.normal;let A=0;for(let b=0;b<8;b++){const C=a[b],L=C[0],P=C[1];L!==Number.MAX_SAFE_INTEGER&&P?(_&&u.getAttribute("morphTarget"+b)!==_[L]&&u.setAttribute("morphTarget"+b,_[L]),S&&u.getAttribute("morphNormal"+b)!==S[L]&&u.setAttribute("morphNormal"+b,S[L]),r[b]=P,A+=P):(_&&u.hasAttribute("morphTarget"+b)===!0&&u.deleteAttribute("morphTarget"+b),S&&u.hasAttribute("morphNormal"+b)===!0&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const T=u.morphTargetsRelative?1:1-A;f.getUniforms().setValue(n,"morphTargetBaseInfluence",T),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function Hte(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class s2 extends ri{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:qh,u!==qh&&u!==Sm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===qh&&(i=Kc),i===void 0&&u===Sm&&(i=Yh),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:pr,this.minFilter=l!==void 0?l:pr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const k$=new ri,O$=new s2(1,1);O$.compareFunction=JD;const F$=new qw,N$=new e2,U$=new P1,FF=[],NF=[],UF=new Float32Array(16),GF=new Float32Array(9),VF=new Float32Array(4);function Uv(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=FF[r];if(s===void 0&&(s=new Float32Array(r),FF[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ss(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function os(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Jw(n,e){let t=NF[e];t===void 0&&(t=new Int32Array(e),NF[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function zte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $te(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ss(t,e))return;n.uniform2fv(this.addr,e),os(t,e)}}function Wte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ss(t,e))return;n.uniform3fv(this.addr,e),os(t,e)}}function jte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ss(t,e))return;n.uniform4fv(this.addr,e),os(t,e)}}function Kte(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ss(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),os(t,e)}else{if(ss(t,i))return;VF.set(i),n.uniformMatrix2fv(this.addr,!1,VF),os(t,i)}}function Xte(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ss(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),os(t,e)}else{if(ss(t,i))return;GF.set(i),n.uniformMatrix3fv(this.addr,!1,GF),os(t,i)}}function Yte(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ss(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),os(t,e)}else{if(ss(t,i))return;UF.set(i),n.uniformMatrix4fv(this.addr,!1,UF),os(t,i)}}function qte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Jte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ss(t,e))return;n.uniform2iv(this.addr,e),os(t,e)}}function Qte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ss(t,e))return;n.uniform3iv(this.addr,e),os(t,e)}}function Zte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ss(t,e))return;n.uniform4iv(this.addr,e),os(t,e)}}function ene(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function tne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ss(t,e))return;n.uniform2uiv(this.addr,e),os(t,e)}}function nne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ss(t,e))return;n.uniform3uiv(this.addr,e),os(t,e)}}function ine(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ss(t,e))return;n.uniform4uiv(this.addr,e),os(t,e)}}function rne(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?O$:k$;t.setTexture2D(e||s,r)}function sne(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||N$,r)}function one(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||U$,r)}function ane(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||F$,r)}function lne(n){switch(n){case 5126:return zte;case 35664:return $te;case 35665:return Wte;case 35666:return jte;case 35674:return Kte;case 35675:return Xte;case 35676:return Yte;case 5124:case 35670:return qte;case 35667:case 35671:return Jte;case 35668:case 35672:return Qte;case 35669:case 35673:return Zte;case 5125:return ene;case 36294:return tne;case 36295:return nne;case 36296:return ine;case 35678:case 36198:case 36298:case 36306:case 35682:return rne;case 35679:case 36299:case 36307:return sne;case 35680:case 36300:case 36308:case 36293:return one;case 36289:case 36303:case 36311:case 36292:return ane}}function cne(n,e){n.uniform1fv(this.addr,e)}function une(n,e){const t=Uv(e,this.size,2);n.uniform2fv(this.addr,t)}function fne(n,e){const t=Uv(e,this.size,3);n.uniform3fv(this.addr,t)}function hne(n,e){const t=Uv(e,this.size,4);n.uniform4fv(this.addr,t)}function dne(n,e){const t=Uv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function pne(n,e){const t=Uv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function mne(n,e){const t=Uv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function gne(n,e){n.uniform1iv(this.addr,e)}function vne(n,e){n.uniform2iv(this.addr,e)}function yne(n,e){n.uniform3iv(this.addr,e)}function xne(n,e){n.uniform4iv(this.addr,e)}function _ne(n,e){n.uniform1uiv(this.addr,e)}function Sne(n,e){n.uniform2uiv(this.addr,e)}function Ene(n,e){n.uniform3uiv(this.addr,e)}function Ane(n,e){n.uniform4uiv(this.addr,e)}function Tne(n,e,t){const i=this.cache,r=e.length,s=Jw(t,r);ss(i,s)||(n.uniform1iv(this.addr,s),os(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||k$,s[o])}function wne(n,e,t){const i=this.cache,r=e.length,s=Jw(t,r);ss(i,s)||(n.uniform1iv(this.addr,s),os(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||N$,s[o])}function bne(n,e,t){const i=this.cache,r=e.length,s=Jw(t,r);ss(i,s)||(n.uniform1iv(this.addr,s),os(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||U$,s[o])}function Mne(n,e,t){const i=this.cache,r=e.length,s=Jw(t,r);ss(i,s)||(n.uniform1iv(this.addr,s),os(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||F$,s[o])}function Cne(n){switch(n){case 5126:return cne;case 35664:return une;case 35665:return fne;case 35666:return hne;case 35674:return dne;case 35675:return pne;case 35676:return mne;case 5124:case 35670:return gne;case 35667:case 35671:return vne;case 35668:case 35672:return yne;case 35669:case 35673:return xne;case 5125:return _ne;case 36294:return Sne;case 36295:return Ene;case 36296:return Ane;case 35678:case 36198:case 36298:case 36306:case 35682:return Tne;case 35679:case 36299:case 36307:return wne;case 35680:case 36300:case 36308:case 36293:return bne;case 36289:case 36303:case 36311:case 36292:return Mne}}class Rne{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=lne(t.type)}}class Pne{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Cne(t.type)}}class Ine{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const rC=/(\w+)(\])?(\[|\.)?/g;function HF(n,e){n.seq.push(e),n.map[e.id]=e}function Lne(n,e,t){const i=n.name,r=i.length;for(rC.lastIndex=0;;){const s=rC.exec(i),o=rC.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){HF(t,c===void 0?new Rne(a,n,e):new Pne(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Ine(a),HF(t,f)),t=f}}}class tT{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Lne(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function zF(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Dne=37297;let Bne=0;function kne(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function One(n){const e=yi.getPrimaries(yi.workingColorSpace),t=yi.getPrimaries(n);let i;switch(e===t?i="":e===C_&&t===M_?i="LinearDisplayP3ToLinearSRGB":e===M_&&t===C_&&(i="LinearSRGBToLinearDisplayP3"),n){case Ha:case M1:return[i,"LinearTransferOETF"];case Hr:case Yw:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function $F(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+kne(n.getShaderSource(e),o)}else return r}function Fne(n,e){const t=One(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Nne(n,e){let t;switch(e){case r$:t="Linear";break;case s$:t="Reinhard";break;case o$:t="OptimizedCineon";break;case UD:t="ACESFilmic";break;case a$:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Une(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tx).join(`
`)}function Gne(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Vne(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Tx(n){return n!==""}function WF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jF(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hne=/^[ \t]*#include +<([\w\d./]+)>/gm;function SI(n){return n.replace(Hne,$ne)}const zne=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $ne(n,e){let t=kn[e];if(t===void 0){const i=zne.get(e);if(i!==void 0)t=kn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return SI(t)}const Wne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function KF(n){return n.replace(Wne,jne)}function jne(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function XF(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Kne(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===FD?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ND?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Uc&&(e="SHADOWMAP_TYPE_VSM"),e}function Xne(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case fu:case sd:e="ENVMAP_TYPE_CUBE";break;case Fv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Yne(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case sd:e="ENVMAP_MODE_REFRACTION";break}return e}function qne(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case b1:e="ENVMAP_BLENDING_MULTIPLY";break;case n$:e="ENVMAP_BLENDING_MIX";break;case i$:e="ENVMAP_BLENDING_ADD";break}return e}function Jne(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Qne(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Kne(t),c=Xne(t),u=Yne(t),f=qne(t),h=Jne(t),p=t.isWebGL2?"":Une(t),g=Gne(s),v=r.createProgram();let _,S,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Tx).join(`
`),_.length>0&&(_+=`
`),S=[p,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Tx).join(`
`),S.length>0&&(S+=`
`)):(_=[XF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tx).join(`
`),S=[p,XF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Zc?"#define TONE_MAPPING":"",t.toneMapping!==Zc?kn.tonemapping_pars_fragment:"",t.toneMapping!==Zc?Nne("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",kn.colorspace_pars_fragment,Fne("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Tx).join(`
`)),o=SI(o),o=WF(o,t),o=jF(o,t),a=SI(a),a=WF(a,t),a=jF(a,t),o=KF(o),a=KF(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===yI?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yI?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const T=A+_+o,b=A+S+a,C=zF(r,r.VERTEX_SHADER,T),L=zF(r,r.FRAGMENT_SHADER,b);r.attachShader(v,C),r.attachShader(v,L),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function P(G){if(n.debug.checkShaderErrors){const H=r.getProgramInfoLog(v).trim(),q=r.getShaderInfoLog(C).trim(),W=r.getShaderInfoLog(L).trim();let te=!0,ee=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(te=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,v,C,L);else{const ne=$F(r,C,"vertex"),Y=$F(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Program Info Log: `+H+`
`+ne+`
`+Y)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(q===""||W==="")&&(ee=!1);ee&&(G.diagnostics={runnable:te,programLog:H,vertexShader:{log:q,prefix:_},fragmentShader:{log:W,prefix:S}})}r.deleteShader(C),r.deleteShader(L),k=new tT(r,v),I=Vne(r,v)}let k;this.getUniforms=function(){return k===void 0&&P(this),k};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(v,Dne)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Bne++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=C,this.fragmentShader=L,this}let Zne=0;class eie{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new tie(e),t.set(e,i)),i}}class tie{constructor(e){this.id=Zne++,this.code=e,this.usedTimes=0}}function nie(n,e,t,i,r,s,o){const a=new sm,l=new eie,c=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(I){return I===0?"uv":`uv${I}`}function _(I,D,G,H,q){const W=H.fog,te=q.geometry,ee=I.isMeshStandardMaterial?H.environment:null,ne=(I.isMeshStandardMaterial?t:e).get(I.envMap||ee),Y=ne&&ne.mapping===Fv?ne.image.height:null,Q=g[I.type];I.precision!==null&&(p=r.getMaxPrecision(I.precision),p!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",p,"instead."));const F=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,ie=F!==void 0?F.length:0;let he=0;te.morphAttributes.position!==void 0&&(he=1),te.morphAttributes.normal!==void 0&&(he=2),te.morphAttributes.color!==void 0&&(he=3);let pe,ye,Be,Me;if(Q){const kt=ac[Q];pe=kt.vertexShader,ye=kt.fragmentShader}else pe=I.vertexShader,ye=I.fragmentShader,l.update(I),Be=l.getVertexShaderID(I),Me=l.getFragmentShaderID(I);const Le=n.getRenderTarget(),je=q.isInstancedMesh===!0,lt=q.isBatchedMesh===!0,bt=!!I.map,gt=!!I.matcap,ue=!!ne,Ne=!!I.aoMap,ke=!!I.lightMap,Ze=!!I.bumpMap,We=!!I.normalMap,_e=!!I.displacementMap,ft=!!I.emissiveMap,dt=!!I.metalnessMap,Rt=!!I.roughnessMap,Dt=I.anisotropy>0,gn=I.clearcoat>0,Z=I.iridescence>0,j=I.sheen>0,Ee=I.transmission>0,Xe=Dt&&!!I.anisotropyMap,He=gn&&!!I.clearcoatMap,Je=gn&&!!I.clearcoatNormalMap,St=gn&&!!I.clearcoatRoughnessMap,nt=Z&&!!I.iridescenceMap,vt=Z&&!!I.iridescenceThicknessMap,Pt=j&&!!I.sheenColorMap,cn=j&&!!I.sheenRoughnessMap,Ke=!!I.specularMap,wn=!!I.specularColorMap,$t=!!I.specularIntensityMap,Mt=Ee&&!!I.transmissionMap,At=Ee&&!!I.thicknessMap,et=!!I.gradientMap,qe=!!I.alphaMap,ve=I.alphaTest>0,yt=!!I.alphaHash,rt=!!I.extensions,ze=!!te.attributes.uv1,ut=!!te.attributes.uv2,qt=!!te.attributes.uv3;let En=Zc;return I.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(En=n.toneMapping),{isWebGL2:u,shaderID:Q,shaderType:I.type,shaderName:I.name,vertexShader:pe,fragmentShader:ye,defines:I.defines,customVertexShaderID:Be,customFragmentShaderID:Me,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:p,batching:lt,instancing:je,instancingColor:je&&q.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:Le===null?n.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:Ha,map:bt,matcap:gt,envMap:ue,envMapMode:ue&&ne.mapping,envMapCubeUVHeight:Y,aoMap:Ne,lightMap:ke,bumpMap:Ze,normalMap:We,displacementMap:h&&_e,emissiveMap:ft,normalMapObjectSpace:We&&I.normalMapType===_$,normalMapTangentSpace:We&&I.normalMapType===Sd,metalnessMap:dt,roughnessMap:Rt,anisotropy:Dt,anisotropyMap:Xe,clearcoat:gn,clearcoatMap:He,clearcoatNormalMap:Je,clearcoatRoughnessMap:St,iridescence:Z,iridescenceMap:nt,iridescenceThicknessMap:vt,sheen:j,sheenColorMap:Pt,sheenRoughnessMap:cn,specularMap:Ke,specularColorMap:wn,specularIntensityMap:$t,transmission:Ee,transmissionMap:Mt,thicknessMap:At,gradientMap:et,opaque:I.transparent===!1&&I.blending===im,alphaMap:qe,alphaTest:ve,alphaHash:yt,combine:I.combine,mapUv:bt&&v(I.map.channel),aoMapUv:Ne&&v(I.aoMap.channel),lightMapUv:ke&&v(I.lightMap.channel),bumpMapUv:Ze&&v(I.bumpMap.channel),normalMapUv:We&&v(I.normalMap.channel),displacementMapUv:_e&&v(I.displacementMap.channel),emissiveMapUv:ft&&v(I.emissiveMap.channel),metalnessMapUv:dt&&v(I.metalnessMap.channel),roughnessMapUv:Rt&&v(I.roughnessMap.channel),anisotropyMapUv:Xe&&v(I.anisotropyMap.channel),clearcoatMapUv:He&&v(I.clearcoatMap.channel),clearcoatNormalMapUv:Je&&v(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:St&&v(I.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&v(I.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&v(I.iridescenceThicknessMap.channel),sheenColorMapUv:Pt&&v(I.sheenColorMap.channel),sheenRoughnessMapUv:cn&&v(I.sheenRoughnessMap.channel),specularMapUv:Ke&&v(I.specularMap.channel),specularColorMapUv:wn&&v(I.specularColorMap.channel),specularIntensityMapUv:$t&&v(I.specularIntensityMap.channel),transmissionMapUv:Mt&&v(I.transmissionMap.channel),thicknessMapUv:At&&v(I.thicknessMap.channel),alphaMapUv:qe&&v(I.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(We||Dt),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,vertexUv1s:ze,vertexUv2s:ut,vertexUv3s:qt,pointsUvs:q.isPoints===!0&&!!te.attributes.uv&&(bt||qe),fog:!!W,useFog:I.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:q.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:he,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:En,useLegacyLights:n._useLegacyLights,decodeVideoTexture:bt&&I.map.isVideoTexture===!0&&yi.getTransfer(I.map.colorSpace)===ki,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===xl,flipSided:I.side===Fo,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:rt&&I.extensions.derivatives===!0,extensionFragDepth:rt&&I.extensions.fragDepth===!0,extensionDrawBuffers:rt&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:rt&&I.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()}}function S(I){const D=[];if(I.shaderID?D.push(I.shaderID):(D.push(I.customVertexShaderID),D.push(I.customFragmentShaderID)),I.defines!==void 0)for(const G in I.defines)D.push(G),D.push(I.defines[G]);return I.isRawShaderMaterial===!1&&(A(D,I),T(D,I),D.push(n.outputColorSpace)),D.push(I.customProgramCacheKey),D.join()}function A(I,D){I.push(D.precision),I.push(D.outputColorSpace),I.push(D.envMapMode),I.push(D.envMapCubeUVHeight),I.push(D.mapUv),I.push(D.alphaMapUv),I.push(D.lightMapUv),I.push(D.aoMapUv),I.push(D.bumpMapUv),I.push(D.normalMapUv),I.push(D.displacementMapUv),I.push(D.emissiveMapUv),I.push(D.metalnessMapUv),I.push(D.roughnessMapUv),I.push(D.anisotropyMapUv),I.push(D.clearcoatMapUv),I.push(D.clearcoatNormalMapUv),I.push(D.clearcoatRoughnessMapUv),I.push(D.iridescenceMapUv),I.push(D.iridescenceThicknessMapUv),I.push(D.sheenColorMapUv),I.push(D.sheenRoughnessMapUv),I.push(D.specularMapUv),I.push(D.specularColorMapUv),I.push(D.specularIntensityMapUv),I.push(D.transmissionMapUv),I.push(D.thicknessMapUv),I.push(D.combine),I.push(D.fogExp2),I.push(D.sizeAttenuation),I.push(D.morphTargetsCount),I.push(D.morphAttributeCount),I.push(D.numDirLights),I.push(D.numPointLights),I.push(D.numSpotLights),I.push(D.numSpotLightMaps),I.push(D.numHemiLights),I.push(D.numRectAreaLights),I.push(D.numDirLightShadows),I.push(D.numPointLightShadows),I.push(D.numSpotLightShadows),I.push(D.numSpotLightShadowsWithMaps),I.push(D.numLightProbes),I.push(D.shadowMapType),I.push(D.toneMapping),I.push(D.numClippingPlanes),I.push(D.numClipIntersection),I.push(D.depthPacking)}function T(I,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),I.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),I.push(a.mask)}function b(I){const D=g[I.type];let G;if(D){const H=ac[D];G=n2.clone(H.uniforms)}else G=I.uniforms;return G}function C(I,D){let G;for(let H=0,q=c.length;H<q;H++){const W=c[H];if(W.cacheKey===D){G=W,++G.usedTimes;break}}return G===void 0&&(G=new Qne(n,D,I,s),c.push(G)),G}function L(I){if(--I.usedTimes===0){const D=c.indexOf(I);c[D]=c[c.length-1],c.pop(),I.destroy()}}function P(I){l.remove(I)}function k(){l.dispose()}return{getParameters:_,getProgramCacheKey:S,getUniforms:b,acquireProgram:C,releaseProgram:L,releaseShaderCache:P,programs:c,dispose:k}}function iie(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function rie(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qF(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,h,p,g,v,_){let S=n[e];return S===void 0?(S={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:v,group:_},n[e]=S):(S.id=f.id,S.object=f,S.geometry=h,S.material=p,S.groupOrder=g,S.renderOrder=f.renderOrder,S.z=v,S.group=_),e++,S}function a(f,h,p,g,v,_){const S=o(f,h,p,g,v,_);p.transmission>0?i.push(S):p.transparent===!0?r.push(S):t.push(S)}function l(f,h,p,g,v,_){const S=o(f,h,p,g,v,_);p.transmission>0?i.unshift(S):p.transparent===!0?r.unshift(S):t.unshift(S)}function c(f,h){t.length>1&&t.sort(f||rie),i.length>1&&i.sort(h||YF),r.length>1&&r.sort(h||YF)}function u(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function sie(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new qF,n.set(i,[o])):r>=s.length?(o=new qF,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function oie(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new ht};break;case"SpotLight":t={position:new re,direction:new re,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":t={color:new ht,position:new re,halfWidth:new re,halfHeight:new re};break}return n[e.id]=t,t}}}function aie(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let lie=0;function cie(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function uie(n,e){const t=new oie,i=aie(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new re);const s=new re,o=new Lt,a=new Lt;function l(u,f){let h=0,p=0,g=0;for(let H=0;H<9;H++)r.probe[H].set(0,0,0);let v=0,_=0,S=0,A=0,T=0,b=0,C=0,L=0,P=0,k=0,I=0;u.sort(cie);const D=f===!0?Math.PI:1;for(let H=0,q=u.length;H<q;H++){const W=u[H],te=W.color,ee=W.intensity,ne=W.distance,Y=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)h+=te.r*ee*D,p+=te.g*ee*D,g+=te.b*ee*D;else if(W.isLightProbe){for(let Q=0;Q<9;Q++)r.probe[Q].addScaledVector(W.sh.coefficients[Q],ee);I++}else if(W.isDirectionalLight){const Q=t.get(W);if(Q.color.copy(W.color).multiplyScalar(W.intensity*D),W.castShadow){const F=W.shadow,ie=i.get(W);ie.shadowBias=F.bias,ie.shadowNormalBias=F.normalBias,ie.shadowRadius=F.radius,ie.shadowMapSize=F.mapSize,r.directionalShadow[v]=ie,r.directionalShadowMap[v]=Y,r.directionalShadowMatrix[v]=W.shadow.matrix,b++}r.directional[v]=Q,v++}else if(W.isSpotLight){const Q=t.get(W);Q.position.setFromMatrixPosition(W.matrixWorld),Q.color.copy(te).multiplyScalar(ee*D),Q.distance=ne,Q.coneCos=Math.cos(W.angle),Q.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),Q.decay=W.decay,r.spot[S]=Q;const F=W.shadow;if(W.map&&(r.spotLightMap[P]=W.map,P++,F.updateMatrices(W),W.castShadow&&k++),r.spotLightMatrix[S]=F.matrix,W.castShadow){const ie=i.get(W);ie.shadowBias=F.bias,ie.shadowNormalBias=F.normalBias,ie.shadowRadius=F.radius,ie.shadowMapSize=F.mapSize,r.spotShadow[S]=ie,r.spotShadowMap[S]=Y,L++}S++}else if(W.isRectAreaLight){const Q=t.get(W);Q.color.copy(te).multiplyScalar(ee),Q.halfWidth.set(W.width*.5,0,0),Q.halfHeight.set(0,W.height*.5,0),r.rectArea[A]=Q,A++}else if(W.isPointLight){const Q=t.get(W);if(Q.color.copy(W.color).multiplyScalar(W.intensity*D),Q.distance=W.distance,Q.decay=W.decay,W.castShadow){const F=W.shadow,ie=i.get(W);ie.shadowBias=F.bias,ie.shadowNormalBias=F.normalBias,ie.shadowRadius=F.radius,ie.shadowMapSize=F.mapSize,ie.shadowCameraNear=F.camera.near,ie.shadowCameraFar=F.camera.far,r.pointShadow[_]=ie,r.pointShadowMap[_]=Y,r.pointShadowMatrix[_]=W.shadow.matrix,C++}r.point[_]=Q,_++}else if(W.isHemisphereLight){const Q=t.get(W);Q.skyColor.copy(W.color).multiplyScalar(ee*D),Q.groundColor.copy(W.groundColor).multiplyScalar(ee*D),r.hemi[T]=Q,T++}}A>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ct.LTC_FLOAT_1,r.rectAreaLTC2=Ct.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ct.LTC_HALF_1,r.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=p,r.ambient[2]=g;const G=r.hash;(G.directionalLength!==v||G.pointLength!==_||G.spotLength!==S||G.rectAreaLength!==A||G.hemiLength!==T||G.numDirectionalShadows!==b||G.numPointShadows!==C||G.numSpotShadows!==L||G.numSpotMaps!==P||G.numLightProbes!==I)&&(r.directional.length=v,r.spot.length=S,r.rectArea.length=A,r.point.length=_,r.hemi.length=T,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=L,r.spotShadowMap.length=L,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=L+P-k,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=I,G.directionalLength=v,G.pointLength=_,G.spotLength=S,G.rectAreaLength=A,G.hemiLength=T,G.numDirectionalShadows=b,G.numPointShadows=C,G.numSpotShadows=L,G.numSpotMaps=P,G.numLightProbes=I,r.version=lie++)}function c(u,f){let h=0,p=0,g=0,v=0,_=0;const S=f.matrixWorldInverse;for(let A=0,T=u.length;A<T;A++){const b=u[A];if(b.isDirectionalLight){const C=r.directional[h];C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(S),h++}else if(b.isSpotLight){const C=r.spot[g];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(S),C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(S),g++}else if(b.isRectAreaLight){const C=r.rectArea[v];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(S),a.identity(),o.copy(b.matrixWorld),o.premultiply(S),a.extractRotation(o),C.halfWidth.set(b.width*.5,0,0),C.halfHeight.set(0,b.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),v++}else if(b.isPointLight){const C=r.point[p];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(S),p++}else if(b.isHemisphereLight){const C=r.hemi[_];C.direction.setFromMatrixPosition(b.matrixWorld),C.direction.transformDirection(S),_++}}}return{setup:l,setupView:c,state:r}}function JF(n,e){const t=new uie(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function fie(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new JF(n,e),t.set(s,[l])):o>=a.length?(l=new JF(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Qw extends is{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=y$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class o2 extends is{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const hie=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,die=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function pie(n,e,t){let i=new I1;const r=new Qe,s=new Qe,o=new qn,a=new Qw({depthPacking:x$}),l=new o2,c={},u=t.maxTextureSize,f={[uu]:Fo,[Fo]:uu,[xl]:xl},h=new fo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qe},radius:{value:4}},vertexShader:hie,fragmentShader:die}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Mn;g.setAttribute("position",new Jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Ni(g,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=FD;let S=this.type;this.render=function(C,L,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||C.length===0)return;const k=n.getRenderTarget(),I=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),G=n.state;G.setBlending(Qc),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const H=S!==Uc&&this.type===Uc,q=S===Uc&&this.type!==Uc;for(let W=0,te=C.length;W<te;W++){const ee=C[W],ne=ee.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const Y=ne.getFrameExtents();if(r.multiply(Y),s.copy(ne.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,ne.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,ne.mapSize.y=s.y)),ne.map===null||H===!0||q===!0){const F=this.type!==Uc?{minFilter:pr,magFilter:pr}:{};ne.map!==null&&ne.map.dispose(),ne.map=new No(r.x,r.y,F),ne.map.texture.name=ee.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const Q=ne.getViewportCount();for(let F=0;F<Q;F++){const ie=ne.getViewport(F);o.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),G.viewport(o),ne.updateMatrices(ee,F),i=ne.getFrustum(),b(L,P,ne.camera,ee,this.type)}ne.isPointLightShadow!==!0&&this.type===Uc&&A(ne,P),ne.needsUpdate=!1}S=this.type,_.needsUpdate=!1,n.setRenderTarget(k,I,D)};function A(C,L){const P=e.update(v);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,p.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new No(r.x,r.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(L,null,P,h,v,null),p.uniforms.shadow_pass.value=C.mapPass.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(L,null,P,p,v,null)}function T(C,L,P,k){let I=null;const D=P.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)I=D;else if(I=P.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const G=I.uuid,H=L.uuid;let q=c[G];q===void 0&&(q={},c[G]=q);let W=q[H];W===void 0&&(W=I.clone(),q[H]=W),I=W}if(I.visible=L.visible,I.wireframe=L.wireframe,k===Uc?I.side=L.shadowSide!==null?L.shadowSide:L.side:I.side=L.shadowSide!==null?L.shadowSide:f[L.side],I.alphaMap=L.alphaMap,I.alphaTest=L.alphaTest,I.map=L.map,I.clipShadows=L.clipShadows,I.clippingPlanes=L.clippingPlanes,I.clipIntersection=L.clipIntersection,I.displacementMap=L.displacementMap,I.displacementScale=L.displacementScale,I.displacementBias=L.displacementBias,I.wireframeLinewidth=L.wireframeLinewidth,I.linewidth=L.linewidth,P.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const G=n.properties.get(I);G.light=P}return I}function b(C,L,P,k,I){if(C.visible===!1)return;if(C.layers.test(L.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&I===Uc)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,C.matrixWorld);const H=e.update(C),q=C.material;if(Array.isArray(q)){const W=H.groups;for(let te=0,ee=W.length;te<ee;te++){const ne=W[te],Y=q[ne.materialIndex];if(Y&&Y.visible){const Q=T(C,Y,k,I);C.onBeforeShadow(n,C,L,P,H,Q,ne),n.renderBufferDirect(P,null,H,Q,C,ne),C.onAfterShadow(n,C,L,P,H,Q,ne)}}}else if(q.visible){const W=T(C,q,k,I);C.onBeforeShadow(n,C,L,P,H,W,null),n.renderBufferDirect(P,null,H,W,C,null),C.onAfterShadow(n,C,L,P,H,W,null)}}const G=C.children;for(let H=0,q=G.length;H<q;H++)b(G[H],L,P,k,I)}}function mie(n,e,t){const i=t.isWebGL2;function r(){let ve=!1;const yt=new qn;let rt=null;const ze=new qn(0,0,0,0);return{setMask:function(ut){rt!==ut&&!ve&&(n.colorMask(ut,ut,ut,ut),rt=ut)},setLocked:function(ut){ve=ut},setClear:function(ut,qt,En,Ft,kt){kt===!0&&(ut*=Ft,qt*=Ft,En*=Ft),yt.set(ut,qt,En,Ft),ze.equals(yt)===!1&&(n.clearColor(ut,qt,En,Ft),ze.copy(yt))},reset:function(){ve=!1,rt=null,ze.set(-1,0,0,0)}}}function s(){let ve=!1,yt=null,rt=null,ze=null;return{setTest:function(ut){ut?lt(n.DEPTH_TEST):bt(n.DEPTH_TEST)},setMask:function(ut){yt!==ut&&!ve&&(n.depthMask(ut),yt=ut)},setFunc:function(ut){if(rt!==ut){switch(ut){case Yz:n.depthFunc(n.NEVER);break;case qz:n.depthFunc(n.ALWAYS);break;case Jz:n.depthFunc(n.LESS);break;case E_:n.depthFunc(n.LEQUAL);break;case Qz:n.depthFunc(n.EQUAL);break;case Zz:n.depthFunc(n.GEQUAL);break;case e$:n.depthFunc(n.GREATER);break;case t$:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}rt=ut}},setLocked:function(ut){ve=ut},setClear:function(ut){ze!==ut&&(n.clearDepth(ut),ze=ut)},reset:function(){ve=!1,yt=null,rt=null,ze=null}}}function o(){let ve=!1,yt=null,rt=null,ze=null,ut=null,qt=null,En=null,Ft=null,kt=null;return{setTest:function(Ut){ve||(Ut?lt(n.STENCIL_TEST):bt(n.STENCIL_TEST))},setMask:function(Ut){yt!==Ut&&!ve&&(n.stencilMask(Ut),yt=Ut)},setFunc:function(Ut,at,Jt){(rt!==Ut||ze!==at||ut!==Jt)&&(n.stencilFunc(Ut,at,Jt),rt=Ut,ze=at,ut=Jt)},setOp:function(Ut,at,Jt){(qt!==Ut||En!==at||Ft!==Jt)&&(n.stencilOp(Ut,at,Jt),qt=Ut,En=at,Ft=Jt)},setLocked:function(Ut){ve=Ut},setClear:function(Ut){kt!==Ut&&(n.clearStencil(Ut),kt=Ut)},reset:function(){ve=!1,yt=null,rt=null,ze=null,ut=null,qt=null,En=null,Ft=null,kt=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let h={},p={},g=new WeakMap,v=[],_=null,S=!1,A=null,T=null,b=null,C=null,L=null,P=null,k=null,I=new ht(0,0,0),D=0,G=!1,H=null,q=null,W=null,te=null,ee=null;const ne=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Q=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(F)[1]),Y=Q>=1):F.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Y=Q>=2);let ie=null,he={};const pe=n.getParameter(n.SCISSOR_BOX),ye=n.getParameter(n.VIEWPORT),Be=new qn().fromArray(pe),Me=new qn().fromArray(ye);function Le(ve,yt,rt,ze){const ut=new Uint8Array(4),qt=n.createTexture();n.bindTexture(ve,qt),n.texParameteri(ve,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ve,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let En=0;En<rt;En++)i&&(ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY)?n.texImage3D(yt,0,n.RGBA,1,1,ze,0,n.RGBA,n.UNSIGNED_BYTE,ut):n.texImage2D(yt+En,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ut);return qt}const je={};je[n.TEXTURE_2D]=Le(n.TEXTURE_2D,n.TEXTURE_2D,1),je[n.TEXTURE_CUBE_MAP]=Le(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(je[n.TEXTURE_2D_ARRAY]=Le(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),je[n.TEXTURE_3D]=Le(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),lt(n.DEPTH_TEST),l.setFunc(E_),ft(!1),dt(NP),lt(n.CULL_FACE),We(Qc);function lt(ve){h[ve]!==!0&&(n.enable(ve),h[ve]=!0)}function bt(ve){h[ve]!==!1&&(n.disable(ve),h[ve]=!1)}function gt(ve,yt){return p[ve]!==yt?(n.bindFramebuffer(ve,yt),p[ve]=yt,i&&(ve===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=yt),ve===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=yt)),!0):!1}function ue(ve,yt){let rt=v,ze=!1;if(ve)if(rt=g.get(yt),rt===void 0&&(rt=[],g.set(yt,rt)),ve.isWebGLMultipleRenderTargets){const ut=ve.texture;if(rt.length!==ut.length||rt[0]!==n.COLOR_ATTACHMENT0){for(let qt=0,En=ut.length;qt<En;qt++)rt[qt]=n.COLOR_ATTACHMENT0+qt;rt.length=ut.length,ze=!0}}else rt[0]!==n.COLOR_ATTACHMENT0&&(rt[0]=n.COLOR_ATTACHMENT0,ze=!0);else rt[0]!==n.BACK&&(rt[0]=n.BACK,ze=!0);ze&&(t.isWebGL2?n.drawBuffers(rt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(rt))}function Ne(ve){return _!==ve?(n.useProgram(ve),_=ve,!0):!1}const ke={[Nh]:n.FUNC_ADD,[Bz]:n.FUNC_SUBTRACT,[kz]:n.FUNC_REVERSE_SUBTRACT};if(i)ke[HP]=n.MIN,ke[zP]=n.MAX;else{const ve=e.get("EXT_blend_minmax");ve!==null&&(ke[HP]=ve.MIN_EXT,ke[zP]=ve.MAX_EXT)}const Ze={[Oz]:n.ZERO,[Fz]:n.ONE,[Nz]:n.SRC_COLOR,[RT]:n.SRC_ALPHA,[$z]:n.SRC_ALPHA_SATURATE,[Hz]:n.DST_COLOR,[Gz]:n.DST_ALPHA,[Uz]:n.ONE_MINUS_SRC_COLOR,[PT]:n.ONE_MINUS_SRC_ALPHA,[zz]:n.ONE_MINUS_DST_COLOR,[Vz]:n.ONE_MINUS_DST_ALPHA,[Wz]:n.CONSTANT_COLOR,[jz]:n.ONE_MINUS_CONSTANT_COLOR,[Kz]:n.CONSTANT_ALPHA,[Xz]:n.ONE_MINUS_CONSTANT_ALPHA};function We(ve,yt,rt,ze,ut,qt,En,Ft,kt,Ut){if(ve===Qc){S===!0&&(bt(n.BLEND),S=!1);return}if(S===!1&&(lt(n.BLEND),S=!0),ve!==Dz){if(ve!==A||Ut!==G){if((T!==Nh||L!==Nh)&&(n.blendEquation(n.FUNC_ADD),T=Nh,L=Nh),Ut)switch(ve){case im:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UP:n.blendFunc(n.ONE,n.ONE);break;case GP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case VP:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}else switch(ve){case im:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UP:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case GP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case VP:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}b=null,C=null,P=null,k=null,I.set(0,0,0),D=0,A=ve,G=Ut}return}ut=ut||yt,qt=qt||rt,En=En||ze,(yt!==T||ut!==L)&&(n.blendEquationSeparate(ke[yt],ke[ut]),T=yt,L=ut),(rt!==b||ze!==C||qt!==P||En!==k)&&(n.blendFuncSeparate(Ze[rt],Ze[ze],Ze[qt],Ze[En]),b=rt,C=ze,P=qt,k=En),(Ft.equals(I)===!1||kt!==D)&&(n.blendColor(Ft.r,Ft.g,Ft.b,kt),I.copy(Ft),D=kt),A=ve,G=!1}function _e(ve,yt){ve.side===xl?bt(n.CULL_FACE):lt(n.CULL_FACE);let rt=ve.side===Fo;yt&&(rt=!rt),ft(rt),ve.blending===im&&ve.transparent===!1?We(Qc):We(ve.blending,ve.blendEquation,ve.blendSrc,ve.blendDst,ve.blendEquationAlpha,ve.blendSrcAlpha,ve.blendDstAlpha,ve.blendColor,ve.blendAlpha,ve.premultipliedAlpha),l.setFunc(ve.depthFunc),l.setTest(ve.depthTest),l.setMask(ve.depthWrite),a.setMask(ve.colorWrite);const ze=ve.stencilWrite;c.setTest(ze),ze&&(c.setMask(ve.stencilWriteMask),c.setFunc(ve.stencilFunc,ve.stencilRef,ve.stencilFuncMask),c.setOp(ve.stencilFail,ve.stencilZFail,ve.stencilZPass)),Dt(ve.polygonOffset,ve.polygonOffsetFactor,ve.polygonOffsetUnits),ve.alphaToCoverage===!0?lt(n.SAMPLE_ALPHA_TO_COVERAGE):bt(n.SAMPLE_ALPHA_TO_COVERAGE)}function ft(ve){H!==ve&&(ve?n.frontFace(n.CW):n.frontFace(n.CCW),H=ve)}function dt(ve){ve!==Iz?(lt(n.CULL_FACE),ve!==q&&(ve===NP?n.cullFace(n.BACK):ve===Lz?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):bt(n.CULL_FACE),q=ve}function Rt(ve){ve!==W&&(Y&&n.lineWidth(ve),W=ve)}function Dt(ve,yt,rt){ve?(lt(n.POLYGON_OFFSET_FILL),(te!==yt||ee!==rt)&&(n.polygonOffset(yt,rt),te=yt,ee=rt)):bt(n.POLYGON_OFFSET_FILL)}function gn(ve){ve?lt(n.SCISSOR_TEST):bt(n.SCISSOR_TEST)}function Z(ve){ve===void 0&&(ve=n.TEXTURE0+ne-1),ie!==ve&&(n.activeTexture(ve),ie=ve)}function j(ve,yt,rt){rt===void 0&&(ie===null?rt=n.TEXTURE0+ne-1:rt=ie);let ze=he[rt];ze===void 0&&(ze={type:void 0,texture:void 0},he[rt]=ze),(ze.type!==ve||ze.texture!==yt)&&(ie!==rt&&(n.activeTexture(rt),ie=rt),n.bindTexture(ve,yt||je[ve]),ze.type=ve,ze.texture=yt)}function Ee(){const ve=he[ie];ve!==void 0&&ve.type!==void 0&&(n.bindTexture(ve.type,null),ve.type=void 0,ve.texture=void 0)}function Xe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function He(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Je(){try{n.texSubImage2D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function St(){try{n.texSubImage3D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function nt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function vt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Pt(){try{n.texStorage2D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function cn(){try{n.texStorage3D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ke(){try{n.texImage2D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function wn(){try{n.texImage3D.apply(n,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function $t(ve){Be.equals(ve)===!1&&(n.scissor(ve.x,ve.y,ve.z,ve.w),Be.copy(ve))}function Mt(ve){Me.equals(ve)===!1&&(n.viewport(ve.x,ve.y,ve.z,ve.w),Me.copy(ve))}function At(ve,yt){let rt=f.get(yt);rt===void 0&&(rt=new WeakMap,f.set(yt,rt));let ze=rt.get(ve);ze===void 0&&(ze=n.getUniformBlockIndex(yt,ve.name),rt.set(ve,ze))}function et(ve,yt){const ze=f.get(yt).get(ve);u.get(yt)!==ze&&(n.uniformBlockBinding(yt,ze,ve.__bindingPointIndex),u.set(yt,ze))}function qe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},ie=null,he={},p={},g=new WeakMap,v=[],_=null,S=!1,A=null,T=null,b=null,C=null,L=null,P=null,k=null,I=new ht(0,0,0),D=0,G=!1,H=null,q=null,W=null,te=null,ee=null,Be.set(0,0,n.canvas.width,n.canvas.height),Me.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:lt,disable:bt,bindFramebuffer:gt,drawBuffers:ue,useProgram:Ne,setBlending:We,setMaterial:_e,setFlipSided:ft,setCullFace:dt,setLineWidth:Rt,setPolygonOffset:Dt,setScissorTest:gn,activeTexture:Z,bindTexture:j,unbindTexture:Ee,compressedTexImage2D:Xe,compressedTexImage3D:He,texImage2D:Ke,texImage3D:wn,updateUBOMapping:At,uniformBlockBinding:et,texStorage2D:Pt,texStorage3D:cn,texSubImage2D:Je,texSubImage3D:St,compressedTexSubImage2D:nt,compressedTexSubImage3D:vt,scissor:$t,viewport:Mt,reset:qe}}function gie(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const _=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(Z,j){return S?new OffscreenCanvas(Z,j):P_("canvas")}function T(Z,j,Ee,Xe){let He=1;if((Z.width>Xe||Z.height>Xe)&&(He=Xe/Math.max(Z.width,Z.height)),He<1||j===!0)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap){const Je=j?DT:Math.floor,St=Je(He*Z.width),nt=Je(He*Z.height);v===void 0&&(v=A(St,nt));const vt=Ee?A(St,nt):v;return vt.width=St,vt.height=nt,vt.getContext("2d").drawImage(Z,0,0,St,nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+St+"x"+nt+")."),vt}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),Z;return Z}function b(Z){return xI(Z.width)&&xI(Z.height)}function C(Z){return a?!1:Z.wrapS!==Ri||Z.wrapT!==Ri||Z.minFilter!==pr&&Z.minFilter!==oi}function L(Z,j){return Z.generateMipmaps&&j&&Z.minFilter!==pr&&Z.minFilter!==oi}function P(Z){n.generateMipmap(Z)}function k(Z,j,Ee,Xe,He=!1){if(a===!1)return j;if(Z!==null){if(n[Z]!==void 0)return n[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let Je=j;if(j===n.RED&&(Ee===n.FLOAT&&(Je=n.R32F),Ee===n.HALF_FLOAT&&(Je=n.R16F),Ee===n.UNSIGNED_BYTE&&(Je=n.R8)),j===n.RED_INTEGER&&(Ee===n.UNSIGNED_BYTE&&(Je=n.R8UI),Ee===n.UNSIGNED_SHORT&&(Je=n.R16UI),Ee===n.UNSIGNED_INT&&(Je=n.R32UI),Ee===n.BYTE&&(Je=n.R8I),Ee===n.SHORT&&(Je=n.R16I),Ee===n.INT&&(Je=n.R32I)),j===n.RG&&(Ee===n.FLOAT&&(Je=n.RG32F),Ee===n.HALF_FLOAT&&(Je=n.RG16F),Ee===n.UNSIGNED_BYTE&&(Je=n.RG8)),j===n.RGBA){const St=He?b_:yi.getTransfer(Xe);Ee===n.FLOAT&&(Je=n.RGBA32F),Ee===n.HALF_FLOAT&&(Je=n.RGBA16F),Ee===n.UNSIGNED_BYTE&&(Je=St===ki?n.SRGB8_ALPHA8:n.RGBA8),Ee===n.UNSIGNED_SHORT_4_4_4_4&&(Je=n.RGBA4),Ee===n.UNSIGNED_SHORT_5_5_5_1&&(Je=n.RGB5_A1)}return(Je===n.R16F||Je===n.R32F||Je===n.RG16F||Je===n.RG32F||Je===n.RGBA16F||Je===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Je}function I(Z,j,Ee){return L(Z,Ee)===!0||Z.isFramebufferTexture&&Z.minFilter!==pr&&Z.minFilter!==oi?Math.log2(Math.max(j.width,j.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?j.mipmaps.length:1}function D(Z){return Z===pr||Z===T_||Z===J0?n.NEAREST:n.LINEAR}function G(Z){const j=Z.target;j.removeEventListener("dispose",G),q(j),j.isVideoTexture&&g.delete(j)}function H(Z){const j=Z.target;j.removeEventListener("dispose",H),te(j)}function q(Z){const j=i.get(Z);if(j.__webglInit===void 0)return;const Ee=Z.source,Xe=_.get(Ee);if(Xe){const He=Xe[j.__cacheKey];He.usedTimes--,He.usedTimes===0&&W(Z),Object.keys(Xe).length===0&&_.delete(Ee)}i.remove(Z)}function W(Z){const j=i.get(Z);n.deleteTexture(j.__webglTexture);const Ee=Z.source,Xe=_.get(Ee);delete Xe[j.__cacheKey],o.memory.textures--}function te(Z){const j=Z.texture,Ee=i.get(Z),Xe=i.get(j);if(Xe.__webglTexture!==void 0&&(n.deleteTexture(Xe.__webglTexture),o.memory.textures--),Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(Ee.__webglFramebuffer[He]))for(let Je=0;Je<Ee.__webglFramebuffer[He].length;Je++)n.deleteFramebuffer(Ee.__webglFramebuffer[He][Je]);else n.deleteFramebuffer(Ee.__webglFramebuffer[He]);Ee.__webglDepthbuffer&&n.deleteRenderbuffer(Ee.__webglDepthbuffer[He])}else{if(Array.isArray(Ee.__webglFramebuffer))for(let He=0;He<Ee.__webglFramebuffer.length;He++)n.deleteFramebuffer(Ee.__webglFramebuffer[He]);else n.deleteFramebuffer(Ee.__webglFramebuffer);if(Ee.__webglDepthbuffer&&n.deleteRenderbuffer(Ee.__webglDepthbuffer),Ee.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Ee.__webglMultisampledFramebuffer),Ee.__webglColorRenderbuffer)for(let He=0;He<Ee.__webglColorRenderbuffer.length;He++)Ee.__webglColorRenderbuffer[He]&&n.deleteRenderbuffer(Ee.__webglColorRenderbuffer[He]);Ee.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Ee.__webglDepthRenderbuffer)}if(Z.isWebGLMultipleRenderTargets)for(let He=0,Je=j.length;He<Je;He++){const St=i.get(j[He]);St.__webglTexture&&(n.deleteTexture(St.__webglTexture),o.memory.textures--),i.remove(j[He])}i.remove(j),i.remove(Z)}let ee=0;function ne(){ee=0}function Y(){const Z=ee;return Z>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+l),ee+=1,Z}function Q(Z){const j=[];return j.push(Z.wrapS),j.push(Z.wrapT),j.push(Z.wrapR||0),j.push(Z.magFilter),j.push(Z.minFilter),j.push(Z.anisotropy),j.push(Z.internalFormat),j.push(Z.format),j.push(Z.type),j.push(Z.generateMipmaps),j.push(Z.premultiplyAlpha),j.push(Z.flipY),j.push(Z.unpackAlignment),j.push(Z.colorSpace),j.join()}function F(Z,j){const Ee=i.get(Z);if(Z.isVideoTexture&&Dt(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&Ee.__version!==Z.version){const Xe=Z.image;if(Xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(Ee,Z,j);return}}t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture,n.TEXTURE0+j)}function ie(Z,j){const Ee=i.get(Z);if(Z.version>0&&Ee.__version!==Z.version){lt(Ee,Z,j);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Ee.__webglTexture,n.TEXTURE0+j)}function he(Z,j){const Ee=i.get(Z);if(Z.version>0&&Ee.__version!==Z.version){lt(Ee,Z,j);return}t.bindTexture(n.TEXTURE_3D,Ee.__webglTexture,n.TEXTURE0+j)}function pe(Z,j){const Ee=i.get(Z);if(Z.version>0&&Ee.__version!==Z.version){bt(Ee,Z,j);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture,n.TEXTURE0+j)}const ye={[hu]:n.REPEAT,[Ri]:n.CLAMP_TO_EDGE,[fv]:n.MIRRORED_REPEAT},Be={[pr]:n.NEAREST,[T_]:n.NEAREST_MIPMAP_NEAREST,[J0]:n.NEAREST_MIPMAP_LINEAR,[oi]:n.LINEAR,[$w]:n.LINEAR_MIPMAP_NEAREST,[du]:n.LINEAR_MIPMAP_LINEAR},Me={[S$]:n.NEVER,[M$]:n.ALWAYS,[E$]:n.LESS,[JD]:n.LEQUAL,[A$]:n.EQUAL,[b$]:n.GEQUAL,[T$]:n.GREATER,[w$]:n.NOTEQUAL};function Le(Z,j,Ee){if(Ee?(n.texParameteri(Z,n.TEXTURE_WRAP_S,ye[j.wrapS]),n.texParameteri(Z,n.TEXTURE_WRAP_T,ye[j.wrapT]),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,ye[j.wrapR]),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,Be[j.magFilter]),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,Be[j.minFilter])):(n.texParameteri(Z,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(Z,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Z,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(j.wrapS!==Ri||j.wrapT!==Ri)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,D(j.magFilter)),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,D(j.minFilter)),j.minFilter!==pr&&j.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),j.compareFunction&&(n.texParameteri(Z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Z,n.TEXTURE_COMPARE_FUNC,Me[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Xe=e.get("EXT_texture_filter_anisotropic");if(j.magFilter===pr||j.minFilter!==J0&&j.minFilter!==du||j.type===Wr&&e.has("OES_texture_float_linear")===!1||a===!1&&j.type===ys&&e.has("OES_texture_half_float_linear")===!1)return;(j.anisotropy>1||i.get(j).__currentAnisotropy)&&(n.texParameterf(Z,Xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,r.getMaxAnisotropy())),i.get(j).__currentAnisotropy=j.anisotropy)}}function je(Z,j){let Ee=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,j.addEventListener("dispose",G));const Xe=j.source;let He=_.get(Xe);He===void 0&&(He={},_.set(Xe,He));const Je=Q(j);if(Je!==Z.__cacheKey){He[Je]===void 0&&(He[Je]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Ee=!0),He[Je].usedTimes++;const St=He[Z.__cacheKey];St!==void 0&&(He[Z.__cacheKey].usedTimes--,St.usedTimes===0&&W(j)),Z.__cacheKey=Je,Z.__webglTexture=He[Je].texture}return Ee}function lt(Z,j,Ee){let Xe=n.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Xe=n.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Xe=n.TEXTURE_3D);const He=je(Z,j),Je=j.source;t.bindTexture(Xe,Z.__webglTexture,n.TEXTURE0+Ee);const St=i.get(Je);if(Je.version!==St.__version||He===!0){t.activeTexture(n.TEXTURE0+Ee);const nt=yi.getPrimaries(yi.workingColorSpace),vt=j.colorSpace===Da?null:yi.getPrimaries(j.colorSpace),Pt=j.colorSpace===Da||nt===vt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);const cn=C(j)&&b(j.image)===!1;let Ke=T(j.image,cn,!1,u);Ke=gn(j,Ke);const wn=b(Ke)||a,$t=s.convert(j.format,j.colorSpace);let Mt=s.convert(j.type),At=k(j.internalFormat,$t,Mt,j.colorSpace,j.isVideoTexture);Le(Xe,j,wn);let et;const qe=j.mipmaps,ve=a&&j.isVideoTexture!==!0&&At!==XD,yt=St.__version===void 0||He===!0,rt=I(j,Ke,wn);if(j.isDepthTexture)At=n.DEPTH_COMPONENT,a?j.type===Wr?At=n.DEPTH_COMPONENT32F:j.type===Kc?At=n.DEPTH_COMPONENT24:j.type===Yh?At=n.DEPTH24_STENCIL8:At=n.DEPTH_COMPONENT16:j.type===Wr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),j.format===qh&&At===n.DEPTH_COMPONENT&&j.type!==Ww&&j.type!==Kc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),j.type=Kc,Mt=s.convert(j.type)),j.format===Sm&&At===n.DEPTH_COMPONENT&&(At=n.DEPTH_STENCIL,j.type!==Yh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),j.type=Yh,Mt=s.convert(j.type))),yt&&(ve?t.texStorage2D(n.TEXTURE_2D,1,At,Ke.width,Ke.height):t.texImage2D(n.TEXTURE_2D,0,At,Ke.width,Ke.height,0,$t,Mt,null));else if(j.isDataTexture)if(qe.length>0&&wn){ve&&yt&&t.texStorage2D(n.TEXTURE_2D,rt,At,qe[0].width,qe[0].height);for(let ze=0,ut=qe.length;ze<ut;ze++)et=qe[ze],ve?t.texSubImage2D(n.TEXTURE_2D,ze,0,0,et.width,et.height,$t,Mt,et.data):t.texImage2D(n.TEXTURE_2D,ze,At,et.width,et.height,0,$t,Mt,et.data);j.generateMipmaps=!1}else ve?(yt&&t.texStorage2D(n.TEXTURE_2D,rt,At,Ke.width,Ke.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke.width,Ke.height,$t,Mt,Ke.data)):t.texImage2D(n.TEXTURE_2D,0,At,Ke.width,Ke.height,0,$t,Mt,Ke.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){ve&&yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,rt,At,qe[0].width,qe[0].height,Ke.depth);for(let ze=0,ut=qe.length;ze<ut;ze++)et=qe[ze],j.format!==ts?$t!==null?ve?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ze,0,0,0,et.width,et.height,Ke.depth,$t,et.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ze,At,et.width,et.height,Ke.depth,0,et.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ze,0,0,0,et.width,et.height,Ke.depth,$t,Mt,et.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ze,At,et.width,et.height,Ke.depth,0,$t,Mt,et.data)}else{ve&&yt&&t.texStorage2D(n.TEXTURE_2D,rt,At,qe[0].width,qe[0].height);for(let ze=0,ut=qe.length;ze<ut;ze++)et=qe[ze],j.format!==ts?$t!==null?ve?t.compressedTexSubImage2D(n.TEXTURE_2D,ze,0,0,et.width,et.height,$t,et.data):t.compressedTexImage2D(n.TEXTURE_2D,ze,At,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?t.texSubImage2D(n.TEXTURE_2D,ze,0,0,et.width,et.height,$t,Mt,et.data):t.texImage2D(n.TEXTURE_2D,ze,At,et.width,et.height,0,$t,Mt,et.data)}else if(j.isDataArrayTexture)ve?(yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,rt,At,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,$t,Mt,Ke.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,At,Ke.width,Ke.height,Ke.depth,0,$t,Mt,Ke.data);else if(j.isData3DTexture)ve?(yt&&t.texStorage3D(n.TEXTURE_3D,rt,At,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,$t,Mt,Ke.data)):t.texImage3D(n.TEXTURE_3D,0,At,Ke.width,Ke.height,Ke.depth,0,$t,Mt,Ke.data);else if(j.isFramebufferTexture){if(yt)if(ve)t.texStorage2D(n.TEXTURE_2D,rt,At,Ke.width,Ke.height);else{let ze=Ke.width,ut=Ke.height;for(let qt=0;qt<rt;qt++)t.texImage2D(n.TEXTURE_2D,qt,At,ze,ut,0,$t,Mt,null),ze>>=1,ut>>=1}}else if(qe.length>0&&wn){ve&&yt&&t.texStorage2D(n.TEXTURE_2D,rt,At,qe[0].width,qe[0].height);for(let ze=0,ut=qe.length;ze<ut;ze++)et=qe[ze],ve?t.texSubImage2D(n.TEXTURE_2D,ze,0,0,$t,Mt,et):t.texImage2D(n.TEXTURE_2D,ze,At,$t,Mt,et);j.generateMipmaps=!1}else ve?(yt&&t.texStorage2D(n.TEXTURE_2D,rt,At,Ke.width,Ke.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,$t,Mt,Ke)):t.texImage2D(n.TEXTURE_2D,0,At,$t,Mt,Ke);L(j,wn)&&P(Xe),St.__version=Je.version,j.onUpdate&&j.onUpdate(j)}Z.__version=j.version}function bt(Z,j,Ee){if(j.image.length!==6)return;const Xe=je(Z,j),He=j.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+Ee);const Je=i.get(He);if(He.version!==Je.__version||Xe===!0){t.activeTexture(n.TEXTURE0+Ee);const St=yi.getPrimaries(yi.workingColorSpace),nt=j.colorSpace===Da?null:yi.getPrimaries(j.colorSpace),vt=j.colorSpace===Da||St===nt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);const Pt=j.isCompressedTexture||j.image[0].isCompressedTexture,cn=j.image[0]&&j.image[0].isDataTexture,Ke=[];for(let ze=0;ze<6;ze++)!Pt&&!cn?Ke[ze]=T(j.image[ze],!1,!0,c):Ke[ze]=cn?j.image[ze].image:j.image[ze],Ke[ze]=gn(j,Ke[ze]);const wn=Ke[0],$t=b(wn)||a,Mt=s.convert(j.format,j.colorSpace),At=s.convert(j.type),et=k(j.internalFormat,Mt,At,j.colorSpace),qe=a&&j.isVideoTexture!==!0,ve=Je.__version===void 0||Xe===!0;let yt=I(j,wn,$t);Le(n.TEXTURE_CUBE_MAP,j,$t);let rt;if(Pt){qe&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,yt,et,wn.width,wn.height);for(let ze=0;ze<6;ze++){rt=Ke[ze].mipmaps;for(let ut=0;ut<rt.length;ut++){const qt=rt[ut];j.format!==ts?Mt!==null?qe?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut,0,0,qt.width,qt.height,Mt,qt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut,et,qt.width,qt.height,0,qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut,0,0,qt.width,qt.height,Mt,At,qt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut,et,qt.width,qt.height,0,Mt,At,qt.data)}}}else{rt=j.mipmaps,qe&&ve&&(rt.length>0&&yt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,yt,et,Ke[0].width,Ke[0].height));for(let ze=0;ze<6;ze++)if(cn){qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,Ke[ze].width,Ke[ze].height,Mt,At,Ke[ze].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,et,Ke[ze].width,Ke[ze].height,0,Mt,At,Ke[ze].data);for(let ut=0;ut<rt.length;ut++){const En=rt[ut].image[ze].image;qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut+1,0,0,En.width,En.height,Mt,At,En.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut+1,et,En.width,En.height,0,Mt,At,En.data)}}else{qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,Mt,At,Ke[ze]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,et,Mt,At,Ke[ze]);for(let ut=0;ut<rt.length;ut++){const qt=rt[ut];qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut+1,0,0,Mt,At,qt.image[ze]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ut+1,et,Mt,At,qt.image[ze])}}}L(j,$t)&&P(n.TEXTURE_CUBE_MAP),Je.__version=He.version,j.onUpdate&&j.onUpdate(j)}Z.__version=j.version}function gt(Z,j,Ee,Xe,He,Je){const St=s.convert(Ee.format,Ee.colorSpace),nt=s.convert(Ee.type),vt=k(Ee.internalFormat,St,nt,Ee.colorSpace);if(!i.get(j).__hasExternalTextures){const cn=Math.max(1,j.width>>Je),Ke=Math.max(1,j.height>>Je);He===n.TEXTURE_3D||He===n.TEXTURE_2D_ARRAY?t.texImage3D(He,Je,vt,cn,Ke,j.depth,0,St,nt,null):t.texImage2D(He,Je,vt,cn,Ke,0,St,nt,null)}t.bindFramebuffer(n.FRAMEBUFFER,Z),Rt(j)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Xe,He,i.get(Ee).__webglTexture,0,dt(j)):(He===n.TEXTURE_2D||He>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&He<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Xe,He,i.get(Ee).__webglTexture,Je),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(Z,j,Ee){if(n.bindRenderbuffer(n.RENDERBUFFER,Z),j.depthBuffer&&!j.stencilBuffer){let Xe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(Ee||Rt(j)){const He=j.depthTexture;He&&He.isDepthTexture&&(He.type===Wr?Xe=n.DEPTH_COMPONENT32F:He.type===Kc&&(Xe=n.DEPTH_COMPONENT24));const Je=dt(j);Rt(j)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Xe,j.width,j.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Xe,j.width,j.height)}else n.renderbufferStorage(n.RENDERBUFFER,Xe,j.width,j.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,Z)}else if(j.depthBuffer&&j.stencilBuffer){const Xe=dt(j);Ee&&Rt(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Xe,n.DEPTH24_STENCIL8,j.width,j.height):Rt(j)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Xe,n.DEPTH24_STENCIL8,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,Z)}else{const Xe=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let He=0;He<Xe.length;He++){const Je=Xe[He],St=s.convert(Je.format,Je.colorSpace),nt=s.convert(Je.type),vt=k(Je.internalFormat,St,nt,Je.colorSpace),Pt=dt(j);Ee&&Rt(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,vt,j.width,j.height):Rt(j)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pt,vt,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,vt,j.width,j.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ne(Z,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Z),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),F(j.depthTexture,0);const Xe=i.get(j.depthTexture).__webglTexture,He=dt(j);if(j.depthTexture.format===qh)Rt(j)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xe,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xe,0);else if(j.depthTexture.format===Sm)Rt(j)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xe,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xe,0);else throw new Error("Unknown depthTexture format")}function ke(Z){const j=i.get(Z),Ee=Z.isWebGLCubeRenderTarget===!0;if(Z.depthTexture&&!j.__autoAllocateDepthBuffer){if(Ee)throw new Error("target.depthTexture not supported in Cube render targets");Ne(j.__webglFramebuffer,Z)}else if(Ee){j.__webglDepthbuffer=[];for(let Xe=0;Xe<6;Xe++)t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[Xe]),j.__webglDepthbuffer[Xe]=n.createRenderbuffer(),ue(j.__webglDepthbuffer[Xe],Z,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=n.createRenderbuffer(),ue(j.__webglDepthbuffer,Z,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ze(Z,j,Ee){const Xe=i.get(Z);j!==void 0&&gt(Xe.__webglFramebuffer,Z,Z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ee!==void 0&&ke(Z)}function We(Z){const j=Z.texture,Ee=i.get(Z),Xe=i.get(j);Z.addEventListener("dispose",H),Z.isWebGLMultipleRenderTargets!==!0&&(Xe.__webglTexture===void 0&&(Xe.__webglTexture=n.createTexture()),Xe.__version=j.version,o.memory.textures++);const He=Z.isWebGLCubeRenderTarget===!0,Je=Z.isWebGLMultipleRenderTargets===!0,St=b(Z)||a;if(He){Ee.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)if(a&&j.mipmaps&&j.mipmaps.length>0){Ee.__webglFramebuffer[nt]=[];for(let vt=0;vt<j.mipmaps.length;vt++)Ee.__webglFramebuffer[nt][vt]=n.createFramebuffer()}else Ee.__webglFramebuffer[nt]=n.createFramebuffer()}else{if(a&&j.mipmaps&&j.mipmaps.length>0){Ee.__webglFramebuffer=[];for(let nt=0;nt<j.mipmaps.length;nt++)Ee.__webglFramebuffer[nt]=n.createFramebuffer()}else Ee.__webglFramebuffer=n.createFramebuffer();if(Je)if(r.drawBuffers){const nt=Z.texture;for(let vt=0,Pt=nt.length;vt<Pt;vt++){const cn=i.get(nt[vt]);cn.__webglTexture===void 0&&(cn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Z.samples>0&&Rt(Z)===!1){const nt=Je?j:[j];Ee.__webglMultisampledFramebuffer=n.createFramebuffer(),Ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Ee.__webglMultisampledFramebuffer);for(let vt=0;vt<nt.length;vt++){const Pt=nt[vt];Ee.__webglColorRenderbuffer[vt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ee.__webglColorRenderbuffer[vt]);const cn=s.convert(Pt.format,Pt.colorSpace),Ke=s.convert(Pt.type),wn=k(Pt.internalFormat,cn,Ke,Pt.colorSpace,Z.isXRRenderTarget===!0),$t=dt(Z);n.renderbufferStorageMultisample(n.RENDERBUFFER,$t,wn,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+vt,n.RENDERBUFFER,Ee.__webglColorRenderbuffer[vt])}n.bindRenderbuffer(n.RENDERBUFFER,null),Z.depthBuffer&&(Ee.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(Ee.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(He){t.bindTexture(n.TEXTURE_CUBE_MAP,Xe.__webglTexture),Le(n.TEXTURE_CUBE_MAP,j,St);for(let nt=0;nt<6;nt++)if(a&&j.mipmaps&&j.mipmaps.length>0)for(let vt=0;vt<j.mipmaps.length;vt++)gt(Ee.__webglFramebuffer[nt][vt],Z,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+nt,vt);else gt(Ee.__webglFramebuffer[nt],Z,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0);L(j,St)&&P(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Je){const nt=Z.texture;for(let vt=0,Pt=nt.length;vt<Pt;vt++){const cn=nt[vt],Ke=i.get(cn);t.bindTexture(n.TEXTURE_2D,Ke.__webglTexture),Le(n.TEXTURE_2D,cn,St),gt(Ee.__webglFramebuffer,Z,cn,n.COLOR_ATTACHMENT0+vt,n.TEXTURE_2D,0),L(cn,St)&&P(n.TEXTURE_2D)}t.unbindTexture()}else{let nt=n.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(a?nt=Z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(nt,Xe.__webglTexture),Le(nt,j,St),a&&j.mipmaps&&j.mipmaps.length>0)for(let vt=0;vt<j.mipmaps.length;vt++)gt(Ee.__webglFramebuffer[vt],Z,j,n.COLOR_ATTACHMENT0,nt,vt);else gt(Ee.__webglFramebuffer,Z,j,n.COLOR_ATTACHMENT0,nt,0);L(j,St)&&P(nt),t.unbindTexture()}Z.depthBuffer&&ke(Z)}function _e(Z){const j=b(Z)||a,Ee=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let Xe=0,He=Ee.length;Xe<He;Xe++){const Je=Ee[Xe];if(L(Je,j)){const St=Z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,nt=i.get(Je).__webglTexture;t.bindTexture(St,nt),P(St),t.unbindTexture()}}}function ft(Z){if(a&&Z.samples>0&&Rt(Z)===!1){const j=Z.isWebGLMultipleRenderTargets?Z.texture:[Z.texture],Ee=Z.width,Xe=Z.height;let He=n.COLOR_BUFFER_BIT;const Je=[],St=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,nt=i.get(Z),vt=Z.isWebGLMultipleRenderTargets===!0;if(vt)for(let Pt=0;Pt<j.length;Pt++)t.bindFramebuffer(n.FRAMEBUFFER,nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,nt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,nt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,nt.__webglFramebuffer);for(let Pt=0;Pt<j.length;Pt++){Je.push(n.COLOR_ATTACHMENT0+Pt),Z.depthBuffer&&Je.push(St);const cn=nt.__ignoreDepthValues!==void 0?nt.__ignoreDepthValues:!1;if(cn===!1&&(Z.depthBuffer&&(He|=n.DEPTH_BUFFER_BIT),Z.stencilBuffer&&(He|=n.STENCIL_BUFFER_BIT)),vt&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,nt.__webglColorRenderbuffer[Pt]),cn===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[St]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[St])),vt){const Ke=i.get(j[Pt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ke,0)}n.blitFramebuffer(0,0,Ee,Xe,0,0,Ee,Xe,He,n.NEAREST),p&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Je)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),vt)for(let Pt=0;Pt<j.length;Pt++){t.bindFramebuffer(n.FRAMEBUFFER,nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,nt.__webglColorRenderbuffer[Pt]);const cn=i.get(j[Pt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,nt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,cn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,nt.__webglMultisampledFramebuffer)}}function dt(Z){return Math.min(f,Z.samples)}function Rt(Z){const j=i.get(Z);return a&&Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function Dt(Z){const j=o.render.frame;g.get(Z)!==j&&(g.set(Z,j),Z.update())}function gn(Z,j){const Ee=Z.colorSpace,Xe=Z.format,He=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||Z.format===LT||Ee!==Ha&&Ee!==Da&&(yi.getTransfer(Ee)===ki?a===!1?e.has("EXT_sRGB")===!0&&Xe===ts?(Z.format=LT,Z.minFilter=oi,Z.generateMipmaps=!1):j=ZD.sRGBToLinear(j):(Xe!==ts||He!==wl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ee)),j}this.allocateTextureUnit=Y,this.resetTextureUnits=ne,this.setTexture2D=F,this.setTexture2DArray=ie,this.setTexture3D=he,this.setTextureCube=pe,this.rebindTextures=Ze,this.setupRenderTarget=We,this.updateRenderTargetMipmap=_e,this.updateMultisampleRenderTarget=ft,this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=gt,this.useMultisampledRTT=Rt}function G$(n,e,t){const i=t.isWebGL2;function r(s,o=Da){let a;const l=yi.getTransfer(o);if(s===wl)return n.UNSIGNED_BYTE;if(s===HD)return n.UNSIGNED_SHORT_4_4_4_4;if(s===zD)return n.UNSIGNED_SHORT_5_5_5_1;if(s===GD)return n.BYTE;if(s===VD)return n.SHORT;if(s===Ww)return n.UNSIGNED_SHORT;if(s===jw)return n.INT;if(s===Kc)return n.UNSIGNED_INT;if(s===Wr)return n.FLOAT;if(s===ys)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===c$)return n.ALPHA;if(s===ts)return n.RGBA;if(s===u$)return n.LUMINANCE;if(s===f$)return n.LUMINANCE_ALPHA;if(s===qh)return n.DEPTH_COMPONENT;if(s===Sm)return n.DEPTH_STENCIL;if(s===LT)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===$D)return n.RED;if(s===WD)return n.RED_INTEGER;if(s===h$)return n.RG;if(s===jD)return n.RG_INTEGER;if(s===KD)return n.RGBA_INTEGER;if(s===YA||s===qA||s===JA||s===QA)if(l===ki)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===YA)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===qA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===JA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===QA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===YA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===qA)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===JA)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===QA)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===jP||s===KP||s===XP||s===YP)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===jP)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===KP)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===XP)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===YP)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===XD)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===qP||s===JP)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===qP)return l===ki?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===JP)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===QP||s===ZP||s===eI||s===tI||s===nI||s===iI||s===rI||s===sI||s===oI||s===aI||s===lI||s===cI||s===uI||s===fI)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===QP)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ZP)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===eI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===tI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===nI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===iI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===rI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===sI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===oI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===aI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===lI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===uI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===fI)return l===ki?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ZA||s===hI||s===dI)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===ZA)return l===ki?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===hI)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===dI)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===d$||s===pI||s===mI||s===gI)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===ZA)return a.COMPRESSED_RED_RGTC1_EXT;if(s===pI)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===mI)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===gI)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Yh?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class V$ extends $r{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uc extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const vie={type:"move"};class sC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const _=t.getJointPose(v,i),S=this._getHandJoint(c,v);_!==null&&(S.matrix.fromArray(_.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=_.radius),S.visible=_!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),p=.02,g=.005;c.inputState.pinching&&h>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vie)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new uc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class yie extends Lf{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,h=null,p=null,g=null;const v=t.getContextAttributes();let _=null,S=null;const A=[],T=[],b=new Qe;let C=null;const L=new $r;L.layers.enable(1),L.viewport=new qn;const P=new $r;P.layers.enable(2),P.viewport=new qn;const k=[L,P],I=new V$;I.layers.enable(1),I.layers.enable(2);let D=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pe){let ye=A[pe];return ye===void 0&&(ye=new sC,A[pe]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(pe){let ye=A[pe];return ye===void 0&&(ye=new sC,A[pe]=ye),ye.getGripSpace()},this.getHand=function(pe){let ye=A[pe];return ye===void 0&&(ye=new sC,A[pe]=ye),ye.getHandSpace()};function H(pe){const ye=T.indexOf(pe.inputSource);if(ye===-1)return;const Be=A[ye];Be!==void 0&&(Be.update(pe.inputSource,pe.frame,c||o),Be.dispatchEvent({type:pe.type,data:pe.inputSource}))}function q(){r.removeEventListener("select",H),r.removeEventListener("selectstart",H),r.removeEventListener("selectend",H),r.removeEventListener("squeeze",H),r.removeEventListener("squeezestart",H),r.removeEventListener("squeezeend",H),r.removeEventListener("end",q),r.removeEventListener("inputsourceschange",W);for(let pe=0;pe<A.length;pe++){const ye=T[pe];ye!==null&&(T[pe]=null,A[pe].disconnect(ye))}D=null,G=null,e.setRenderTarget(_),p=null,h=null,f=null,r=null,S=null,he.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(b.width,b.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pe){s=pe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pe){a=pe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(pe){c=pe},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(pe){if(r=pe,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",H),r.addEventListener("selectstart",H),r.addEventListener("selectend",H),r.addEventListener("squeeze",H),r.addEventListener("squeezestart",H),r.addEventListener("squeezeend",H),r.addEventListener("end",q),r.addEventListener("inputsourceschange",W),v.xrCompatible!==!0&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(b),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ye={antialias:r.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,ye),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),S=new No(p.framebufferWidth,p.framebufferHeight,{format:ts,type:wl,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let ye=null,Be=null,Me=null;v.depth&&(Me=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=v.stencil?Sm:qh,Be=v.stencil?Yh:Kc);const Le={colorFormat:t.RGBA8,depthFormat:Me,scaleFactor:s};f=new XRWebGLBinding(r,t),h=f.createProjectionLayer(Le),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),S=new No(h.textureWidth,h.textureHeight,{format:ts,type:wl,depthTexture:new s2(h.textureWidth,h.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const je=e.properties.get(S);je.__ignoreDepthValues=h.ignoreDepthValues}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),he.setContext(r),he.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function W(pe){for(let ye=0;ye<pe.removed.length;ye++){const Be=pe.removed[ye],Me=T.indexOf(Be);Me>=0&&(T[Me]=null,A[Me].disconnect(Be))}for(let ye=0;ye<pe.added.length;ye++){const Be=pe.added[ye];let Me=T.indexOf(Be);if(Me===-1){for(let je=0;je<A.length;je++)if(je>=T.length){T.push(Be),Me=je;break}else if(T[je]===null){T[je]=Be,Me=je;break}if(Me===-1)break}const Le=A[Me];Le&&Le.connect(Be)}}const te=new re,ee=new re;function ne(pe,ye,Be){te.setFromMatrixPosition(ye.matrixWorld),ee.setFromMatrixPosition(Be.matrixWorld);const Me=te.distanceTo(ee),Le=ye.projectionMatrix.elements,je=Be.projectionMatrix.elements,lt=Le[14]/(Le[10]-1),bt=Le[14]/(Le[10]+1),gt=(Le[9]+1)/Le[5],ue=(Le[9]-1)/Le[5],Ne=(Le[8]-1)/Le[0],ke=(je[8]+1)/je[0],Ze=lt*Ne,We=lt*ke,_e=Me/(-Ne+ke),ft=_e*-Ne;ye.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),pe.translateX(ft),pe.translateZ(_e),pe.matrixWorld.compose(pe.position,pe.quaternion,pe.scale),pe.matrixWorldInverse.copy(pe.matrixWorld).invert();const dt=lt+_e,Rt=bt+_e,Dt=Ze-ft,gn=We+(Me-ft),Z=gt*bt/Rt*dt,j=ue*bt/Rt*dt;pe.projectionMatrix.makePerspective(Dt,gn,Z,j,dt,Rt),pe.projectionMatrixInverse.copy(pe.projectionMatrix).invert()}function Y(pe,ye){ye===null?pe.matrixWorld.copy(pe.matrix):pe.matrixWorld.multiplyMatrices(ye.matrixWorld,pe.matrix),pe.matrixWorldInverse.copy(pe.matrixWorld).invert()}this.updateCamera=function(pe){if(r===null)return;I.near=P.near=L.near=pe.near,I.far=P.far=L.far=pe.far,(D!==I.near||G!==I.far)&&(r.updateRenderState({depthNear:I.near,depthFar:I.far}),D=I.near,G=I.far);const ye=pe.parent,Be=I.cameras;Y(I,ye);for(let Me=0;Me<Be.length;Me++)Y(Be[Me],ye);Be.length===2?ne(I,L,P):I.projectionMatrix.copy(L.projectionMatrix),Q(pe,I,ye)};function Q(pe,ye,Be){Be===null?pe.matrix.copy(ye.matrixWorld):(pe.matrix.copy(Be.matrixWorld),pe.matrix.invert(),pe.matrix.multiply(ye.matrixWorld)),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale),pe.updateMatrixWorld(!0),pe.projectionMatrix.copy(ye.projectionMatrix),pe.projectionMatrixInverse.copy(ye.projectionMatrixInverse),pe.isPerspectiveCamera&&(pe.fov=pv*2*Math.atan(1/pe.projectionMatrix.elements[5]),pe.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(pe){l=pe,h!==null&&(h.fixedFoveation=pe),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=pe)};let F=null;function ie(pe,ye){if(u=ye.getViewerPose(c||o),g=ye,u!==null){const Be=u.views;p!==null&&(e.setRenderTargetFramebuffer(S,p.framebuffer),e.setRenderTarget(S));let Me=!1;Be.length!==I.cameras.length&&(I.cameras.length=0,Me=!0);for(let Le=0;Le<Be.length;Le++){const je=Be[Le];let lt=null;if(p!==null)lt=p.getViewport(je);else{const gt=f.getViewSubImage(h,je);lt=gt.viewport,Le===0&&(e.setRenderTargetTextures(S,gt.colorTexture,h.ignoreDepthValues?void 0:gt.depthStencilTexture),e.setRenderTarget(S))}let bt=k[Le];bt===void 0&&(bt=new $r,bt.layers.enable(Le),bt.viewport=new qn,k[Le]=bt),bt.matrix.fromArray(je.transform.matrix),bt.matrix.decompose(bt.position,bt.quaternion,bt.scale),bt.projectionMatrix.fromArray(je.projectionMatrix),bt.projectionMatrixInverse.copy(bt.projectionMatrix).invert(),bt.viewport.set(lt.x,lt.y,lt.width,lt.height),Le===0&&(I.matrix.copy(bt.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),Me===!0&&I.cameras.push(bt)}}for(let Be=0;Be<A.length;Be++){const Me=T[Be],Le=A[Be];Me!==null&&Le!==void 0&&Le.update(Me,ye,c||o)}F&&F(pe,ye),ye.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ye}),g=null}const he=new B$;he.setAnimationLoop(ie),this.setAnimationLoop=function(pe){F=pe},this.dispose=function(){}}}function xie(n,e){function t(_,S){_.matrixAutoUpdate===!0&&_.updateMatrix(),S.value.copy(_.matrix)}function i(_,S){S.color.getRGB(_.fogColor.value,L$(n)),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)}function r(_,S,A,T,b){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(_,S):S.isMeshToonMaterial?(s(_,S),f(_,S)):S.isMeshPhongMaterial?(s(_,S),u(_,S)):S.isMeshStandardMaterial?(s(_,S),h(_,S),S.isMeshPhysicalMaterial&&p(_,S,b)):S.isMeshMatcapMaterial?(s(_,S),g(_,S)):S.isMeshDepthMaterial?s(_,S):S.isMeshDistanceMaterial?(s(_,S),v(_,S)):S.isMeshNormalMaterial?s(_,S):S.isLineBasicMaterial?(o(_,S),S.isLineDashedMaterial&&a(_,S)):S.isPointsMaterial?l(_,S,A,T):S.isSpriteMaterial?c(_,S):S.isShadowMaterial?(_.color.value.copy(S.color),_.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(_,S){_.opacity.value=S.opacity,S.color&&_.diffuse.value.copy(S.color),S.emissive&&_.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.bumpMap&&(_.bumpMap.value=S.bumpMap,t(S.bumpMap,_.bumpMapTransform),_.bumpScale.value=S.bumpScale,S.side===Fo&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,t(S.normalMap,_.normalMapTransform),_.normalScale.value.copy(S.normalScale),S.side===Fo&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,t(S.displacementMap,_.displacementMapTransform),_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,_.emissiveMapTransform)),S.specularMap&&(_.specularMap.value=S.specularMap,t(S.specularMap,_.specularMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest);const A=e.get(S).envMap;if(A&&(_.envMap.value=A,_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=S.reflectivity,_.ior.value=S.ior,_.refractionRatio.value=S.refractionRatio),S.lightMap){_.lightMap.value=S.lightMap;const T=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=S.lightMapIntensity*T,t(S.lightMap,_.lightMapTransform)}S.aoMap&&(_.aoMap.value=S.aoMap,_.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,_.aoMapTransform))}function o(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform))}function a(_,S){_.dashSize.value=S.dashSize,_.totalSize.value=S.dashSize+S.gapSize,_.scale.value=S.scale}function l(_,S,A,T){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.size.value=S.size*A,_.scale.value=T*.5,S.map&&(_.map.value=S.map,t(S.map,_.uvTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function c(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.rotation.value=S.rotation,S.map&&(_.map.value=S.map,t(S.map,_.mapTransform)),S.alphaMap&&(_.alphaMap.value=S.alphaMap,t(S.alphaMap,_.alphaMapTransform)),S.alphaTest>0&&(_.alphaTest.value=S.alphaTest)}function u(_,S){_.specular.value.copy(S.specular),_.shininess.value=Math.max(S.shininess,1e-4)}function f(_,S){S.gradientMap&&(_.gradientMap.value=S.gradientMap)}function h(_,S){_.metalness.value=S.metalness,S.metalnessMap&&(_.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,_.metalnessMapTransform)),_.roughness.value=S.roughness,S.roughnessMap&&(_.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,_.roughnessMapTransform)),e.get(S).envMap&&(_.envMapIntensity.value=S.envMapIntensity)}function p(_,S,A){_.ior.value=S.ior,S.sheen>0&&(_.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),_.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(_.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,_.sheenColorMapTransform)),S.sheenRoughnessMap&&(_.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,_.sheenRoughnessMapTransform))),S.clearcoat>0&&(_.clearcoat.value=S.clearcoat,_.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(_.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,_.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(_.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Fo&&_.clearcoatNormalScale.value.negate())),S.iridescence>0&&(_.iridescence.value=S.iridescence,_.iridescenceIOR.value=S.iridescenceIOR,_.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(_.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,_.iridescenceMapTransform)),S.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),S.transmission>0&&(_.transmission.value=S.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),S.transmissionMap&&(_.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,_.transmissionMapTransform)),_.thickness.value=S.thickness,S.thicknessMap&&(_.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=S.attenuationDistance,_.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(_.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(_.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=S.specularIntensity,_.specularColor.value.copy(S.specularColor),S.specularColorMap&&(_.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,_.specularColorMapTransform)),S.specularIntensityMap&&(_.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,S){S.matcap&&(_.matcap.value=S.matcap)}function v(_,S){const A=e.get(S).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function _ie(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,T){const b=T.program;i.uniformBlockBinding(A,b)}function c(A,T){let b=r[A.id];b===void 0&&(g(A),b=u(A),r[A.id]=b,A.addEventListener("dispose",_));const C=T.program;i.updateUBOMapping(A,C);const L=e.render.frame;s[A.id]!==L&&(h(A),s[A.id]=L)}function u(A){const T=f();A.__bindingPointIndex=T;const b=n.createBuffer(),C=A.__size,L=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,C,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,b),b}function f(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(A){const T=r[A.id],b=A.uniforms,C=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let L=0,P=b.length;L<P;L++){const k=b[L];if(p(k,L,C)===!0){const I=k.__offset,D=Array.isArray(k.value)?k.value:[k.value];let G=0;for(let H=0;H<D.length;H++){const q=D[H],W=v(q);typeof q=="number"?(k.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,I+G,k.__data)):q.isMatrix3?(k.__data[0]=q.elements[0],k.__data[1]=q.elements[1],k.__data[2]=q.elements[2],k.__data[3]=q.elements[0],k.__data[4]=q.elements[3],k.__data[5]=q.elements[4],k.__data[6]=q.elements[5],k.__data[7]=q.elements[0],k.__data[8]=q.elements[6],k.__data[9]=q.elements[7],k.__data[10]=q.elements[8],k.__data[11]=q.elements[0]):(q.toArray(k.__data,G),G+=W.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,k.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(A,T,b){const C=A.value;if(b[T]===void 0){if(typeof C=="number")b[T]=C;else{const L=Array.isArray(C)?C:[C],P=[];for(let k=0;k<L.length;k++)P.push(L[k].clone());b[T]=P}return!0}else if(typeof C=="number"){if(b[T]!==C)return b[T]=C,!0}else{const L=Array.isArray(b[T])?b[T]:[b[T]],P=Array.isArray(C)?C:[C];for(let k=0;k<L.length;k++){const I=L[k];if(I.equals(P[k])===!1)return I.copy(P[k]),!0}}return!1}function g(A){const T=A.uniforms;let b=0;const C=16;let L=0;for(let P=0,k=T.length;P<k;P++){const I=T[P],D={boundary:0,storage:0},G=Array.isArray(I.value)?I.value:[I.value];for(let H=0,q=G.length;H<q;H++){const W=G[H],te=v(W);D.boundary+=te.boundary,D.storage+=te.storage}if(I.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=b,P>0){L=b%C;const H=C-L;L!==0&&H-D.boundary<0&&(b+=C-L,I.__offset=b)}b+=D.storage}return L=b%C,L>0&&(b+=C-L),A.__size=b,A.__cache={},this}function v(A){const T={boundary:0,storage:0};return typeof A=="number"?(T.boundary=4,T.storage=4):A.isVector2?(T.boundary=8,T.storage=8):A.isVector3||A.isColor?(T.boundary=16,T.storage=12):A.isVector4?(T.boundary=16,T.storage=16):A.isMatrix3?(T.boundary=48,T.storage=48):A.isMatrix4?(T.boundary=64,T.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),T}function _(A){const T=A.target;T.removeEventListener("dispose",_);const b=o.indexOf(T.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function S(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:S}}class Zw{constructor(e={}){const{canvas:t=R$(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;i!==null?h=i.getContextAttributes().alpha:h=o;const p=new Uint32Array(4),g=new Int32Array(4);let v=null,_=null;const S=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Hr,this._useLegacyLights=!1,this.toneMapping=Zc,this.toneMappingExposure=1;const T=this;let b=!1,C=0,L=0,P=null,k=-1,I=null;const D=new qn,G=new qn;let H=null;const q=new ht(0);let W=0,te=t.width,ee=t.height,ne=1,Y=null,Q=null;const F=new qn(0,0,te,ee),ie=new qn(0,0,te,ee);let he=!1;const pe=new I1;let ye=!1,Be=!1,Me=null;const Le=new Lt,je=new Qe,lt=new re,bt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gt(){return P===null?ne:1}let ue=i;function Ne(z,se){for(let oe=0;oe<z.length;oe++){const fe=z[oe],le=t.getContext(fe,se);if(le!==null)return le}return null}try{const z={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${w1}`),t.addEventListener("webglcontextlost",qe,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",yt,!1),ue===null){const se=["webgl2","webgl","experimental-webgl"];if(T.isWebGL1Renderer===!0&&se.shift(),ue=Ne(se,z),ue===null)throw Ne(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ue instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ue.getShaderPrecisionFormat===void 0&&(ue.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let ke,Ze,We,_e,ft,dt,Rt,Dt,gn,Z,j,Ee,Xe,He,Je,St,nt,vt,Pt,cn,Ke,wn,$t,Mt;function At(){ke=new kte(ue),Ze=new Rte(ue,ke,e),ke.init(Ze),wn=new G$(ue,ke,Ze),We=new mie(ue,ke,Ze),_e=new Nte(ue),ft=new iie,dt=new gie(ue,ke,We,ft,Ze,wn,_e),Rt=new Ite(T),Dt=new Bte(T),gn=new jQ(ue,Ze),$t=new Mte(ue,ke,gn,Ze),Z=new Ote(ue,gn,_e,$t),j=new Hte(ue,Z,gn,_e),Pt=new Vte(ue,Ze,dt),St=new Pte(ft),Ee=new nie(T,Rt,Dt,ke,Ze,$t,St),Xe=new xie(T,ft),He=new sie,Je=new fie(ke,Ze),vt=new bte(T,Rt,Dt,We,j,h,l),nt=new pie(T,j,Ze),Mt=new _ie(ue,_e,Ze,We),cn=new Cte(ue,ke,_e,Ze),Ke=new Fte(ue,ke,_e,Ze),_e.programs=Ee.programs,T.capabilities=Ze,T.extensions=ke,T.properties=ft,T.renderLists=He,T.shadowMap=nt,T.state=We,T.info=_e}At();const et=new yie(T,ue);this.xr=et,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const z=ke.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=ke.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(z){z!==void 0&&(ne=z,this.setSize(te,ee,!1))},this.getSize=function(z){return z.set(te,ee)},this.setSize=function(z,se,oe=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}te=z,ee=se,t.width=Math.floor(z*ne),t.height=Math.floor(se*ne),oe===!0&&(t.style.width=z+"px",t.style.height=se+"px"),this.setViewport(0,0,z,se)},this.getDrawingBufferSize=function(z){return z.set(te*ne,ee*ne).floor()},this.setDrawingBufferSize=function(z,se,oe){te=z,ee=se,ne=oe,t.width=Math.floor(z*oe),t.height=Math.floor(se*oe),this.setViewport(0,0,z,se)},this.getCurrentViewport=function(z){return z.copy(D)},this.getViewport=function(z){return z.copy(F)},this.setViewport=function(z,se,oe,fe){z.isVector4?F.set(z.x,z.y,z.z,z.w):F.set(z,se,oe,fe),We.viewport(D.copy(F).multiplyScalar(ne).floor())},this.getScissor=function(z){return z.copy(ie)},this.setScissor=function(z,se,oe,fe){z.isVector4?ie.set(z.x,z.y,z.z,z.w):ie.set(z,se,oe,fe),We.scissor(G.copy(ie).multiplyScalar(ne).floor())},this.getScissorTest=function(){return he},this.setScissorTest=function(z){We.setScissorTest(he=z)},this.setOpaqueSort=function(z){Y=z},this.setTransparentSort=function(z){Q=z},this.getClearColor=function(z){return z.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor.apply(vt,arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha.apply(vt,arguments)},this.clear=function(z=!0,se=!0,oe=!0){let fe=0;if(z){let le=!1;if(P!==null){const be=P.texture.format;le=be===KD||be===jD||be===WD}if(le){const be=P.texture.type,Oe=be===wl||be===Kc||be===Ww||be===Yh||be===HD||be===zD,Ve=vt.getClearColor(),we=vt.getClearAlpha(),pt=Ve.r,Ye=Ve.g,it=Ve.b;Oe?(p[0]=pt,p[1]=Ye,p[2]=it,p[3]=we,ue.clearBufferuiv(ue.COLOR,0,p)):(g[0]=pt,g[1]=Ye,g[2]=it,g[3]=we,ue.clearBufferiv(ue.COLOR,0,g))}else fe|=ue.COLOR_BUFFER_BIT}se&&(fe|=ue.DEPTH_BUFFER_BIT),oe&&(fe|=ue.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ue.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",qe,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",yt,!1),He.dispose(),Je.dispose(),ft.dispose(),Rt.dispose(),Dt.dispose(),j.dispose(),$t.dispose(),Mt.dispose(),Ee.dispose(),et.dispose(),et.removeEventListener("sessionstart",kt),et.removeEventListener("sessionend",Ut),Me&&(Me.dispose(),Me=null),at.stop()};function qe(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const z=_e.autoReset,se=nt.enabled,oe=nt.autoUpdate,fe=nt.needsUpdate,le=nt.type;At(),_e.autoReset=z,nt.enabled=se,nt.autoUpdate=oe,nt.needsUpdate=fe,nt.type=le}function yt(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function rt(z){const se=z.target;se.removeEventListener("dispose",rt),ze(se)}function ze(z){ut(z),ft.remove(z)}function ut(z){const se=ft.get(z).programs;se!==void 0&&(se.forEach(function(oe){Ee.releaseProgram(oe)}),z.isShaderMaterial&&Ee.releaseShaderCache(z))}this.renderBufferDirect=function(z,se,oe,fe,le,be){se===null&&(se=bt);const Oe=le.isMesh&&le.matrixWorld.determinant()<0,Ve=$(z,se,oe,fe,le);We.setMaterial(fe,Oe);let we=oe.index,pt=1;if(fe.wireframe===!0){if(we=Z.getWireframeAttribute(oe),we===void 0)return;pt=2}const Ye=oe.drawRange,it=oe.attributes.position;let Bt=Ye.start*pt,Qt=(Ye.start+Ye.count)*pt;be!==null&&(Bt=Math.max(Bt,be.start*pt),Qt=Math.min(Qt,(be.start+be.count)*pt)),we!==null?(Bt=Math.max(Bt,0),Qt=Math.min(Qt,we.count)):it!=null&&(Bt=Math.max(Bt,0),Qt=Math.min(Qt,it.count));const zt=Qt-Bt;if(zt<0||zt===1/0)return;$t.setup(le,fe,Ve,oe,we);let sn,Et=cn;if(we!==null&&(sn=gn.get(we),Et=Ke,Et.setIndex(sn)),le.isMesh)fe.wireframe===!0?(We.setLineWidth(fe.wireframeLinewidth*gt()),Et.setMode(ue.LINES)):Et.setMode(ue.TRIANGLES);else if(le.isLine){let xt=fe.linewidth;xt===void 0&&(xt=1),We.setLineWidth(xt*gt()),le.isLineSegments?Et.setMode(ue.LINES):le.isLineLoop?Et.setMode(ue.LINE_LOOP):Et.setMode(ue.LINE_STRIP)}else le.isPoints?Et.setMode(ue.POINTS):le.isSprite&&Et.setMode(ue.TRIANGLES);if(le.isBatchedMesh)Et.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else if(le.isInstancedMesh)Et.renderInstances(Bt,zt,le.count);else if(oe.isInstancedBufferGeometry){const xt=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,mn=Math.min(oe.instanceCount,xt);Et.renderInstances(Bt,zt,mn)}else Et.render(Bt,zt)};function qt(z,se,oe){z.transparent===!0&&z.side===xl&&z.forceSinglePass===!1?(z.side=Fo,z.needsUpdate=!0,Gt(z,se,oe),z.side=uu,z.needsUpdate=!0,Gt(z,se,oe),z.side=xl):Gt(z,se,oe)}this.compile=function(z,se,oe=null){oe===null&&(oe=z),_=Je.get(oe),_.init(),A.push(_),oe.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(_.pushLight(le),le.castShadow&&_.pushShadow(le))}),z!==oe&&z.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(_.pushLight(le),le.castShadow&&_.pushShadow(le))}),_.setupLights(T._useLegacyLights);const fe=new Set;return z.traverse(function(le){const be=le.material;if(be)if(Array.isArray(be))for(let Oe=0;Oe<be.length;Oe++){const Ve=be[Oe];qt(Ve,oe,le),fe.add(Ve)}else qt(be,oe,le),fe.add(be)}),A.pop(),_=null,fe},this.compileAsync=function(z,se,oe=null){const fe=this.compile(z,se,oe);return new Promise(le=>{function be(){if(fe.forEach(function(Oe){ft.get(Oe).currentProgram.isReady()&&fe.delete(Oe)}),fe.size===0){le(z);return}setTimeout(be,10)}ke.get("KHR_parallel_shader_compile")!==null?be():setTimeout(be,10)})};let En=null;function Ft(z){En&&En(z)}function kt(){at.stop()}function Ut(){at.start()}const at=new B$;at.setAnimationLoop(Ft),typeof self<"u"&&at.setContext(self),this.setAnimationLoop=function(z){En=z,et.setAnimationLoop(z),z===null?at.stop():at.start()},et.addEventListener("sessionstart",kt),et.addEventListener("sessionend",Ut),this.render=function(z,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(se),se=et.getCamera()),z.isScene===!0&&z.onBeforeRender(T,z,se,P),_=Je.get(z,A.length),_.init(),A.push(_),Le.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),pe.setFromProjectionMatrix(Le),Be=this.localClippingEnabled,ye=St.init(this.clippingPlanes,Be),v=He.get(z,S.length),v.init(),S.push(v),Jt(z,se,0,T.sortObjects),v.finish(),T.sortObjects===!0&&v.sort(Y,Q),this.info.render.frame++,ye===!0&&St.beginShadows();const oe=_.state.shadowsArray;if(nt.render(oe,z,se),ye===!0&&St.endShadows(),this.info.autoReset===!0&&this.info.reset(),vt.render(v,z),_.setupLights(T._useLegacyLights),se.isArrayCamera){const fe=se.cameras;for(let le=0,be=fe.length;le<be;le++){const Oe=fe[le];Kt(v,z,Oe,Oe.viewport)}}else Kt(v,z,se);P!==null&&(dt.updateMultisampleRenderTarget(P),dt.updateRenderTargetMipmap(P)),z.isScene===!0&&z.onAfterRender(T,z,se),$t.resetDefaultState(),k=-1,I=null,A.pop(),A.length>0?_=A[A.length-1]:_=null,S.pop(),S.length>0?v=S[S.length-1]:v=null};function Jt(z,se,oe,fe){if(z.visible===!1)return;if(z.layers.test(se.layers)){if(z.isGroup)oe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(se);else if(z.isLight)_.pushLight(z),z.castShadow&&_.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||pe.intersectsSprite(z)){fe&&lt.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Le);const Oe=j.update(z),Ve=z.material;Ve.visible&&v.push(z,Oe,Ve,oe,lt.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||pe.intersectsObject(z))){const Oe=j.update(z),Ve=z.material;if(fe&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),lt.copy(z.boundingSphere.center)):(Oe.boundingSphere===null&&Oe.computeBoundingSphere(),lt.copy(Oe.boundingSphere.center)),lt.applyMatrix4(z.matrixWorld).applyMatrix4(Le)),Array.isArray(Ve)){const we=Oe.groups;for(let pt=0,Ye=we.length;pt<Ye;pt++){const it=we[pt],Bt=Ve[it.materialIndex];Bt&&Bt.visible&&v.push(z,Oe,Bt,oe,lt.z,it)}}else Ve.visible&&v.push(z,Oe,Ve,oe,lt.z,null)}}const be=z.children;for(let Oe=0,Ve=be.length;Oe<Ve;Oe++)Jt(be[Oe],se,oe,fe)}function Kt(z,se,oe,fe){const le=z.opaque,be=z.transmissive,Oe=z.transparent;_.setupLightsView(oe),ye===!0&&St.setGlobalState(T.clippingPlanes,oe),be.length>0&&rn(le,be,se,oe),fe&&We.viewport(D.copy(fe)),le.length>0&&Qn(le,se,oe),be.length>0&&Qn(be,se,oe),Oe.length>0&&Qn(Oe,se,oe),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function rn(z,se,oe,fe){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;const be=Ze.isWebGL2;Me===null&&(Me=new No(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")?ys:wl,minFilter:du,samples:be?4:0})),T.getDrawingBufferSize(je),be?Me.setSize(je.x,je.y):Me.setSize(DT(je.x),DT(je.y));const Oe=T.getRenderTarget();T.setRenderTarget(Me),T.getClearColor(q),W=T.getClearAlpha(),W<1&&T.setClearColor(16777215,.5),T.clear();const Ve=T.toneMapping;T.toneMapping=Zc,Qn(z,oe,fe),dt.updateMultisampleRenderTarget(Me),dt.updateRenderTargetMipmap(Me);let we=!1;for(let pt=0,Ye=se.length;pt<Ye;pt++){const it=se[pt],Bt=it.object,Qt=it.geometry,zt=it.material,sn=it.group;if(zt.side===xl&&Bt.layers.test(fe.layers)){const Et=zt.side;zt.side=Fo,zt.needsUpdate=!0,on(Bt,oe,fe,Qt,zt,sn),zt.side=Et,zt.needsUpdate=!0,we=!0}}we===!0&&(dt.updateMultisampleRenderTarget(Me),dt.updateRenderTargetMipmap(Me)),T.setRenderTarget(Oe),T.setClearColor(q,W),T.toneMapping=Ve}function Qn(z,se,oe){const fe=se.isScene===!0?se.overrideMaterial:null;for(let le=0,be=z.length;le<be;le++){const Oe=z[le],Ve=Oe.object,we=Oe.geometry,pt=fe===null?Oe.material:fe,Ye=Oe.group;Ve.layers.test(oe.layers)&&on(Ve,se,oe,we,pt,Ye)}}function on(z,se,oe,fe,le,be){z.onBeforeRender(T,se,oe,fe,le,be),z.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),le.onBeforeRender(T,se,oe,fe,z,be),le.transparent===!0&&le.side===xl&&le.forceSinglePass===!1?(le.side=Fo,le.needsUpdate=!0,T.renderBufferDirect(oe,se,fe,le,z,be),le.side=uu,le.needsUpdate=!0,T.renderBufferDirect(oe,se,fe,le,z,be),le.side=xl):T.renderBufferDirect(oe,se,fe,le,z,be),z.onAfterRender(T,se,oe,fe,le,be)}function Gt(z,se,oe){se.isScene!==!0&&(se=bt);const fe=ft.get(z),le=_.state.lights,be=_.state.shadowsArray,Oe=le.state.version,Ve=Ee.getParameters(z,le.state,be,se,oe),we=Ee.getProgramCacheKey(Ve);let pt=fe.programs;fe.environment=z.isMeshStandardMaterial?se.environment:null,fe.fog=se.fog,fe.envMap=(z.isMeshStandardMaterial?Dt:Rt).get(z.envMap||fe.environment),pt===void 0&&(z.addEventListener("dispose",rt),pt=new Map,fe.programs=pt);let Ye=pt.get(we);if(Ye!==void 0){if(fe.currentProgram===Ye&&fe.lightsStateVersion===Oe)return ci(z,Ve),Ye}else Ve.uniforms=Ee.getUniforms(z),z.onBuild(oe,Ve,T),z.onBeforeCompile(Ve,T),Ye=Ee.acquireProgram(Ve,we),pt.set(we,Ye),fe.uniforms=Ve.uniforms;const it=fe.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(it.clippingPlanes=St.uniform),ci(z,Ve),fe.needsLights=me(z),fe.lightsStateVersion=Oe,fe.needsLights&&(it.ambientLightColor.value=le.state.ambient,it.lightProbe.value=le.state.probe,it.directionalLights.value=le.state.directional,it.directionalLightShadows.value=le.state.directionalShadow,it.spotLights.value=le.state.spot,it.spotLightShadows.value=le.state.spotShadow,it.rectAreaLights.value=le.state.rectArea,it.ltc_1.value=le.state.rectAreaLTC1,it.ltc_2.value=le.state.rectAreaLTC2,it.pointLights.value=le.state.point,it.pointLightShadows.value=le.state.pointShadow,it.hemisphereLights.value=le.state.hemi,it.directionalShadowMap.value=le.state.directionalShadowMap,it.directionalShadowMatrix.value=le.state.directionalShadowMatrix,it.spotShadowMap.value=le.state.spotShadowMap,it.spotLightMatrix.value=le.state.spotLightMatrix,it.spotLightMap.value=le.state.spotLightMap,it.pointShadowMap.value=le.state.pointShadowMap,it.pointShadowMatrix.value=le.state.pointShadowMatrix),fe.currentProgram=Ye,fe.uniformsList=null,Ye}function Ii(z){if(z.uniformsList===null){const se=z.currentProgram.getUniforms();z.uniformsList=tT.seqWithValue(se.seq,z.uniforms)}return z.uniformsList}function ci(z,se){const oe=ft.get(z);oe.outputColorSpace=se.outputColorSpace,oe.batching=se.batching,oe.instancing=se.instancing,oe.instancingColor=se.instancingColor,oe.skinning=se.skinning,oe.morphTargets=se.morphTargets,oe.morphNormals=se.morphNormals,oe.morphColors=se.morphColors,oe.morphTargetsCount=se.morphTargetsCount,oe.numClippingPlanes=se.numClippingPlanes,oe.numIntersection=se.numClipIntersection,oe.vertexAlphas=se.vertexAlphas,oe.vertexTangents=se.vertexTangents,oe.toneMapping=se.toneMapping}function $(z,se,oe,fe,le){se.isScene!==!0&&(se=bt),dt.resetTextureUnits();const be=se.fog,Oe=fe.isMeshStandardMaterial?se.environment:null,Ve=P===null?T.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Ha,we=(fe.isMeshStandardMaterial?Dt:Rt).get(fe.envMap||Oe),pt=fe.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,Ye=!!oe.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),it=!!oe.morphAttributes.position,Bt=!!oe.morphAttributes.normal,Qt=!!oe.morphAttributes.color;let zt=Zc;fe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(zt=T.toneMapping);const sn=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Et=sn!==void 0?sn.length:0,xt=ft.get(fe),mn=_.state.lights;if(ye===!0&&(Be===!0||z!==I)){const Cn=z===I&&fe.id===k;St.setState(fe,z,Cn)}let un=!1;fe.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==mn.state.version||xt.outputColorSpace!==Ve||le.isBatchedMesh&&xt.batching===!1||!le.isBatchedMesh&&xt.batching===!0||le.isInstancedMesh&&xt.instancing===!1||!le.isInstancedMesh&&xt.instancing===!0||le.isSkinnedMesh&&xt.skinning===!1||!le.isSkinnedMesh&&xt.skinning===!0||le.isInstancedMesh&&xt.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&xt.instancingColor===!1&&le.instanceColor!==null||xt.envMap!==we||fe.fog===!0&&xt.fog!==be||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==St.numPlanes||xt.numIntersection!==St.numIntersection)||xt.vertexAlphas!==pt||xt.vertexTangents!==Ye||xt.morphTargets!==it||xt.morphNormals!==Bt||xt.morphColors!==Qt||xt.toneMapping!==zt||Ze.isWebGL2===!0&&xt.morphTargetsCount!==Et)&&(un=!0):(un=!0,xt.__version=fe.version);let vn=xt.currentProgram;un===!0&&(vn=Gt(fe,se,le));let ui=!1,wi=!1,pi=!1;const Nn=vn.getUniforms(),Pn=xt.uniforms;if(We.useProgram(vn.program)&&(ui=!0,wi=!0,pi=!0),fe.id!==k&&(k=fe.id,wi=!0),ui||I!==z){Nn.setValue(ue,"projectionMatrix",z.projectionMatrix),Nn.setValue(ue,"viewMatrix",z.matrixWorldInverse);const Cn=Nn.map.cameraPosition;Cn!==void 0&&Cn.setValue(ue,lt.setFromMatrixPosition(z.matrixWorld)),Ze.logarithmicDepthBuffer&&Nn.setValue(ue,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&Nn.setValue(ue,"isOrthographic",z.isOrthographicCamera===!0),I!==z&&(I=z,wi=!0,pi=!0)}if(le.isSkinnedMesh){Nn.setOptional(ue,le,"bindMatrix"),Nn.setOptional(ue,le,"bindMatrixInverse");const Cn=le.skeleton;Cn&&(Ze.floatVertexTextures?(Cn.boneTexture===null&&Cn.computeBoneTexture(),Nn.setValue(ue,"boneTexture",Cn.boneTexture,dt)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}le.isBatchedMesh&&(Nn.setOptional(ue,le,"batchingTexture"),Nn.setValue(ue,"batchingTexture",le._matricesTexture,dt));const Hi=oe.morphAttributes;if((Hi.position!==void 0||Hi.normal!==void 0||Hi.color!==void 0&&Ze.isWebGL2===!0)&&Pt.update(le,oe,vn),(wi||xt.receiveShadow!==le.receiveShadow)&&(xt.receiveShadow=le.receiveShadow,Nn.setValue(ue,"receiveShadow",le.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(Pn.envMap.value=we,Pn.flipEnvMap.value=we.isCubeTexture&&we.isRenderTargetTexture===!1?-1:1),wi&&(Nn.setValue(ue,"toneMappingExposure",T.toneMappingExposure),xt.needsLights&&J(Pn,pi),be&&fe.fog===!0&&Xe.refreshFogUniforms(Pn,be),Xe.refreshMaterialUniforms(Pn,fe,ne,ee,Me),tT.upload(ue,Ii(xt),Pn,dt)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(tT.upload(ue,Ii(xt),Pn,dt),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&Nn.setValue(ue,"center",le.center),Nn.setValue(ue,"modelViewMatrix",le.modelViewMatrix),Nn.setValue(ue,"normalMatrix",le.normalMatrix),Nn.setValue(ue,"modelMatrix",le.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const Cn=fe.uniformsGroups;for(let Un=0,mi=Cn.length;Un<mi;Un++)if(Ze.isWebGL2){const Gs=Cn[Un];Mt.update(Gs,vn),Mt.bind(Gs,vn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return vn}function J(z,se){z.ambientLightColor.needsUpdate=se,z.lightProbe.needsUpdate=se,z.directionalLights.needsUpdate=se,z.directionalLightShadows.needsUpdate=se,z.pointLights.needsUpdate=se,z.pointLightShadows.needsUpdate=se,z.spotLights.needsUpdate=se,z.spotLightShadows.needsUpdate=se,z.rectAreaLights.needsUpdate=se,z.hemisphereLights.needsUpdate=se}function me(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(z,se,oe){ft.get(z.texture).__webglTexture=se,ft.get(z.depthTexture).__webglTexture=oe;const fe=ft.get(z);fe.__hasExternalTextures=!0,fe.__hasExternalTextures&&(fe.__autoAllocateDepthBuffer=oe===void 0,fe.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(z,se){const oe=ft.get(z);oe.__webglFramebuffer=se,oe.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(z,se=0,oe=0){P=z,C=se,L=oe;let fe=!0,le=null,be=!1,Oe=!1;if(z){const we=ft.get(z);we.__useDefaultFramebuffer!==void 0?(We.bindFramebuffer(ue.FRAMEBUFFER,null),fe=!1):we.__webglFramebuffer===void 0?dt.setupRenderTarget(z):we.__hasExternalTextures&&dt.rebindTextures(z,ft.get(z.texture).__webglTexture,ft.get(z.depthTexture).__webglTexture);const pt=z.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Oe=!0);const Ye=ft.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(Ye[se])?le=Ye[se][oe]:le=Ye[se],be=!0):Ze.isWebGL2&&z.samples>0&&dt.useMultisampledRTT(z)===!1?le=ft.get(z).__webglMultisampledFramebuffer:Array.isArray(Ye)?le=Ye[oe]:le=Ye,D.copy(z.viewport),G.copy(z.scissor),H=z.scissorTest}else D.copy(F).multiplyScalar(ne).floor(),G.copy(ie).multiplyScalar(ne).floor(),H=he;if(We.bindFramebuffer(ue.FRAMEBUFFER,le)&&Ze.drawBuffers&&fe&&We.drawBuffers(z,le),We.viewport(D),We.scissor(G),We.setScissorTest(H),be){const we=ft.get(z.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_CUBE_MAP_POSITIVE_X+se,we.__webglTexture,oe)}else if(Oe){const we=ft.get(z.texture),pt=se||0;ue.framebufferTextureLayer(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,we.__webglTexture,oe||0,pt)}k=-1},this.readRenderTargetPixels=function(z,se,oe,fe,le,be,Oe){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ve=ft.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ve=Ve[Oe]),Ve){We.bindFramebuffer(ue.FRAMEBUFFER,Ve);try{const we=z.texture,pt=we.format,Ye=we.type;if(pt!==ts&&wn.convert(pt)!==ue.getParameter(ue.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const it=Ye===ys&&(ke.has("EXT_color_buffer_half_float")||Ze.isWebGL2&&ke.has("EXT_color_buffer_float"));if(Ye!==wl&&wn.convert(Ye)!==ue.getParameter(ue.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ye===Wr&&(Ze.isWebGL2||ke.has("OES_texture_float")||ke.has("WEBGL_color_buffer_float")))&&!it){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=z.width-fe&&oe>=0&&oe<=z.height-le&&ue.readPixels(se,oe,fe,le,wn.convert(pt),wn.convert(Ye),be)}finally{const we=P!==null?ft.get(P).__webglFramebuffer:null;We.bindFramebuffer(ue.FRAMEBUFFER,we)}}},this.copyFramebufferToTexture=function(z,se,oe=0){const fe=Math.pow(2,-oe),le=Math.floor(se.image.width*fe),be=Math.floor(se.image.height*fe);dt.setTexture2D(se,0),ue.copyTexSubImage2D(ue.TEXTURE_2D,oe,0,0,z.x,z.y,le,be),We.unbindTexture()},this.copyTextureToTexture=function(z,se,oe,fe=0){const le=se.image.width,be=se.image.height,Oe=wn.convert(oe.format),Ve=wn.convert(oe.type);dt.setTexture2D(oe,0),ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,oe.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,oe.unpackAlignment),se.isDataTexture?ue.texSubImage2D(ue.TEXTURE_2D,fe,z.x,z.y,le,be,Oe,Ve,se.image.data):se.isCompressedTexture?ue.compressedTexSubImage2D(ue.TEXTURE_2D,fe,z.x,z.y,se.mipmaps[0].width,se.mipmaps[0].height,Oe,se.mipmaps[0].data):ue.texSubImage2D(ue.TEXTURE_2D,fe,z.x,z.y,Oe,Ve,se.image),fe===0&&oe.generateMipmaps&&ue.generateMipmap(ue.TEXTURE_2D),We.unbindTexture()},this.copyTextureToTexture3D=function(z,se,oe,fe,le=0){if(T.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const be=z.max.x-z.min.x+1,Oe=z.max.y-z.min.y+1,Ve=z.max.z-z.min.z+1,we=wn.convert(fe.format),pt=wn.convert(fe.type);let Ye;if(fe.isData3DTexture)dt.setTexture3D(fe,0),Ye=ue.TEXTURE_3D;else if(fe.isDataArrayTexture)dt.setTexture2DArray(fe,0),Ye=ue.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,fe.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,fe.unpackAlignment);const it=ue.getParameter(ue.UNPACK_ROW_LENGTH),Bt=ue.getParameter(ue.UNPACK_IMAGE_HEIGHT),Qt=ue.getParameter(ue.UNPACK_SKIP_PIXELS),zt=ue.getParameter(ue.UNPACK_SKIP_ROWS),sn=ue.getParameter(ue.UNPACK_SKIP_IMAGES),Et=oe.isCompressedTexture?oe.mipmaps[0]:oe.image;ue.pixelStorei(ue.UNPACK_ROW_LENGTH,Et.width),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,Et.height),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,z.min.x),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,z.min.y),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,z.min.z),oe.isDataTexture||oe.isData3DTexture?ue.texSubImage3D(Ye,le,se.x,se.y,se.z,be,Oe,Ve,we,pt,Et.data):oe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ue.compressedTexSubImage3D(Ye,le,se.x,se.y,se.z,be,Oe,Ve,we,Et.data)):ue.texSubImage3D(Ye,le,se.x,se.y,se.z,be,Oe,Ve,we,pt,Et),ue.pixelStorei(ue.UNPACK_ROW_LENGTH,it),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,Bt),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,Qt),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,zt),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,sn),le===0&&fe.generateMipmaps&&ue.generateMipmap(Ye),We.unbindTexture()},this.initTexture=function(z){z.isCubeTexture?dt.setTextureCube(z,0):z.isData3DTexture?dt.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?dt.setTexture2DArray(z,0):dt.setTexture2D(z,0),We.unbindTexture()},this.resetState=function(){C=0,L=0,P=null,We.reset(),$t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Yw?"display-p3":"srgb",t.unpackColorSpace=yi.workingColorSpace===M1?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Hr?eu:Xw}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===eu?Hr:Ha}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class H$ extends Zw{}H$.prototype.isWebGL1Renderer=!0;class eb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ht(e),this.density=t}clone(){return new eb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class tb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ht(e),this.near=t,this.far=i}clone(){return new tb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class L1 extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class D1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=R_,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Na()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Na()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Na()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Eo=new re;class od{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.applyMatrix4(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.applyNormalMatrix(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.transformDirection(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}setX(e,t){return this.normalized&&(t=Fn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ca(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ca(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ca(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ca(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fn(t,this.array),i=Fn(i,this.array),r=Fn(r,this.array),s=Fn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Jn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new od(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class a2 extends is{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let s0;const jy=new re,o0=new re,a0=new re,l0=new Qe,Ky=new Qe,z$=new Lt,IE=new re,Xy=new re,LE=new re,QF=new Qe,oC=new Qe,ZF=new Qe;class $$ extends Hn{constructor(e=new a2){if(super(),this.isSprite=!0,this.type="Sprite",s0===void 0){s0=new Mn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new D1(t,5);s0.setIndex([0,1,2,0,2,3]),s0.setAttribute("position",new od(i,3,0,!1)),s0.setAttribute("uv",new od(i,2,3,!1))}this.geometry=s0,this.material=e,this.center=new Qe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),o0.setFromMatrixScale(this.matrixWorld),z$.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),a0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&o0.multiplyScalar(-a0.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;DE(IE.set(-.5,-.5,0),a0,o,o0,r,s),DE(Xy.set(.5,-.5,0),a0,o,o0,r,s),DE(LE.set(.5,.5,0),a0,o,o0,r,s),QF.set(0,0),oC.set(1,0),ZF.set(1,1);let a=e.ray.intersectTriangle(IE,Xy,LE,!1,jy);if(a===null&&(DE(Xy.set(-.5,.5,0),a0,o,o0,r,s),oC.set(0,1),a=e.ray.intersectTriangle(IE,LE,Xy,!1,jy),a===null))return;const l=e.ray.origin.distanceTo(jy);l<e.near||l>e.far||t.push({distance:l,point:jy.clone(),uv:la.getInterpolation(jy,IE,Xy,LE,QF,oC,ZF,new Qe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function DE(n,e,t,i,r,s){l0.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ky.x=s*l0.x-r*l0.y,Ky.y=r*l0.x+s*l0.y):Ky.copy(l0),n.copy(e),n.x+=Ky.x,n.y+=Ky.y,n.applyMatrix4(z$)}const BE=new re,e3=new re;class W$ extends Hn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){BE.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(BE);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){BE.setFromMatrixPosition(e.matrixWorld),e3.setFromMatrixPosition(this.matrixWorld);const i=BE.distanceTo(e3)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const t3=new re,n3=new qn,i3=new qn,Sie=new re,r3=new Lt,kE=new re,aC=new xs,s3=new Lt,lC=new Nv;class B1 extends Ni{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$P,this.bindMatrix=new Lt,this.bindMatrixInverse=new Lt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Fs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kE),this.boundingBox.expandByPoint(kE)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,kE),this.boundingSphere.expandByPoint(kE)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),aC.copy(this.boundingSphere),aC.applyMatrix4(r),e.ray.intersectsSphere(aC)!==!1&&(s3.copy(r).invert(),lC.copy(e.ray).applyMatrix4(s3),!(this.boundingBox!==null&&lC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,lC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$P?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===l$?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;n3.fromBufferAttribute(r.attributes.skinIndex,e),i3.fromBufferAttribute(r.attributes.skinWeight,e),t3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=i3.getComponent(s);if(o!==0){const a=n3.getComponent(s);r3.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Sie.copy(t3).applyMatrix4(r3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Am extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jh extends ri{constructor(e=null,t=1,i=1,r,s,o,a,l,c=pr,u=pr,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const o3=new Lt,Eie=new Lt;class km{constructor(e=[],t=[]){this.uuid=Na(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Eie;o3.multiplyMatrices(a,t[s]),o3.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new km(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Jh(t,e,e,ts,Wr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Am),this.bones.push(o),this.boneInverses.push(new Lt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Tm extends Jn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const c0=new Lt,a3=new Lt,OE=[],l3=new Fs,Aie=new Lt,Yy=new Ni,qy=new xs;class l2 extends Ni{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Tm(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Aie)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Fs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,c0),l3.copy(e.boundingBox).applyMatrix4(c0),this.boundingBox.union(l3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,c0),qy.copy(e.boundingSphere).applyMatrix4(c0),this.boundingSphere.union(qy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Yy.geometry=this.geometry,Yy.material=this.material,Yy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qy.copy(this.boundingSphere),qy.applyMatrix4(i),e.ray.intersectsSphere(qy)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,c0),a3.multiplyMatrices(i,c0),Yy.matrixWorld=a3,Yy.raycast(e,OE);for(let o=0,a=OE.length;o<a;o++){const l=OE[o];l.instanceId=s,l.object=this,t.push(l)}OE.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Tm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Tie(n,e){return n.z-e.z}function wie(n,e){return e.z-n.z}class bie{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const u0="batchId",Th=new Lt,c3=new Lt,Mie=new Lt,u3=new Lt,cC=new I1,FE=new Fs,pp=new xs,Jy=new re,uC=new bie,Js=new Ni,NE=[];function Cie(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class j$ extends Ni{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Mn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Jh(t,e,e,ts,Wr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,h=new c.constructor(i*u),p=new l.constructor(h,u,f);p.setUsage(l.usage),t.setAttribute(a,p)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Jn(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(u0,new Jn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(u0))throw new Error(`BatchedMesh: Geometry cannot use attribute "${u0}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===u0)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fs);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Th),this.getBoundingBoxAt(r,FE).applyMatrix4(Th),t.union(FE))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xs);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Th),this.getBoundingSphereAt(r,pp).applyMatrix4(Th),t.union(pp))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,h=this._active,p=this._matricesTexture,g=this._matricesTexture.image.data;f.push(!0),h.push(!0);const v=this._geometryCount;this._geometryCount++,Mie.toArray(g,v*16),p.needsUpdate=!0,o.push(r),a.push({start:u?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Fs,sphereInitialized:!1,sphere:new xs});const _=this.geometry.getAttribute(u0);for(let S=0;S<r.vertexCount;S++)_.setX(r.vertexStart+S,v);return _.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const p in i.attributes){if(p===u0)continue;const g=t.getAttribute(p),v=i.getAttribute(p);Cie(g,v,l);const _=g.itemSize;for(let S=g.count,A=c;S<A;S++){const T=l+S;for(let b=0;b<_;b++)v.setComponent(T,b,0)}v.needsUpdate=!0}if(r){const p=a.indexStart;for(let g=0;g<o.count;g++)s.setX(p+g,l+o.getX(g));for(let g=o.count,v=a.indexCount;g<v;g++)s.setX(p+g,l);s.needsUpdate=!0}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],h=t.getAttribute("position");return f.count=r?o.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let h=u;a&&(h=a.getX(h)),s.expandByPoint(Jy.fromBufferAttribute(l,h))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,FE),FE.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,h=c.start+c.count;f<h;f++){let p=f;a&&(p=a.getX(p)),Jy.fromBufferAttribute(l,p),u=Math.max(u,s.center.distanceToSquared(Jy))}s.radius=Math.sqrt(u),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Js.material=this.material,Js.geometry.index=l.index,Js.geometry.attributes=l.attributes,Js.geometry.boundingBox===null&&(Js.geometry.boundingBox=new Fs),Js.geometry.boundingSphere===null&&(Js.geometry.boundingSphere=new xs);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const u=s[c];Js.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Js.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Js.geometry.boundingBox),this.getBoundingSphereAt(c,Js.geometry.boundingSphere),Js.raycast(e,NE);for(let f=0,h=NE.length;f<h;f++){const p=NE[f];p.object=this,p.batchId=c,t.push(p)}NE.length=0}Js.material=null,Js.geometry.index=null,Js.geometry.attributes={},Js.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,h=this.perObjectFrustumCulled;h&&(u3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),cC.setFromProjectionMatrix(u3,e.isWebGPURenderer?dv:cc));let p=0;if(this.sortObjects){c3.copy(this.matrixWorld).invert(),Jy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(c3);for(let _=0,S=l.length;_<S;_++)if(l[_]){this.getMatrixAt(_,Th),this.getBoundingSphereAt(_,pp).applyMatrix4(Th);let A=!1;if(h&&(A=!cC.intersectsSphere(pp)),!A){const T=Jy.distanceTo(pp.center);uC.push(f[_],T)}}const g=uC.list,v=this.customSort;v===null?g.sort(s.transparent?wie:Tie):v.call(this,g,i);for(let _=0,S=g.length;_<S;_++){const A=g[_];c[p]=A.start*a,u[p]=A.count,p++}uC.reset()}else for(let g=0,v=l.length;g<v;g++)if(l[g]){let _=!1;if(h&&(this.getMatrixAt(g,Th),this.getBoundingSphereAt(g,pp).applyMatrix4(Th),_=!cC.intersectsSphere(pp)),!_){const S=f[g];c[p]=S.start*a,u[p]=S.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Us extends is{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const f3=new re,h3=new re,d3=new Lt,fC=new Nv,UE=new xs;class pu extends Hn{constructor(e=new Mn,t=new Us){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)f3.fromBufferAttribute(t,r-1),h3.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=f3.distanceTo(h3);e.setAttribute("lineDistance",new Ht(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),UE.copy(i.boundingSphere),UE.applyMatrix4(r),UE.radius+=s,e.ray.intersectsSphere(UE)===!1)return;d3.copy(r).invert(),fC.copy(e.ray).applyMatrix4(d3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new re,u=new re,f=new re,h=new re,p=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const S=Math.max(0,o.start),A=Math.min(g.count,o.start+o.count);for(let T=S,b=A-1;T<b;T+=p){const C=g.getX(T),L=g.getX(T+1);if(c.fromBufferAttribute(_,C),u.fromBufferAttribute(_,L),fC.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(h);k<e.near||k>e.far||t.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const S=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let T=S,b=A-1;T<b;T+=p){if(c.fromBufferAttribute(_,T),u.fromBufferAttribute(_,T+1),fC.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(h);L<e.near||L>e.far||t.push({distance:L,point:f.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const p3=new re,m3=new re;class mc extends pu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)p3.fromBufferAttribute(t,r),m3.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+p3.distanceTo(m3);e.setAttribute("lineDistance",new Ht(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class c2 extends pu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nb extends is{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const g3=new Lt,EI=new Nv,GE=new xs,VE=new re;class u2 extends Hn{constructor(e=new Mn,t=new nb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),GE.copy(i.boundingSphere),GE.applyMatrix4(r),GE.radius+=s,e.ray.intersectsSphere(GE)===!1)return;g3.copy(r).invert(),EI.copy(e.ray).applyMatrix4(g3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let g=h,v=p;g<v;g++){const _=c.getX(g);VE.fromBufferAttribute(f,_),v3(VE,_,l,r,e,t,this)}}else{const h=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let g=h,v=p;g<v;g++)VE.fromBufferAttribute(f,g),v3(VE,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function v3(n,e,t,i,r,s,o){const a=EI.distanceSqToPoint(n);if(a<t){const l=new re;EI.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class K$ extends ri{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:oi,this.magFilter=s!==void 0?s:oi,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Rie extends ri{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=pr,this.minFilter=pr,this.generateMipmaps=!1,this.needsUpdate=!0}}class ib extends ri{constructor(e,t,i,r,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Pie extends ib{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ri}}class Iie extends ib{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,fu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lie extends ri{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],h=i[r+1]-u,p=(o-u)/h;return(r+p)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Qe:new re);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new re,r=[],s=[],o=[],a=new re,l=new Lt;for(let p=0;p<=e;p++){const g=p/e;r[p]=this.getTangentAt(g,new re)}s[0]=new re,o[0]=new re;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(mr(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(mr(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],p*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rb extends Rl{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Qe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*f+this.aX,c=h*f+p*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class X$ extends rb{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function f2(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,p*=u,r(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const HE=new re,hC=new f2,dC=new f2,pC=new f2;class Y$ extends Rl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new re){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(HE.subVectors(r[0],r[1]).add(r[0]),c=HE);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(HE.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=HE),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),p),v=Math.pow(f.distanceToSquared(h),p),_=Math.pow(h.distanceToSquared(u),p);v<1e-4&&(v=1),g<1e-4&&(g=v),_<1e-4&&(_=v),hC.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,g,v,_),dC.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,g,v,_),pC.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,g,v,_)}else this.curveType==="catmullrom"&&(hC.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),dC.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),pC.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set(hC.calc(l),dC.calc(l),pC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new re().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function y3(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Die(n,e){const t=1-n;return t*t*e}function Bie(n,e){return 2*(1-n)*n*e}function kie(n,e){return n*n*e}function Hx(n,e,t,i){return Die(n,e)+Bie(n,t)+kie(n,i)}function Oie(n,e){const t=1-n;return t*t*t*e}function Fie(n,e){const t=1-n;return 3*t*t*n*e}function Nie(n,e){return 3*(1-n)*n*n*e}function Uie(n,e){return n*n*n*e}function zx(n,e,t,i,r){return Oie(n,e)+Fie(n,t)+Nie(n,i)+Uie(n,r)}class h2 extends Rl{constructor(e=new Qe,t=new Qe,i=new Qe,r=new Qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Qe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(zx(e,r.x,s.x,o.x,a.x),zx(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q$ extends Rl{constructor(e=new re,t=new re,i=new re,r=new re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(zx(e,r.x,s.x,o.x,a.x),zx(e,r.y,s.y,o.y,a.y),zx(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class d2 extends Rl{constructor(e=new Qe,t=new Qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Qe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Qe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class J$ extends Rl{constructor(e=new re,t=new re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new re){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p2 extends Rl{constructor(e=new Qe,t=new Qe,i=new Qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Qe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Hx(e,r.x,s.x,o.x),Hx(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m2 extends Rl{constructor(e=new re,t=new re,i=new re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new re){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Hx(e,r.x,s.x,o.x),Hx(e,r.y,s.y,o.y),Hx(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g2 extends Rl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Qe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(y3(a,l.x,c.x,u.x,f.x),y3(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Qe().fromArray(r))}return this}}var BT=Object.freeze({__proto__:null,ArcCurve:X$,CatmullRomCurve3:Y$,CubicBezierCurve:h2,CubicBezierCurve3:q$,EllipseCurve:rb,LineCurve:d2,LineCurve3:J$,QuadraticBezierCurve:p2,QuadraticBezierCurve3:m2,SplineCurve:g2});class Q$ extends Rl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new BT[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new BT[r.type]().fromJSON(r))}return this}}class I_ extends Q${constructor(e){super(),this.type="Path",this.currentPoint=new Qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new d2(this.currentPoint.clone(),new Qe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new p2(this.currentPoint.clone(),new Qe(e,t),new Qe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new h2(this.currentPoint.clone(),new Qe(e,t),new Qe(i,r),new Qe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new g2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new rb(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class k1 extends Mn{constructor(e=[new Qe(0,-.5),new Qe(.5,0),new Qe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=mr(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new re,h=new Qe,p=new re,g=new re,v=new re;let _=0,S=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,S=e[A+1].y-e[A].y,p.x=S*1,p.y=-_,p.z=S*0,v.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:_=e[A+1].x-e[A].x,S=e[A+1].y-e[A].y,p.x=S*1,p.y=-_,p.z=S*0,g.copy(p),p.x+=v.x,p.y+=v.y,p.z+=v.z,p.normalize(),l.push(p.x,p.y,p.z),v.copy(g)}for(let A=0;A<=t;A++){const T=i+A*u*r,b=Math.sin(T),C=Math.cos(T);for(let L=0;L<=e.length-1;L++){f.x=e[L].x*b,f.y=e[L].y,f.z=e[L].x*C,o.push(f.x,f.y,f.z),h.x=A/t,h.y=L/(e.length-1),a.push(h.x,h.y);const P=l[3*L+0]*b,k=l[3*L+1],I=l[3*L+0]*C;c.push(P,k,I)}}for(let A=0;A<t;A++)for(let T=0;T<e.length-1;T++){const b=T+A*e.length,C=b,L=b+e.length,P=b+e.length+1,k=b+1;s.push(C,L,k),s.push(P,k,L)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(a,2)),this.setAttribute("normal",new Ht(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k1(e.points,e.segments,e.phiStart,e.phiLength)}}class sb extends k1{constructor(e=1,t=1,i=4,r=8){const s=new I_;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new sb(e.radius,e.length,e.capSegments,e.radialSegments)}}class ob extends Mn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new re,u=new Qe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const p=i+f/t*r;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ob(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gv extends Mn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],p=[];let g=0;const v=[],_=i/2;let S=0;A(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(u),this.setAttribute("position",new Ht(f,3)),this.setAttribute("normal",new Ht(h,3)),this.setAttribute("uv",new Ht(p,2));function A(){const b=new re,C=new re;let L=0;const P=(t-e)/i;for(let k=0;k<=s;k++){const I=[],D=k/s,G=D*(t-e)+e;for(let H=0;H<=r;H++){const q=H/r,W=q*l+a,te=Math.sin(W),ee=Math.cos(W);C.x=G*te,C.y=-D*i+_,C.z=G*ee,f.push(C.x,C.y,C.z),b.set(te,P,ee).normalize(),h.push(b.x,b.y,b.z),p.push(q,1-D),I.push(g++)}v.push(I)}for(let k=0;k<r;k++)for(let I=0;I<s;I++){const D=v[I][k],G=v[I+1][k],H=v[I+1][k+1],q=v[I][k+1];u.push(D,G,q),u.push(G,H,q),L+=6}c.addGroup(S,L,0),S+=L}function T(b){const C=g,L=new Qe,P=new re;let k=0;const I=b===!0?e:t,D=b===!0?1:-1;for(let H=1;H<=r;H++)f.push(0,_*D,0),h.push(0,D,0),p.push(.5,.5),g++;const G=g;for(let H=0;H<=r;H++){const W=H/r*l+a,te=Math.cos(W),ee=Math.sin(W);P.x=I*ee,P.y=_*D,P.z=I*te,f.push(P.x,P.y,P.z),h.push(0,D,0),L.x=te*.5+.5,L.y=ee*.5*D+.5,p.push(L.x,L.y),g++}for(let H=0;H<r;H++){const q=C+H,W=G+H;b===!0?u.push(W,W+1,q):u.push(W+1,W,q),k+=3}c.addGroup(S,k,b===!0?1:2),S+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ab extends Gv{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new ab(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Td extends Mn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(s.slice(),3)),this.setAttribute("uv",new Ht(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const T=new re,b=new re,C=new re;for(let L=0;L<t.length;L+=3)p(t[L+0],T),p(t[L+1],b),p(t[L+2],C),l(T,b,C,A)}function l(A,T,b,C){const L=C+1,P=[];for(let k=0;k<=L;k++){P[k]=[];const I=A.clone().lerp(b,k/L),D=T.clone().lerp(b,k/L),G=L-k;for(let H=0;H<=G;H++)H===0&&k===L?P[k][H]=I:P[k][H]=I.clone().lerp(D,H/G)}for(let k=0;k<L;k++)for(let I=0;I<2*(L-k)-1;I++){const D=Math.floor(I/2);I%2===0?(h(P[k][D+1]),h(P[k+1][D]),h(P[k][D])):(h(P[k][D+1]),h(P[k+1][D+1]),h(P[k+1][D]))}}function c(A){const T=new re;for(let b=0;b<s.length;b+=3)T.x=s[b+0],T.y=s[b+1],T.z=s[b+2],T.normalize().multiplyScalar(A),s[b+0]=T.x,s[b+1]=T.y,s[b+2]=T.z}function u(){const A=new re;for(let T=0;T<s.length;T+=3){A.x=s[T+0],A.y=s[T+1],A.z=s[T+2];const b=_(A)/2/Math.PI+.5,C=S(A)/Math.PI+.5;o.push(b,1-C)}g(),f()}function f(){for(let A=0;A<o.length;A+=6){const T=o[A+0],b=o[A+2],C=o[A+4],L=Math.max(T,b,C),P=Math.min(T,b,C);L>.9&&P<.1&&(T<.2&&(o[A+0]+=1),b<.2&&(o[A+2]+=1),C<.2&&(o[A+4]+=1))}}function h(A){s.push(A.x,A.y,A.z)}function p(A,T){const b=A*3;T.x=e[b+0],T.y=e[b+1],T.z=e[b+2]}function g(){const A=new re,T=new re,b=new re,C=new re,L=new Qe,P=new Qe,k=new Qe;for(let I=0,D=0;I<s.length;I+=9,D+=6){A.set(s[I+0],s[I+1],s[I+2]),T.set(s[I+3],s[I+4],s[I+5]),b.set(s[I+6],s[I+7],s[I+8]),L.set(o[D+0],o[D+1]),P.set(o[D+2],o[D+3]),k.set(o[D+4],o[D+5]),C.copy(A).add(T).add(b).divideScalar(3);const G=_(C);v(L,D+0,A,G),v(P,D+2,T,G),v(k,D+4,b,G)}}function v(A,T,b,C){C<0&&A.x===1&&(o[T]=A.x-1),b.x===0&&b.z===0&&(o[T]=C/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function S(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Td(e.vertices,e.indices,e.radius,e.details)}}class lb extends Td{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lb(e.radius,e.detail)}}const zE=new re,$E=new re,mC=new re,WE=new la;class Z$ extends Mn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(rm*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},p=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:_,c:S}=WE;if(v.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),S.fromBufferAttribute(a,c[2]),WE.getNormal(mC),f[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,f[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let A=0;A<3;A++){const T=(A+1)%3,b=f[A],C=f[T],L=WE[u[A]],P=WE[u[T]],k=`${b}_${C}`,I=`${C}_${b}`;I in h&&h[I]?(mC.dot(h[I].normal)<=s&&(p.push(L.x,L.y,L.z),p.push(P.x,P.y,P.z)),h[I]=null):k in h||(h[k]={index0:c[A],index1:c[T],normal:mC.clone()})}}for(const g in h)if(h[g]){const{index0:v,index1:_}=h[g];zE.fromBufferAttribute(a,v),$E.fromBufferAttribute(a,_),p.push(zE.x,zE.y,zE.z),p.push($E.x,$E.y,$E.z)}this.setAttribute("position",new Ht(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qh extends I_{constructor(e){super(e),this.uuid=Na(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new I_().fromJSON(r))}return this}}const Gie={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=e8(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,p;if(i&&(s=Wie(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)f=n[g],h=n[g+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return L_(s,o,t,a,l,p,0),o}};function e8(n,e,t,i,r){let s,o;if(r===nre(n,e,t,i)>0)for(s=e;s<t;s+=i)o=x3(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=x3(s,n[s],n[s+1],o);return o&&cb(o,o.next)&&(B_(o),o=o.next),o}function wm(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(cb(t,t.next)||ir(t.prev,t,t.next)===0)){if(B_(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function L_(n,e,t,i,r,s,o){if(!n)return;!o&&s&&qie(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Hie(n,i,r,s):Vie(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),B_(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=zie(wm(n),e,t),L_(n,e,t,i,r,s,2)):o===2&&$ie(n,e,t,i,r,s):L_(wm(n),e,t,i,r,s,1);break}}}function Vie(n){const e=n.prev,t=n,i=n.next;if(ir(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=f&&g.y<=p&&L0(r,a,s,l,o,c,g.x,g.y)&&ir(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Hie(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ir(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,h=o.y,p=a<l?a<c?a:c:l<c?l:c,g=u<f?u<h?u:h:f<h?f:h,v=a>l?a>c?a:c:l>c?l:c,_=u>f?u>h?u:h:f>h?f:h,S=AI(p,g,e,t,i),A=AI(v,_,e,t,i);let T=n.prevZ,b=n.nextZ;for(;T&&T.z>=S&&b&&b.z<=A;){if(T.x>=p&&T.x<=v&&T.y>=g&&T.y<=_&&T!==r&&T!==o&&L0(a,u,l,f,c,h,T.x,T.y)&&ir(T.prev,T,T.next)>=0||(T=T.prevZ,b.x>=p&&b.x<=v&&b.y>=g&&b.y<=_&&b!==r&&b!==o&&L0(a,u,l,f,c,h,b.x,b.y)&&ir(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;T&&T.z>=S;){if(T.x>=p&&T.x<=v&&T.y>=g&&T.y<=_&&T!==r&&T!==o&&L0(a,u,l,f,c,h,T.x,T.y)&&ir(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;b&&b.z<=A;){if(b.x>=p&&b.x<=v&&b.y>=g&&b.y<=_&&b!==r&&b!==o&&L0(a,u,l,f,c,h,b.x,b.y)&&ir(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function zie(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!cb(r,s)&&t8(r,i,i.next,s)&&D_(r,s)&&D_(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),B_(i),B_(i.next),i=n=s),i=i.next}while(i!==n);return wm(i)}function $ie(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Zie(o,a)){let l=n8(o,a);o=wm(o,o.next),l=wm(l,l.next),L_(o,e,t,i,r,s,0),L_(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Wie(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=e8(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Qie(c));for(r.sort(jie),s=0;s<r.length;s++)t=Kie(r[s],t);return t}function jie(n,e){return n.x-e.x}function Kie(n,e){const t=Xie(n,e);if(!t)return e;const i=n8(t,n);return wm(i,i.next),wm(t,t.next)}function Xie(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&L0(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),D_(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&Yie(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function Yie(n,e){return ir(n.prev,n,e.prev)<0&&ir(e.next,n,n.next)<0}function qie(n,e,t,i){let r=n;do r.z===0&&(r.z=AI(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Jie(r)}function Jie(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function AI(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Qie(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function L0(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Zie(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!ere(n,e)&&(D_(n,e)&&D_(e,n)&&tre(n,e)&&(ir(n.prev,n,e.prev)||ir(n,e.prev,e))||cb(n,e)&&ir(n.prev,n,n.next)>0&&ir(e.prev,e,e.next)>0)}function ir(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function cb(n,e){return n.x===e.x&&n.y===e.y}function t8(n,e,t,i){const r=KE(ir(n,e,t)),s=KE(ir(n,e,i)),o=KE(ir(t,i,n)),a=KE(ir(t,i,e));return!!(r!==s&&o!==a||r===0&&jE(n,t,e)||s===0&&jE(n,i,e)||o===0&&jE(t,n,i)||a===0&&jE(t,e,i))}function jE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function KE(n){return n>0?1:n<0?-1:0}function ere(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&t8(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function D_(n,e){return ir(n.prev,n,n.next)<0?ir(n,e,n.next)>=0&&ir(n,n.prev,e)>=0:ir(n,e,n.prev)<0||ir(n,n.next,e)<0}function tre(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function n8(n,e){const t=new TI(n.i,n.x,n.y),i=new TI(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function x3(n,e,t,i){const r=new TI(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function B_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function TI(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nre(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class tu{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return tu.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];_3(e),S3(i,e);let o=e.length;t.forEach(_3);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,S3(i,t[l]);const a=Gie.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function _3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function S3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class O1 extends Mn{constructor(e=new Qh([new Qe(.5,.5),new Qe(-.5,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ht(r,3)),this.setAttribute("uv",new Ht(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:ire;let T,b=!1,C,L,P,k;S&&(T=S.getSpacedPoints(u),b=!0,h=!1,C=S.computeFrenetFrames(u,!1),L=new re,P=new re,k=new re),h||(_=0,p=0,g=0,v=0);const I=a.extractPoints(c);let D=I.shape;const G=I.holes;if(!tu.isClockWise(D)){D=D.reverse();for(let ue=0,Ne=G.length;ue<Ne;ue++){const ke=G[ue];tu.isClockWise(ke)&&(G[ue]=ke.reverse())}}const q=tu.triangulateShape(D,G),W=D;for(let ue=0,Ne=G.length;ue<Ne;ue++){const ke=G[ue];D=D.concat(ke)}function te(ue,Ne,ke){return Ne||console.error("THREE.ExtrudeGeometry: vec does not exist"),ue.clone().addScaledVector(Ne,ke)}const ee=D.length,ne=q.length;function Y(ue,Ne,ke){let Ze,We,_e;const ft=ue.x-Ne.x,dt=ue.y-Ne.y,Rt=ke.x-ue.x,Dt=ke.y-ue.y,gn=ft*ft+dt*dt,Z=ft*Dt-dt*Rt;if(Math.abs(Z)>Number.EPSILON){const j=Math.sqrt(gn),Ee=Math.sqrt(Rt*Rt+Dt*Dt),Xe=Ne.x-dt/j,He=Ne.y+ft/j,Je=ke.x-Dt/Ee,St=ke.y+Rt/Ee,nt=((Je-Xe)*Dt-(St-He)*Rt)/(ft*Dt-dt*Rt);Ze=Xe+ft*nt-ue.x,We=He+dt*nt-ue.y;const vt=Ze*Ze+We*We;if(vt<=2)return new Qe(Ze,We);_e=Math.sqrt(vt/2)}else{let j=!1;ft>Number.EPSILON?Rt>Number.EPSILON&&(j=!0):ft<-Number.EPSILON?Rt<-Number.EPSILON&&(j=!0):Math.sign(dt)===Math.sign(Dt)&&(j=!0),j?(Ze=-dt,We=ft,_e=Math.sqrt(gn)):(Ze=ft,We=dt,_e=Math.sqrt(gn/2))}return new Qe(Ze/_e,We/_e)}const Q=[];for(let ue=0,Ne=W.length,ke=Ne-1,Ze=ue+1;ue<Ne;ue++,ke++,Ze++)ke===Ne&&(ke=0),Ze===Ne&&(Ze=0),Q[ue]=Y(W[ue],W[ke],W[Ze]);const F=[];let ie,he=Q.concat();for(let ue=0,Ne=G.length;ue<Ne;ue++){const ke=G[ue];ie=[];for(let Ze=0,We=ke.length,_e=We-1,ft=Ze+1;Ze<We;Ze++,_e++,ft++)_e===We&&(_e=0),ft===We&&(ft=0),ie[Ze]=Y(ke[Ze],ke[_e],ke[ft]);F.push(ie),he=he.concat(ie)}for(let ue=0;ue<_;ue++){const Ne=ue/_,ke=p*Math.cos(Ne*Math.PI/2),Ze=g*Math.sin(Ne*Math.PI/2)+v;for(let We=0,_e=W.length;We<_e;We++){const ft=te(W[We],Q[We],Ze);Le(ft.x,ft.y,-ke)}for(let We=0,_e=G.length;We<_e;We++){const ft=G[We];ie=F[We];for(let dt=0,Rt=ft.length;dt<Rt;dt++){const Dt=te(ft[dt],ie[dt],Ze);Le(Dt.x,Dt.y,-ke)}}}const pe=g+v;for(let ue=0;ue<ee;ue++){const Ne=h?te(D[ue],he[ue],pe):D[ue];b?(P.copy(C.normals[0]).multiplyScalar(Ne.x),L.copy(C.binormals[0]).multiplyScalar(Ne.y),k.copy(T[0]).add(P).add(L),Le(k.x,k.y,k.z)):Le(Ne.x,Ne.y,0)}for(let ue=1;ue<=u;ue++)for(let Ne=0;Ne<ee;Ne++){const ke=h?te(D[Ne],he[Ne],pe):D[Ne];b?(P.copy(C.normals[ue]).multiplyScalar(ke.x),L.copy(C.binormals[ue]).multiplyScalar(ke.y),k.copy(T[ue]).add(P).add(L),Le(k.x,k.y,k.z)):Le(ke.x,ke.y,f/u*ue)}for(let ue=_-1;ue>=0;ue--){const Ne=ue/_,ke=p*Math.cos(Ne*Math.PI/2),Ze=g*Math.sin(Ne*Math.PI/2)+v;for(let We=0,_e=W.length;We<_e;We++){const ft=te(W[We],Q[We],Ze);Le(ft.x,ft.y,f+ke)}for(let We=0,_e=G.length;We<_e;We++){const ft=G[We];ie=F[We];for(let dt=0,Rt=ft.length;dt<Rt;dt++){const Dt=te(ft[dt],ie[dt],Ze);b?Le(Dt.x,Dt.y+T[u-1].y,T[u-1].x+ke):Le(Dt.x,Dt.y,f+ke)}}}ye(),Be();function ye(){const ue=r.length/3;if(h){let Ne=0,ke=ee*Ne;for(let Ze=0;Ze<ne;Ze++){const We=q[Ze];je(We[2]+ke,We[1]+ke,We[0]+ke)}Ne=u+_*2,ke=ee*Ne;for(let Ze=0;Ze<ne;Ze++){const We=q[Ze];je(We[0]+ke,We[1]+ke,We[2]+ke)}}else{for(let Ne=0;Ne<ne;Ne++){const ke=q[Ne];je(ke[2],ke[1],ke[0])}for(let Ne=0;Ne<ne;Ne++){const ke=q[Ne];je(ke[0]+ee*u,ke[1]+ee*u,ke[2]+ee*u)}}i.addGroup(ue,r.length/3-ue,0)}function Be(){const ue=r.length/3;let Ne=0;Me(W,Ne),Ne+=W.length;for(let ke=0,Ze=G.length;ke<Ze;ke++){const We=G[ke];Me(We,Ne),Ne+=We.length}i.addGroup(ue,r.length/3-ue,1)}function Me(ue,Ne){let ke=ue.length;for(;--ke>=0;){const Ze=ke;let We=ke-1;We<0&&(We=ue.length-1);for(let _e=0,ft=u+_*2;_e<ft;_e++){const dt=ee*_e,Rt=ee*(_e+1),Dt=Ne+Ze+dt,gn=Ne+We+dt,Z=Ne+We+Rt,j=Ne+Ze+Rt;lt(Dt,gn,Z,j)}}}function Le(ue,Ne,ke){l.push(ue),l.push(Ne),l.push(ke)}function je(ue,Ne,ke){bt(ue),bt(Ne),bt(ke);const Ze=r.length/3,We=A.generateTopUV(i,r,Ze-3,Ze-2,Ze-1);gt(We[0]),gt(We[1]),gt(We[2])}function lt(ue,Ne,ke,Ze){bt(ue),bt(Ne),bt(Ze),bt(Ne),bt(ke),bt(Ze);const We=r.length/3,_e=A.generateSideWallUV(i,r,We-6,We-3,We-2,We-1);gt(_e[0]),gt(_e[1]),gt(_e[3]),gt(_e[1]),gt(_e[2]),gt(_e[3])}function bt(ue){r.push(l[ue*3+0]),r.push(l[ue*3+1]),r.push(l[ue*3+2])}function gt(ue){s.push(ue.x),s.push(ue.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return rre(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new BT[r.type]().fromJSON(r)),new O1(i,e.options)}}const ire={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Qe(s,o),new Qe(a,l),new Qe(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],p=e[r*3+1],g=e[r*3+2],v=e[s*3],_=e[s*3+1],S=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Qe(o,1-l),new Qe(c,1-f),new Qe(h,1-g),new Qe(v,1-S)]:[new Qe(a,1-l),new Qe(u,1-f),new Qe(p,1-g),new Qe(_,1-S)]}};function rre(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class F1 extends Td{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new F1(e.radius,e.detail)}}class N1 extends Td{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new N1(e.radius,e.detail)}}class ub extends Mn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const h=(t-e)/r,p=new re,g=new Qe;for(let v=0;v<=r;v++){for(let _=0;_<=i;_++){const S=s+_/i*o;p.x=f*Math.cos(S),p.y=f*Math.sin(S),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,u.push(g.x,g.y)}f+=h}for(let v=0;v<r;v++){const _=v*(i+1);for(let S=0;S<i;S++){const A=S+_,T=A,b=A+i+1,C=A+i+2,L=A+1;a.push(T,b,L),a.push(b,C,L)}}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ub(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class fb extends Mn{constructor(e=new Qh([new Qe(0,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ht(r,3)),this.setAttribute("normal",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2));function c(u){const f=r.length/3,h=u.extractPoints(t);let p=h.shape;const g=h.holes;tu.isClockWise(p)===!1&&(p=p.reverse());for(let _=0,S=g.length;_<S;_++){const A=g[_];tu.isClockWise(A)===!0&&(g[_]=A.reverse())}const v=tu.triangulateShape(p,g);for(let _=0,S=g.length;_<S;_++){const A=g[_];p=p.concat(A)}for(let _=0,S=p.length;_<S;_++){const A=p[_];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let _=0,S=v.length;_<S;_++){const A=v[_],T=A[0]+f,b=A[1]+f,C=A[2]+f;i.push(T,b,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return sre(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new fb(i,e.curveSegments)}}function sre(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class U1 extends Mn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new re,h=new re,p=[],g=[],v=[],_=[];for(let S=0;S<=i;S++){const A=[],T=S/i;let b=0;S===0&&o===0?b=.5/t:S===i&&l===Math.PI&&(b=-.5/t);for(let C=0;C<=t;C++){const L=C/t;f.x=-e*Math.cos(r+L*s)*Math.sin(o+T*a),f.y=e*Math.cos(o+T*a),f.z=e*Math.sin(r+L*s)*Math.sin(o+T*a),g.push(f.x,f.y,f.z),h.copy(f).normalize(),v.push(h.x,h.y,h.z),_.push(L+b,1-T),A.push(c++)}u.push(A)}for(let S=0;S<i;S++)for(let A=0;A<t;A++){const T=u[S][A+1],b=u[S][A],C=u[S+1][A],L=u[S+1][A+1];(S!==0||o>0)&&p.push(T,b,L),(S!==i-1||l<Math.PI)&&p.push(b,C,L)}this.setIndex(p),this.setAttribute("position",new Ht(g,3)),this.setAttribute("normal",new Ht(v,3)),this.setAttribute("uv",new Ht(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hb extends Td{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hb(e.radius,e.detail)}}class db extends Mn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new re,f=new re,h=new re;for(let p=0;p<=i;p++)for(let g=0;g<=r;g++){const v=g/r*s,_=p/i*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(v),f.y=(e+t*Math.cos(_))*Math.sin(v),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(g/r),c.push(p/i)}for(let p=1;p<=i;p++)for(let g=1;g<=r;g++){const v=(r+1)*p+g-1,_=(r+1)*(p-1)+g-1,S=(r+1)*(p-1)+g,A=(r+1)*p+g;o.push(v,_,A),o.push(_,S,A)}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new db(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pb extends Mn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new re,h=new re,p=new re,g=new re,v=new re,_=new re,S=new re;for(let T=0;T<=i;++T){const b=T/i*s*Math.PI*2;A(b,s,o,e,p),A(b+.01,s,o,e,g),_.subVectors(g,p),S.addVectors(g,p),v.crossVectors(_,S),S.crossVectors(v,_),v.normalize(),S.normalize();for(let C=0;C<=r;++C){const L=C/r*Math.PI*2,P=-t*Math.cos(L),k=t*Math.sin(L);f.x=p.x+(P*S.x+k*v.x),f.y=p.y+(P*S.y+k*v.y),f.z=p.z+(P*S.z+k*v.z),l.push(f.x,f.y,f.z),h.subVectors(f,p).normalize(),c.push(h.x,h.y,h.z),u.push(T/i),u.push(C/r)}}for(let T=1;T<=i;T++)for(let b=1;b<=r;b++){const C=(r+1)*(T-1)+(b-1),L=(r+1)*T+(b-1),P=(r+1)*T+b,k=(r+1)*(T-1)+b;a.push(C,L,k),a.push(L,P,k)}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2));function A(T,b,C,L,P){const k=Math.cos(T),I=Math.sin(T),D=C/b*T,G=Math.cos(D);P.x=L*(2+G)*.5*k,P.y=L*(2+G)*I*.5,P.z=L*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mb extends Mn{constructor(e=new m2(new re(-1,-1,0),new re(-1,1,0),new re(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new re,l=new re,c=new Qe;let u=new re;const f=[],h=[],p=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new Ht(f,3)),this.setAttribute("normal",new Ht(h,3)),this.setAttribute("uv",new Ht(p,2));function v(){for(let T=0;T<t;T++)_(T);_(s===!1?t:0),A(),S()}function _(T){u=e.getPointAt(T/t,u);const b=o.normals[T],C=o.binormals[T];for(let L=0;L<=r;L++){const P=L/r*Math.PI*2,k=Math.sin(P),I=-Math.cos(P);l.x=I*b.x+k*C.x,l.y=I*b.y+k*C.y,l.z=I*b.z+k*C.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function S(){for(let T=1;T<=t;T++)for(let b=1;b<=r;b++){const C=(r+1)*(T-1)+(b-1),L=(r+1)*T+(b-1),P=(r+1)*T+b,k=(r+1)*(T-1)+b;g.push(C,L,k),g.push(L,P,k)}}function A(){for(let T=0;T<=t;T++)for(let b=0;b<=r;b++)c.x=T/t,c.y=b/r,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mb(new BT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class i8 extends Mn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new re,s=new re;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,p=f.count;for(let g=h,v=h+p;g<v;g+=3)for(let _=0;_<3;_++){const S=a.getX(g+_),A=a.getX(g+(_+1)%3);r.fromBufferAttribute(o,S),s.fromBufferAttribute(o,A),E3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),E3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function E3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var A3=Object.freeze({__proto__:null,BoxGeometry:Ed,CapsuleGeometry:sb,CircleGeometry:ob,ConeGeometry:ab,CylinderGeometry:Gv,DodecahedronGeometry:lb,EdgesGeometry:Z$,ExtrudeGeometry:O1,IcosahedronGeometry:F1,LatheGeometry:k1,OctahedronGeometry:N1,PlaneGeometry:Df,PolyhedronGeometry:Td,RingGeometry:ub,ShapeGeometry:fb,SphereGeometry:U1,TetrahedronGeometry:hb,TorusGeometry:db,TorusKnotGeometry:pb,TubeGeometry:mb,WireframeGeometry:i8});class r8 extends is{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s8 extends fo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Oa extends is{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pl extends Oa{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $x extends is{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class o8 extends is{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class a8 extends is{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class v2 extends is{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l8 extends is{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class c8 extends Us{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function jp(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function u8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function f8(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function wI(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function y2(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function ore(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let p=0;p<c.times.length;++p){const g=c.times[p]*r;if(!(g<t||g>=i)){f.push(c.times[p]);for(let v=0;v<u;++v)h.push(c.values[p*u+v])}}f.length!==0&&(c.times=jp(f,c.times.constructor),c.values=jp(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function are(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(S){return S.name===a.name&&S.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const S=u,A=f-u;v=a.values.slice(S,A)}else if(s>=a.times[g]){const S=g*f+u,A=S+f-u;v=a.values.slice(S,A)}else{const S=a.createInterpolant(),A=u,T=f-u;S.evaluate(s),v=S.resultBuffer.slice(A,T)}l==="quaternion"&&new Pi().fromArray(v).normalize().conjugate().toArray(v);const _=c.times.length;for(let S=0;S<_;++S){const A=S*p+h;if(l==="quaternion")Pi.multiplyQuaternionsFlat(c.values,A,v,0,c.values,A);else{const T=p-h*2;for(let b=0;b<T;++b)c.values[A+b]-=v[b]}}}return n.blendMode=YD,n}const lre={convertArray:jp,isTypedArray:u8,getKeyframeOrder:f8,sortedArray:wI,flattenJSON:y2,subclip:ore,makeClipAdditive:are};class Vv{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class h8 extends Vv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hp,endingEnd:Hp}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case zp:s=e,a=2*t-i;break;case w_:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case zp:o=e,l=2*i-t;break;case w_:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,p=this._weightNext,g=(i-t)/(r-t),v=g*g,_=v*g,S=-h*_+2*h*v-h*g,A=(1+h)*_+(-1.5-2*h)*v+(-.5+h)*g+1,T=(-1-p)*_+(1.5+p)*v+.5*g,b=p*_-p*v;for(let C=0;C!==a;++C)s[C]=S*o[u+C]+A*o[c+C]+T*o[l+C]+b*o[f+C];return s}}class x2 extends Vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class d8 extends Vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class gc{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jp(t,this.TimeBufferType),this.values=jp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:jp(e.times,Array),values:jp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new d8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new x2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new h8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case hv:t=this.InterpolantFactoryMethodDiscrete;break;case Em:t=this.InterpolantFactoryMethodLinear;break;case eT:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hv;case this.InterpolantFactoryMethodLinear:return Em;case this.InterpolantFactoryMethodSmooth:return eT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&u8(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===eT,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,h=f-i,p=f+i;for(let g=0;g!==i;++g){const v=t[f+g];if(v!==t[h+g]||v!==t[p+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let p=0;p!==i;++p)t[h+p]=t[f+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}gc.prototype.TimeBufferType=Float32Array;gc.prototype.ValueBufferType=Float32Array;gc.prototype.DefaultInterpolation=Em;class Om extends gc{}Om.prototype.ValueTypeName="bool";Om.prototype.ValueBufferType=Array;Om.prototype.DefaultInterpolation=hv;Om.prototype.InterpolantFactoryMethodLinear=void 0;Om.prototype.InterpolantFactoryMethodSmooth=void 0;class _2 extends gc{}_2.prototype.ValueTypeName="color";class ad extends gc{}ad.prototype.ValueTypeName="number";class p8 extends Vv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Pi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class wf extends gc{InterpolantFactoryMethodLinear(e){return new p8(this.times,this.values,this.getValueSize(),e)}}wf.prototype.ValueTypeName="quaternion";wf.prototype.DefaultInterpolation=Em;wf.prototype.InterpolantFactoryMethodSmooth=void 0;class Fm extends gc{}Fm.prototype.ValueTypeName="string";Fm.prototype.ValueBufferType=Array;Fm.prototype.DefaultInterpolation=hv;Fm.prototype.InterpolantFactoryMethodLinear=void 0;Fm.prototype.InterpolantFactoryMethodSmooth=void 0;class ld extends gc{}ld.prototype.ValueTypeName="vector";class bm{constructor(e,t=-1,i,r=Kw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Na(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(ure(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(gc.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=f8(l);l=wI(l,1,u),c=wI(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new ad(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,p,g,v){if(p.length!==0){const _=[],S=[];y2(p,_,S,g),_.length!==0&&v.push(new f(h,_,S))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let v=0;v<h[g].morphTargets.length;v++)p[h[g].morphTargets[v]]=-1;for(const v in p){const _=[],S=[];for(let A=0;A!==h[g].morphTargets.length;++A){const T=h[g];_.push(T.time),S.push(T.morphTarget===v?1:0)}r.push(new ad(".morphTargetInfluence["+v+"]",_,S))}l=p.length*o}else{const p=".bones["+t[f].name+"]";i(ld,p+".position",h,"pos",r),i(wf,p+".quaternion",h,"rot",r),i(ld,p+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function cre(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ad;case"vector":case"vector2":case"vector3":case"vector4":return ld;case"color":return _2;case"quaternion":return wf;case"bool":case"boolean":return Om;case"string":return Fm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ure(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cre(n.type);if(n.times===void 0){const t=[],i=[];y2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Mm={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class gb{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const p=c[f],g=c[f+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null}}}const D0=new gb;class as{constructor(e){this.manager=e!==void 0?e:D0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}as.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ju={};class fre extends Error{constructor(e,t){super(e),this.response=t}}class rs extends as{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Mm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ju[e]!==void 0){Ju[e].push({onLoad:t,onProgress:i,onError:r});return}Ju[e]=[],Ju[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ju[e],f=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),p=h?parseInt(h):0,g=p!==0;let v=0;const _=new ReadableStream({start(S){A();function A(){f.read().then(({done:T,value:b})=>{if(T)S.close();else{v+=b.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:p});for(let L=0,P=u.length;L<P;L++){const k=u[L];k.onProgress&&k.onProgress(C)}S.enqueue(b),A()}})}}});return new Response(_)}else throw new fre(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(h);return c.arrayBuffer().then(g=>p.decode(g))}}}).then(c=>{Mm.add(e,c);const u=Ju[e];delete Ju[e];for(let f=0,h=u.length;f<h;f++){const p=u[f];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Ju[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ju[e];for(let f=0,h=u.length;f<h;f++){const p=u[f];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class hre extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new rs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=bm.parse(e[i]);t.push(r)}return t}}class dre extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new ib,l=new rs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const p=s.parse(h,!0);o[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=oi),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let g=0;g<p;g++){o[g]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+v]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=oi),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class k_ extends as{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=P_("img");function l(){u(),Mm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class m8 extends as{constructor(e){super(e)}load(e,t,i,r){const s=new P1;s.colorSpace=Hr;const o=new k_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class S2 extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Jh,a=new rs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ri,o.wrapT=c.wrapT!==void 0?c.wrapT:Ri,o.magFilter=c.magFilter!==void 0?c.magFilter:oi,o.minFilter=c.minFilter!==void 0?c.minFilter:oi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=du),c.mipmapCount===1&&(o.minFilter=oi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class Hv extends as{constructor(e){super(e)}load(e,t,i,r){const s=new ri,o=new k_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class wd extends Hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class g8 extends wd{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const gC=new Lt,T3=new re,w3=new re;class E2{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new I1,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;T3.setFromMatrixPosition(e.matrixWorld),t.position.copy(T3),w3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(w3),t.updateMatrixWorld(),gC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(gC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pre extends E2{constructor(){super(new $r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=pv*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vb extends wd{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new pre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const b3=new Lt,Qy=new re,vC=new re;class mre extends E2{constructor(){super(new $r(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Qy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Qy),vC.copy(i.position),vC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(vC),i.updateMatrixWorld(),r.makeTranslation(-Qy.x,-Qy.y,-Qy.z),b3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(b3)}}class O_ extends wd{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new mre}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gre extends E2{constructor(){super(new Ad(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yb extends wd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new gre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class A2 extends wd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class v8 extends wd{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class y8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class x8 extends wd{constructor(e=new y8,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xb extends as{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new rs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=xb.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ht().setHex(o.value);break;case"v2":r.uniforms[s].value=new Qe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new re().fromArray(o.value);break;case"v4":r.uniforms[s].value=new qn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new On().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Lt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Qe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:r8,SpriteMaterial:a2,RawShaderMaterial:s8,ShaderMaterial:fo,PointsMaterial:nb,MeshPhysicalMaterial:Pl,MeshStandardMaterial:Oa,MeshPhongMaterial:$x,MeshToonMaterial:o8,MeshNormalMaterial:a8,MeshLambertMaterial:v2,MeshDepthMaterial:Qw,MeshDistanceMaterial:o2,MeshBasicMaterial:ua,MeshMatcapMaterial:l8,LineDashedMaterial:c8,LineBasicMaterial:Us,Material:is};return new t[e]}}class mf{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class _8 extends Mn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class S8 extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new rs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(p,g){if(t[g]!==void 0)return t[g];const _=p.interleavedBuffers[g],S=s(p,_.buffer),A=P0(_.type,S),T=new D1(A,_.stride);return T.uuid=_.uuid,t[g]=T,T}function s(p,g){if(i[g]!==void 0)return i[g];const _=p.arrayBuffers[g],S=new Uint32Array(_).buffer;return i[g]=S,S}const o=e.isInstancedBufferGeometry?new _8:new Mn,a=e.data.index;if(a!==void 0){const p=P0(a.type,a.array);o.setIndex(new Jn(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let v;if(g.isInterleavedBufferAttribute){const _=r(e.data,g.data);v=new od(_,g.itemSize,g.offset,g.normalized)}else{const _=P0(g.type,g.array),S=g.isInstancedBufferAttribute?Tm:Jn;v=new S(_,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(p,v)}const c=e.data.morphAttributes;if(c)for(const p in c){const g=c[p],v=[];for(let _=0,S=g.length;_<S;_++){const A=g[_];let T;if(A.isInterleavedBufferAttribute){const b=r(e.data,A.data);T=new od(b,A.itemSize,A.offset,A.normalized)}else{const b=P0(A.type,A.array);T=new Jn(b,A.itemSize,A.normalized)}A.name!==void 0&&(T.name=A.name),v.push(T)}o.morphAttributes[p]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,g=f.length;p!==g;++p){const v=f[p];o.addGroup(v.start,v.count,v.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new re;h.center!==void 0&&p.fromArray(h.center),o.boundingSphere=new xs(p,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class vre extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?mf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new rs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?mf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new rs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Qh().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new km().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new S8;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in A3?a=A3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new xb;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=bm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:P0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new gb(t);s=new k_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const p=[];for(let g=0,v=h.length;g<v;g++){const _=h[g],S=a(_);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new Jh(S.data,S.width,S.height)))}r[f.uuid]=new $p(p)}else{const p=a(f.url);r[f.uuid]=new $p(p)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:P0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new k_(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const p=c[f],g=await s(p);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Jh(g.data,g.width,g.height)))}i[l.uuid]=new $p(u)}else{const u=await s(l.url);i[l.uuid]=new $p(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new P1,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Jh:u=new ri,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,yre)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],M3),u.wrapT=i(a.wrap[1],M3)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,C3)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,C3)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let g=0,v=h.length;g<v;g++){const _=h[g];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),p.push(i[_])}return p}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":o=new L1,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ht(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new tb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new eb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new $r(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ad(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new A2(e.color,e.intensity);break;case"DirectionalLight":o=new yb(e.color,e.intensity);break;case"PointLight":o=new O_(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new v8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new vb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new g8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new x8().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new B1(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Ni(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,p=e.instanceMatrix,g=e.instanceColor;o=new l2(u,f,h),o.instanceMatrix=new Tm(new Float32Array(p.array),16),g!==void 0&&(o.instanceColor=new Tm(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new j$(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const _=new Fs;_.min.fromArray(v.boxMin),_.max.fromArray(v.boxMax);const S=new xs;return S.radius=v.sphereRadius,S.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:_,sphereInitialized:v.sphereInitialized,sphere:S}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new W$;break;case"Line":o=new pu(a(e.geometry),l(e.material));break;case"LineLoop":o=new c2(a(e.geometry),l(e.material));break;case"LineSegments":o=new mc(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new u2(a(e.geometry),l(e.material));break;case"Sprite":o=new $$(l(e.material));break;case"Group":o=new uc;break;case"Bone":o=new Am;break;default:o=new Hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)o.add(this.parseObject(h[p],t,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const g=h[p];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const g=h[p],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const yre={UVMapping:rd,CubeReflectionMapping:fu,CubeRefractionMapping:sd,EquirectangularReflectionMapping:_m,EquirectangularRefractionMapping:A_,CubeUVReflectionMapping:Fv},M3={RepeatWrapping:hu,ClampToEdgeWrapping:Ri,MirroredRepeatWrapping:fv},C3={NearestFilter:pr,NearestMipmapNearestFilter:T_,NearestMipmapLinearFilter:J0,LinearFilter:oi,LinearMipmapNearestFilter:$w,LinearMipmapLinearFilter:du};class E8 extends as{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Mm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let XE;class T2{static getContext(){return XE===void 0&&(XE=new(window.AudioContext||window.webkitAudioContext)),XE}static setContext(e){XE=e}}class xre extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new rs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);T2.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const R3=new Lt,P3=new Lt,mp=new Lt;class _re{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $r,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $r,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(rm*t.fov*.5)/t.zoom;let a,l;P3.elements[12]=-r,R3.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,mp.elements[0]=2*t.near/(l-a),mp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(mp),a=-o*t.aspect-s,l=o*t.aspect-s,mp.elements[0]=2*t.near/(l-a),mp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(mp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(P3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(R3)}}class w2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=I3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=I3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function I3(){return(typeof performance>"u"?Date:performance).now()}const gp=new re,L3=new Pi,Sre=new re,vp=new re;class Ere extends Hn{constructor(){super(),this.type="AudioListener",this.context=T2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new w2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gp,L3,Sre),vp.set(0,0,-1).applyQuaternion(L3),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gp.x,r),t.positionY.linearRampToValueAtTime(gp.y,r),t.positionZ.linearRampToValueAtTime(gp.z,r),t.forwardX.linearRampToValueAtTime(vp.x,r),t.forwardY.linearRampToValueAtTime(vp.y,r),t.forwardZ.linearRampToValueAtTime(vp.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(gp.x,gp.y,gp.z),t.setOrientation(vp.x,vp.y,vp.z,i.x,i.y,i.z)}}class A8 extends Hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const yp=new re,D3=new Pi,Are=new re,xp=new re;class Tre extends A8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(yp,D3,Are),xp.set(0,0,1).applyQuaternion(D3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yp.x,i),t.positionY.linearRampToValueAtTime(yp.y,i),t.positionZ.linearRampToValueAtTime(yp.z,i),t.orientationX.linearRampToValueAtTime(xp.x,i),t.orientationY.linearRampToValueAtTime(xp.y,i),t.orientationZ.linearRampToValueAtTime(xp.z,i)}else t.setPosition(yp.x,yp.y,yp.z),t.setOrientation(xp.x,xp.y,xp.z)}}class wre{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class T8{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Pi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Pi.multiplyQuaternionsFlat(e,o,e,t,e,i),Pi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const b2="\\[\\]\\.:\\/",bre=new RegExp("["+b2+"]","g"),M2="[^"+b2+"]",Mre="[^"+b2.replace("\\.","")+"]",Cre=/((?:WC+[\/:])*)/.source.replace("WC",M2),Rre=/(WCOD+)?/.source.replace("WCOD",Mre),Pre=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",M2),Ire=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",M2),Lre=new RegExp("^"+Cre+Rre+Pre+Ire+"$"),Dre=["material","materials","bones","map"];class Bre{constructor(e,t,i){const r=i||Wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Wn{constructor(e,t,i){this.path=t,this.parsedPath=i||Wn.parseTrackName(t),this.node=Wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Wn.Composite(e,t,i):new Wn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(bre,"")}static parseTrackName(e){const t=Lre.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Dre.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Wn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wn.Composite=Bre;Wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wn.prototype.GetterByBindingType=[Wn.prototype._getValue_direct,Wn.prototype._getValue_array,Wn.prototype._getValue_arrayElement,Wn.prototype._getValue_toArray];Wn.prototype.SetterByBindingTypeAndVersioning=[[Wn.prototype._setValue_direct,Wn.prototype._setValue_direct_setNeedsUpdate,Wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_array,Wn.prototype._setValue_array_setNeedsUpdate,Wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_arrayElement,Wn.prototype._setValue_arrayElement_setNeedsUpdate,Wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_fromArray,Wn.prototype._setValue_fromArray_setNeedsUpdate,Wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kre{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Na(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],p=h.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(h);for(let v=0,_=o;v!==_;++v)s[v].push(new Wn(h,i[v],r[v]))}else if(g<c){a=e[g];const v=--c,_=e[v];t[_.uuid]=g,e[g]=_,t[p]=v,e[v]=h;for(let S=0,A=o;S!==A;++S){const T=s[S],b=T[v];let C=T[g];T[g]=b,C===void 0&&(C=new Wn(h,i[S],r[S])),T[v]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];t[h.uuid]=u,e[u]=h,t[c]=f,e[f]=l;for(let p=0,g=r;p!==g;++p){const v=i[p],_=v[f],S=v[u];v[u]=_,v[f]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const h=--s,p=e[h],g=--o,v=e[g];t[p.uuid]=f,e[f]=p,t[v.uuid]=h,e[h]=v,e.pop();for(let _=0,S=r;_!==S;++_){const A=i[_],T=A[h],b=A[g];A[f]=T,A[h]=b,A.pop()}}else{const h=--o,p=e[h];h>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let g=0,v=r;g!==v;++g){const _=i[g];_[f]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let h=u,p=l.length;h!==p;++h){const g=l[h];f[h]=new Wn(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class w8{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Hp,endingEnd:Hp};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=m$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case YD:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Kw:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===g$;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===p$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=zp,r.endingEnd=zp):(e?r.endingStart=this.zeroSlopeAtStart?zp:Hp:r.endingStart=w_,t?r.endingEnd=this.zeroSlopeAtEnd?zp:Hp:r.endingEnd=w_)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const Ore=new Float32Array(1);class b8 extends Lf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],p=h.name;let g=u[p];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;g=new T8(Wn.create(i,p,v),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new x2(new Float32Array(2),new Float32Array(2),1,Ore),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?bm.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Kw),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new w8(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?bm.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class C2{constructor(e){this.value=e}clone(){return new C2(this.value.clone===void 0?this.value:this.value.clone())}}let Fre=0;class Nre extends Lf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fre++}),this.name="",this.usage=R_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class Ure extends D1{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gre{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class R2{constructor(e,t,i=0,r=1/0){this.ray=new Nv(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new sm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return bI(e,this,i,t),i.sort(B3),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)bI(e[r],this,i,t);return i.sort(B3),i}}function B3(n,e){return n.distance-e.distance}function bI(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)bI(r[s],e,t,!0)}}class M8{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(mr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vre{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const k3=new Qe;class Hre{constructor(e=new Qe(1/0,1/0),t=new Qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=k3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,k3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const O3=new re,YE=new re;class zre{constructor(e=new re,t=new re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){O3.subVectors(e,this.start),YE.subVectors(this.end,this.start);const i=YE.dot(YE);let s=YE.dot(O3)/i;return t&&(s=mr(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const F3=new re;class $re extends Hn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Ht(r,3));const s=new Us({fog:!1,toneMapped:!1});this.cone=new mc(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),F3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(F3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const wh=new re,qE=new Lt,yC=new Lt;class Wre extends mc{constructor(e){const t=C8(e),i=new Mn,r=[],s=[],o=new ht(0,0,1),a=new ht(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ht(r,3)),i.setAttribute("color",new Ht(s,3));const l=new Us({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");yC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(qE.multiplyMatrices(yC,a.matrixWorld),wh.setFromMatrixPosition(qE),r.setXYZ(o,wh.x,wh.y,wh.z),qE.multiplyMatrices(yC,a.parent.matrixWorld),wh.setFromMatrixPosition(qE),r.setXYZ(o+1,wh.x,wh.y,wh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function C8(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,C8(n.children[t]));return e}class jre extends Ni{constructor(e,t,i){const r=new U1(t,4,2),s=new ua({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Kre=new re,N3=new ht,U3=new ht;class Xre extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new N1(t);r.rotateY(Math.PI*.5),this.material=new ua({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Jn(o,3)),this.add(new Ni(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");N3.copy(this.light.color),U3.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?N3:U3;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Kre.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Yre extends mc{constructor(e=10,t=10,i=4473924,r=8947848){i=new ht(i),r=new ht(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,p=0,g=-a;h<=t;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=h===s?i:r;v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3,v.toArray(c,p),p+=3}const u=new Mn;u.setAttribute("position",new Ht(l,3)),u.setAttribute("color",new Ht(c,3));const f=new Us({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qre extends mc{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ht(s),o=new ht(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),p=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,g);const v=f&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let f=0;f<i;f++){const h=f&1?s:o,p=e-e/i*f;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),_=Math.sin(v)*p,S=Math.cos(v)*p;a.push(_,0,S),l.push(h.r,h.g,h.b),v=(g+1)/r*(Math.PI*2),_=Math.sin(v)*p,S=Math.cos(v)*p,a.push(_,0,S),l.push(h.r,h.g,h.b)}}const c=new Mn;c.setAttribute("position",new Ht(a,3)),c.setAttribute("color",new Ht(l,3));const u=new Us({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const G3=new re,JE=new re,V3=new re;class Jre extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mn;r.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Us({fog:!1,toneMapped:!1});this.lightPlane=new pu(r,s),this.add(this.lightPlane),r=new Mn,r.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new pu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),G3.setFromMatrixPosition(this.light.matrixWorld),JE.setFromMatrixPosition(this.light.target.matrixWorld),V3.subVectors(JE,G3),this.lightPlane.lookAt(JE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(JE),this.targetLine.scale.z=V3.length()}}const QE=new re,ur=new R1;class Qre extends mc{constructor(e){const t=new Mn,i=new Us({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new Ht(r,3)),t.setAttribute("color",new Ht(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ht(16755200),u=new ht(16711680),f=new ht(43775),h=new ht(16777215),p=new ht(3355443);this.setColors(c,u,f,h,p)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ur.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ar("c",t,e,ur,0,0,-1),Ar("t",t,e,ur,0,0,1),Ar("n1",t,e,ur,-1,-1,-1),Ar("n2",t,e,ur,i,-1,-1),Ar("n3",t,e,ur,-1,r,-1),Ar("n4",t,e,ur,i,r,-1),Ar("f1",t,e,ur,-1,-1,1),Ar("f2",t,e,ur,i,-1,1),Ar("f3",t,e,ur,-1,r,1),Ar("f4",t,e,ur,i,r,1),Ar("u1",t,e,ur,i*.7,r*1.1,-1),Ar("u2",t,e,ur,-1*.7,r*1.1,-1),Ar("u3",t,e,ur,0,r*2,-1),Ar("cf1",t,e,ur,-1,0,1),Ar("cf2",t,e,ur,i,0,1),Ar("cf3",t,e,ur,0,-1,1),Ar("cf4",t,e,ur,0,r,1),Ar("cn1",t,e,ur,-1,0,-1),Ar("cn2",t,e,ur,i,0,-1),Ar("cn3",t,e,ur,0,-1,-1),Ar("cn4",t,e,ur,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ar(n,e,t,i,r,s,o){QE.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],QE.x,QE.y,QE.z)}}const ZE=new Fs;class Zre extends mc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mn;s.setIndex(new Jn(i,1)),s.setAttribute("position",new Jn(r,3)),super(s,new Us({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ZE.setFromObject(this.object),ZE.isEmpty())return;const t=ZE.min,i=ZE.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ese extends mc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mn;s.setIndex(new Jn(i,1)),s.setAttribute("position",new Ht(r,3)),super(s,new Us({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tse extends pu{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mn;o.setAttribute("position",new Ht(s,3)),o.computeBoundingSphere(),super(o,new Us({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mn;l.setAttribute("position",new Ht(a,3)),l.computeBoundingSphere(),this.add(new Ni(l,new ua({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const H3=new re;let eA,xC;class nse extends Hn{constructor(e=new re(0,0,1),t=new re(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",eA===void 0&&(eA=new Mn,eA.setAttribute("position",new Ht([0,0,0,0,1,0],3)),xC=new Gv(0,.5,1,5,1),xC.translate(0,-.5,0)),this.position.copy(t),this.line=new pu(eA,new Us({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ni(xC,new ua({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{H3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(H3,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ise extends mc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mn;r.setAttribute("position",new Ht(t,3)),r.setAttribute("color",new Ht(i,3));const s=new Us({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ht,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class R8{constructor(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new I_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const A=[];for(let T=0,b=S.length;T<b;T++){const C=S[T],L=new Qh;L.curves=C.curves,A.push(L)}return A}function i(S,A){const T=A.length;let b=!1;for(let C=T-1,L=0;L<T;C=L++){let P=A[C],k=A[L],I=k.x-P.x,D=k.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=A[L],I=-I,k=A[C],D=-D),S.y<P.y||S.y>k.y)continue;if(S.y===P.y){if(S.x===P.x)return!0}else{const G=D*(S.x-P.x)-I*(S.y-P.y);if(G===0)return!0;if(G<0)continue;b=!b}}else{if(S.y!==P.y)continue;if(k.x<=S.x&&S.x<=P.x||P.x<=S.x&&S.x<=k.x)return!0}}return b}const r=tu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Qh,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],h=[];let p=[],g=0,v;h[g]=void 0,p[g]=[];for(let S=0,A=s.length;S<A;S++)a=s[S],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!u&&h[g]&&g++,h[g]={s:new Qh,p:v},h[g].s.curves=a.curves,u&&g++,p[g]=[]):p[g].push({h:a,p:v[0]});if(!h[0])return t(s);if(h.length>1){let S=!1,A=0;for(let T=0,b=h.length;T<b;T++)f[T]=[];for(let T=0,b=h.length;T<b;T++){const C=p[T];for(let L=0;L<C.length;L++){const P=C[L];let k=!0;for(let I=0;I<h.length;I++)i(P.p,h[I].p)&&(T!==I&&A++,k?(k=!1,f[I].push(P)):S=!0);k&&f[T].push(P)}}A>0&&S===!1&&(p=f)}let _;for(let S=0,A=h.length;S<A;S++){l=h[S].s,c.push(l),_=p[S];for(let T=0,b=_.length;T<b;T++)l.holes.push(_[T].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:w1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=w1);const F_=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:UD,AddEquation:Nh,AddOperation:i$,AdditiveAnimationBlendMode:YD,AdditiveBlending:UP,AlphaFormat:c$,AlwaysCompare:M$,AlwaysDepth:qz,AlwaysStencilFunc:vI,AmbientLight:A2,AnimationAction:w8,AnimationClip:bm,AnimationLoader:hre,AnimationMixer:b8,AnimationObjectGroup:kre,AnimationUtils:lre,ArcCurve:X$,ArrayCamera:V$,ArrowHelper:nse,AttachedBindMode:$P,Audio:A8,AudioAnalyser:wre,AudioContext:T2,AudioListener:Ere,AudioLoader:xre,AxesHelper:ise,BackSide:Fo,BasicDepthPacking:y$,BasicShadowMap:CJ,BatchedMesh:j$,Bone:Am,BooleanKeyframeTrack:Om,Box2:Hre,Box3:Fs,Box3Helper:ese,BoxGeometry:Ed,BoxHelper:Zre,BufferAttribute:Jn,BufferGeometry:Mn,BufferGeometryLoader:S8,ByteType:GD,Cache:Mm,Camera:R1,CameraHelper:Qre,CanvasTexture:Lie,CapsuleGeometry:sb,CatmullRomCurve3:Y$,CineonToneMapping:o$,CircleGeometry:ob,ClampToEdgeWrapping:Ri,Clock:w2,Color:ht,ColorKeyframeTrack:_2,ColorManagement:yi,CompressedArrayTexture:Pie,CompressedCubeTexture:Iie,CompressedTexture:ib,CompressedTextureLoader:dre,ConeGeometry:ab,ConstantAlphaFactor:Kz,ConstantColorFactor:Wz,CubeCamera:D$,CubeReflectionMapping:fu,CubeRefractionMapping:sd,CubeTexture:P1,CubeTextureLoader:m8,CubeUVReflectionMapping:Fv,CubicBezierCurve:h2,CubicBezierCurve3:q$,CubicInterpolant:h8,CullFaceBack:NP,CullFaceFront:Lz,CullFaceFrontBack:MJ,CullFaceNone:Iz,Curve:Rl,CurvePath:Q$,CustomBlending:Dz,CustomToneMapping:a$,CylinderGeometry:Gv,Cylindrical:Vre,Data3DTexture:e2,DataArrayTexture:qw,DataTexture:Jh,DataTextureLoader:S2,DataUtils:Wp,DecrementStencilOp:OJ,DecrementWrapStencilOp:NJ,DefaultLoadingManager:D0,DepthFormat:qh,DepthStencilFormat:Sm,DepthTexture:s2,DetachedBindMode:l$,DirectionalLight:yb,DirectionalLightHelper:Jre,DiscreteInterpolant:d8,DisplayP3ColorSpace:Yw,DodecahedronGeometry:lb,DoubleSide:xl,DstAlphaFactor:Gz,DstColorFactor:Hz,DynamicCopyUsage:QJ,DynamicDrawUsage:Rp,DynamicReadUsage:YJ,EdgesGeometry:Z$,EllipseCurve:rb,EqualCompare:A$,EqualDepth:Qz,EqualStencilFunc:HJ,EquirectangularReflectionMapping:_m,EquirectangularRefractionMapping:A_,Euler:so,EventDispatcher:Lf,ExtrudeGeometry:O1,FileLoader:rs,Float16BufferAttribute:FQ,Float32BufferAttribute:Ht,Float64BufferAttribute:NQ,FloatType:Wr,Fog:tb,FogExp2:eb,FramebufferTexture:Rie,FrontSide:uu,Frustum:I1,GLBufferAttribute:Gre,GLSL1:eQ,GLSL3:yI,GreaterCompare:T$,GreaterDepth:e$,GreaterEqualCompare:b$,GreaterEqualDepth:Zz,GreaterEqualStencilFunc:jJ,GreaterStencilFunc:$J,GridHelper:Yre,Group:uc,HalfFloatType:ys,HemisphereLight:g8,HemisphereLightHelper:Xre,IcosahedronGeometry:F1,ImageBitmapLoader:E8,ImageLoader:k_,ImageUtils:ZD,IncrementStencilOp:kJ,IncrementWrapStencilOp:FJ,InstancedBufferAttribute:Tm,InstancedBufferGeometry:_8,InstancedInterleavedBuffer:Ure,InstancedMesh:l2,Int16BufferAttribute:kQ,Int32BufferAttribute:OQ,Int8BufferAttribute:LQ,IntType:jw,InterleavedBuffer:D1,InterleavedBufferAttribute:od,Interpolant:Vv,InterpolateDiscrete:hv,InterpolateLinear:Em,InterpolateSmooth:eT,InvertStencilOp:UJ,KeepStencilOp:Cp,KeyframeTrack:gc,LOD:W$,LatheGeometry:k1,Layers:sm,LessCompare:E$,LessDepth:Jz,LessEqualCompare:JD,LessEqualDepth:E_,LessEqualStencilFunc:zJ,LessStencilFunc:VJ,Light:wd,LightProbe:x8,Line:pu,Line3:zre,LineBasicMaterial:Us,LineCurve:d2,LineCurve3:J$,LineDashedMaterial:c8,LineLoop:c2,LineSegments:mc,LinearDisplayP3ColorSpace:M1,LinearEncoding:Xw,LinearFilter:oi,LinearInterpolant:x2,LinearMipMapLinearFilter:WP,LinearMipMapNearestFilter:LJ,LinearMipmapLinearFilter:du,LinearMipmapNearestFilter:$w,LinearSRGBColorSpace:Ha,LinearToneMapping:r$,LinearTransfer:b_,Loader:as,LoaderUtils:mf,LoadingManager:gb,LoopOnce:p$,LoopPingPong:g$,LoopRepeat:m$,LuminanceAlphaFormat:f$,LuminanceFormat:u$,MOUSE:wJ,Material:is,MaterialLoader:xb,MathUtils:Gn,Matrix3:On,Matrix4:Lt,MaxEquation:zP,Mesh:Ni,MeshBasicMaterial:ua,MeshDepthMaterial:Qw,MeshDistanceMaterial:o2,MeshLambertMaterial:v2,MeshMatcapMaterial:l8,MeshNormalMaterial:a8,MeshPhongMaterial:$x,MeshPhysicalMaterial:Pl,MeshStandardMaterial:Oa,MeshToonMaterial:o8,MinEquation:HP,MirroredRepeatWrapping:fv,MixOperation:n$,MultiplyBlending:VP,MultiplyOperation:b1,NearestFilter:pr,NearestMipMapLinearFilter:IJ,NearestMipMapNearestFilter:PJ,NearestMipmapLinearFilter:J0,NearestMipmapNearestFilter:T_,NeverCompare:S$,NeverDepth:Yz,NeverStencilFunc:GJ,NoBlending:Qc,NoColorSpace:Da,NoToneMapping:Zc,NormalAnimationBlendMode:Kw,NormalBlending:im,NotEqualCompare:w$,NotEqualDepth:t$,NotEqualStencilFunc:WJ,NumberKeyframeTrack:ad,Object3D:Hn,ObjectLoader:vre,ObjectSpaceNormalMap:_$,OctahedronGeometry:N1,OneFactor:Fz,OneMinusConstantAlphaFactor:Xz,OneMinusConstantColorFactor:jz,OneMinusDstAlphaFactor:Vz,OneMinusDstColorFactor:zz,OneMinusSrcAlphaFactor:PT,OneMinusSrcColorFactor:Uz,OrthographicCamera:Ad,P3Primaries:C_,PCFShadowMap:FD,PCFSoftShadowMap:ND,PMREMGenerator:_I,Path:I_,PerspectiveCamera:$r,Plane:Oh,PlaneGeometry:Df,PlaneHelper:tse,PointLight:O_,PointLightHelper:jre,Points:u2,PointsMaterial:nb,PolarGridHelper:qre,PolyhedronGeometry:Td,PositionalAudio:Tre,PropertyBinding:Wn,PropertyMixer:T8,QuadraticBezierCurve:p2,QuadraticBezierCurve3:m2,Quaternion:Pi,QuaternionKeyframeTrack:wf,QuaternionLinearInterpolant:p8,RED_GREEN_RGTC2_Format:mI,RED_RGTC1_Format:d$,REVISION:w1,RGBADepthPacking:x$,RGBAFormat:ts,RGBAIntegerFormat:KD,RGBA_ASTC_10x10_Format:cI,RGBA_ASTC_10x5_Format:oI,RGBA_ASTC_10x6_Format:aI,RGBA_ASTC_10x8_Format:lI,RGBA_ASTC_12x10_Format:uI,RGBA_ASTC_12x12_Format:fI,RGBA_ASTC_4x4_Format:QP,RGBA_ASTC_5x4_Format:ZP,RGBA_ASTC_5x5_Format:eI,RGBA_ASTC_6x5_Format:tI,RGBA_ASTC_6x6_Format:nI,RGBA_ASTC_8x5_Format:iI,RGBA_ASTC_8x6_Format:rI,RGBA_ASTC_8x8_Format:sI,RGBA_BPTC_Format:ZA,RGBA_ETC2_EAC_Format:JP,RGBA_PVRTC_2BPPV1_Format:YP,RGBA_PVRTC_4BPPV1_Format:XP,RGBA_S3TC_DXT1_Format:qA,RGBA_S3TC_DXT3_Format:JA,RGBA_S3TC_DXT5_Format:QA,RGB_BPTC_SIGNED_Format:hI,RGB_BPTC_UNSIGNED_Format:dI,RGB_ETC1_Format:XD,RGB_ETC2_Format:qP,RGB_PVRTC_2BPPV1_Format:KP,RGB_PVRTC_4BPPV1_Format:jP,RGB_S3TC_DXT1_Format:YA,RGFormat:h$,RGIntegerFormat:jD,RawShaderMaterial:s8,Ray:Nv,Raycaster:R2,Rec709Primaries:M_,RectAreaLight:v8,RedFormat:$D,RedIntegerFormat:WD,ReinhardToneMapping:s$,RenderTarget:P$,RepeatWrapping:hu,ReplaceStencilOp:BJ,ReverseSubtractEquation:kz,RingGeometry:ub,SIGNED_RED_GREEN_RGTC2_Format:gI,SIGNED_RED_RGTC1_Format:pI,SRGBColorSpace:Hr,SRGBTransfer:ki,Scene:L1,ShaderChunk:kn,ShaderLib:ac,ShaderMaterial:fo,ShadowMaterial:r8,Shape:Qh,ShapeGeometry:fb,ShapePath:R8,ShapeUtils:tu,ShortType:VD,Skeleton:km,SkeletonHelper:Wre,SkinnedMesh:B1,Source:$p,Sphere:xs,SphereGeometry:U1,Spherical:M8,SphericalHarmonics3:y8,SplineCurve:g2,SpotLight:vb,SpotLightHelper:$re,Sprite:$$,SpriteMaterial:a2,SrcAlphaFactor:RT,SrcAlphaSaturateFactor:$z,SrcColorFactor:Nz,StaticCopyUsage:JJ,StaticDrawUsage:R_,StaticReadUsage:XJ,StereoCamera:_re,StreamCopyUsage:ZJ,StreamDrawUsage:KJ,StreamReadUsage:qJ,StringKeyframeTrack:Fm,SubtractEquation:Bz,SubtractiveBlending:GP,TOUCH:bJ,TangentSpaceNormalMap:Sd,TetrahedronGeometry:hb,Texture:ri,TextureLoader:Hv,TorusGeometry:db,TorusKnotGeometry:pb,Triangle:la,TriangleFanDrawMode:IT,TriangleStripDrawMode:qD,TrianglesDrawMode:v$,TubeGeometry:mb,TwoPassDoubleSide:RJ,UVMapping:rd,Uint16BufferAttribute:C1,Uint32BufferAttribute:t2,Uint8BufferAttribute:DQ,Uint8ClampedBufferAttribute:BQ,Uniform:C2,UniformsGroup:Nre,UniformsLib:Ct,UniformsUtils:n2,UnsignedByteType:wl,UnsignedInt248Type:Yh,UnsignedIntType:Kc,UnsignedShort4444Type:HD,UnsignedShort5551Type:zD,UnsignedShortType:Ww,VSMShadowMap:Uc,Vector2:Qe,Vector3:re,Vector4:qn,VectorKeyframeTrack:ld,VideoTexture:K$,WebGL1Renderer:H$,WebGL3DRenderTarget:_Q,WebGLArrayRenderTarget:xQ,WebGLCoordinateSystem:cc,WebGLCubeRenderTarget:i2,WebGLMultipleRenderTargets:SQ,WebGLRenderTarget:No,WebGLRenderer:Zw,WebGLUtils:G$,WebGPUCoordinateSystem:dv,WireframeGeometry:i8,WrapAroundEnding:w_,ZeroCurvatureEnding:Hp,ZeroFactor:Oz,ZeroSlopeEnding:zp,ZeroStencilOp:DJ,_SRGBAFormat:LT,createCanvasElement:R$,sRGBEncoding:eu},Symbol.toStringTag,{value:"Module"}));var _C={exports:{}},bh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z3;function rse(){return z3||(z3=1,bh.ConcurrentRoot=1,bh.ContinuousEventPriority=4,bh.DefaultEventPriority=16,bh.DiscreteEventPriority=1,bh.IdleEventPriority=536870912,bh.LegacyRoot=0),bh}var $3;function sse(){return $3||($3=1,_C.exports=rse()),_C.exports}var Wx=sse();function ose(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const g=u(e);if(!f(h,g)){const v=h;c(h=g,v)}}return t.add(p),()=>t.delete(p)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const ase=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),W3=ase?O.useEffect:O.useLayoutEffect;function P8(n){const e=typeof n=="function"?ose(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=O.useReducer(_=>_+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(i),c=O.useRef(r),u=O.useRef(!1),f=O.useRef();f.current===void 0&&(f.current=i(o));let h,p=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(h=i(o),p=!r(f.current,h)),W3(()=>{p&&(f.current=h),a.current=o,l.current=i,c.current=r,u.current=!1});const g=O.useRef(o);W3(()=>{const _=()=>{try{const A=e.getState(),T=l.current(A);c.current(f.current,T)||(a.current=A,f.current=T,s())}catch{u.current=!0,s()}},S=e.subscribe(_);return e.getState()!==g.current&&_(),S},[]);const v=p?h:f.current;return O.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var SC={exports:{}},EC={exports:{}},AC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3;function lse(){return j3||(j3=1,function(n){function e(Y,Q){var F=Y.length;Y.push(Q);e:for(;0<F;){var ie=F-1>>>1,he=Y[ie];if(0<r(he,Q))Y[ie]=Q,Y[F]=he,F=ie;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Q=Y[0],F=Y.pop();if(F!==Q){Y[0]=F;e:for(var ie=0,he=Y.length,pe=he>>>1;ie<pe;){var ye=2*(ie+1)-1,Be=Y[ye],Me=ye+1,Le=Y[Me];if(0>r(Be,F))Me<he&&0>r(Le,Be)?(Y[ie]=Le,Y[Me]=F,ie=Me):(Y[ie]=Be,Y[ye]=F,ie=ye);else if(Me<he&&0>r(Le,F))Y[ie]=Le,Y[Me]=F,ie=Me;else break e}}return Q}function r(Y,Q){var F=Y.sortIndex-Q.sortIndex;return F!==0?F:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,p=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Y){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=Y)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function b(Y){if(v=!1,T(Y),!g)if(t(l)!==null)g=!0,ee(C);else{var Q=t(c);Q!==null&&ne(b,Q.startTime-Y)}}function C(Y,Q){g=!1,v&&(v=!1,S(k),k=-1),p=!0;var F=h;try{for(T(Q),f=t(l);f!==null&&(!(f.expirationTime>Q)||Y&&!G());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,h=f.priorityLevel;var he=ie(f.expirationTime<=Q);Q=n.unstable_now(),typeof he=="function"?f.callback=he:f===t(l)&&i(l),T(Q)}else i(l);f=t(l)}if(f!==null)var pe=!0;else{var ye=t(c);ye!==null&&ne(b,ye.startTime-Q),pe=!1}return pe}finally{f=null,h=F,p=!1}}var L=!1,P=null,k=-1,I=5,D=-1;function G(){return!(n.unstable_now()-D<I)}function H(){if(P!==null){var Y=n.unstable_now();D=Y;var Q=!0;try{Q=P(!0,Y)}finally{Q?q():(L=!1,P=null)}}else L=!1}var q;if(typeof A=="function")q=function(){A(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,te=W.port2;W.port1.onmessage=H,q=function(){te.postMessage(null)}}else q=function(){_(H,0)};function ee(Y){P=Y,L||(L=!0,q())}function ne(Y,Q){k=_(function(){Y(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,ee(C))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var F=h;h=Q;try{return Y()}finally{h=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var F=h;h=Y;try{return Q()}finally{h=F}},n.unstable_scheduleCallback=function(Y,Q,F){var ie=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,Y){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=F+he,Y={id:u++,callback:Q,priorityLevel:Y,startTime:F,expirationTime:he,sortIndex:-1},F>ie?(Y.sortIndex=F,e(c,Y),t(l)===null&&Y===t(c)&&(v?(S(k),k=-1):v=!0,ne(b,F-ie))):(Y.sortIndex=he,e(l,Y),g||p||(g=!0,ee(C))),Y},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(Y){var Q=h;return function(){var F=h;h=Q;try{return Y.apply(this,arguments)}finally{h=F}}}}(AC)),AC}var K3;function I8(){return K3||(K3=1,EC.exports=lse()),EC.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC,X3;function cse(){return X3||(X3=1,TC=function(e){var t={},i=zw(),r=I8(),s=Object.assign;function o(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,w=1;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),C=Symbol.iterator;function L(y){return y===null||typeof y!="object"?null:(y=C&&y[C]||y["@@iterator"],typeof y=="function"?y:null)}function P(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case S:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case g:return(y.displayName||"Context")+".Consumer";case p:return(y._context.displayName||"Context")+".Provider";case v:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case A:return x=y.displayName||null,x!==null?x:P(y.type)||"Memo";case T:x=y._payload,y=y._init;try{return P(y(x))}catch{}}return null}function k(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(x);case 8:return x===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function I(y){var x=y,w=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(w=x.return),y=x.return;while(y)}return x.tag===3?w:null}function D(y){if(I(y)!==y)throw Error(o(188))}function G(y){var x=y.alternate;if(!x){if(x=I(y),x===null)throw Error(o(188));return x!==y?null:y}for(var w=y,R=x;;){var N=w.return;if(N===null)break;var V=N.alternate;if(V===null){if(R=N.return,R!==null){w=R;continue}break}if(N.child===V.child){for(V=N.child;V;){if(V===w)return D(N),y;if(V===R)return D(N),x;V=V.sibling}throw Error(o(188))}if(w.return!==R.return)w=N,R=V;else{for(var ae=!1,Ae=N.child;Ae;){if(Ae===w){ae=!0,w=N,R=V;break}if(Ae===R){ae=!0,R=N,w=V;break}Ae=Ae.sibling}if(!ae){for(Ae=V.child;Ae;){if(Ae===w){ae=!0,w=V,R=N;break}if(Ae===R){ae=!0,R=V,w=N;break}Ae=Ae.sibling}if(!ae)throw Error(o(189))}}if(w.alternate!==R)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?y:x}function H(y){return y=G(y),y!==null?q(y):null}function q(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=q(y);if(x!==null)return x;y=y.sibling}return null}function W(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var x=W(y);if(x!==null)return x}y=y.sibling}return null}var te=Array.isArray,ee=e.getPublicInstance,ne=e.getRootHostContext,Y=e.getChildHostContext,Q=e.prepareForCommit,F=e.resetAfterCommit,ie=e.createInstance,he=e.appendInitialChild,pe=e.finalizeInitialChildren,ye=e.prepareUpdate,Be=e.shouldSetTextContent,Me=e.createTextInstance,Le=e.scheduleTimeout,je=e.cancelTimeout,lt=e.noTimeout,bt=e.isPrimaryRenderer,gt=e.supportsMutation,ue=e.supportsPersistence,Ne=e.supportsHydration,ke=e.getInstanceFromNode,Ze=e.preparePortalMount,We=e.getCurrentEventPriority,_e=e.detachDeletedInstance,ft=e.supportsMicrotasks,dt=e.scheduleMicrotask,Rt=e.supportsTestSelectors,Dt=e.findFiberRoot,gn=e.getBoundingRect,Z=e.getTextContent,j=e.isHiddenSubtree,Ee=e.matchAccessibilityRole,Xe=e.setFocusIfFocusable,He=e.setupIntersectionObserver,Je=e.appendChild,St=e.appendChildToContainer,nt=e.commitTextUpdate,vt=e.commitMount,Pt=e.commitUpdate,cn=e.insertBefore,Ke=e.insertInContainerBefore,wn=e.removeChild,$t=e.removeChildFromContainer,Mt=e.resetTextContent,At=e.hideInstance,et=e.hideTextInstance,qe=e.unhideInstance,ve=e.unhideTextInstance,yt=e.clearContainer,rt=e.cloneInstance,ze=e.createContainerChildSet,ut=e.appendChildToContainerChildSet,qt=e.finalizeContainerChildren,En=e.replaceContainerChildren,Ft=e.cloneHiddenInstance,kt=e.cloneHiddenTextInstance,Ut=e.canHydrateInstance,at=e.canHydrateTextInstance,Jt=e.canHydrateSuspenseInstance,Kt=e.isSuspenseInstancePending,rn=e.isSuspenseInstanceFallback,Qn=e.registerSuspenseInstanceRetry,on=e.getNextHydratableSibling,Gt=e.getFirstHydratableChild,Ii=e.getFirstHydratableChildWithinContainer,ci=e.getFirstHydratableChildWithinSuspenseInstance,$=e.hydrateInstance,J=e.hydrateTextInstance,me=e.hydrateSuspenseInstance,z=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,oe=e.commitHydratedSuspenseInstance,fe=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,be=e.shouldDeleteUnhydratedTailInstances,Oe=e.didNotMatchHydratedContainerTextInstance,Ve=e.didNotMatchHydratedTextInstance,we;function pt(y){if(we===void 0)try{throw Error()}catch(w){var x=w.stack.trim().match(/\n( *(at )?)/);we=x&&x[1]||""}return`
`+we+y}var Ye=!1;function it(y,x){if(!y||Ye)return"";Ye=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(mt){var R=mt}Reflect.construct(y,[],x)}else{try{x.call()}catch(mt){R=mt}y.call(x.prototype)}else{try{throw Error()}catch(mt){R=mt}y()}}catch(mt){if(mt&&R&&typeof mt.stack=="string"){for(var N=mt.stack.split(`
`),V=R.stack.split(`
`),ae=N.length-1,Ae=V.length-1;1<=ae&&0<=Ae&&N[ae]!==V[Ae];)Ae--;for(;1<=ae&&0<=Ae;ae--,Ae--)if(N[ae]!==V[Ae]){if(ae!==1||Ae!==1)do if(ae--,Ae--,0>Ae||N[ae]!==V[Ae]){var $e=`
`+N[ae].replace(" at new "," at ");return y.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",y.displayName)),$e}while(1<=ae&&0<=Ae);break}}}finally{Ye=!1,Error.prepareStackTrace=w}return(y=y?y.displayName||y.name:"")?pt(y):""}var Bt=Object.prototype.hasOwnProperty,Qt=[],zt=-1;function sn(y){return{current:y}}function Et(y){0>zt||(y.current=Qt[zt],Qt[zt]=null,zt--)}function xt(y,x){zt++,Qt[zt]=y.current,y.current=x}var mn={},un=sn(mn),vn=sn(!1),ui=mn;function wi(y,x){var w=y.type.contextTypes;if(!w)return mn;var R=y.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===x)return R.__reactInternalMemoizedMaskedChildContext;var N={},V;for(V in w)N[V]=x[V];return R&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=N),N}function pi(y){return y=y.childContextTypes,y!=null}function Nn(){Et(vn),Et(un)}function Pn(y,x,w){if(un.current!==mn)throw Error(o(168));xt(un,x),xt(vn,w)}function Hi(y,x,w){var R=y.stateNode;if(x=x.childContextTypes,typeof R.getChildContext!="function")return w;R=R.getChildContext();for(var N in R)if(!(N in x))throw Error(o(108,k(y)||"Unknown",N));return s({},w,R)}function Cn(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||mn,ui=un.current,xt(un,y),xt(vn,vn.current),!0}function Un(y,x,w){var R=y.stateNode;if(!R)throw Error(o(169));w?(y=Hi(y,x,ui),R.__reactInternalMemoizedMergedChildContext=y,Et(vn),Et(un),xt(un,y)):Et(vn),xt(vn,w)}var mi=Math.clz32?Math.clz32:Wa,Gs=Math.log,yr=Math.LN2;function Wa(y){return y>>>=0,y===0?32:31-(Gs(y)/yr|0)|0}var Of=64,ni=4194304;function Ff(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Rd(y,x){var w=y.pendingLanes;if(w===0)return 0;var R=0,N=y.suspendedLanes,V=y.pingedLanes,ae=w&268435455;if(ae!==0){var Ae=ae&~N;Ae!==0?R=Ff(Ae):(V&=ae,V!==0&&(R=Ff(V)))}else ae=w&~N,ae!==0?R=Ff(ae):V!==0&&(R=Ff(V));if(R===0)return 0;if(x!==0&&x!==R&&!(x&N)&&(N=R&-R,V=x&-x,N>=V||N===16&&(V&4194240)!==0))return x;if(R&4&&(R|=w&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=R;0<x;)w=31-mi(x),N=1<<w,R|=y[w],x&=~N;return R}function ey(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pS(y,x){for(var w=y.suspendedLanes,R=y.pingedLanes,N=y.expirationTimes,V=y.pendingLanes;0<V;){var ae=31-mi(V),Ae=1<<ae,$e=N[ae];$e===-1?(!(Ae&w)||Ae&R)&&(N[ae]=ey(Ae,x)):$e<=x&&(y.expiredLanes|=Ae),V&=~Ae}}function zm(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function $m(y){for(var x=[],w=0;31>w;w++)x.push(y);return x}function xu(y,x,w){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-mi(x),y[x]=w}function Wm(y,x){var w=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var R=y.eventTimes;for(y=y.expirationTimes;0<w;){var N=31-mi(w),V=1<<N;x[N]=0,R[N]=-1,y[N]=-1,w&=~V}}function ja(y,x){var w=y.entangledLanes|=x;for(y=y.entanglements;w;){var R=31-mi(w),N=1<<R;N&x|y[R]&x&&(y[R]|=x),w&=~N}}var Bn=0;function Ll(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var _u=r.unstable_scheduleCallback,Nf=r.unstable_cancelCallback,yc=r.unstable_shouldYield,iM=r.unstable_requestPaint,xr=r.unstable_now,Su=r.unstable_ImmediatePriority,rM=r.unstable_UserBlockingPriority,jm=r.unstable_NormalPriority,Km=r.unstable_IdlePriority,Pd=null,Ka=null;function Id(y){if(Ka&&typeof Ka.onCommitFiberRoot=="function")try{Ka.onCommitFiberRoot(Pd,y,void 0,(y.current.flags&128)===128)}catch{}}function Ld(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Es=typeof Object.is=="function"?Object.is:Ld,Vo=null,Xm=!1,ty=!1;function Ym(y){Vo===null?Vo=[y]:Vo.push(y)}function qm(y){Xm=!0,Ym(y)}function Ho(){if(!ty&&Vo!==null){ty=!0;var y=0,x=Bn;try{var w=Vo;for(Bn=1;y<w.length;y++){var R=w[y];do R=R(!0);while(R!==null)}Vo=null,Xm=!1}catch(N){throw Vo!==null&&(Vo=Vo.slice(y+1)),_u(Su,Ho),N}finally{Bn=x,ty=!1}}return null}var mS=a.ReactCurrentBatchConfig;function va(y,x){if(Es(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var w=Object.keys(y),R=Object.keys(x);if(w.length!==R.length)return!1;for(R=0;R<w.length;R++){var N=w[R];if(!Bt.call(x,N)||!Es(y[N],x[N]))return!1}return!0}function ny(y){switch(y.tag){case 5:return pt(y.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return y=it(y.type,!1),y;case 11:return y=it(y.type.render,!1),y;case 1:return y=it(y.type,!0),y;default:return""}}function Vs(y,x){if(y&&y.defaultProps){x=s({},x),y=y.defaultProps;for(var w in y)x[w]===void 0&&(x[w]=y[w]);return x}return x}var Dd=sn(null),Eu=null,Dl=null,Jm=null;function As(){Jm=Dl=Eu=null}function Au(y,x,w){bt?(xt(Dd,x._currentValue),x._currentValue=w):(xt(Dd,x._currentValue2),x._currentValue2=w)}function Bd(y){var x=Dd.current;Et(Dd),bt?y._currentValue=x:y._currentValue2=x}function Tu(y,x,w){for(;y!==null;){var R=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,R!==null&&(R.childLanes|=x)):R!==null&&(R.childLanes&x)!==x&&(R.childLanes|=x),y===w)break;y=y.return}}function Uf(y,x){Eu=y,Jm=Dl=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(Dr=!0),y.firstContext=null)}function Hs(y){var x=bt?y._currentValue:y._currentValue2;if(Jm!==y)if(y={context:y,memoizedValue:x,next:null},Dl===null){if(Eu===null)throw Error(o(308));Dl=y,Eu.dependencies={lanes:0,firstContext:y}}else Dl=Dl.next=y;return x}var zo=null,$o=!1;function Gf(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iy(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Bl(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function xc(y,x){var w=y.updateQueue;w!==null&&(w=w.shared,Wi!==null&&y.mode&1&&!(Dn&2)?(y=w.interleaved,y===null?(x.next=x,zo===null?zo=[w]:zo.push(w)):(x.next=y.next,y.next=x),w.interleaved=x):(y=w.pending,y===null?x.next=x:(x.next=y.next,y.next=x),w.pending=x))}function Qm(y,x,w){if(x=x.updateQueue,x!==null&&(x=x.shared,(w&4194240)!==0)){var R=x.lanes;R&=y.pendingLanes,w|=R,x.lanes=w,ja(y,w)}}function Zm(y,x){var w=y.updateQueue,R=y.alternate;if(R!==null&&(R=R.updateQueue,w===R)){var N=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};V===null?N=V=ae:V=V.next=ae,w=w.next}while(w!==null);V===null?N=V=x:V=V.next=x}else N=V=x;w={baseState:R.baseState,firstBaseUpdate:N,lastBaseUpdate:V,shared:R.shared,effects:R.effects},y.updateQueue=w;return}y=w.lastBaseUpdate,y===null?w.firstBaseUpdate=x:y.next=x,w.lastBaseUpdate=x}function eg(y,x,w,R){var N=y.updateQueue;$o=!1;var V=N.firstBaseUpdate,ae=N.lastBaseUpdate,Ae=N.shared.pending;if(Ae!==null){N.shared.pending=null;var $e=Ae,mt=$e.next;$e.next=null,ae===null?V=mt:ae.next=mt,ae=$e;var Vt=y.alternate;Vt!==null&&(Vt=Vt.updateQueue,Ae=Vt.lastBaseUpdate,Ae!==ae&&(Ae===null?Vt.firstBaseUpdate=mt:Ae.next=mt,Vt.lastBaseUpdate=$e))}if(V!==null){var bn=N.baseState;ae=0,Vt=mt=$e=null,Ae=V;do{var an=Ae.lane,vi=Ae.eventTime;if((R&an)===an){Vt!==null&&(Vt=Vt.next={eventTime:vi,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var Ot=y,ai=Ae;switch(an=x,vi=w,ai.tag){case 1:if(Ot=ai.payload,typeof Ot=="function"){bn=Ot.call(vi,bn,an);break e}bn=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=ai.payload,an=typeof Ot=="function"?Ot.call(vi,bn,an):Ot,an==null)break e;bn=s({},bn,an);break e;case 2:$o=!0}}Ae.callback!==null&&Ae.lane!==0&&(y.flags|=64,an=N.effects,an===null?N.effects=[Ae]:an.push(Ae))}else vi={eventTime:vi,lane:an,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Vt===null?(mt=Vt=vi,$e=bn):Vt=Vt.next=vi,ae|=an;if(Ae=Ae.next,Ae===null){if(Ae=N.shared.pending,Ae===null)break;an=Ae,Ae=an.next,an.next=null,N.lastBaseUpdate=an,N.shared.pending=null}}while(!0);if(Vt===null&&($e=bn),N.baseState=$e,N.firstBaseUpdate=mt,N.lastBaseUpdate=Vt,x=N.shared.interleaved,x!==null){N=x;do ae|=N.lane,N=N.next;while(N!==x)}else V===null&&(N.shared.lanes=0);Gu|=ae,y.lanes=ae,y.memoizedState=bn}}function gS(y,x,w){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var R=y[x],N=R.callback;if(N!==null){if(R.callback=null,R=w,typeof N!="function")throw Error(o(191,N));N.call(R)}}}var vS=new i.Component().refs;function ry(y,x,w,R){x=y.memoizedState,w=w(R,x),w=w==null?x:s({},x,w),y.memoizedState=w,y.lanes===0&&(y.updateQueue.baseState=w)}var tg={isMounted:function(y){return(y=y._reactInternals)?I(y)===y:!1},enqueueSetState:function(y,x,w){y=y._reactInternals;var R=Or(),N=Za(y),V=Bl(R,N);V.payload=x,w!=null&&(V.callback=w),xc(y,V),x=js(y,N,R),x!==null&&Qm(x,y,N)},enqueueReplaceState:function(y,x,w){y=y._reactInternals;var R=Or(),N=Za(y),V=Bl(R,N);V.tag=1,V.payload=x,w!=null&&(V.callback=w),xc(y,V),x=js(y,N,R),x!==null&&Qm(x,y,N)},enqueueForceUpdate:function(y,x){y=y._reactInternals;var w=Or(),R=Za(y),N=Bl(w,R);N.tag=2,x!=null&&(N.callback=x),xc(y,N),x=js(y,R,w),x!==null&&Qm(x,y,R)}};function sy(y,x,w,R,N,V,ae){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(R,V,ae):x.prototype&&x.prototype.isPureReactComponent?!va(w,R)||!va(N,V):!0}function yS(y,x,w){var R=!1,N=mn,V=x.contextType;return typeof V=="object"&&V!==null?V=Hs(V):(N=pi(x)?ui:un.current,R=x.contextTypes,V=(R=R!=null)?wi(y,N):mn),x=new x(w,V),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=tg,y.stateNode=x,x._reactInternals=y,R&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=N,y.__reactInternalMemoizedMaskedChildContext=V),x}function xS(y,x,w,R){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(w,R),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(w,R),x.state!==y&&tg.enqueueReplaceState(x,x.state,null)}function oy(y,x,w,R){var N=y.stateNode;N.props=w,N.state=y.memoizedState,N.refs=vS,Gf(y);var V=x.contextType;typeof V=="object"&&V!==null?N.context=Hs(V):(V=pi(x)?ui:un.current,N.context=wi(y,V)),N.state=y.memoizedState,V=x.getDerivedStateFromProps,typeof V=="function"&&(ry(y,x,V,w),N.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(x=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),x!==N.state&&tg.enqueueReplaceState(N,N.state,null),eg(y,w,N,R),N.state=y.memoizedState),typeof N.componentDidMount=="function"&&(y.flags|=4194308)}var Vf=[],_c=0,ng=null,ig=0,Wo=[],po=0,wu=null,kl=1,Ol="";function bu(y,x){Vf[_c++]=ig,Vf[_c++]=ng,ng=y,ig=x}function _S(y,x,w){Wo[po++]=kl,Wo[po++]=Ol,Wo[po++]=wu,wu=y;var R=kl;y=Ol;var N=32-mi(R)-1;R&=~(1<<N),w+=1;var V=32-mi(x)+N;if(30<V){var ae=N-N%5;V=(R&(1<<ae)-1).toString(32),R>>=ae,N-=ae,kl=1<<32-mi(x)+N|w<<N|R,Ol=V+y}else kl=1<<V|w<<N|R,Ol=y}function ay(y){y.return!==null&&(bu(y,1),_S(y,1,0))}function ly(y){for(;y===ng;)ng=Vf[--_c],Vf[_c]=null,ig=Vf[--_c],Vf[_c]=null;for(;y===wu;)wu=Wo[--po],Wo[po]=null,Ol=Wo[--po],Wo[po]=null,kl=Wo[--po],Wo[po]=null}var Ts=null,Kr=null,Li=!1,Hf=!1,jo=null;function cy(y,x){var w=xo(5,null,null,0);w.elementType="DELETED",w.stateNode=x,w.return=y,x=y.deletions,x===null?(y.deletions=[w],y.flags|=16):x.push(w)}function uy(y,x){switch(y.tag){case 5:return x=Ut(x,y.type,y.pendingProps),x!==null?(y.stateNode=x,Ts=y,Kr=Gt(x),!0):!1;case 6:return x=at(x,y.pendingProps),x!==null?(y.stateNode=x,Ts=y,Kr=null,!0):!1;case 13:if(x=Jt(x),x!==null){var w=wu!==null?{id:kl,overflow:Ol}:null;return y.memoizedState={dehydrated:x,treeContext:w,retryLane:1073741824},w=xo(18,null,null,0),w.stateNode=x,w.return=y,y.child=w,Ts=y,Kr=null,!0}return!1;default:return!1}}function rg(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Sc(y){if(Li){var x=Kr;if(x){var w=x;if(!uy(y,x)){if(rg(y))throw Error(o(418));x=on(w);var R=Ts;x&&uy(y,x)?cy(R,w):(y.flags=y.flags&-4097|2,Li=!1,Ts=y)}}else{if(rg(y))throw Error(o(418));y.flags=y.flags&-4097|2,Li=!1,Ts=y}}}function SS(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Ts=y}function kd(y){if(!Ne||y!==Ts)return!1;if(!Li)return SS(y),Li=!0,!1;if(y.tag!==3&&(y.tag!==5||be(y.type)&&!Be(y.type,y.memoizedProps))){var x=Kr;if(x){if(rg(y)){for(y=Kr;y;)y=on(y);throw Error(o(418))}for(;x;)cy(y,x),x=on(x)}}if(SS(y),y.tag===13){if(!Ne)throw Error(o(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));Kr=z(y)}else Kr=Ts?on(y.stateNode):null;return!0}function zf(){Ne&&(Kr=Ts=null,Hf=Li=!1)}function sg(y){jo===null?jo=[y]:jo.push(y)}function $f(y,x,w){if(y=w.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var R=w.stateNode}if(!R)throw Error(o(147,y));var N=R,V=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===V?x.ref:(x=function(ae){var Ae=N.refs;Ae===vS&&(Ae=N.refs={}),ae===null?delete Ae[V]:Ae[V]=ae},x._stringRef=V,x)}if(typeof y!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,y))}return y}function Ec(y,x){throw y=Object.prototype.toString.call(x),Error(o(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function Wf(y){var x=y._init;return x(y._payload)}function ES(y){function x(De,Te){if(y){var Ge=De.deletions;Ge===null?(De.deletions=[Te],De.flags|=16):Ge.push(Te)}}function w(De,Te){if(!y)return null;for(;Te!==null;)x(De,Te),Te=Te.sibling;return null}function R(De,Te){for(De=new Map;Te!==null;)Te.key!==null?De.set(Te.key,Te):De.set(Te.index,Te),Te=Te.sibling;return De}function N(De,Te){return De=Xl(De,Te),De.index=0,De.sibling=null,De}function V(De,Te,Ge){return De.index=Ge,y?(Ge=De.alternate,Ge!==null?(Ge=Ge.index,Ge<Te?(De.flags|=2,Te):Ge):(De.flags|=2,Te)):(De.flags|=1048576,Te)}function ae(De){return y&&De.alternate===null&&(De.flags|=2),De}function Ae(De,Te,Ge,It){return Te===null||Te.tag!==6?(Te=Fg(Ge,De.mode,It),Te.return=De,Te):(Te=N(Te,Ge),Te.return=De,Te)}function $e(De,Te,Ge,It){var en=Ge.type;return en===u?Vt(De,Te,Ge.props.children,It,Ge.key):Te!==null&&(Te.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===T&&Wf(en)===Te.type)?(It=N(Te,Ge.props),It.ref=$f(De,Te,Ge),It.return=De,It):(It=rp(Ge.type,Ge.key,Ge.props,null,De.mode,It),It.ref=$f(De,Te,Ge),It.return=De,It)}function mt(De,Te,Ge,It){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Ge.containerInfo||Te.stateNode.implementation!==Ge.implementation?(Te=Ng(Ge,De.mode,It),Te.return=De,Te):(Te=N(Te,Ge.children||[]),Te.return=De,Te)}function Vt(De,Te,Ge,It,en){return Te===null||Te.tag!==7?(Te=Bc(Ge,De.mode,It,en),Te.return=De,Te):(Te=N(Te,Ge),Te.return=De,Te)}function bn(De,Te,Ge){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=Fg(""+Te,De.mode,Ge),Te.return=De,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Ge=rp(Te.type,Te.key,Te.props,null,De.mode,Ge),Ge.ref=$f(De,null,Te),Ge.return=De,Ge;case c:return Te=Ng(Te,De.mode,Ge),Te.return=De,Te;case T:var It=Te._init;return bn(De,It(Te._payload),Ge)}if(te(Te)||L(Te))return Te=Bc(Te,De.mode,Ge,null),Te.return=De,Te;Ec(De,Te)}return null}function an(De,Te,Ge,It){var en=Te!==null?Te.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return en!==null?null:Ae(De,Te,""+Ge,It);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return Ge.key===en?$e(De,Te,Ge,It):null;case c:return Ge.key===en?mt(De,Te,Ge,It):null;case T:return en=Ge._init,an(De,Te,en(Ge._payload),It)}if(te(Ge)||L(Ge))return en!==null?null:Vt(De,Te,Ge,It,null);Ec(De,Ge)}return null}function vi(De,Te,Ge,It,en){if(typeof It=="string"&&It!==""||typeof It=="number")return De=De.get(Ge)||null,Ae(Te,De,""+It,en);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case l:return De=De.get(It.key===null?Ge:It.key)||null,$e(Te,De,It,en);case c:return De=De.get(It.key===null?Ge:It.key)||null,mt(Te,De,It,en);case T:var In=It._init;return vi(De,Te,Ge,In(It._payload),en)}if(te(It)||L(It))return De=De.get(Ge)||null,Vt(Te,De,It,en,null);Ec(Te,It)}return null}function Ot(De,Te,Ge,It){for(var en=null,In=null,An=Te,ei=Te=0,Sr=null;An!==null&&ei<Ge.length;ei++){An.index>ei?(Sr=An,An=null):Sr=An.sibling;var Zn=an(De,An,Ge[ei],It);if(Zn===null){An===null&&(An=Sr);break}y&&An&&Zn.alternate===null&&x(De,An),Te=V(Zn,Te,ei),In===null?en=Zn:In.sibling=Zn,In=Zn,An=Sr}if(ei===Ge.length)return w(De,An),Li&&bu(De,ei),en;if(An===null){for(;ei<Ge.length;ei++)An=bn(De,Ge[ei],It),An!==null&&(Te=V(An,Te,ei),In===null?en=An:In.sibling=An,In=An);return Li&&bu(De,ei),en}for(An=R(De,An);ei<Ge.length;ei++)Sr=vi(An,De,ei,Ge[ei],It),Sr!==null&&(y&&Sr.alternate!==null&&An.delete(Sr.key===null?ei:Sr.key),Te=V(Sr,Te,ei),In===null?en=Sr:In.sibling=Sr,In=Sr);return y&&An.forEach(function(el){return x(De,el)}),Li&&bu(De,ei),en}function ai(De,Te,Ge,It){var en=L(Ge);if(typeof en!="function")throw Error(o(150));if(Ge=en.call(Ge),Ge==null)throw Error(o(151));for(var In=en=null,An=Te,ei=Te=0,Sr=null,Zn=Ge.next();An!==null&&!Zn.done;ei++,Zn=Ge.next()){An.index>ei?(Sr=An,An=null):Sr=An.sibling;var el=an(De,An,Zn.value,It);if(el===null){An===null&&(An=Sr);break}y&&An&&el.alternate===null&&x(De,An),Te=V(el,Te,ei),In===null?en=el:In.sibling=el,In=el,An=Sr}if(Zn.done)return w(De,An),Li&&bu(De,ei),en;if(An===null){for(;!Zn.done;ei++,Zn=Ge.next())Zn=bn(De,Zn.value,It),Zn!==null&&(Te=V(Zn,Te,ei),In===null?en=Zn:In.sibling=Zn,In=Zn);return Li&&bu(De,ei),en}for(An=R(De,An);!Zn.done;ei++,Zn=Ge.next())Zn=vi(An,De,ei,Zn.value,It),Zn!==null&&(y&&Zn.alternate!==null&&An.delete(Zn.key===null?ei:Zn.key),Te=V(Zn,Te,ei),In===null?en=Zn:In.sibling=Zn,In=Zn);return y&&An.forEach(function(VS){return x(De,VS)}),Li&&bu(De,ei),en}function _o(De,Te,Ge,It){if(typeof Ge=="object"&&Ge!==null&&Ge.type===u&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:e:{for(var en=Ge.key,In=Te;In!==null;){if(In.key===en){if(en=Ge.type,en===u){if(In.tag===7){w(De,In.sibling),Te=N(In,Ge.props.children),Te.return=De,De=Te;break e}}else if(In.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===T&&Wf(en)===In.type){w(De,In.sibling),Te=N(In,Ge.props),Te.ref=$f(De,In,Ge),Te.return=De,De=Te;break e}w(De,In);break}else x(De,In);In=In.sibling}Ge.type===u?(Te=Bc(Ge.props.children,De.mode,It,Ge.key),Te.return=De,De=Te):(It=rp(Ge.type,Ge.key,Ge.props,null,De.mode,It),It.ref=$f(De,Te,Ge),It.return=De,De=It)}return ae(De);case c:e:{for(In=Ge.key;Te!==null;){if(Te.key===In)if(Te.tag===4&&Te.stateNode.containerInfo===Ge.containerInfo&&Te.stateNode.implementation===Ge.implementation){w(De,Te.sibling),Te=N(Te,Ge.children||[]),Te.return=De,De=Te;break e}else{w(De,Te);break}else x(De,Te);Te=Te.sibling}Te=Ng(Ge,De.mode,It),Te.return=De,De=Te}return ae(De);case T:return In=Ge._init,_o(De,Te,In(Ge._payload),It)}if(te(Ge))return Ot(De,Te,Ge,It);if(L(Ge))return ai(De,Te,Ge,It);Ec(De,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,Te!==null&&Te.tag===6?(w(De,Te.sibling),Te=N(Te,Ge),Te.return=De,De=Te):(w(De,Te),Te=Fg(Ge,De.mode,It),Te.return=De,De=Te),ae(De)):w(De,Te)}return _o}var Fl=ES(!0),AS=ES(!1),jf={},zs=sn(jf),Mu=sn(jf),Cu=sn(jf);function ya(y){if(y===jf)throw Error(o(174));return y}function og(y,x){xt(Cu,x),xt(Mu,y),xt(zs,jf),y=ne(x),Et(zs),xt(zs,y)}function Kf(){Et(zs),Et(Mu),Et(Cu)}function TS(y){var x=ya(Cu.current),w=ya(zs.current);x=Y(w,y.type,x),w!==x&&(xt(Mu,y),xt(zs,x))}function fy(y){Mu.current===y&&(Et(zs),Et(Mu))}var zi=sn(0);function ag(y){for(var x=y;x!==null;){if(x.tag===13){var w=x.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Kt(w)||rn(w)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var mo=[];function Ru(){for(var y=0;y<mo.length;y++){var x=mo[y];bt?x._workInProgressVersionPrimary=null:x._workInProgressVersionSecondary=null}mo.length=0}var Od=a.ReactCurrentDispatcher,go=a.ReactCurrentBatchConfig,Pu=0,$i=null,Pr=null,Ir=null,lg=!1,Xa=!1,Iu=0,Fd=0;function Lr(){throw Error(o(321))}function cg(y,x){if(x===null)return!1;for(var w=0;w<x.length&&w<y.length;w++)if(!Es(y[w],x[w]))return!1;return!0}function Xf(y,x,w,R,N,V){if(Pu=V,$i=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Od.current=y===null||y.memoizedState===null?vy:yy,y=w(R,N),Xa){V=0;do{if(Xa=!1,Iu=0,25<=V)throw Error(o(301));V+=1,Ir=Pr=null,x.updateQueue=null,Od.current=xy,y=w(R,N)}while(Xa)}if(Od.current=Qf,x=Pr!==null&&Pr.next!==null,Pu=0,Ir=Pr=$i=null,lg=!1,x)throw Error(o(300));return y}function Ac(){var y=Iu!==0;return Iu=0,y}function xa(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?$i.memoizedState=Ir=y:Ir=Ir.next=y,Ir}function _a(){if(Pr===null){var y=$i.alternate;y=y!==null?y.memoizedState:null}else y=Pr.next;var x=Ir===null?$i.memoizedState:Ir.next;if(x!==null)Ir=x,Pr=y;else{if(y===null)throw Error(o(310));Pr=y,y={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Ir===null?$i.memoizedState=Ir=y:Ir=Ir.next=y}return Ir}function Ya(y,x){return typeof x=="function"?x(y):x}function Nd(y){var x=_a(),w=x.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=y;var R=Pr,N=R.baseQueue,V=w.pending;if(V!==null){if(N!==null){var ae=N.next;N.next=V.next,V.next=ae}R.baseQueue=N=V,w.pending=null}if(N!==null){V=N.next,R=R.baseState;var Ae=ae=null,$e=null,mt=V;do{var Vt=mt.lane;if((Pu&Vt)===Vt)$e!==null&&($e=$e.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),R=mt.hasEagerState?mt.eagerState:y(R,mt.action);else{var bn={lane:Vt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};$e===null?(Ae=$e=bn,ae=R):$e=$e.next=bn,$i.lanes|=Vt,Gu|=Vt}mt=mt.next}while(mt!==null&&mt!==V);$e===null?ae=R:$e.next=Ae,Es(R,x.memoizedState)||(Dr=!0),x.memoizedState=R,x.baseState=ae,x.baseQueue=$e,w.lastRenderedState=R}if(y=w.interleaved,y!==null){N=y;do V=N.lane,$i.lanes|=V,Gu|=V,N=N.next;while(N!==y)}else N===null&&(w.lanes=0);return[x.memoizedState,w.dispatch]}function Ud(y){var x=_a(),w=x.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=y;var R=w.dispatch,N=w.pending,V=x.memoizedState;if(N!==null){w.pending=null;var ae=N=N.next;do V=y(V,ae.action),ae=ae.next;while(ae!==N);Es(V,x.memoizedState)||(Dr=!0),x.memoizedState=V,x.baseQueue===null&&(x.baseState=V),w.lastRenderedState=V}return[V,R]}function hy(){}function dy(y,x){var w=$i,R=_a(),N=x(),V=!Es(R.memoizedState,N);if(V&&(R.memoizedState=N,Dr=!0),R=R.queue,Yf(Nl.bind(null,w,R,y),[y]),R.getSnapshot!==x||V||Ir!==null&&Ir.memoizedState.tag&1){if(w.flags|=2048,Vd(9,my.bind(null,w,R,N,x),void 0,null),Wi===null)throw Error(o(349));Pu&30||py(w,x,N)}return N}function py(y,x,w){y.flags|=16384,y={getSnapshot:x,value:w},x=$i.updateQueue,x===null?(x={lastEffect:null,stores:null},$i.updateQueue=x,x.stores=[y]):(w=x.stores,w===null?x.stores=[y]:w.push(y))}function my(y,x,w,R){x.value=w,x.getSnapshot=R,ug(x)&&js(y,1,-1)}function Nl(y,x,w){return w(function(){ug(x)&&js(y,1,-1)})}function ug(y){var x=y.getSnapshot;y=y.value;try{var w=x();return!Es(y,w)}catch{return!0}}function Gd(y){var x=xa();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:y},x.queue=y,y=y.dispatch=sM.bind(null,$i,y),[x.memoizedState,y]}function Vd(y,x,w,R){return y={tag:y,create:x,destroy:w,deps:R,next:null},x=$i.updateQueue,x===null?(x={lastEffect:null,stores:null},$i.updateQueue=x,x.lastEffect=y.next=y):(w=x.lastEffect,w===null?x.lastEffect=y.next=y:(R=w.next,w.next=y,y.next=R,x.lastEffect=y)),y}function wS(){return _a().memoizedState}function Tc(y,x,w,R){var N=xa();$i.flags|=y,N.memoizedState=Vd(1|x,w,void 0,R===void 0?null:R)}function fg(y,x,w,R){var N=_a();R=R===void 0?null:R;var V=void 0;if(Pr!==null){var ae=Pr.memoizedState;if(V=ae.destroy,R!==null&&cg(R,ae.deps)){N.memoizedState=Vd(x,w,V,R);return}}$i.flags|=y,N.memoizedState=Vd(1|x,w,V,R)}function hg(y,x){return Tc(8390656,8,y,x)}function Yf(y,x){return fg(2048,8,y,x)}function _i(y,x){return fg(4,2,y,x)}function dg(y,x){return fg(4,4,y,x)}function Hd(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function qf(y,x,w){return w=w!=null?w.concat([y]):null,fg(4,4,Hd.bind(null,x,y),w)}function pg(){}function mg(y,x){var w=_a();x=x===void 0?null:x;var R=w.memoizedState;return R!==null&&x!==null&&cg(x,R[1])?R[0]:(w.memoizedState=[y,x],y)}function Jf(y,x){var w=_a();x=x===void 0?null:x;var R=w.memoizedState;return R!==null&&x!==null&&cg(x,R[1])?R[0]:(y=y(),w.memoizedState=[y,x],y)}function gg(y,x){var w=Bn;Bn=w!==0&&4>w?w:4,y(!0);var R=go.transition;go.transition={};try{y(!1),x()}finally{Bn=w,go.transition=R}}function Lu(){return _a().memoizedState}function bS(y,x,w){var R=Za(y);w={lane:R,action:w,hasEagerState:!1,eagerState:null,next:null},MS(y)?gy(x,w):(zd(y,x,w),w=Or(),y=js(y,R,w),y!==null&&$d(y,x,R))}function sM(y,x,w){var R=Za(y),N={lane:R,action:w,hasEagerState:!1,eagerState:null,next:null};if(MS(y))gy(x,N);else{zd(y,x,N);var V=y.alternate;if(y.lanes===0&&(V===null||V.lanes===0)&&(V=x.lastRenderedReducer,V!==null))try{var ae=x.lastRenderedState,Ae=V(ae,w);if(N.hasEagerState=!0,N.eagerState=Ae,Es(Ae,ae))return}catch{}finally{}w=Or(),y=js(y,R,w),y!==null&&$d(y,x,R)}}function MS(y){var x=y.alternate;return y===$i||x!==null&&x===$i}function gy(y,x){Xa=lg=!0;var w=y.pending;w===null?x.next=x:(x.next=w.next,w.next=x),y.pending=x}function zd(y,x,w){Wi!==null&&y.mode&1&&!(Dn&2)?(y=x.interleaved,y===null?(w.next=w,zo===null?zo=[x]:zo.push(x)):(w.next=y.next,y.next=w),x.interleaved=w):(y=x.pending,y===null?w.next=w:(w.next=y.next,y.next=w),x.pending=w)}function $d(y,x,w){if(w&4194240){var R=x.lanes;R&=y.pendingLanes,w|=R,x.lanes=w,ja(y,w)}}var Qf={readContext:Hs,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},vy={readContext:Hs,useCallback:function(y,x){return xa().memoizedState=[y,x===void 0?null:x],y},useContext:Hs,useEffect:hg,useImperativeHandle:function(y,x,w){return w=w!=null?w.concat([y]):null,Tc(4194308,4,Hd.bind(null,x,y),w)},useLayoutEffect:function(y,x){return Tc(4194308,4,y,x)},useInsertionEffect:function(y,x){return Tc(4,2,y,x)},useMemo:function(y,x){var w=xa();return x=x===void 0?null:x,y=y(),w.memoizedState=[y,x],y},useReducer:function(y,x,w){var R=xa();return x=w!==void 0?w(x):x,R.memoizedState=R.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},R.queue=y,y=y.dispatch=bS.bind(null,$i,y),[R.memoizedState,y]},useRef:function(y){var x=xa();return y={current:y},x.memoizedState=y},useState:Gd,useDebugValue:pg,useDeferredValue:function(y){var x=Gd(y),w=x[0],R=x[1];return hg(function(){var N=go.transition;go.transition={};try{R(y)}finally{go.transition=N}},[y]),w},useTransition:function(){var y=Gd(!1),x=y[0];return y=gg.bind(null,y[1]),xa().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,w){var R=$i,N=xa();if(Li){if(w===void 0)throw Error(o(407));w=w()}else{if(w=x(),Wi===null)throw Error(o(349));Pu&30||py(R,x,w)}N.memoizedState=w;var V={value:w,getSnapshot:x};return N.queue=V,hg(Nl.bind(null,R,V,y),[y]),R.flags|=2048,Vd(9,my.bind(null,R,V,w,x),void 0,null),w},useId:function(){var y=xa(),x=Wi.identifierPrefix;if(Li){var w=Ol,R=kl;w=(R&~(1<<32-mi(R)-1)).toString(32)+w,x=":"+x+"R"+w,w=Iu++,0<w&&(x+="H"+w.toString(32)),x+=":"}else w=Fd++,x=":"+x+"r"+w.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},yy={readContext:Hs,useCallback:mg,useContext:Hs,useEffect:Yf,useImperativeHandle:qf,useInsertionEffect:_i,useLayoutEffect:dg,useMemo:Jf,useReducer:Nd,useRef:wS,useState:function(){return Nd(Ya)},useDebugValue:pg,useDeferredValue:function(y){var x=Nd(Ya),w=x[0],R=x[1];return Yf(function(){var N=go.transition;go.transition={};try{R(y)}finally{go.transition=N}},[y]),w},useTransition:function(){var y=Nd(Ya)[0],x=_a().memoizedState;return[y,x]},useMutableSource:hy,useSyncExternalStore:dy,useId:Lu,unstable_isNewReconciler:!1},xy={readContext:Hs,useCallback:mg,useContext:Hs,useEffect:Yf,useImperativeHandle:qf,useInsertionEffect:_i,useLayoutEffect:dg,useMemo:Jf,useReducer:Ud,useRef:wS,useState:function(){return Ud(Ya)},useDebugValue:pg,useDeferredValue:function(y){var x=Ud(Ya),w=x[0],R=x[1];return Yf(function(){var N=go.transition;go.transition={};try{R(y)}finally{go.transition=N}},[y]),w},useTransition:function(){var y=Ud(Ya)[0],x=_a().memoizedState;return[y,x]},useMutableSource:hy,useSyncExternalStore:dy,useId:Lu,unstable_isNewReconciler:!1};function _y(y,x){try{var w="",R=x;do w+=ny(R),R=R.return;while(R);var N=w}catch(V){N=`
Error generating stack: `+V.message+`
`+V.stack}return{value:y,source:x,stack:N}}function vg(y,x){try{console.error(x.value)}catch(w){setTimeout(function(){throw w})}}var oM=typeof WeakMap=="function"?WeakMap:Map;function CS(y,x,w){w=Bl(-1,w),w.tag=3,w.payload={element:null};var R=x.value;return w.callback=function(){Rc||(Rc=!0,qo=R),vg(y,x)},w}function yg(y,x,w){w=Bl(-1,w),w.tag=3;var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var N=x.value;w.payload=function(){return R(N)},w.callback=function(){vg(y,x)}}var V=y.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(w.callback=function(){vg(y,x),typeof R!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var ae=x.stack;this.componentDidCatch(x.value,{componentStack:ae!==null?ae:""})}),w}function Ul(y,x,w){var R=y.pingCache;if(R===null){R=y.pingCache=new oM;var N=new Set;R.set(x,N)}else N=R.get(x),N===void 0&&(N=new Set,R.set(x,N));N.has(w)||(N.add(w),y=LS.bind(null,y,x,w),x.then(y,y))}function Sy(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function Du(y,x,w,R,N){return y.mode&1?(y.flags|=65536,y.lanes=N,y):(y===x?y.flags|=65536:(y.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(x=Bl(-1,1),x.tag=2,xc(w,x))),w.lanes|=1),y)}function _r(y){y.flags|=4}function Zf(y,x){if(y!==null&&y.child===x.child)return!0;if(x.flags&16)return!1;for(y=x.child;y!==null;){if(y.flags&12854||y.subtreeFlags&12854)return!1;y=y.sibling}return!0}var vo,Bu,xg,_g;if(gt)vo=function(y,x){for(var w=x.child;w!==null;){if(w.tag===5||w.tag===6)he(y,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Bu=function(){},xg=function(y,x,w,R,N){if(y=y.memoizedProps,y!==R){var V=x.stateNode,ae=ya(zs.current);w=ye(V,w,y,R,N,ae),(x.updateQueue=w)&&_r(x)}},_g=function(y,x,w,R){w!==R&&_r(x)};else if(ue){vo=function(y,x,w,R){for(var N=x.child;N!==null;){if(N.tag===5){var V=N.stateNode;w&&R&&(V=Ft(V,N.type,N.memoizedProps,N)),he(y,V)}else if(N.tag===6)V=N.stateNode,w&&R&&(V=kt(V,N.memoizedProps,N)),he(y,V);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)V=N.child,V!==null&&(V.return=N),vo(y,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===x)break;for(;N.sibling===null;){if(N.return===null||N.return===x)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var wc=function(y,x,w,R){for(var N=x.child;N!==null;){if(N.tag===5){var V=N.stateNode;w&&R&&(V=Ft(V,N.type,N.memoizedProps,N)),ut(y,V)}else if(N.tag===6)V=N.stateNode,w&&R&&(V=kt(V,N.memoizedProps,N)),ut(y,V);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)V=N.child,V!==null&&(V.return=N),wc(y,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===x)break;for(;N.sibling===null;){if(N.return===null||N.return===x)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Bu=function(y,x){var w=x.stateNode;if(!Zf(y,x)){y=w.containerInfo;var R=ze(y);wc(R,x,!1,!1),w.pendingChildren=R,_r(x),qt(y,R)}},xg=function(y,x,w,R,N){var V=y.stateNode,ae=y.memoizedProps;if((y=Zf(y,x))&&ae===R)x.stateNode=V;else{var Ae=x.stateNode,$e=ya(zs.current),mt=null;ae!==R&&(mt=ye(Ae,w,ae,R,N,$e)),y&&mt===null?x.stateNode=V:(V=rt(V,mt,w,ae,R,x,y,Ae),pe(V,w,R,N,$e)&&_r(x),x.stateNode=V,y?_r(x):vo(V,x,!1,!1))}},_g=function(y,x,w,R){w!==R?(y=ya(Cu.current),w=ya(zs.current),x.stateNode=Me(R,y,w,x),_r(x)):x.stateNode=y.stateNode}}else Bu=function(){},xg=function(){},_g=function(){};function Gl(y,x){if(!Li)switch(y.tailMode){case"hidden":x=y.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?y.tail=null:w.sibling=null;break;case"collapsed":w=y.tail;for(var R=null;w!==null;)w.alternate!==null&&(R=w),w=w.sibling;R===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:R.sibling=null}}function Ji(y){var x=y.alternate!==null&&y.alternate.child===y.child,w=0,R=0;if(x)for(var N=y.child;N!==null;)w|=N.lanes|N.childLanes,R|=N.subtreeFlags&14680064,R|=N.flags&14680064,N.return=y,N=N.sibling;else for(N=y.child;N!==null;)w|=N.lanes|N.childLanes,R|=N.subtreeFlags,R|=N.flags,N.return=y,N=N.sibling;return y.subtreeFlags|=R,y.childLanes=w,x}function Sg(y,x,w){var R=x.pendingProps;switch(ly(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(x),null;case 1:return pi(x.type)&&Nn(),Ji(x),null;case 3:return R=x.stateNode,Kf(),Et(vn),Et(un),Ru(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(y===null||y.child===null)&&(kd(x)?_r(x):y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,jo!==null&&(Zi(jo),jo=null))),Bu(y,x),Ji(x),null;case 5:fy(x),w=ya(Cu.current);var N=x.type;if(y!==null&&x.stateNode!=null)xg(y,x,N,R,w),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!R){if(x.stateNode===null)throw Error(o(166));return Ji(x),null}if(y=ya(zs.current),kd(x)){if(!Ne)throw Error(o(175));y=$(x.stateNode,x.type,x.memoizedProps,w,y,x,!Hf),x.updateQueue=y,y!==null&&_r(x)}else{var V=ie(N,R,w,y,x);vo(V,x,!1,!1),x.stateNode=V,pe(V,N,R,w,y)&&_r(x)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Ji(x),null;case 6:if(y&&x.stateNode!=null)_g(y,x,y.memoizedProps,R);else{if(typeof R!="string"&&x.stateNode===null)throw Error(o(166));if(y=ya(Cu.current),w=ya(zs.current),kd(x)){if(!Ne)throw Error(o(176));if(y=x.stateNode,R=x.memoizedProps,(w=J(y,R,x,!Hf))&&(N=Ts,N!==null))switch(V=(N.mode&1)!==0,N.tag){case 3:Oe(N.stateNode.containerInfo,y,R,V);break;case 5:Ve(N.type,N.memoizedProps,N.stateNode,y,R,V)}w&&_r(x)}else x.stateNode=Me(R,y,w,x)}return Ji(x),null;case 13:if(Et(zi),R=x.memoizedState,Li&&Kr!==null&&x.mode&1&&!(x.flags&128)){for(y=Kr;y;)y=on(y);return zf(),x.flags|=98560,x}if(R!==null&&R.dehydrated!==null){if(R=kd(x),y===null){if(!R)throw Error(o(318));if(!Ne)throw Error(o(344));if(y=x.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));me(y,x)}else zf(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;return Ji(x),null}return jo!==null&&(Zi(jo),jo=null),x.flags&128?(x.lanes=w,x):(R=R!==null,w=!1,y===null?kd(x):w=y.memoizedState!==null,R&&!w&&(x.child.flags|=8192,x.mode&1&&(y===null||zi.current&1?lr===0&&(lr=3):Zd())),x.updateQueue!==null&&(x.flags|=4),Ji(x),null);case 4:return Kf(),Bu(y,x),y===null&&Ze(x.stateNode.containerInfo),Ji(x),null;case 10:return Bd(x.type._context),Ji(x),null;case 17:return pi(x.type)&&Nn(),Ji(x),null;case 19:if(Et(zi),N=x.memoizedState,N===null)return Ji(x),null;if(R=(x.flags&128)!==0,V=N.rendering,V===null)if(R)Gl(N,!1);else{if(lr!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(V=ag(y),V!==null){for(x.flags|=128,Gl(N,!1),y=V.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),x.subtreeFlags=0,y=w,R=x.child;R!==null;)w=R,N=y,w.flags&=14680066,V=w.alternate,V===null?(w.childLanes=0,w.lanes=N,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=V.childLanes,w.lanes=V.lanes,w.child=V.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=V.memoizedProps,w.memoizedState=V.memoizedState,w.updateQueue=V.updateQueue,w.type=V.type,N=V.dependencies,w.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),R=R.sibling;return xt(zi,zi.current&1|2),x.child}y=y.sibling}N.tail!==null&&xr()>Cc&&(x.flags|=128,R=!0,Gl(N,!1),x.lanes=4194304)}else{if(!R)if(y=ag(V),y!==null){if(x.flags|=128,R=!0,y=y.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),Gl(N,!0),N.tail===null&&N.tailMode==="hidden"&&!V.alternate&&!Li)return Ji(x),null}else 2*xr()-N.renderingStartTime>Cc&&w!==1073741824&&(x.flags|=128,R=!0,Gl(N,!1),x.lanes=4194304);N.isBackwards?(V.sibling=x.child,x.child=V):(y=N.last,y!==null?y.sibling=V:x.child=V,N.last=V)}return N.tail!==null?(x=N.tail,N.rendering=x,N.tail=x.sibling,N.renderingStartTime=xr(),x.sibling=null,y=zi.current,xt(zi,R?y&1|2:y&1),x):(Ji(x),null);case 22:case 23:return Py(),R=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==R&&(x.flags|=8192),R&&x.mode&1?Rs&1073741824&&(Ji(x),gt&&x.subtreeFlags&6&&(x.flags|=8192)):Ji(x),null;case 24:return null;case 25:return null}throw Error(o(156,x.tag))}var Ey=a.ReactCurrentOwner,Dr=!1;function Ki(y,x,w,R){x.child=y===null?AS(x,null,w,R):Fl(x,y.child,w,R)}function Si(y,x,w,R,N){w=w.render;var V=x.ref;return Uf(x,N),R=Xf(y,x,w,R,V,N),w=Ac(),y!==null&&!Dr?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~N,$s(y,x,N)):(Li&&w&&ay(x),x.flags|=1,Ki(y,x,R,N),x.child)}function gi(y,x,w,R,N){if(y===null){var V=w.type;return typeof V=="function"&&!ip(V)&&V.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(x.tag=15,x.type=V,Vl(y,x,V,R,N)):(y=rp(w.type,null,R,x,x.mode,N),y.ref=x.ref,y.return=x,x.child=y)}if(V=y.child,!(y.lanes&N)){var ae=V.memoizedProps;if(w=w.compare,w=w!==null?w:va,w(ae,R)&&y.ref===x.ref)return $s(y,x,N)}return x.flags|=1,y=Xl(V,R),y.ref=x.ref,y.return=x,x.child=y}function Vl(y,x,w,R,N){if(y!==null&&va(y.memoizedProps,R)&&y.ref===x.ref)if(Dr=!1,(y.lanes&N)!==0)y.flags&131072&&(Dr=!0);else return x.lanes=y.lanes,$s(y,x,N);return Hl(y,x,w,R,N)}function Xr(y,x,w){var R=x.pendingProps,N=R.children,V=y!==null?y.memoizedState:null;if(R.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null},xt(Kl,Rs),Rs|=w;else if(w&1073741824)x.memoizedState={baseLanes:0,cachePool:null},R=V!==null?V.baseLanes:w,xt(Kl,Rs),Rs|=R;else return y=V!==null?V.baseLanes|w:w,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null},x.updateQueue=null,xt(Kl,Rs),Rs|=y,null;else V!==null?(R=V.baseLanes|w,x.memoizedState=null):R=w,xt(Kl,Rs),Rs|=R;return Ki(y,x,N,w),x.child}function ws(y,x){var w=x.ref;(y===null&&w!==null||y!==null&&y.ref!==w)&&(x.flags|=512,x.flags|=2097152)}function Hl(y,x,w,R,N){var V=pi(w)?ui:un.current;return V=wi(x,V),Uf(x,N),w=Xf(y,x,w,R,V,N),R=Ac(),y!==null&&!Dr?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~N,$s(y,x,N)):(Li&&R&&ay(x),x.flags|=1,Ki(y,x,w,N),x.child)}function ku(y,x,w,R,N){if(pi(w)){var V=!0;Cn(x)}else V=!1;if(Uf(x,N),x.stateNode===null)y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),yS(x,w,R),oy(x,w,R,N),R=!0;else if(y===null){var ae=x.stateNode,Ae=x.memoizedProps;ae.props=Ae;var $e=ae.context,mt=w.contextType;typeof mt=="object"&&mt!==null?mt=Hs(mt):(mt=pi(w)?ui:un.current,mt=wi(x,mt));var Vt=w.getDerivedStateFromProps,bn=typeof Vt=="function"||typeof ae.getSnapshotBeforeUpdate=="function";bn||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Ae!==R||$e!==mt)&&xS(x,ae,R,mt),$o=!1;var an=x.memoizedState;ae.state=an,eg(x,R,ae,N),$e=x.memoizedState,Ae!==R||an!==$e||vn.current||$o?(typeof Vt=="function"&&(ry(x,w,Vt,R),$e=x.memoizedState),(Ae=$o||sy(x,w,Ae,R,an,$e,mt))?(bn||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=R,x.memoizedState=$e),ae.props=R,ae.state=$e,ae.context=mt,R=Ae):(typeof ae.componentDidMount=="function"&&(x.flags|=4194308),R=!1)}else{ae=x.stateNode,iy(y,x),Ae=x.memoizedProps,mt=x.type===x.elementType?Ae:Vs(x.type,Ae),ae.props=mt,bn=x.pendingProps,an=ae.context,$e=w.contextType,typeof $e=="object"&&$e!==null?$e=Hs($e):($e=pi(w)?ui:un.current,$e=wi(x,$e));var vi=w.getDerivedStateFromProps;(Vt=typeof vi=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Ae!==bn||an!==$e)&&xS(x,ae,R,$e),$o=!1,an=x.memoizedState,ae.state=an,eg(x,R,ae,N);var Ot=x.memoizedState;Ae!==bn||an!==Ot||vn.current||$o?(typeof vi=="function"&&(ry(x,w,vi,R),Ot=x.memoizedState),(mt=$o||sy(x,w,mt,R,an,Ot,$e)||!1)?(Vt||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(R,Ot,$e),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(R,Ot,$e)),typeof ae.componentDidUpdate=="function"&&(x.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ae.componentDidUpdate!="function"||Ae===y.memoizedProps&&an===y.memoizedState||(x.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Ae===y.memoizedProps&&an===y.memoizedState||(x.flags|=1024),x.memoizedProps=R,x.memoizedState=Ot),ae.props=R,ae.state=Ot,ae.context=$e,R=mt):(typeof ae.componentDidUpdate!="function"||Ae===y.memoizedProps&&an===y.memoizedState||(x.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Ae===y.memoizedProps&&an===y.memoizedState||(x.flags|=1024),R=!1)}return ls(y,x,w,R,V,N)}function ls(y,x,w,R,N,V){ws(y,x);var ae=(x.flags&128)!==0;if(!R&&!ae)return N&&Un(x,w,!1),$s(y,x,V);R=x.stateNode,Ey.current=x;var Ae=ae&&typeof w.getDerivedStateFromError!="function"?null:R.render();return x.flags|=1,y!==null&&ae?(x.child=Fl(x,y.child,null,V),x.child=Fl(x,null,Ae,V)):Ki(y,x,Ae,V),x.memoizedState=R.state,N&&Un(x,w,!0),x.child}function Wd(y){var x=y.stateNode;x.pendingContext?Pn(y,x.pendingContext,x.pendingContext!==x.context):x.context&&Pn(y,x.context,!1),og(y,x.containerInfo)}function Ay(y,x,w,R,N){return zf(),sg(N),x.flags|=256,Ki(y,x,w,R),x.child}var jd={dehydrated:null,treeContext:null,retryLane:0};function Ou(y){return{baseLanes:y,cachePool:null}}function Ty(y,x,w){var R=x.pendingProps,N=zi.current,V=!1,ae=(x.flags&128)!==0,Ae;if((Ae=ae)||(Ae=y!==null&&y.memoizedState===null?!1:(N&2)!==0),Ae?(V=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(N|=1),xt(zi,N&1),y===null)return Sc(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?rn(y)?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(N=R.children,y=R.fallback,V?(R=x.mode,V=x.child,N={mode:"hidden",children:N},!(R&1)&&V!==null?(V.childLanes=0,V.pendingProps=N):V=fh(N,R,0,null),y=Bc(y,R,w,null),V.return=x,y.return=x,V.sibling=y,x.child=V,x.child.memoizedState=Ou(w),x.memoizedState=jd,y):Sa(x,N));if(N=y.memoizedState,N!==null){if(Ae=N.dehydrated,Ae!==null){if(ae)return x.flags&256?(x.flags&=-257,Xd(y,x,w,Error(o(422)))):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(V=R.fallback,N=x.mode,R=fh({mode:"visible",children:R.children},N,0,null),V=Bc(V,N,w,null),V.flags|=2,R.return=x,V.return=x,R.sibling=V,x.child=R,x.mode&1&&Fl(x,y.child,null,w),x.child.memoizedState=Ou(w),x.memoizedState=jd,V);if(!(x.mode&1))x=Xd(y,x,w,null);else if(rn(Ae))x=Xd(y,x,w,Error(o(419)));else if(R=(w&y.childLanes)!==0,Dr||R){if(R=Wi,R!==null){switch(w&-w){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}R=V&(R.suspendedLanes|w)?0:V,R!==0&&R!==N.retryLane&&(N.retryLane=R,js(y,R,-1))}Zd(),x=Xd(y,x,w,Error(o(421)))}else Kt(Ae)?(x.flags|=128,x.child=y.child,x=DS.bind(null,y),Qn(Ae,x),x=null):(w=N.treeContext,Ne&&(Kr=ci(Ae),Ts=x,Li=!0,jo=null,Hf=!1,w!==null&&(Wo[po++]=kl,Wo[po++]=Ol,Wo[po++]=wu,kl=w.id,Ol=w.overflow,wu=x)),x=Sa(x,x.pendingProps.children),x.flags|=4096);return x}return V?(R=Eg(y,x,R.children,R.fallback,w),V=x.child,N=y.child.memoizedState,V.memoizedState=N===null?Ou(w):{baseLanes:N.baseLanes|w,cachePool:null},V.childLanes=y.childLanes&~w,x.memoizedState=jd,R):(w=Kd(y,x,R.children,w),x.memoizedState=null,w)}return V?(R=Eg(y,x,R.children,R.fallback,w),V=x.child,N=y.child.memoizedState,V.memoizedState=N===null?Ou(w):{baseLanes:N.baseLanes|w,cachePool:null},V.childLanes=y.childLanes&~w,x.memoizedState=jd,R):(w=Kd(y,x,R.children,w),x.memoizedState=null,w)}function Sa(y,x){return x=fh({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function Kd(y,x,w,R){var N=y.child;return y=N.sibling,w=Xl(N,{mode:"visible",children:w}),!(x.mode&1)&&(w.lanes=R),w.return=x,w.sibling=null,y!==null&&(R=x.deletions,R===null?(x.deletions=[y],x.flags|=16):R.push(y)),x.child=w}function Eg(y,x,w,R,N){var V=x.mode;y=y.child;var ae=y.sibling,Ae={mode:"hidden",children:w};return!(V&1)&&x.child!==y?(w=x.child,w.childLanes=0,w.pendingProps=Ae,x.deletions=null):(w=Xl(y,Ae),w.subtreeFlags=y.subtreeFlags&14680064),ae!==null?R=Xl(ae,R):(R=Bc(R,V,N,null),R.flags|=2),R.return=x,w.return=x,w.sibling=R,x.child=w,R}function Xd(y,x,w,R){return R!==null&&sg(R),Fl(x,y.child,null,w),y=Sa(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function RS(y,x,w){y.lanes|=x;var R=y.alternate;R!==null&&(R.lanes|=x),Tu(y.return,x,w)}function qa(y,x,w,R,N){var V=y.memoizedState;V===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:R,tail:w,tailMode:N}:(V.isBackwards=x,V.rendering=null,V.renderingStartTime=0,V.last=R,V.tail=w,V.tailMode=N)}function Fu(y,x,w){var R=x.pendingProps,N=R.revealOrder,V=R.tail;if(Ki(y,x,R.children,w),R=zi.current,R&2)R=R&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&RS(y,w,x);else if(y.tag===19)RS(y,w,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}R&=1}if(xt(zi,R),!(x.mode&1))x.memoizedState=null;else switch(N){case"forwards":for(w=x.child,N=null;w!==null;)y=w.alternate,y!==null&&ag(y)===null&&(N=w),w=w.sibling;w=N,w===null?(N=x.child,x.child=null):(N=w.sibling,w.sibling=null),qa(x,!1,N,w,V);break;case"backwards":for(w=null,N=x.child,x.child=null;N!==null;){if(y=N.alternate,y!==null&&ag(y)===null){x.child=N;break}y=N.sibling,N.sibling=w,w=N,N=y}qa(x,!0,w,null,V);break;case"together":qa(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function $s(y,x,w){if(y!==null&&(x.dependencies=y.dependencies),Gu|=x.lanes,!(w&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(o(153));if(x.child!==null){for(y=x.child,w=Xl(y,y.pendingProps),x.child=w,w.return=x;y.sibling!==null;)y=y.sibling,w=w.sibling=Xl(y,y.pendingProps),w.return=x;w.sibling=null}return x.child}function Ag(y,x,w){switch(x.tag){case 3:Wd(x),zf();break;case 5:TS(x);break;case 1:pi(x.type)&&Cn(x);break;case 4:og(x,x.stateNode.containerInfo);break;case 10:Au(x,x.type._context,x.memoizedProps.value);break;case 13:var R=x.memoizedState;if(R!==null)return R.dehydrated!==null?(xt(zi,zi.current&1),x.flags|=128,null):w&x.child.childLanes?Ty(y,x,w):(xt(zi,zi.current&1),y=$s(y,x,w),y!==null?y.sibling:null);xt(zi,zi.current&1);break;case 19:if(R=(w&x.childLanes)!==0,y.flags&128){if(R)return Fu(y,x,w);x.flags|=128}var N=x.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),xt(zi,zi.current),R)break;return null;case 22:case 23:return x.lanes=0,Xr(y,x,w)}return $s(y,x,w)}function Tg(y,x){switch(ly(x),x.tag){case 1:return pi(x.type)&&Nn(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return Kf(),Et(vn),Et(un),Ru(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return fy(x),null;case 13:if(Et(zi),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(o(340));zf()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return Et(zi),null;case 4:return Kf(),null;case 10:return Bd(x.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var bs=!1,Br=!1,Nu=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Ko(y,x){var w=y.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(R){Is(y,x,R)}else w.current=null}function zl(y,x,w){try{w()}catch(R){Is(y,x,R)}}var wy=!1;function by(y,x){for(Q(y.containerInfo),Tt=x;Tt!==null;)if(y=Tt,x=y.child,(y.subtreeFlags&1028)!==0&&x!==null)x.return=y,Tt=x;else for(;Tt!==null;){y=Tt;try{var w=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var R=w.memoizedProps,N=w.memoizedState,V=y.stateNode,ae=V.getSnapshotBeforeUpdate(y.elementType===y.type?R:Vs(y.type,R),N);V.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:gt&&yt(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ae){Is(y,y.return,Ae)}if(x=y.sibling,x!==null){x.return=y.return,Tt=x;break}Tt=y.return}return w=wy,wy=!1,w}function $l(y,x,w){var R=x.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var N=R=R.next;do{if((N.tag&y)===y){var V=N.destroy;N.destroy=void 0,V!==void 0&&zl(x,w,V)}N=N.next}while(N!==R)}}function Yr(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var w=x=x.next;do{if((w.tag&y)===y){var R=w.create;w.destroy=R()}w=w.next}while(w!==x)}}function Ms(y){var x=y.ref;if(x!==null){var w=y.stateNode;switch(y.tag){case 5:y=ee(w);break;default:y=w}typeof x=="function"?x(y):x.current=y}}function bi(y,x,w){if(Ka&&typeof Ka.onCommitFiberUnmount=="function")try{Ka.onCommitFiberUnmount(Pd,x)}catch{}switch(x.tag){case 0:case 11:case 14:case 15:if(y=x.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var R=y=y.next;do{var N=R,V=N.destroy;N=N.tag,V!==void 0&&(N&2||N&4)&&zl(x,w,V),R=R.next}while(R!==y)}break;case 1:if(Ko(x,w),y=x.stateNode,typeof y.componentWillUnmount=="function")try{y.props=x.memoizedProps,y.state=x.memoizedState,y.componentWillUnmount()}catch(ae){Is(x,w,ae)}break;case 5:Ko(x,w);break;case 4:gt?Ry(y,x,w):ue&&ue&&(x=x.stateNode.containerInfo,w=ze(x),En(x,w))}}function Xo(y,x,w){for(var R=x;;)if(bi(y,R,w),R.child===null||gt&&R.tag===4){if(R===x)break;for(;R.sibling===null;){if(R.return===null||R.return===x)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else R.child.return=R,R=R.child}function My(y){var x=y.alternate;x!==null&&(y.alternate=null,My(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&_e(x)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Cy(y){return y.tag===5||y.tag===3||y.tag===4}function wg(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Cy(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function bg(y){if(gt){e:{for(var x=y.return;x!==null;){if(Cy(x))break e;x=x.return}throw Error(o(160))}var w=x;switch(w.tag){case 5:x=w.stateNode,w.flags&32&&(Mt(x),w.flags&=-33),w=wg(y),eh(y,w,x);break;case 3:case 4:x=w.stateNode.containerInfo,w=wg(y),Mg(y,w,x);break;default:throw Error(o(161))}}}function Mg(y,x,w){var R=y.tag;if(R===5||R===6)y=y.stateNode,x?Ke(w,y,x):St(w,y);else if(R!==4&&(y=y.child,y!==null))for(Mg(y,x,w),y=y.sibling;y!==null;)Mg(y,x,w),y=y.sibling}function eh(y,x,w){var R=y.tag;if(R===5||R===6)y=y.stateNode,x?cn(w,y,x):Je(w,y);else if(R!==4&&(y=y.child,y!==null))for(eh(y,x,w),y=y.sibling;y!==null;)eh(y,x,w),y=y.sibling}function Ry(y,x,w){for(var R=x,N=!1,V,ae;;){if(!N){N=R.return;e:for(;;){if(N===null)throw Error(o(160));switch(V=N.stateNode,N.tag){case 5:ae=!1;break e;case 3:V=V.containerInfo,ae=!0;break e;case 4:V=V.containerInfo,ae=!0;break e}N=N.return}N=!0}if(R.tag===5||R.tag===6)Xo(y,R,w),ae?$t(V,R.stateNode):wn(V,R.stateNode);else if(R.tag===18)ae?le(V,R.stateNode):fe(V,R.stateNode);else if(R.tag===4){if(R.child!==null){V=R.stateNode.containerInfo,ae=!0,R.child.return=R,R=R.child;continue}}else if(bi(y,R,w),R.child!==null){R.child.return=R,R=R.child;continue}if(R===x)break;for(;R.sibling===null;){if(R.return===null||R.return===x)return;R=R.return,R.tag===4&&(N=!1)}R.sibling.return=R.return,R=R.sibling}}function bc(y,x){if(gt){switch(x.tag){case 0:case 11:case 14:case 15:$l(3,x,x.return),Yr(3,x),$l(5,x,x.return);return;case 1:return;case 5:var w=x.stateNode;if(w!=null){var R=x.memoizedProps;y=y!==null?y.memoizedProps:R;var N=x.type,V=x.updateQueue;x.updateQueue=null,V!==null&&Pt(w,V,N,y,R,x)}return;case 6:if(x.stateNode===null)throw Error(o(162));w=x.memoizedProps,nt(x.stateNode,y!==null?y.memoizedProps:w,w);return;case 3:Ne&&y!==null&&y.memoizedState.isDehydrated&&se(x.stateNode.containerInfo);return;case 12:return;case 13:th(x);return;case 19:th(x);return;case 17:return}throw Error(o(163))}switch(x.tag){case 0:case 11:case 14:case 15:$l(3,x,x.return),Yr(3,x),$l(5,x,x.return);return;case 12:return;case 13:th(x);return;case 19:th(x);return;case 3:Ne&&y!==null&&y.memoizedState.isDehydrated&&se(x.stateNode.containerInfo);break;case 22:case 23:return}e:if(ue){switch(x.tag){case 1:case 5:case 6:break e;case 3:case 4:x=x.stateNode,En(x.containerInfo,x.pendingChildren);break e}throw Error(o(163))}}function th(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var w=y.stateNode;w===null&&(w=y.stateNode=new Nu),x.forEach(function(R){var N=tp.bind(null,y,R);w.has(R)||(w.add(R),R.then(N,N))})}}function aM(y,x){for(Tt=x;Tt!==null;){x=Tt;var w=x.deletions;if(w!==null)for(var R=0;R<w.length;R++){var N=w[R];try{var V=y;gt?Ry(V,N,x):Xo(V,N,x);var ae=N.alternate;ae!==null&&(ae.return=null),N.return=null}catch(en){Is(N,x,en)}}if(w=x.child,x.subtreeFlags&12854&&w!==null)w.return=x,Tt=w;else for(;Tt!==null;){x=Tt;try{var Ae=x.flags;if(Ae&32&&gt&&Mt(x.stateNode),Ae&512){var $e=x.alternate;if($e!==null){var mt=$e.ref;mt!==null&&(typeof mt=="function"?mt(null):mt.current=null)}}if(Ae&8192)switch(x.tag){case 13:if(x.memoizedState!==null){var Vt=x.alternate;(Vt===null||Vt.memoizedState===null)&&(Pg=xr())}break;case 22:var bn=x.memoizedState!==null,an=x.alternate,vi=an!==null&&an.memoizedState!==null;if(w=x,gt){e:if(R=w,N=bn,V=null,gt)for(var Ot=R;;){if(Ot.tag===5){if(V===null){V=Ot;var ai=Ot.stateNode;N?At(ai):qe(Ot.stateNode,Ot.memoizedProps)}}else if(Ot.tag===6){if(V===null){var _o=Ot.stateNode;N?et(_o):ve(_o,Ot.memoizedProps)}}else if((Ot.tag!==22&&Ot.tag!==23||Ot.memoizedState===null||Ot===R)&&Ot.child!==null){Ot.child.return=Ot,Ot=Ot.child;continue}if(Ot===R)break;for(;Ot.sibling===null;){if(Ot.return===null||Ot.return===R)break e;V===Ot&&(V=null),Ot=Ot.return}V===Ot&&(V=null),Ot.sibling.return=Ot.return,Ot=Ot.sibling}}if(bn&&!vi&&w.mode&1){Tt=w;for(var De=w.child;De!==null;){for(w=Tt=De;Tt!==null;){R=Tt;var Te=R.child;switch(R.tag){case 0:case 11:case 14:case 15:$l(4,R,R.return);break;case 1:Ko(R,R.return);var Ge=R.stateNode;if(typeof Ge.componentWillUnmount=="function"){var It=R.return;try{Ge.props=R.memoizedProps,Ge.state=R.memoizedState,Ge.componentWillUnmount()}catch(en){Is(R,It,en)}}break;case 5:Ko(R,R.return);break;case 22:if(R.memoizedState!==null){Uu(w);continue}}Te!==null?(Te.return=R,Tt=Te):Uu(w)}De=De.sibling}}}switch(Ae&4102){case 2:bg(x),x.flags&=-3;break;case 6:bg(x),x.flags&=-3,bc(x.alternate,x);break;case 4096:x.flags&=-4097;break;case 4100:x.flags&=-4097,bc(x.alternate,x);break;case 4:bc(x.alternate,x)}}catch(en){Is(x,x.return,en)}if(w=x.sibling,w!==null){w.return=x.return,Tt=w;break}Tt=x.return}}}function Ea(y,x,w){Tt=y,Yd(y)}function Yd(y,x,w){for(var R=(y.mode&1)!==0;Tt!==null;){var N=Tt,V=N.child;if(N.tag===22&&R){var ae=N.memoizedState!==null||bs;if(!ae){var Ae=N.alternate,$e=Ae!==null&&Ae.memoizedState!==null||Br;Ae=bs;var mt=Br;if(bs=ae,(Br=$e)&&!mt)for(Tt=N;Tt!==null;)ae=Tt,$e=ae.child,ae.tag===22&&ae.memoizedState!==null?Cg(N):$e!==null?($e.return=ae,Tt=$e):Cg(N);for(;V!==null;)Tt=V,Yd(V),V=V.sibling;Tt=N,bs=Ae,Br=mt}qd(y)}else N.subtreeFlags&8772&&V!==null?(V.return=N,Tt=V):qd(y)}}function qd(y){for(;Tt!==null;){var x=Tt;if(x.flags&8772){var w=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:Br||Yr(5,x);break;case 1:var R=x.stateNode;if(x.flags&4&&!Br)if(w===null)R.componentDidMount();else{var N=x.elementType===x.type?w.memoizedProps:Vs(x.type,w.memoizedProps);R.componentDidUpdate(N,w.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var V=x.updateQueue;V!==null&&gS(x,V,R);break;case 3:var ae=x.updateQueue;if(ae!==null){if(w=null,x.child!==null)switch(x.child.tag){case 5:w=ee(x.child.stateNode);break;case 1:w=x.child.stateNode}gS(x,ae,w)}break;case 5:var Ae=x.stateNode;w===null&&x.flags&4&&vt(Ae,x.type,x.memoizedProps,x);break;case 6:break;case 4:break;case 12:break;case 13:if(Ne&&x.memoizedState===null){var $e=x.alternate;if($e!==null){var mt=$e.memoizedState;if(mt!==null){var Vt=mt.dehydrated;Vt!==null&&oe(Vt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Br||x.flags&512&&Ms(x)}catch(bn){Is(x,x.return,bn)}}if(x===y){Tt=null;break}if(w=x.sibling,w!==null){w.return=x.return,Tt=w;break}Tt=x.return}}function Uu(y){for(;Tt!==null;){var x=Tt;if(x===y){Tt=null;break}var w=x.sibling;if(w!==null){w.return=x.return,Tt=w;break}Tt=x.return}}function Cg(y){for(;Tt!==null;){var x=Tt;try{switch(x.tag){case 0:case 11:case 15:var w=x.return;try{Yr(4,x)}catch($e){Is(x,w,$e)}break;case 1:var R=x.stateNode;if(typeof R.componentDidMount=="function"){var N=x.return;try{R.componentDidMount()}catch($e){Is(x,N,$e)}}var V=x.return;try{Ms(x)}catch($e){Is(x,V,$e)}break;case 5:var ae=x.return;try{Ms(x)}catch($e){Is(x,ae,$e)}}}catch($e){Is(x,x.return,$e)}if(x===y){Tt=null;break}var Ae=x.sibling;if(Ae!==null){Ae.return=x.return,Tt=Ae;break}Tt=x.return}}var nh=0,ih=1,rh=2,Wl=3,Cs=4;if(typeof Symbol=="function"&&Symbol.for){var Aa=Symbol.for;nh=Aa("selector.component"),ih=Aa("selector.has_pseudo_class"),rh=Aa("selector.role"),Wl=Aa("selector.test_id"),Cs=Aa("selector.text")}function Jd(y){var x=ke(y);if(x!=null){if(typeof x.memoizedProps["data-testname"]!="string")throw Error(o(364));return x}if(y=Dt(y),y===null)throw Error(o(362));return y.stateNode.current}function Rg(y,x){switch(x.$$typeof){case nh:if(y.type===x.value)return!0;break;case ih:e:{x=x.value,y=[y,0];for(var w=0;w<y.length;){var R=y[w++],N=y[w++],V=x[N];if(R.tag!==5||!j(R)){for(;V!=null&&Rg(R,V);)N++,V=x[N];if(N===x.length){x=!0;break e}else for(R=R.child;R!==null;)y.push(R,N),R=R.sibling}}x=!1}return x;case rh:if(y.tag===5&&Ee(y.stateNode,x.value))return!0;break;case Cs:if((y.tag===5||y.tag===6)&&(y=Z(y),y!==null&&0<=y.indexOf(x.value)))return!0;break;case Wl:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===x.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ta(y){switch(y.$$typeof){case nh:return"<"+(P(y.value)||"Unknown")+">";case ih:return":has("+(Ta(y)||"")+")";case rh:return'[role="'+y.value+'"]';case Cs:return'"'+y.value+'"';case Wl:return'[data-testname="'+y.value+'"]';default:throw Error(o(365))}}function jl(y,x){var w=[];y=[y,0];for(var R=0;R<y.length;){var N=y[R++],V=y[R++],ae=x[V];if(N.tag!==5||!j(N)){for(;ae!=null&&Rg(N,ae);)V++,ae=x[V];if(V===x.length)w.push(N);else for(N=N.child;N!==null;)y.push(N,V),N=N.sibling}}return w}function Qd(y,x){if(!Rt)throw Error(o(363));y=Jd(y),y=jl(y,x),x=[],y=Array.from(y);for(var w=0;w<y.length;){var R=y[w++];if(R.tag===5)j(R)||x.push(R.stateNode);else for(R=R.child;R!==null;)y.push(R),R=R.sibling}return x}var PS=Math.ceil,Yo=a.ReactCurrentDispatcher,Ja=a.ReactCurrentOwner,Di=a.ReactCurrentBatchConfig,Dn=0,Wi=null,Qi=null,kr=0,Rs=0,Kl=sn(0),lr=0,sh=null,Gu=0,oh=0,Vu=0,Mc=null,Ps=null,Pg=0,Cc=1/0;function Hu(){Cc=xr()+500}var Rc=!1,qo=null,Jo=null,Pc=!1,Ws=null,ah=0,Qa=0,Ig=null,lh=-1,Ei=0;function Or(){return Dn&6?xr():lh!==-1?lh:lh=xr()}function Za(y){return y.mode&1?Dn&2&&kr!==0?kr&-kr:mS.transition!==null?(Ei===0&&(y=Of,Of<<=1,!(Of&4194240)&&(Of=64),Ei=y),Ei):(y=Bn,y!==0?y:We()):1}function js(y,x,w){if(50<Qa)throw Qa=0,Ig=null,Error(o(185));var R=zu(y,x);return R===null?null:(xu(R,x,w),(!(Dn&2)||R!==Wi)&&(R===Wi&&(!(Dn&2)&&(oh|=x),lr===4&&wa(R,kr)),cs(R,w),x===1&&Dn===0&&!(y.mode&1)&&(Hu(),Xm&&Ho())),R)}function zu(y,x){y.lanes|=x;var w=y.alternate;for(w!==null&&(w.lanes|=x),w=y,y=y.return;y!==null;)y.childLanes|=x,w=y.alternate,w!==null&&(w.childLanes|=x),w=y,y=y.return;return w.tag===3?w.stateNode:null}function cs(y,x){var w=y.callbackNode;pS(y,x);var R=Rd(y,y===Wi?kr:0);if(R===0)w!==null&&Nf(w),y.callbackNode=null,y.callbackPriority=0;else if(x=R&-R,y.callbackPriority!==x){if(w!=null&&Nf(w),x===1)y.tag===0?qm(ch.bind(null,y)):Ym(ch.bind(null,y)),ft?dt(function(){Dn===0&&Ho()}):_u(Su,Ho),w=null;else{switch(Ll(R)){case 1:w=Su;break;case 4:w=rM;break;case 16:w=jm;break;case 536870912:w=Km;break;default:w=jm}w=np(w,Ic.bind(null,y))}y.callbackPriority=x,y.callbackNode=w}}function Ic(y,x){if(lh=-1,Ei=0,Dn&6)throw Error(o(327));var w=y.callbackNode;if(Dc()&&y.callbackNode!==w)return null;var R=Rd(y,y===Wi?kr:0);if(R===0)return null;if(R&30||R&y.expiredLanes||x)x=yo(y,R);else{x=R;var N=Dn;Dn|=2;var V=Dg();(Wi!==y||kr!==x)&&(Hu(),Xi(y,x));do try{ep();break}catch(Ae){Lg(y,Ae)}while(!0);As(),Yo.current=V,Dn=N,Qi!==null?x=0:(Wi=null,kr=0,x=lr)}if(x!==0){if(x===2&&(N=zm(y),N!==0&&(R=N,x=Mi(y,N))),x===1)throw w=sh,Xi(y,0),wa(y,R),cs(y,xr()),w;if(x===6)wa(y,R);else{if(N=y.current.alternate,!(R&30)&&!Fr(N)&&(x=yo(y,R),x===2&&(V=zm(y),V!==0&&(R=V,x=Mi(y,V))),x===1))throw w=sh,Xi(y,0),wa(y,R),cs(y,xr()),w;switch(y.finishedWork=N,y.finishedLanes=R,x){case 0:case 1:throw Error(o(345));case 2:Lc(y,Ps);break;case 3:if(wa(y,R),(R&130023424)===R&&(x=Pg+500-xr(),10<x)){if(Rd(y,0)!==0)break;if(N=y.suspendedLanes,(N&R)!==R){Or(),y.pingedLanes|=y.suspendedLanes&N;break}y.timeoutHandle=Le(Lc.bind(null,y,Ps),x);break}Lc(y,Ps);break;case 4:if(wa(y,R),(R&4194240)===R)break;for(x=y.eventTimes,N=-1;0<R;){var ae=31-mi(R);V=1<<ae,ae=x[ae],ae>N&&(N=ae),R&=~V}if(R=N,R=xr()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*PS(R/1960))-R,10<R){y.timeoutHandle=Le(Lc.bind(null,y,Ps),R);break}Lc(y,Ps);break;case 5:Lc(y,Ps);break;default:throw Error(o(329))}}}return cs(y,xr()),y.callbackNode===w?Ic.bind(null,y):null}function Mi(y,x){var w=Mc;return y.current.memoizedState.isDehydrated&&(Xi(y,x).flags|=256),y=yo(y,x),y!==2&&(x=Ps,Ps=w,x!==null&&Zi(x)),y}function Zi(y){Ps===null?Ps=y:Ps.push.apply(Ps,y)}function Fr(y){for(var x=y;;){if(x.flags&16384){var w=x.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var R=0;R<w.length;R++){var N=w[R],V=N.getSnapshot;N=N.value;try{if(!Es(V(),N))return!1}catch{return!1}}}if(w=x.child,x.subtreeFlags&16384&&w!==null)w.return=x,x=w;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function wa(y,x){for(x&=~Vu,x&=~oh,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var w=31-mi(x),R=1<<w;y[w]=-1,x&=~R}}function ch(y){if(Dn&6)throw Error(o(327));Dc();var x=Rd(y,0);if(!(x&1))return cs(y,xr()),null;var w=yo(y,x);if(y.tag!==0&&w===2){var R=zm(y);R!==0&&(x=R,w=Mi(y,R))}if(w===1)throw w=sh,Xi(y,0),wa(y,x),cs(y,xr()),w;if(w===6)throw Error(o(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,Lc(y,Ps),cs(y,xr()),null}function uh(y){Ws!==null&&Ws.tag===0&&!(Dn&6)&&Dc();var x=Dn;Dn|=1;var w=Di.transition,R=Bn;try{if(Di.transition=null,Bn=1,y)return y()}finally{Bn=R,Di.transition=w,Dn=x,!(Dn&6)&&Ho()}}function Py(){Rs=Kl.current,Et(Kl)}function Xi(y,x){y.finishedWork=null,y.finishedLanes=0;var w=y.timeoutHandle;if(w!==lt&&(y.timeoutHandle=lt,je(w)),Qi!==null)for(w=Qi.return;w!==null;){var R=w;switch(ly(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Nn();break;case 3:Kf(),Et(vn),Et(un),Ru();break;case 5:fy(R);break;case 4:Kf();break;case 13:Et(zi);break;case 19:Et(zi);break;case 10:Bd(R.type._context);break;case 22:case 23:Py()}w=w.return}if(Wi=y,Qi=y=Xl(y.current,null),kr=Rs=x,lr=0,sh=null,Vu=oh=Gu=0,Ps=Mc=null,zo!==null){for(x=0;x<zo.length;x++)if(w=zo[x],R=w.interleaved,R!==null){w.interleaved=null;var N=R.next,V=w.pending;if(V!==null){var ae=V.next;V.next=N,R.next=ae}w.pending=R}zo=null}return y}function Lg(y,x){do{var w=Qi;try{if(As(),Od.current=Qf,lg){for(var R=$i.memoizedState;R!==null;){var N=R.queue;N!==null&&(N.pending=null),R=R.next}lg=!1}if(Pu=0,Ir=Pr=$i=null,Xa=!1,Iu=0,Ja.current=null,w===null||w.return===null){lr=1,sh=x,Qi=null;break}e:{var V=y,ae=w.return,Ae=w,$e=x;if(x=kr,Ae.flags|=32768,$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var mt=$e,Vt=Ae,bn=Vt.tag;if(!(Vt.mode&1)&&(bn===0||bn===11||bn===15)){var an=Vt.alternate;an?(Vt.updateQueue=an.updateQueue,Vt.memoizedState=an.memoizedState,Vt.lanes=an.lanes):(Vt.updateQueue=null,Vt.memoizedState=null)}var vi=Sy(ae);if(vi!==null){vi.flags&=-257,Du(vi,ae,Ae,V,x),vi.mode&1&&Ul(V,mt,x),x=vi,$e=mt;var Ot=x.updateQueue;if(Ot===null){var ai=new Set;ai.add($e),x.updateQueue=ai}else Ot.add($e);break e}else{if(!(x&1)){Ul(V,mt,x),Zd();break e}$e=Error(o(426))}}else if(Li&&Ae.mode&1){var _o=Sy(ae);if(_o!==null){!(_o.flags&65536)&&(_o.flags|=256),Du(_o,ae,Ae,V,x),sg($e);break e}}V=$e,lr!==4&&(lr=2),Mc===null?Mc=[V]:Mc.push(V),$e=_y($e,Ae),Ae=ae;do{switch(Ae.tag){case 3:Ae.flags|=65536,x&=-x,Ae.lanes|=x;var De=CS(Ae,$e,x);Zm(Ae,De);break e;case 1:V=$e;var Te=Ae.type,Ge=Ae.stateNode;if(!(Ae.flags&128)&&(typeof Te.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(Jo===null||!Jo.has(Ge)))){Ae.flags|=65536,x&=-x,Ae.lanes|=x;var It=yg(Ae,V,x);Zm(Ae,It);break e}}Ae=Ae.return}while(Ae!==null)}kg(w)}catch(en){x=en,Qi===w&&w!==null&&(Qi=w=w.return);continue}break}while(!0)}function Dg(){var y=Yo.current;return Yo.current=Qf,y===null?Qf:y}function Zd(){(lr===0||lr===3||lr===2)&&(lr=4),Wi===null||!(Gu&268435455)&&!(oh&268435455)||wa(Wi,kr)}function yo(y,x){var w=Dn;Dn|=2;var R=Dg();Wi===y&&kr===x||Xi(y,x);do try{Qo();break}catch(N){Lg(y,N)}while(!0);if(As(),Dn=w,Yo.current=R,Qi!==null)throw Error(o(261));return Wi=null,kr=0,lr}function Qo(){for(;Qi!==null;)Bg(Qi)}function ep(){for(;Qi!==null&&!yc();)Bg(Qi)}function Bg(y){var x=Dy(y.alternate,y,Rs);y.memoizedProps=y.pendingProps,x===null?kg(y):Qi=x,Ja.current=null}function kg(y){var x=y;do{var w=x.alternate;if(y=x.return,x.flags&32768){if(w=Tg(w,x),w!==null){w.flags&=32767,Qi=w;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{lr=6,Qi=null;return}}else if(w=Sg(w,x,Rs),w!==null){Qi=w;return}if(x=x.sibling,x!==null){Qi=x;return}Qi=x=y}while(x!==null);lr===0&&(lr=5)}function Lc(y,x){var w=Bn,R=Di.transition;try{Di.transition=null,Bn=1,IS(y,x,w)}finally{Di.transition=R,Bn=w}return null}function IS(y,x,w){do Dc();while(Ws!==null);if(Dn&6)throw Error(o(327));var R=y.finishedWork,N=y.finishedLanes;if(R===null)return null;if(y.finishedWork=null,y.finishedLanes=0,R===y.current)throw Error(o(177));y.callbackNode=null,y.callbackPriority=0;var V=R.lanes|R.childLanes;if(Wm(y,V),y===Wi&&(Qi=Wi=null,kr=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||Pc||(Pc=!0,np(jm,function(){return Dc(),null})),V=(R.flags&15990)!==0,R.subtreeFlags&15990||V){V=Di.transition,Di.transition=null;var ae=Bn;Bn=1;var Ae=Dn;Dn|=4,Ja.current=null,by(y,R),aM(y,R),F(y.containerInfo),y.current=R,Ea(R),iM(),Dn=Ae,Bn=ae,Di.transition=V}else y.current=R;if(Pc&&(Pc=!1,Ws=y,ah=N),V=y.pendingLanes,V===0&&(Jo=null),Id(R.stateNode),cs(y,xr()),x!==null)for(w=y.onRecoverableError,R=0;R<x.length;R++)w(x[R]);if(Rc)throw Rc=!1,y=qo,qo=null,y;return ah&1&&y.tag!==0&&Dc(),V=y.pendingLanes,V&1?y===Ig?Qa++:(Qa=0,Ig=y):Qa=0,Ho(),null}function Dc(){if(Ws!==null){var y=Ll(ah),x=Di.transition,w=Bn;try{if(Di.transition=null,Bn=16>y?16:y,Ws===null)var R=!1;else{if(y=Ws,Ws=null,ah=0,Dn&6)throw Error(o(331));var N=Dn;for(Dn|=4,Tt=y.current;Tt!==null;){var V=Tt,ae=V.child;if(Tt.flags&16){var Ae=V.deletions;if(Ae!==null){for(var $e=0;$e<Ae.length;$e++){var mt=Ae[$e];for(Tt=mt;Tt!==null;){var Vt=Tt;switch(Vt.tag){case 0:case 11:case 15:$l(8,Vt,V)}var bn=Vt.child;if(bn!==null)bn.return=Vt,Tt=bn;else for(;Tt!==null;){Vt=Tt;var an=Vt.sibling,vi=Vt.return;if(My(Vt),Vt===mt){Tt=null;break}if(an!==null){an.return=vi,Tt=an;break}Tt=vi}}}var Ot=V.alternate;if(Ot!==null){var ai=Ot.child;if(ai!==null){Ot.child=null;do{var _o=ai.sibling;ai.sibling=null,ai=_o}while(ai!==null)}}Tt=V}}if(V.subtreeFlags&2064&&ae!==null)ae.return=V,Tt=ae;else e:for(;Tt!==null;){if(V=Tt,V.flags&2048)switch(V.tag){case 0:case 11:case 15:$l(9,V,V.return)}var De=V.sibling;if(De!==null){De.return=V.return,Tt=De;break e}Tt=V.return}}var Te=y.current;for(Tt=Te;Tt!==null;){ae=Tt;var Ge=ae.child;if(ae.subtreeFlags&2064&&Ge!==null)Ge.return=ae,Tt=Ge;else e:for(ae=Te;Tt!==null;){if(Ae=Tt,Ae.flags&2048)try{switch(Ae.tag){case 0:case 11:case 15:Yr(9,Ae)}}catch(en){Is(Ae,Ae.return,en)}if(Ae===ae){Tt=null;break e}var It=Ae.sibling;if(It!==null){It.return=Ae.return,Tt=It;break e}Tt=Ae.return}}if(Dn=N,Ho(),Ka&&typeof Ka.onPostCommitFiberRoot=="function")try{Ka.onPostCommitFiberRoot(Pd,y)}catch{}R=!0}return R}finally{Bn=w,Di.transition=x}}return!1}function Iy(y,x,w){x=_y(w,x),x=CS(y,x,1),xc(y,x),x=Or(),y=zu(y,1),y!==null&&(xu(y,1,x),cs(y,x))}function Is(y,x,w){if(y.tag===3)Iy(y,y,w);else for(;x!==null;){if(x.tag===3){Iy(x,y,w);break}else if(x.tag===1){var R=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Jo===null||!Jo.has(R))){y=_y(w,y),y=yg(x,y,1),xc(x,y),y=Or(),x=zu(x,1),x!==null&&(xu(x,1,y),cs(x,y));break}}x=x.return}}function LS(y,x,w){var R=y.pingCache;R!==null&&R.delete(x),x=Or(),y.pingedLanes|=y.suspendedLanes&w,Wi===y&&(kr&w)===w&&(lr===4||lr===3&&(kr&130023424)===kr&&500>xr()-Pg?Xi(y,0):Vu|=w),cs(y,x)}function Ly(y,x){x===0&&(y.mode&1?(x=ni,ni<<=1,!(ni&130023424)&&(ni=4194304)):x=1);var w=Or();y=zu(y,x),y!==null&&(xu(y,x,w),cs(y,w))}function DS(y){var x=y.memoizedState,w=0;x!==null&&(w=x.retryLane),Ly(y,w)}function tp(y,x){var w=0;switch(y.tag){case 13:var R=y.stateNode,N=y.memoizedState;N!==null&&(w=N.retryLane);break;case 19:R=y.stateNode;break;default:throw Error(o(314))}R!==null&&R.delete(x),Ly(y,w)}var Dy;Dy=function(y,x,w){if(y!==null)if(y.memoizedProps!==x.pendingProps||vn.current)Dr=!0;else{if(!(y.lanes&w)&&!(x.flags&128))return Dr=!1,Ag(y,x,w);Dr=!!(y.flags&131072)}else Dr=!1,Li&&x.flags&1048576&&_S(x,ig,x.index);switch(x.lanes=0,x.tag){case 2:var R=x.type;y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps;var N=wi(x,un.current);Uf(x,w),N=Xf(null,x,R,y,N,w);var V=Ac();return x.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,pi(R)?(V=!0,Cn(x)):V=!1,x.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Gf(x),N.updater=tg,x.stateNode=N,N._reactInternals=x,oy(x,R,y,w),x=ls(null,x,R,!0,V,w)):(x.tag=0,Li&&V&&ay(x),Ki(null,x,N,w),x=x.child),x;case 16:R=x.elementType;e:{switch(y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps,N=R._init,R=N(R._payload),x.type=R,N=x.tag=BS(R),y=Vs(R,y),N){case 0:x=Hl(null,x,R,y,w);break e;case 1:x=ku(null,x,R,y,w);break e;case 11:x=Si(null,x,R,y,w);break e;case 14:x=gi(null,x,R,Vs(R.type,y),w);break e}throw Error(o(306,R,""))}return x;case 0:return R=x.type,N=x.pendingProps,N=x.elementType===R?N:Vs(R,N),Hl(y,x,R,N,w);case 1:return R=x.type,N=x.pendingProps,N=x.elementType===R?N:Vs(R,N),ku(y,x,R,N,w);case 3:e:{if(Wd(x),y===null)throw Error(o(387));R=x.pendingProps,V=x.memoizedState,N=V.element,iy(y,x),eg(x,R,null,w);var ae=x.memoizedState;if(R=ae.element,Ne&&V.isDehydrated)if(V={element:R,isDehydrated:!1,cache:ae.cache,transitions:ae.transitions},x.updateQueue.baseState=V,x.memoizedState=V,x.flags&256){N=Error(o(423)),x=Ay(y,x,R,w,N);break e}else if(R!==N){N=Error(o(424)),x=Ay(y,x,R,w,N);break e}else for(Ne&&(Kr=Ii(x.stateNode.containerInfo),Ts=x,Li=!0,jo=null,Hf=!1),w=AS(x,null,R,w),x.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(zf(),R===N){x=$s(y,x,w);break e}Ki(y,x,R,w)}x=x.child}return x;case 5:return TS(x),y===null&&Sc(x),R=x.type,N=x.pendingProps,V=y!==null?y.memoizedProps:null,ae=N.children,Be(R,N)?ae=null:V!==null&&Be(R,V)&&(x.flags|=32),ws(y,x),Ki(y,x,ae,w),x.child;case 6:return y===null&&Sc(x),null;case 13:return Ty(y,x,w);case 4:return og(x,x.stateNode.containerInfo),R=x.pendingProps,y===null?x.child=Fl(x,null,R,w):Ki(y,x,R,w),x.child;case 11:return R=x.type,N=x.pendingProps,N=x.elementType===R?N:Vs(R,N),Si(y,x,R,N,w);case 7:return Ki(y,x,x.pendingProps,w),x.child;case 8:return Ki(y,x,x.pendingProps.children,w),x.child;case 12:return Ki(y,x,x.pendingProps.children,w),x.child;case 10:e:{if(R=x.type._context,N=x.pendingProps,V=x.memoizedProps,ae=N.value,Au(x,R,ae),V!==null)if(Es(V.value,ae)){if(V.children===N.children&&!vn.current){x=$s(y,x,w);break e}}else for(V=x.child,V!==null&&(V.return=x);V!==null;){var Ae=V.dependencies;if(Ae!==null){ae=V.child;for(var $e=Ae.firstContext;$e!==null;){if($e.context===R){if(V.tag===1){$e=Bl(-1,w&-w),$e.tag=2;var mt=V.updateQueue;if(mt!==null){mt=mt.shared;var Vt=mt.pending;Vt===null?$e.next=$e:($e.next=Vt.next,Vt.next=$e),mt.pending=$e}}V.lanes|=w,$e=V.alternate,$e!==null&&($e.lanes|=w),Tu(V.return,w,x),Ae.lanes|=w;break}$e=$e.next}}else if(V.tag===10)ae=V.type===x.type?null:V.child;else if(V.tag===18){if(ae=V.return,ae===null)throw Error(o(341));ae.lanes|=w,Ae=ae.alternate,Ae!==null&&(Ae.lanes|=w),Tu(ae,w,x),ae=V.sibling}else ae=V.child;if(ae!==null)ae.return=V;else for(ae=V;ae!==null;){if(ae===x){ae=null;break}if(V=ae.sibling,V!==null){V.return=ae.return,ae=V;break}ae=ae.return}V=ae}Ki(y,x,N.children,w),x=x.child}return x;case 9:return N=x.type,R=x.pendingProps.children,Uf(x,w),N=Hs(N),R=R(N),x.flags|=1,Ki(y,x,R,w),x.child;case 14:return R=x.type,N=Vs(R,x.pendingProps),N=Vs(R.type,N),gi(y,x,R,N,w);case 15:return Vl(y,x,x.type,x.pendingProps,w);case 17:return R=x.type,N=x.pendingProps,N=x.elementType===R?N:Vs(R,N),y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),x.tag=1,pi(R)?(y=!0,Cn(x)):y=!1,Uf(x,w),yS(x,R,N),oy(x,R,N,w),ls(null,x,R,!0,y,w);case 19:return Fu(y,x,w);case 22:return Xr(y,x,w)}throw Error(o(156,x.tag))};function np(y,x){return _u(y,x)}function Og(y,x,w,R){this.tag=y,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xo(y,x,w,R){return new Og(y,x,w,R)}function ip(y){return y=y.prototype,!(!y||!y.isReactComponent)}function BS(y){if(typeof y=="function")return ip(y)?1:0;if(y!=null){if(y=y.$$typeof,y===v)return 11;if(y===A)return 14}return 2}function Xl(y,x){var w=y.alternate;return w===null?(w=xo(y.tag,x,y.key,y.mode),w.elementType=y.elementType,w.type=y.type,w.stateNode=y.stateNode,w.alternate=y,y.alternate=w):(w.pendingProps=x,w.type=y.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=y.flags&14680064,w.childLanes=y.childLanes,w.lanes=y.lanes,w.child=y.child,w.memoizedProps=y.memoizedProps,w.memoizedState=y.memoizedState,w.updateQueue=y.updateQueue,x=y.dependencies,w.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},w.sibling=y.sibling,w.index=y.index,w.ref=y.ref,w}function rp(y,x,w,R,N,V){var ae=2;if(R=y,typeof y=="function")ip(y)&&(ae=1);else if(typeof y=="string")ae=5;else e:switch(y){case u:return Bc(w.children,N,V,x);case f:ae=8,N|=8;break;case h:return y=xo(12,w,x,N|2),y.elementType=h,y.lanes=V,y;case _:return y=xo(13,w,x,N),y.elementType=_,y.lanes=V,y;case S:return y=xo(19,w,x,N),y.elementType=S,y.lanes=V,y;case b:return fh(w,N,V,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case p:ae=10;break e;case g:ae=9;break e;case v:ae=11;break e;case A:ae=14;break e;case T:ae=16,R=null;break e}throw Error(o(130,y==null?y:typeof y,""))}return x=xo(ae,w,x,N),x.elementType=y,x.type=R,x.lanes=V,x}function Bc(y,x,w,R){return y=xo(7,y,R,x),y.lanes=w,y}function fh(y,x,w,R){return y=xo(22,y,R,x),y.elementType=b,y.lanes=w,y.stateNode={},y}function Fg(y,x,w){return y=xo(6,y,null,x),y.lanes=w,y}function Ng(y,x,w){return x=xo(4,y.children!==null?y.children:[],y.key,x),x.lanes=w,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function kS(y,x,w,R,N){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$m(0),this.expirationTimes=$m(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$m(0),this.identifierPrefix=R,this.onRecoverableError=N,Ne&&(this.mutableSourceEagerHydrationData=null)}function OS(y,x,w,R,N,V,ae,Ae,$e){return y=new kS(y,x,w,Ae,$e),x===1?(x=1,V===!0&&(x|=8)):x=0,V=xo(3,null,null,x),y.current=V,V.stateNode=y,V.memoizedState={element:R,isDehydrated:w,cache:null,transitions:null},Gf(V),y}function By(y){if(!y)return mn;y=y._reactInternals;e:{if(I(y)!==y||y.tag!==1)throw Error(o(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(pi(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(o(171))}if(y.tag===1){var w=y.type;if(pi(w))return Hi(y,w,x)}return x}function FS(y){var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(o(188)):(y=Object.keys(y).join(","),Error(o(268,y)));return y=H(x),y===null?null:y.stateNode}function NS(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var w=y.retryLane;y.retryLane=w!==0&&w<x?w:x}}function Ug(y,x){NS(y,x),(y=y.alternate)&&NS(y,x)}function US(y){return y=H(y),y===null?null:y.stateNode}function GS(){return null}return t.attemptContinuousHydration=function(y){if(y.tag===13){var x=Or();js(y,134217728,x),Ug(y,134217728)}},t.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var x=Or(),w=Za(y);js(y,w,x),Ug(y,w)}},t.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var w=Ff(x.pendingLanes);w!==0&&(ja(x,w|1),cs(x,xr()),!(Dn&6)&&(Hu(),Ho()))}break;case 13:var R=Or();uh(function(){return js(y,1,R)}),Ug(y,1)}},t.batchedUpdates=function(y,x){var w=Dn;Dn|=1;try{return y(x)}finally{Dn=w,Dn===0&&(Hu(),Xm&&Ho())}},t.createComponentSelector=function(y){return{$$typeof:nh,value:y}},t.createContainer=function(y,x,w,R,N,V,ae){return OS(y,x,!1,null,w,R,N,V,ae)},t.createHasPseudoClassSelector=function(y){return{$$typeof:ih,value:y}},t.createHydrationContainer=function(y,x,w,R,N,V,ae,Ae,$e){return y=OS(w,R,!0,y,N,V,ae,Ae,$e),y.context=By(null),w=y.current,R=Or(),N=Za(w),V=Bl(R,N),V.callback=x??null,xc(w,V),y.current.lanes=N,xu(y,N,R),cs(y,R),y},t.createPortal=function(y,x,w){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:R==null?null:""+R,children:y,containerInfo:x,implementation:w}},t.createRoleSelector=function(y){return{$$typeof:rh,value:y}},t.createTestNameSelector=function(y){return{$$typeof:Wl,value:y}},t.createTextSelector=function(y){return{$$typeof:Cs,value:y}},t.deferredUpdates=function(y){var x=Bn,w=Di.transition;try{return Di.transition=null,Bn=16,y()}finally{Bn=x,Di.transition=w}},t.discreteUpdates=function(y,x,w,R,N){var V=Bn,ae=Di.transition;try{return Di.transition=null,Bn=1,y(x,w,R,N)}finally{Bn=V,Di.transition=ae,Dn===0&&Hu()}},t.findAllNodes=Qd,t.findBoundingRects=function(y,x){if(!Rt)throw Error(o(363));x=Qd(y,x),y=[];for(var w=0;w<x.length;w++)y.push(gn(x[w]));for(x=y.length-1;0<x;x--){w=y[x];for(var R=w.x,N=R+w.width,V=w.y,ae=V+w.height,Ae=x-1;0<=Ae;Ae--)if(x!==Ae){var $e=y[Ae],mt=$e.x,Vt=mt+$e.width,bn=$e.y,an=bn+$e.height;if(R>=mt&&V>=bn&&N<=Vt&&ae<=an){y.splice(x,1);break}else if(R!==mt||w.width!==$e.width||an<V||bn>ae){if(!(V!==bn||w.height!==$e.height||Vt<R||mt>N)){mt>R&&($e.width+=mt-R,$e.x=R),Vt<N&&($e.width=N-mt),y.splice(x,1);break}}else{bn>V&&($e.height+=bn-V,$e.y=V),an<ae&&($e.height=ae-bn),y.splice(x,1);break}}}return y},t.findHostInstance=FS,t.findHostInstanceWithNoPortals=function(y){return y=G(y),y=y!==null?W(y):null,y===null?null:y.stateNode},t.findHostInstanceWithWarning=function(y){return FS(y)},t.flushControlled=function(y){var x=Dn;Dn|=1;var w=Di.transition,R=Bn;try{Di.transition=null,Bn=1,y()}finally{Bn=R,Di.transition=w,Dn=x,Dn===0&&(Hu(),Ho())}},t.flushPassiveEffects=Dc,t.flushSync=uh,t.focusWithin=function(y,x){if(!Rt)throw Error(o(363));for(y=Jd(y),x=jl(y,x),x=Array.from(x),y=0;y<x.length;){var w=x[y++];if(!j(w)){if(w.tag===5&&Xe(w.stateNode))return!0;for(w=w.child;w!==null;)x.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Bn},t.getFindAllNodesFailureDescription=function(y,x){if(!Rt)throw Error(o(363));var w=0,R=[];y=[Jd(y),0];for(var N=0;N<y.length;){var V=y[N++],ae=y[N++],Ae=x[ae];if((V.tag!==5||!j(V))&&(Rg(V,Ae)&&(R.push(Ta(Ae)),ae++,ae>w&&(w=ae)),ae<x.length))for(V=V.child;V!==null;)y.push(V,ae),V=V.sibling}if(w<x.length){for(y=[];w<x.length;w++)y.push(Ta(x[w]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},t.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return ee(y.child.stateNode);default:return y.child.stateNode}},t.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:US,findFiberByHostInstance:y.findFiberByHostInstance||GS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(x.isDisabled||!x.supportsFiber)y=!0;else{try{Pd=x.inject(y),Ka=x}catch{}y=!!x.checkDCE}}return y},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(y,x,w,R){if(!Rt)throw Error(o(363));y=Qd(y,x);var N=He(y,w,R).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(y,x){var w=x._getVersion;w=w(x._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[x,w]:y.mutableSourceEagerHydrationData.push(x,w)},t.runWithPriority=function(y,x){var w=Bn;try{return Bn=y,x()}finally{Bn=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(y,x,w,R){var N=x.current,V=Or(),ae=Za(N);return w=By(w),x.context===null?x.context=w:x.pendingContext=w,x=Bl(V,ae),x.payload={element:y},R=R===void 0?null:R,R!==null&&(x.callback=R),xc(N,x),y=js(N,ae,V),y!==null&&Qm(y,N,ae),ae},t}),TC}var Y3;function use(){return Y3||(Y3=1,SC.exports=cse()),SC.exports}var fse=use();const hse=Ov(fse);var q3=I8();function L8(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const ff=[];function D8(n,e,t=!1,i={}){for(const s of ff)if(L8(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=ff.indexOf(r);s!==-1&&ff.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(ff.push(r),!t)throw r.promise}const dse=(n,e,t)=>D8(n,e,!1,t),pse=(n,e,t)=>void D8(n,e,!0,t),mse=n=>{if(n===void 0||n.length===0)ff.splice(0,ff.length);else{const e=ff.find(t=>L8(n,t.keys,t.equal));if(e){const t=ff.indexOf(e);t!==-1&&ff.splice(t,1)}}};var J3,Q3;const B8=n=>n&&n.isOrthographicCamera,G1=typeof window<"u"&&((J3=window.document)!=null&&J3.createElement||((Q3=window.navigator)==null?void 0:Q3.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function k8(n){const e=O.useRef(n);return G1(()=>void(e.current=n),[n]),e}function gse({set:n}){return G1(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class O8 extends O.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}O8.getDerivedStateFromError=()=>({error:!0});const F8="__default",vse=n=>n&&!!n.memoized&&!!n.changes;function N8(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const tA=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},dr={obj:n=>n===Object(n)&&!dr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(dr.str(n)||dr.num(n))return n===e;const s=dr.obj(n);if(s&&i==="reference")return n===e;const o=dr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in r?e:n)if(n[a]!==e[a])return!1;if(dr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function yse(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function xse(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function b0(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function MI(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const Z3=/-\d+$/;function wC(n,e,t){if(dr.str(t)){if(Z3.test(t)){const s=t.replace(Z3,""),{target:o,key:a}=MI(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=MI(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function eN(n,e,t){var i,r;if(dr.str(t)){const{target:s,key:o}=MI(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function U8(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=n==null?void 0:n.__r3f)!=null?u:{},h=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let _=0;_<v.length;_++)r.hasOwnProperty(v[_])||h.unshift([v[_],F8+"remove"])}h.forEach(([v,_])=>{var S;if((S=n.__r3f)!=null&&S.primitive&&v==="object"||dr.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,_,!0,[]]);let A=[];v.includes("-")&&(A=v.split("-")),p.push([v,_,!1,A])});const g={...r};return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:p}}function bC(n,e){var t,i;const r=(t=n.__r3f)!=null?t:{},s=r.root,o=(i=s==null||s.getState==null?void 0:s.getState())!=null?i:{},{memoized:a,changes:l}=vse(e)?e:U8(n,e),c=r.eventCount;if(n.__r3f&&(n.__r3f.memoizedProps=a),l.forEach(([u,f,h,p])=>{let g=n,v=g[u];if(p.length&&(v=p.reduce((A,T)=>A[T],n),!(v&&v.set))){const[A,...T]=p.reverse();g=T.reverse().reduce((b,C)=>b[C],n),u=A}if(f===F8+"remove")if(v&&v.constructor){var _;f=new v.constructor(...(_=a.args)!=null?_:[])}else if(g.constructor){var S;const A=new g.constructor(...(S=g.__r3f.memoizedProps.args)!=null?S:[]);f=A[v],A.dispose&&A.dispose()}else f=0;if(h)f?r.handlers[u]=f:delete r.handlers[u],r.eventCount=Object.keys(r.handlers).length;else if(v&&v.set&&(v.copy||v instanceof sm)){if(Array.isArray(f))v.fromArray?v.fromArray(f):v.set(...f);else if(v.copy&&f&&f.constructor&&v.constructor.name===f.constructor.name)v.copy(f);else if(f!==void 0){const A=v instanceof ht;!A&&v.setScalar?v.setScalar(f):v instanceof sm&&f instanceof sm?v.mask=f.mask:v.set(f),!("ColorManagement"in F_)&&!o.linear&&A&&v.convertSRGBToLinear()}}else g[u]=f,!o.linear&&g[u]instanceof ri&&(g[u].encoding=eu);M0(n)}),r.parent&&o.internal&&n.raycast&&c!==r.eventCount){const u=o.internal.interaction.indexOf(n);u>-1&&o.internal.interaction.splice(u,1),r.eventCount&&o.internal.interaction.push(n)}return l.length&&n.parent&&CI(n),n}function M0(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function CI(n){n.onUpdate==null||n.onUpdate(n)}function G8(n,e){n.manual||(B8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _se(n,e,t){const i=t.pop(),r=t.reduce((s,o)=>s[o],n);return r[i]=e}function MC(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Sse(){var n,e;switch((n=window)==null||(e=n.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wx.ContinuousEventPriority;default:return Wx.DefaultEventPriority}}function V8(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Ese(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{V8(t.capturedMap,e,i,r)})}function Ase(n){const e=new re;function t(c){const{internal:u}=n.getState(),f=c.offsetX-u.initialClick[0],h=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+h*h))}function i(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+f]}))}function r(c,u){const f=n.getState(),h=new Set,p=[],g=u?u(f.internal.interaction):f.internal.interaction;g.forEach(S=>{const A=tA(S);A&&(A.raycaster.camera=void 0)}),f.previousRoot||f.events.compute==null||f.events.compute(c,f);let v=g.flatMap(S=>{const A=tA(S);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var T;A.events.compute==null||A.events.compute(c,A,(T=A.previousRoot)==null?void 0:T.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(S,!0):[]}).sort((S,A)=>{const T=tA(S.object),b=tA(A.object);return!T||!b?0:b.events.priority-T.events.priority||S.distance-A.distance}).filter(S=>{const A=MC(S);return h.has(A)?!1:(h.add(A),!0)});f.events.filter&&(v=f.events.filter(v,f));for(const S of v){let A=S.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&p.push({...S,eventObject:A}),A=A.parent}}if("pointerId"in c&&f.internal.capturedMap.has(c.pointerId))for(let S of f.internal.capturedMap.get(c.pointerId).values())p.push(S.intersection);return p}function s(c,u,f,h){const{raycaster:p,pointer:g,camera:v,internal:_}=n.getState();if(c.length){const S=e.set(g.x,g.y,0).unproject(v),A={stopped:!1};for(const T of c){const b=I=>{var D,G;return(D=(G=_.capturedMap.get(I))==null?void 0:G.has(T.eventObject))!=null?D:!1},C=I=>{const D={intersection:T,target:u.target};_.capturedMap.has(I)?_.capturedMap.get(I).set(T.eventObject,D):_.capturedMap.set(I,new Map([[T.eventObject,D]])),u.target.setPointerCapture(I)},L=I=>{const D=_.capturedMap.get(I);D&&V8(_.capturedMap,T.eventObject,D,I)};let P={};for(let I in u){let D=u[I];typeof D!="function"&&(P[I]=D)}let k={...T,...P,pointer:g,intersections:c,stopped:A.stopped,delta:f,unprojectedPoint:S,ray:p.ray,camera:v,stopPropagation:()=>{const I="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!I||I.has(T.eventObject))&&(k.stopped=A.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(D=>D.eventObject===T.eventObject))){const D=c.slice(0,c.indexOf(T));o([...D,T])}},target:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:L},currentTarget:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:L},nativeEvent:u};if(h(k),A.stopped===!0)break}}return c}function o(c){const{internal:u}=n.getState();Array.from(u.hovered.values()).forEach(f=>{if(!c.length||!c.find(h=>h.object===f.object&&h.index===f.index&&h.instanceId===f.instanceId)){const p=f.eventObject.__r3f,g=p==null?void 0:p.handlers;if(u.hovered.delete(MC(f)),p!=null&&p.eventCount){const v={...f,intersections:c};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}})}const a=c=>{switch(c){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:f}=n.getState();"pointerId"in u&&!f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),o([]))}}return u=>{const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=u;const p=c==="onPointerMove",g=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",_=r(u,p?i:void 0),S=g?t(u):0;c==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=_.map(A=>A.eventObject)),g&&!_.length&&S<=2&&(l(u,h.interaction),f&&f(u)),p&&o(_),s(_,u,S,A=>{const T=A.eventObject,b=T.__r3f,C=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(p){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const L=MC(A),P=h.hovered.get(L);P?P.stopped&&A.stopPropagation():(h.hovered.set(L,A),C.onPointerOver==null||C.onPointerOver(A),C.onPointerEnter==null||C.onPointerEnter(A))}C.onPointerMove==null||C.onPointerMove(A)}else{const L=C[c];L?(!g||h.initialHits.includes(T))&&(l(u,h.interaction.filter(P=>!h.initialHits.includes(P))),L(A)):g&&h.initialHits.includes(T)&&l(u,h.interaction.filter(P=>!h.initialHits.includes(P)))}})}};function l(c,u){u.forEach(f=>{var h;return(h=f.__r3f)==null||h.handlers.onPointerMissed==null?void 0:h.handlers.onPointerMissed(c)})}return{handlePointer:a}}let RI={},_b=n=>void(RI={...RI,...n});function Tse(n,e){function t(u,{args:f=[],attach:h,...p},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(h===void 0&&(v.endsWith("Geometry")?h="geometry":v.endsWith("Material")&&(h="material")),u==="primitive"){if(p.object===void 0)throw"Primitives without 'object' are invalid!";const S=p.object;_=b0(S,{type:u,root:g,attach:h,primitive:!0})}else{const S=RI[v];if(!S)throw`${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`;if(!Array.isArray(f))throw"The args prop must be an array!";_=b0(new S(...f),{type:u,root:g,attach:h,memoizedProps:{args:f}})}return v!=="inject"&&bC(_,p),_}function i(u,f){let h=!1;if(f){var p,g;(p=f.__r3f)!=null&&p.attach?wC(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||b0(f,{}),f.__r3f.parent=u,CI(f),M0(f)}}function r(u,f,h){let p=!1;if(f){var g,v;if((g=f.__r3f)!=null&&g.attach)wC(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const _=u.children.filter(A=>A!==f),S=_.indexOf(h);u.children=[..._.slice(0,S),f,..._.slice(S)],p=!0}p||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||b0(f,{}),f.__r3f.parent=u,CI(f),M0(f)}}function s(u,f,h=!1){u&&[...u].forEach(p=>o(f,p,h))}function o(u,f,h){if(f){var p,g,v;if(f.__r3f&&(f.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(b=>b!==f)),(g=f.__r3f)!=null&&g.attach)eN(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var _;u.remove(f),(_=f.__r3f)!=null&&_.root&&Ese(f.__r3f.root,f)}const A=(v=f.__r3f)==null?void 0:v.primitive,T=h===void 0?f.dispose!==null&&!A:h;if(!A){var S;s((S=f.__r3f)==null?void 0:S.objects,f,T),s(f.children,f,T)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,A||delete f.__r3f),T&&f.dispose&&f.type!=="Scene"&&q3.unstable_scheduleCallback(q3.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),M0(u)}}function a(u,f,h,p){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const _=t(f,h,u.__r3f.root);f!=="primitive"&&u.children&&(u.children.forEach(S=>i(_,S)),u.children=[]),u.__r3f.objects.forEach(S=>i(_,S)),u.__r3f.objects=[],o(v,u),i(v,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[p,p.alternate].forEach(S=>{S!==null&&(S.stateNode=_,S.ref&&(typeof S.ref=="function"?S.ref(_):S.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:hse({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;h.__r3f.root=u,i(h,f)},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{!f||!h||r(u.getState().scene,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,h,p){if(u.__r3f.primitive&&p.object&&p.object!==u)return[!0];{const{args:g=[],children:v,..._}=p,{args:S=[],children:A,...T}=h;if(!Array.isArray(g))throw"The args prop must be an array!";if(g.some((C,L)=>C!==S[L]))return[!0];const b=U8(u,_,T,!0);return b.changes.length?[!1,b]:null}},commitUpdate(u,[f,h],p,g,v,_){f?a(u,p,v,_):bC(u,h)},commitMount(u,f,h,p){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>b0(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:p}=(f=u==null?void 0:u.__r3f)!=null?f:{};h&&p&&eN(p,u,h),u.isObject3D&&(u.visible=!1),M0(u)},unhideInstance(u,f){var h;const{attach:p,parent:g}=(h=u==null?void 0:u.__r3f)!=null?h:{};p&&g&&wC(g,u,p),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),M0(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Wx.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&dr.fun(performance.now)?performance.now:dr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:dr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:dr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bC}}const wse=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],H8=n=>!!(n!=null&&n.render),N_=O.createContext(null),bse=(n,e)=>{const t=P8((a,l)=>{const c=new re,u=new re,f=new re;function h(S=l().camera,A=u,T=l().size){const{width:b,height:C,top:L,left:P}=T,k=b/C;A instanceof re?f.copy(A):f.set(...A);const I=S.getWorldPosition(c).distanceTo(f);if(B8(S))return{width:b/S.zoom,height:C/S.zoom,top:L,left:P,factor:1,distance:I,aspect:k};{const D=S.fov*Math.PI/180,G=2*Math.tan(D/2)*I,H=G*(b/C);return{width:H,height:G,top:L,left:P,factor:b/H,distance:I,aspect:k}}}let p;const g=S=>a(A=>({performance:{...A.performance,current:S}})),v=new Qe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(S=1)=>n(l(),S),advance:(S,A)=>e(S,A,l()),legacy:!1,linear:!1,flat:!1,scene:b0(new L1),controls:null,clock:new w2,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=l();p&&clearTimeout(p),S.performance.current!==S.performance.min&&g(S.performance.min),p=setTimeout(()=>g(l().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:S=>a(A=>({...A,events:{...A.events,...S}})),setSize:(S,A,T,b,C)=>{const L=l().camera,P={width:S,height:A,top:b||0,left:C||0,updateStyle:T};a(k=>({size:P,viewport:{...k.viewport,...h(L,u,P)}}))},setDpr:S=>a(A=>{const T=N8(S);return{viewport:{...A.viewport,dpr:T,initialDpr:A.viewport.initialDpr||T}}}),setFrameloop:(S="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,S!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,A,T)=>{const b=l().internal;return b.priority=b.priority+(A>0?1:0),b.subscribers.push({ref:S,priority:A,store:T}),b.subscribers=b.subscribers.sort((C,L)=>C.priority-L.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(A>0?1:0),C.subscribers=C.subscribers.filter(L=>L.ref!==S))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();(l!==r||c.dpr!==s)&&(r=l,s=c.dpr,G8(a,l),u.setPixelRatio(c.dpr),u.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Mse(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let nA,nT=new Set,CC=new Set,tN=new Set;const Cse=n=>Mse(n,nT);function Zy(n,e){n.forEach(({callback:t})=>t(e))}let RC,PC;function IC(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),RC=e.internal.subscribers,nA=0;nA<RC.length;nA++)PC=RC[nA],PC.ref.current(PC.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Rse(n){let e=!1,t,i,r;function s(l){if(i=requestAnimationFrame(s),e=!0,t=0,nT.size&&Zy(nT,l),n.forEach(c=>{var u;r=c.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=IC(l,r))}),CC.size&&Zy(CC,l),t===0)return tN.size&&Zy(tN,l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return n.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){c&&Zy(nT,l),u?IC(l,u,f):n.forEach(h=>IC(l,h.store.getState())),c&&Zy(CC,l)}return{loop:s,invalidate:o,advance:a}}function P2(){const n=O.useContext(N_);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function Ml(n=t=>t,e){return P2()(n,e)}function Go(n,e=0){const t=P2(),i=t.getState().internal.subscribe,r=k8(n);return G1(()=>i(r,e,t),[e,i,t]),null}function z8(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,yse(l.scene)),o(l)},e,l=>a(`Could not load ${s}: ${l.message}`)))))}}function Uo(n,e,t,i){const r=Array.isArray(e)?e:[e],s=dse(z8(t,i),[n,...r],{equal:dr.equ});return Array.isArray(e)?s:s[0]}Uo.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return pse(z8(t),[n,...i])};Uo.clear=function(n,e){const t=Array.isArray(e)?e:[e];return mse([n,...t])};const gv=new Map,{invalidate:nN,advance:iN}=Rse(gv),{reconciler:U_,applyProps:Kp}=Tse(gv,Sse),f0={objects:"shallow",strict:!1},Pse=(n,e)=>{const t=typeof n=="function"?n(e):n;return H8(t)?t:new Zw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Ise(n){let e=gv.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||bse(nN,iN),o=t||U_.createContainer(s,Wx.ConcurrentRoot,null,!1,null,"",r,null);e||gv.set(n,{fiber:o,store:s});let a,l=!1;return{configure(c={}){let{gl:u,size:f,events:h,onCreated:p,shadows:g=!1,linear:v=!1,flat:_=!1,legacy:S=!1,orthographic:A=!1,frameloop:T="always",dpr:b=[1,2],performance:C,raycaster:L,camera:P,onPointerMissed:k}=c,I=s.getState(),D=I.gl;I.gl||I.set({gl:D=Pse(u,n)});let G=I.raycaster;G||I.set({raycaster:G=new R2});const{params:H,...q}=L||{};if(dr.equ(q,G,f0)||Kp(G,{...q}),dr.equ(H,G.params,f0)||Kp(G,{params:{...G.params,...H}}),!I.camera){const ee=P instanceof R1,ne=ee?P:A?new Ad(0,0,0,0,.1,1e3):new $r(75,0,.1,1e3);ee||(ne.position.z=5,P&&Kp(ne,P),P!=null&&P.rotation||ne.lookAt(0,0,0)),I.set({camera:ne})}if(!I.xr){const ee=(Q,F)=>{const ie=s.getState();ie.frameloop!=="never"&&iN(Q,!0,ie,F)},ne=()=>{const Q=s.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?ee:null),Q.gl.xr.isPresenting||nN(Q)},Y={connect(){const Q=s.getState().gl;Q.xr.addEventListener("sessionstart",ne),Q.xr.addEventListener("sessionend",ne)},disconnect(){const Q=s.getState().gl;Q.xr.removeEventListener("sessionstart",ne),Q.xr.removeEventListener("sessionend",ne)}};D.xr&&Y.connect(),I.set({xr:Y})}if(D.shadowMap){const ee=dr.boo(g);if(ee&&D.shadowMap.enabled!==g||!dr.equ(g,D.shadowMap,f0)){const ne=D.shadowMap.enabled;D.shadowMap.enabled=!!g,ee?D.shadowMap.type=ND:Object.assign(D.shadowMap,g),ne!==D.shadowMap.enabled&&(D.shadowMap.needsUpdate=!0)}}"ColorManagement"in F_&&_se(F_,S,["ColorManagement","legacyMode"]);const W=v?Xw:eu,te=_?Zc:UD;return D.outputEncoding!==W&&(D.outputEncoding=W),D.toneMapping!==te&&(D.toneMapping=te),I.legacy!==S&&I.set(()=>({legacy:S})),I.linear!==v&&I.set(()=>({linear:v})),I.flat!==_&&I.set(()=>({flat:_})),u&&!dr.fun(u)&&!H8(u)&&!dr.equ(u,D,f0)&&Kp(D,u),h&&!I.events.handlers&&I.set({events:h(s)}),b&&I.viewport.dpr!==N8(b)&&I.setDpr(b),f=f||(n.parentElement?{width:n.parentElement.clientWidth,height:n.parentElement.clientHeight,top:n.parentElement.clientTop,left:n.parentElement.clientLeft}:{width:0,height:0,top:0,left:0}),dr.equ(f,I.size,f0)||I.setSize(f.width,f.height,f.updateStyle,f.top,f.left),I.frameloop!==T&&I.setFrameloop(T),I.onPointerMissed||I.set({onPointerMissed:k}),C&&!dr.equ(C,I.performance,f0)&&I.set(ee=>({performance:{...ee.performance,...C}})),a=p,l=!0,this},render(c){return l||this.configure(),U_.updateContainer(O.createElement(Lse,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){$8(n)}}}function Lse({store:n,children:e,onCreated:t,rootElement:i}){return G1(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.createElement(N_.Provider,{value:n},e)}function $8(n,e){const t=gv.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),U_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),xse(r),gv.delete(n)}catch{}},500)})}}function Dse(n,e,t){return O.createElement(Bse,{key:e.uuid,children:n,container:e,state:t})}function Bse({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=P2(),[a]=O.useState(()=>new R2),[l]=O.useState(()=>new Qe),c=O.useCallback((f,h)=>{const p={...f};Object.keys(f).forEach(v=>{(wse.includes(v)||f[v]!==h[v])&&delete p[v]});let g;if(h&&r){const v=h.camera;g=f.viewport.getCurrentViewport(v,new re,r),v!==f.camera&&G8(v,r)}return{...p,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...g},...s}},[n]),[u]=O.useState(()=>{const f=o.getState();return P8((p,g)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:p,get:g,setEvents:v=>p(_=>({..._,events:{..._.events,...v}}))}))});return O.useEffect(()=>{const f=o.subscribe(h=>u.setState(p=>c(h,p)));return()=>{f(),u.destroy()}},[]),O.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),O.createElement(O.Fragment,null,U_.createPortal(O.createElement(N_.Provider,{value:u},e),u,null))}U_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});function rN(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function kse({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=O.useRef(!1);O.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,h,p]=O.useMemo(()=>{const S=()=>{if(!a.current.element)return;const{left:A,top:T,width:b,height:C,bottom:L,right:P,x:k,y:I}=a.current.element.getBoundingClientRect(),D={left:A,top:T,width:b,height:C,bottom:L,right:P,x:k,y:I};a.current.element instanceof HTMLElement&&i&&(D.height=a.current.element.offsetHeight,D.width=a.current.element.offsetWidth),Object.freeze(D),u.current&&!Use(a.current.lastBounds,D)&&o(a.current.lastBounds=D)};return[S,c?rN(S,c):S,l?rN(S,l):S]},[o,i,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){a.current.element&&(a.current.resizeObserver=new r(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(S=>S.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=S=>{!S||S===a.current.element||(g(),a.current.element=S,a.current.scrollContainers=W8(S),v())};return Fse(p,!!e),Ose(h),O.useEffect(()=>{g(),v()},[e,p,h]),O.useEffect(()=>g,[]),[_,s,f]}function Ose(n){O.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Fse(n,e){O.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function W8(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...W8(n.parentElement)]}const Nse=["x","y","top","bottom","left","right","width","height"],Use=(n,e)=>Nse.every(t=>n[t]===e[t]),LC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Gse(n){const{handlePointer:e}=Ase(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(LC).reduce((t,i)=>({...t,[i]:e(i)}),{}),connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=LC[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=LC[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Vse=O.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=Gse,shadows:a,linear:l,flat:c,legacy:u,orthographic:f,frameloop:h,dpr:p,performance:g,raycaster:v,camera:_,onPointerMissed:S,onCreated:A,...T},b){O.useMemo(()=>_b(F_),[]);const[C,L]=kse({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=O.useRef(null),k=O.useRef(null),[I,D]=O.useState(null);O.useImperativeHandle(b,()=>P.current);const G=k8(S),[H,q]=O.useState(!1),[W,te]=O.useState(!1);if(H)throw H;if(W)throw W;const ee=O.useRef(null);return L.width>0&&L.height>0&&I&&(ee.current||(ee.current=Ise(I)),ee.current.configure({gl:s,events:o,shadows:a,linear:l,flat:c,legacy:u,orthographic:f,frameloop:h,dpr:p,performance:g,raycaster:v,camera:_,size:L,onPointerMissed:(...ne)=>G.current==null?void 0:G.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(k.current),A==null||A(ne)}}),ee.current.render(O.createElement(O8,{set:te},O.createElement(O.Suspense,{fallback:O.createElement(gse,{set:q})},e)))),G1(()=>{D(P.current)},[]),O.useEffect(()=>{if(I)return()=>$8(I)},[I]),O.createElement("div",Vi({ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...r}},T),O.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},O.createElement("canvas",{ref:P,style:{display:"block"}},t)))});function Hse(n,e="pointer",t="auto",i=document.body){O.useEffect(()=>{if(n)return i.style.cursor=e,()=>void(i.style.cursor=t)},[n])}const sN=n=>{let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const h=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},zse=n=>n?sN(n):sN,$se=n=>n;function Wse(n,e=$se){const t=de.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return de.useDebugValue(t),t}const oN=n=>{const e=zse(n),t=i=>Wse(e,i);return Object.assign(t,e),t},j8=n=>n?oN(n):oN;let ex=0;const jse=j8(n=>(D0.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-ex)/(i-ex)*100})},D0.onLoad=()=>{n({active:!1})},D0.onError=e=>n(t=>({errors:[...t.errors,e]})),D0.onProgress=(e,t,i)=>{t===i&&(ex=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-ex)/(i-ex)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Kse(n,e,t){return Math.max(e,Math.min(n,t))}const oo={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function aN(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function lN(n,e,t,i=.15){return i===0?Kse(n,e,t):n<e?-aN(e-n,t-e,i)+e:n>t?+aN(n-t,t-e,i)+t:n}function Xse(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[lN(e,s,o,i),lN(t,a,l,r)]}function Yse(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qse(n){var e=Yse(n,"string");return typeof e=="symbol"?e:String(e)}function sa(n,e,t){return e=qse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ar(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cN(Object(t),!0).forEach(function(i){sa(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cN(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const K8={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uN(n){return n?n[0].toUpperCase()+n.slice(1):""}const Jse=["enter","leave"];function Qse(n=!1,e){return n&&!Jse.includes(e)}function Zse(n,e="",t=!1){const i=K8[n],r=i&&i[e]||e;return"on"+uN(n)+uN(r)+(Qse(t,r)?"Capture":"")}const eoe=["gotpointercapture","lostpointercapture"];function toe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=eoe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function noe(n,e=""){const t=K8[n],i=t&&t[e]||e;return n+i}function Sb(n){return"touches"in n}function X8(n){return Sb(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function ioe(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function roe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function Y8(n){return Sb(n)?roe(n)[0]:n}function soe(n){return ioe(n).map(e=>e.identifier)}function DC(n){const e=Y8(n);return Sb(n)?e.identifier:e.pointerId}function fN(n){const e=Y8(n);return[e.clientX,e.clientY]}function ooe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function kT(n,...e){return typeof n=="function"?n(...e):n}function aoe(){}function loe(...n){return n.length===0?aoe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function hN(n,e){return Object.assign({},e,n||{})}const coe=32;class uoe{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?kT(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,ooe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const L=t._delta.map(Math.abs);oo.addTo(t._distance,L)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:f}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[L,P]=f;h[0]=u[0]!==!1?L-u[0]:0,h[1]=u[1]!==!1?P-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const p=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=kT(i.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[v,_]=t.offset,[[S,A],[T,b]]=t._bounds;t.overflow=[v<S?-1:v>A?1:0,_<T?-1:_>b?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=Xse(t._bounds,t.offset,C),t.delta=oo.sub(t.offset,p),this.computeMovement(),g&&(!t.last||s>coe)){t.delta=oo.sub(t.offset,p);const L=t.delta.map(Math.abs);oo.addTo(t.distance,L),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[L[0]/s,L[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(ar(ar(ar({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function foe([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class hoe extends uoe{constructor(...e){super(...e),sa(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=oo.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=oo.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[X8(e)]:i.axisThreshold;t.axis=foe(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const doe=n=>n,dN=.15,q8={enabled(n=!0){return n},eventOptions(n,e,t){return ar(ar({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[dN,dN];case!1:return[0,0];default:return oo.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return oo.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||doe},threshold(n){return oo.toVector(n,0)}},poe=0,V1=ar(ar({},q8),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=poe){return n},bounds(n={}){if(typeof n=="function")return s=>V1.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),pN={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class moe extends hoe{constructor(...e){super(...e),sa(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=V1.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=DC(e),i._pointerActive=!0,this.computeValues(fN(e)),this.computeInitial(),t.preventScrollAxis&&X8(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=DC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=fN(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=oo.sub(s,t._values),this.computeValues(s)),oo.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=DC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,h]=i.swipe.velocity,[p,g]=i.swipe.distance,v=i.swipe.duration;if(t.elapsedTime<v){const _=Math.abs(a/t.timeDelta),S=Math.abs(l/t.timeDelta);_>f&&Math.abs(c)>p&&(t.swipe[0]=Math.sign(a)),S>h&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,goe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=pN[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,oo.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in pN&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function goe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const H1=typeof window<"u"&&window.document&&window.document.createElement;function J8(){return H1&&"ontouchstart"in window}function voe(){return J8()||H1&&window.navigator.maxTouchPoints>1}function yoe(){return H1&&"onpointerdown"in window}function xoe(){return H1&&"exitPointerLock"in window.document}function _oe(){try{return"constructor"in GestureEvent}catch{return!1}}const ml={isBrowser:H1,gesture:_oe(),touch:J8(),touchscreen:voe(),pointer:yoe(),pointerLock:xoe()},Soe=250,Eoe=180,Aoe=.5,Toe=50,woe=250,boe=10,mN={mouse:0,touch:0,pen:8},Moe=ar(ar({},V1),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&ml.pointerLock,ml.touch&&t?"touch":this.pointerLock?"mouse":ml.pointer&&!r?"pointer":ml.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Soe:void 0,!(!ml.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=oo.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Aoe,distance:e=Toe,duration:t=woe}={}){return{velocity:this.transform(oo.toVector(n)),distance:this.transform(oo.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Eoe;case!1:return 0;default:return n}},axisThreshold(n){return n?ar(ar({},mN),n):mN},keyboardDisplacement(n=boe){return n}});ar(ar({},q8),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!ml.touch&&ml.gesture)return"gesture";if(ml.touch&&i)return"touch";if(ml.touchscreen){if(ml.pointer)return"pointer";if(ml.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=hN(kT(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=hN(kT(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",oo.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});ar(ar({},V1),{},{mouseOnly:(n=!0)=>n});ar(ar({},V1),{},{mouseOnly:(n=!0)=>n});const Q8=new Map,PI=new Map;function Coe(n){Q8.set(n.key,n.engine),PI.set(n.key,n.resolver)}const Roe={key:"drag",engine:moe,resolver:Moe};function Poe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Ioe(n,e){if(n==null)return{};var t=Poe(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const Loe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ml.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},Doe=["target","eventOptions","window","enabled","transform"];function iT(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=iT(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function Boe(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=Ioe(i,Doe);if(t.shared=iT({target:r,eventOptions:s,window:o,enabled:a,transform:l},Loe),e){const u=PI.get(e);t[e]=iT(ar({shared:t.shared},c),u)}else for(const u in c){const f=PI.get(u);f&&(t[u]=iT(ar({shared:t.shared},c[u]),f))}return t}class Z8{constructor(e,t){sa(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=noe(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=ar(ar({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class koe{constructor(){sa(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let Ooe=class{constructor(e){sa(this,"gestures",new Set),sa(this,"_targetEventStore",new Z8(this)),sa(this,"gestureEventStores",{}),sa(this,"gestureTimeoutStores",{}),sa(this,"handlers",{}),sa(this,"config",{}),sa(this,"pointerIds",new Set),sa(this,"touchIds",new Set),sa(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Foe(this,e)}setEventIds(e){if(Sb(e))return this.touchIds=new Set(soe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Boe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=gN(i,a.eventOptions,!!r);if(a.enabled){const c=Q8.get(o);new c(this,e,o).bind(l)}}const s=gN(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](ar(ar({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=loe(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=toe(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}};function h0(n,e){n.gestures.add(e),n.gestureEventStores[e]=new Z8(n,e),n.gestureTimeoutStores[e]=new koe}function Foe(n,e){e.drag&&h0(n,"drag"),e.wheel&&h0(n,"wheel"),e.scroll&&h0(n,"scroll"),e.move&&h0(n,"move"),e.pinch&&h0(n,"pinch"),e.hover&&h0(n,"hover")}const gN=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?i:Zse(i,r,u);t&&f&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)};function Noe(n,e={},t,i){const r=de.useMemo(()=>new Ooe(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),de.useEffect(r.effect.bind(r)),de.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function Uoe(n,e){return Coe(Roe),Noe({drag:n},e||{},"drag")}function jx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function II(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Goe(n,e){if(n){if(typeof n=="string")return II(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return II(n,e)}}function Voe(n){if(Array.isArray(n))return II(n)}function Hoe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $oe(n){return Voe(n)||Hoe(n)||Goe(n)||zoe()}new Qe;new Qe;function Woe(n,e,t){return Math.max(e,Math.min(t,n))}function joe(n,e){return Woe(n-Math.floor(n/e)*e,0,e)}function Koe(n,e){var t=joe(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function e6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var rl=function n(e,t,i){var r=this;e6(this,n),jx(this,"dot2",function(s,o){return r.x*s+r.y*o}),jx(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},Xoe=[new rl(1,1,0),new rl(-1,1,0),new rl(1,-1,0),new rl(-1,-1,0),new rl(1,0,1),new rl(-1,0,1),new rl(1,0,-1),new rl(-1,0,-1),new rl(0,1,1),new rl(0,-1,1),new rl(0,1,-1),new rl(0,-1,-1)],vN=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],yN=new Array(512),xN=new Array(512),Yoe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=vN[t]^e&255:i=vN[t]^e>>8&255,yN[t]=yN[t+256]=i,xN[t]=xN[t+256]=Xoe[i%12]}};Yoe(0);function qoe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function _N(n){var e=qoe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Joe=function n(e){var t=this;e6(this,n),jx(this,"seed",0),jx(this,"init",function(i){t.seed=i,t.value=_N(i)}),jx(this,"value",_N(this.seed)),this.init(e)};new Joe(Math.random());var Qoe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},t6=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},Zoe=function(e){return e},eae={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},tae={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},nae={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},iae={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},rae={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},sae={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function ns(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:t6,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;i=Math.max(1e-4,i);var c=2/i,u=o(c*r),f=n[e]-t,h=t,p=s*i;f=Math.min(Math.max(f,-p),p),t=n[e]-f;var g=(n.__damp[l]+c*f)*r;n.__damp[l]=(n.__damp[l]-c*g)*u;var v=t+(f+g)*u;return h-n[e]>0==v>h&&(v=h,n.__damp[l]=(v-h)/r),n[e]=v,!0}var oae=function(e){return e&&e.isCamera},aae=function(e){return e&&e.isLight},tx=new re,SN=new Pi,EN=new Pi,nx=new Lt,BC=new re;function lae(n,e,t,i,r,s,o){typeof e=="number"?tx.setScalar(e):Array.isArray(e)?tx.set(e[0],e[1],e[2]):tx.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),BC.setFromMatrixPosition(n.matrixWorld),oae(n)||aae(n)?nx.lookAt(BC,tx,n.up):nx.lookAt(tx,BC,n.up),OT(n.quaternion,EN.setFromRotationMatrix(nx),t,i,r,s,o),a&&(nx.extractRotation(a.matrixWorld),SN.setFromRotationMatrix(nx),OT(n.quaternion,EN.copy(n.quaternion).premultiply(SN.invert()),t,i,r,s,o))}function Z0(n,e,t,i,r,s,o,a){return ns(n,e,n[e]+Koe(n[e],t),i,r,s,o,a)}var ix=new Qe,AN,TN;function cae(n,e,t,i,r,s,o){return typeof e=="number"?ix.setScalar(e):Array.isArray(e)?ix.set(e[0],e[1]):ix.copy(e),AN=ns(n,"x",ix.x,t,i,r,s,o),TN=ns(n,"y",ix.y,t,i,r,s,o),AN||TN}var d0=new re,wN,bN,MN;function LI(n,e,t,i,r,s,o){return typeof e=="number"?d0.setScalar(e):Array.isArray(e)?d0.set(e[0],e[1],e[2]):d0.copy(e),wN=ns(n,"x",d0.x,t,i,r,s,o),bN=ns(n,"y",d0.y,t,i,r,s,o),MN=ns(n,"z",d0.z,t,i,r,s,o),wN||bN||MN}var _p=new qn,CN,RN,PN,IN;function uae(n,e,t,i,r,s,o){return typeof e=="number"?_p.setScalar(e):Array.isArray(e)?_p.set(e[0],e[1],e[2],e[3]):_p.copy(e),CN=ns(n,"x",_p.x,t,i,r,s,o),RN=ns(n,"y",_p.y,t,i,r,s,o),PN=ns(n,"z",_p.z,t,i,r,s,o),IN=ns(n,"w",_p.w,t,i,r,s,o),CN||RN||PN||IN}var rx=new so,LN,DN,BN;function fae(n,e,t,i,r,s,o){return Array.isArray(e)?rx.set(e[0],e[1],e[2],e[3]):rx.copy(e),LN=Z0(n,"x",rx.x,t,i,r,s,o),DN=Z0(n,"y",rx.y,t,i,r,s,o),BN=Z0(n,"z",rx.z,t,i,r,s,o),LN||DN||BN}var p0=new ht,kN,ON,FN;function hae(n,e,t,i,r,s,o){return e instanceof ht?p0.copy(e):Array.isArray(e)?p0.setRGB(e[0],e[1],e[2]):p0.set(e),kN=ns(n,"r",p0.r,t,i,r,s,o),ON=ns(n,"g",p0.g,t,i,r,s,o),FN=ns(n,"b",p0.b,t,i,r,s,o),kN||ON||FN}var tc=new Pi,Qu=new qn,NN=new qn,sx=new qn,UN,GN,VN,HN;function OT(n,e,t,i,r,s,o){var a=n;Array.isArray(e)?tc.set(e[0],e[1],e[2],e[3]):tc.copy(e);var l=n.dot(tc)>0?1:-1;return tc.x*=l,tc.y*=l,tc.z*=l,tc.w*=l,UN=ns(n,"x",tc.x,t,i,r,s,o),GN=ns(n,"y",tc.y,t,i,r,s,o),VN=ns(n,"z",tc.z,t,i,r,s,o),HN=ns(n,"w",tc.w,t,i,r,s,o),Qu.set(n.x,n.y,n.z,n.w).normalize(),NN.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),sx.copy(Qu).multiplyScalar(NN.dot(Qu)/Qu.dot(Qu)),a.__damp.velocity_x-=sx.x,a.__damp.velocity_y-=sx.y,a.__damp.velocity_z-=sx.z,a.__damp.velocity_w-=sx.w,n.set(Qu.x,Qu.y,Qu.z,Qu.w),UN||GN||VN||HN}var ox=new M8,zN,$N,WN;function dae(n,e,t,i,r,s,o){return Array.isArray(e)?ox.set(e[0],e[1],e[2]):ox.copy(e),zN=ns(n,"radius",ox.radius,t,i,r,s,o),$N=Z0(n,"phi",ox.phi,t,i,r,s,o),WN=Z0(n,"theta",ox.theta,t,i,r,s,o),zN||$N||WN}var iA=new Lt,jN=new re,KN=new Pi,XN=new re,YN,qN,JN;function pae(n,e,t,i,r,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new re,rotation:new Pi,scale:new re},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?iA.set.apply(iA,$oe(e)):iA.copy(e),iA.decompose(jN,KN,XN),YN=LI(a.__damp.position,jN,t,i,r,s,o),qN=OT(a.__damp.rotation,KN,t,i,r,s,o),JN=LI(a.__damp.scale,XN,t,i,r,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),YN||qN||JN}var QN=Object.freeze({__proto__:null,rsqw:Qoe,exp:t6,linear:Zoe,sine:eae,cubic:tae,quint:nae,circ:iae,quart:rae,expo:sae,damp:ns,dampLookAt:lae,dampAngle:Z0,damp2:cae,damp3:LI,damp4:uae,dampE:fae,dampC:hae,dampQ:OT,dampS:dae,dampM:pae});const I2=O.createContext(null);function z1(){return O.useContext(I2)}function mae({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:i,pages:r=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,prepend:l=!1,style:c={},children:u}){const{get:f,setEvents:h,gl:p,size:g,invalidate:v,events:_}=Ml(),[S]=O.useState(()=>document.createElement("div")),[A]=O.useState(()=>document.createElement("div")),[T]=O.useState(()=>document.createElement("div")),b=p.domElement.parentNode,C=O.useRef(0),L=O.useMemo(()=>({el:S,eps:n,fill:A,fixed:T,horizontal:i,damping:o,offset:0,delta:0,scroll:C,pages:r,range(I,D,G=0){const H=I-G,q=H+D+G*2;return this.offset<H?0:this.offset>q?1:(this.offset-H)/(q-H)},curve(I,D,G=0){return Math.sin(this.range(I,D,G)*Math.PI)},visible(I,D,G=0){const H=I-G,q=H+D+G*2;return this.offset>=H&&this.offset<=q}}),[n,o,i,r]);O.useEffect(()=>{S.style.position="absolute",S.style.width="100%",S.style.height="100%",S.style[i?"overflowX":"overflowY"]="auto",S.style[i?"overflowY":"overflowX"]="hidden",S.style.top="0px",S.style.left="0px";for(const D in c)S.style[D]=c[D];T.style.position="sticky",T.style.top="0px",T.style.left="0px",T.style.width="100%",T.style.height="100%",T.style.overflow="hidden",S.appendChild(T),A.style.height=i?"100%":`${r*s*100}%`,A.style.width=i?`${r*s*100}%`:"100%",A.style.pointerEvents="none",S.appendChild(A),l?b.prepend(S):b.appendChild(S),S[i?"scrollLeft":"scrollTop"]=1;const k=_.connected||p.domElement;requestAnimationFrame(()=>_.connect==null?void 0:_.connect(S));const I=f().events.compute;return h({compute(D,G){const{left:H,top:q}=b.getBoundingClientRect(),W=D.clientX-H,te=D.clientY-q;G.pointer.set(W/G.size.width*2-1,-(te/G.size.height)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}}),()=>{b.removeChild(S),h({compute:I}),_.connect==null||_.connect(k)}},[r,s,i,S,A,T,b]),O.useEffect(()=>{if(_.connected===S){const k=g[i?"width":"height"],I=S[i?"scrollWidth":"scrollHeight"],D=I-k;let G=0,H=!0,q=!0;const W=()=>{if(!(!e||q)&&(v(),G=S[i?"scrollLeft":"scrollTop"],C.current=G/D,t)){if(!H){if(G>=D){const ee=1-L.offset;S[i?"scrollLeft":"scrollTop"]=1,C.current=L.offset=-ee,H=!0}else if(G<=0){const ee=1+L.offset;S[i?"scrollLeft":"scrollTop"]=I,C.current=L.offset=ee,H=!0}}H&&setTimeout(()=>H=!1,40)}};S.addEventListener("scroll",W,{passive:!0}),requestAnimationFrame(()=>q=!1);const te=ee=>S.scrollLeft+=ee.deltaY/2;return i&&S.addEventListener("wheel",te,{passive:!0}),()=>{S.removeEventListener("scroll",W),i&&S.removeEventListener("wheel",te)}}},[S,_,g,t,L,v,i,e]);let P=0;return Go((k,I)=>{P=L.offset,QN.damp(L,"offset",C.current,o,I,a,void 0,n),QN.damp(L,"delta",Math.abs(P-L.offset),o,I,a,void 0,n),L.delta>n&&v()}),O.createElement(I2.Provider,{value:L},u)}const gae=O.forwardRef(({children:n},e)=>{const t=O.useRef(null);O.useImperativeHandle(e,()=>t.current,[]);const i=z1(),{width:r,height:s}=Ml(o=>o.viewport);return Go(()=>{t.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,t.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),O.createElement("group",{ref:t},n)}),vae=O.forwardRef(({children:n,style:e,...t},i)=>{const r=z1(),s=O.useRef(null);O.useImperativeHandle(i,()=>s.current,[]);const{width:o,height:a}=Ml(u=>u.size),l=O.useContext(N_),c=O.useMemo(()=>OD.createRoot(r.fixed),[r.fixed]);return Go(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(O.createElement("div",Vi({ref:s,style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},t),O.createElement(I2.Provider,{value:r},O.createElement(N_.Provider,{value:l},n)))),null}),yae=O.forwardRef(({html:n,...e},t)=>{const i=n?vae:gae;return O.createElement(i,Vi({ref:t},e))});var L2=W1(),Rn=n=>$1(n,L2),D2=W1();Rn.write=n=>$1(n,D2);var Eb=W1();Rn.onStart=n=>$1(n,Eb);var B2=W1();Rn.onFrame=n=>$1(n,B2);var k2=W1();Rn.onFinish=n=>$1(n,k2);var ev=[];Rn.setTimeout=(n,e)=>{const t=Rn.now()+e,i=()=>{const s=ev.findIndex(o=>o.cancel==i);~s&&ev.splice(s,1),Gh-=~s?1:0},r={time:t,handler:n,cancel:i};return ev.splice(n6(t),0,r),Gh+=1,i6(),r};var n6=n=>~(~ev.findIndex(e=>e.time>n)||~ev.length);Rn.cancel=n=>{Eb.delete(n),B2.delete(n),k2.delete(n),L2.delete(n),D2.delete(n)};Rn.sync=n=>{DI=!0,Rn.batchedUpdates(n),DI=!1};Rn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,Rn.onStart(t)}return i.handler=n,i.cancel=()=>{Eb.delete(t),e=null},i};var O2=typeof window<"u"?window.requestAnimationFrame:()=>{};Rn.use=n=>O2=n;Rn.now=typeof performance<"u"?()=>performance.now():Date.now;Rn.batchedUpdates=n=>n();Rn.catch=console.error;Rn.frameLoop="always";Rn.advance=()=>{Rn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):s6()};var Uh=-1,Gh=0,DI=!1;function $1(n,e){DI?(e.delete(n),n(0)):(e.add(n),i6())}function i6(){Uh<0&&(Uh=0,Rn.frameLoop!=="demand"&&O2(r6))}function xae(){Uh=-1}function r6(){~Uh&&(O2(r6),Rn.batchedUpdates(s6))}function s6(){const n=Uh;Uh=Rn.now();const e=n6(Uh);if(e&&(o6(ev.splice(0,e),t=>t.handler()),Gh-=e),!Gh){xae();return}Eb.flush(),L2.flush(n?Math.min(64,Uh-n):16.667),B2.flush(),D2.flush(),k2.flush()}function W1(){let n=new Set,e=n;return{add(t){Gh+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Gh-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Gh-=e.size,o6(e,i=>i(t)&&n.add(i)),Gh+=n.size,e=n)}}}function o6(n,e){n.forEach(t=>{try{e(t)}catch(i){Rn.catch(i)}})}var _ae=Object.defineProperty,Sae=(n,e)=>{for(var t in e)_ae(n,t,{get:e[t],enumerable:!0})},dc={};Sae(dc,{assign:()=>Aae,colors:()=>Zh,createStringInterpolator:()=>N2,skipAnimation:()=>l6,to:()=>a6,willAdvance:()=>U2});function BI(){}var Eae=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),wt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function nf(n,e){if(wt.arr(n)){if(!wt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var di=(n,e)=>n.forEach(e);function bf(n,e,t){if(wt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var El=n=>wt.und(n)?[]:wt.arr(n)?n:[n];function Kx(n,e){if(n.size){const t=Array.from(n);n.clear(),di(t,e)}}var wx=(n,...e)=>Kx(n,t=>t(...e)),F2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),N2,a6,Zh=null,l6=!1,U2=BI,Aae=n=>{n.to&&(a6=n.to),n.now&&(Rn.now=n.now),n.colors!==void 0&&(Zh=n.colors),n.skipAnimation!=null&&(l6=n.skipAnimation),n.createStringInterpolator&&(N2=n.createStringInterpolator),n.requestAnimationFrame&&Rn.use(n.requestAnimationFrame),n.batchedUpdates&&(Rn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(U2=n.willAdvance),n.frameLoop&&(Rn.frameLoop=n.frameLoop)},Xx=new Set,_l=[],kC=[],FT=0,Ab={get idle(){return!Xx.size&&!_l.length},start(n){FT>n.priority?(Xx.add(n),Rn.onStart(Tae)):(c6(n),Rn(kI))},advance:kI,sort(n){if(FT)Rn.onFrame(()=>Ab.sort(n));else{const e=_l.indexOf(n);~e&&(_l.splice(e,1),u6(n))}},clear(){_l=[],Xx.clear()}};function Tae(){Xx.forEach(c6),Xx.clear(),Rn(kI)}function c6(n){_l.includes(n)||u6(n)}function u6(n){_l.splice(wae(_l,e=>e.priority>n.priority),0,n)}function kI(n){const e=kC;for(let t=0;t<_l.length;t++){const i=_l[t];FT=i.priority,i.idle||(U2(i),i.advance(n),i.idle||e.push(i))}return FT=0,kC=_l,kC.length=0,_l=e,_l.length>0}function wae(n,e){const t=n.findIndex(e);return t<0?n.length:t}var bae={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},fc="[-+]?\\d*\\.?\\d+",NT=fc+"%";function Tb(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var Mae=new RegExp("rgb"+Tb(fc,fc,fc)),Cae=new RegExp("rgba"+Tb(fc,fc,fc,fc)),Rae=new RegExp("hsl"+Tb(fc,NT,NT)),Pae=new RegExp("hsla"+Tb(fc,NT,NT,fc)),Iae=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Lae=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Dae=/^#([0-9a-fA-F]{6})$/,Bae=/^#([0-9a-fA-F]{8})$/;function kae(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Dae.exec(n))?parseInt(e[1]+"ff",16)>>>0:Zh&&Zh[n]!==void 0?Zh[n]:(e=Mae.exec(n))?(m0(e[1])<<24|m0(e[2])<<16|m0(e[3])<<8|255)>>>0:(e=Cae.exec(n))?(m0(e[1])<<24|m0(e[2])<<16|m0(e[3])<<8|tU(e[4]))>>>0:(e=Iae.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Bae.exec(n))?parseInt(e[1],16)>>>0:(e=Lae.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Rae.exec(n))?(ZN(eU(e[1]),rA(e[2]),rA(e[3]))|255)>>>0:(e=Pae.exec(n))?(ZN(eU(e[1]),rA(e[2]),rA(e[3]))|tU(e[4]))>>>0:null}function OC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ZN(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=OC(r,i,n+1/3),o=OC(r,i,n),a=OC(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function m0(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function eU(n){return(parseFloat(n)%360+360)%360/360}function tU(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function rA(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function nU(n){let e=kae(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var G_=(n,e,t)=>{if(wt.fun(n))return n;if(wt.arr(n))return G_({range:n,output:e,extrapolate:t});if(wt.str(n.output[0]))return N2(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Fae(c,s);return Oae(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Oae(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Fae(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Nae={linear:n=>n},V_=Symbol.for("FluidValue.get"),vv=Symbol.for("FluidValue.observers"),$c=n=>!!(n&&n[V_]),pl=n=>n&&n[V_]?n[V_]():n,iU=n=>n[vv]||null;function Uae(n,e){n.eventObserved?n.eventObserved(e):n(e)}function UT(n,e){const t=n[vv];t&&t.forEach(i=>{Uae(i,e)})}var Gae=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");Vae(this,n)}},Vae=(n,e)=>f6(n,V_,e);function j1(n,e){if(n[V_]){let t=n[vv];t||f6(n,vv,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function GT(n,e){const t=n[vv];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[vv]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var f6=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),rT=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Hae=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,rU=new RegExp(`(${rT.source})(%|[a-z]+)`,"i"),zae=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,wb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,h6=n=>{const[e,t]=$ae(n);if(!e||F2())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&wb.test(t))return h6(t);if(t)return t}return n},$ae=n=>{const e=wb.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},FC,Wae=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,d6=n=>{FC||(FC=Zh?new RegExp(`(${Object.keys(Zh).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>pl(s).replace(wb,h6).replace(Hae,nU).replace(FC,nU)),t=e.map(s=>s.match(rT).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>G_({...n,output:s}));return s=>{var l;const o=!rU.test(e[0])&&((l=e.find(c=>rU.test(c)))==null?void 0:l.replace(rT,""));let a=0;return e[0].replace(rT,()=>`${r[a++](s)}${o||""}`).replace(zae,Wae)}},G2="react-spring: ",p6=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${G2}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},jae=p6(console.warn);function Kae(){jae(`${G2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Xae=p6(console.warn);function Yae(){Xae(`${G2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function bb(n){return wt.str(n)&&(n[0]=="#"||/\d/.test(n)||!F2()&&wb.test(n)||n in(Zh||{}))}var V2=F2()?O.useEffect:O.useLayoutEffect,qae=()=>{const n=O.useRef(!1);return V2(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function m6(){const n=O.useState()[1],e=qae();return()=>{e.current&&n(Math.random())}}function Jae(n,e){const[t]=O.useState(()=>({inputs:e,result:n()})),i=O.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Qae(e,s.inputs)||(s={inputs:e,result:n()}):s=t,O.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function Qae(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var g6=n=>O.useEffect(n,Zae),Zae=[];function sU(n){const e=O.useRef();return O.useEffect(()=>{e.current=n}),e.current}var H_=Symbol.for("Animated:node"),ele=n=>!!n&&n[H_]===n,Gc=n=>n&&n[H_],H2=(n,e)=>Eae(n,H_,e),Mb=n=>n&&n[H_]&&n[H_].getPayload(),v6=class{constructor(){H2(this,this)}getPayload(){return this.payload||[]}},K1=class extends v6{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,wt.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new K1(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return wt.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,wt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},z_=class extends K1{constructor(n){super(0),this._string=null,this._toString=G_({output:[n,n]})}static create(n){return new z_(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(wt.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=G_({output:[this.getValue(),n]})),this._value=0,super.reset()}},VT={dependencies:null},z2=class extends v6{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return bf(this.source,(t,i)=>{ele(t)?e[i]=t.getValue(n):$c(t)?e[i]=pl(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&di(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return bf(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){VT.dependencies&&$c(n)&&VT.dependencies.add(n);const e=Mb(n);e&&di(e,t=>this.add(t))}},y6=class extends z2{constructor(n){super(n)}static create(n){return new y6(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(tle)),!0)}};function tle(n){return(bb(n)?z_:K1).create(n)}function OI(n){const e=Gc(n);return e?e.constructor:wt.arr(n)?y6:bb(n)?z_:K1}var oU=(n,e)=>{const t=!wt.fun(n)||n.prototype&&n.prototype.isReactComponent;return O.forwardRef((i,r)=>{const s=O.useRef(null),o=t&&O.useCallback(g=>{s.current=rle(r,g)},[r]),[a,l]=ile(i,e),c=m6(),u=()=>{const g=s.current;if(t&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},f=new nle(u,l),h=O.useRef();V2(()=>(h.current=f,di(l,g=>j1(g,f)),()=>{h.current&&(di(h.current.deps,g=>GT(g,h.current)),Rn.cancel(h.current.update))})),O.useEffect(u,[]),g6(()=>()=>{const g=h.current;di(g.deps,v=>GT(v,g))});const p=e.getComponentProps(a.getValue());return O.createElement(n,{...p,ref:o})})},nle=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Rn.write(this.update)}};function ile(n,e){const t=new Set;return VT.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new z2(n),VT.dependencies=null,[n,t]}function rle(n,e){return n&&(wt.fun(n)?n(e):n.current=e),e}var aU=Symbol.for("AnimatedComponent"),sle=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new z2(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=lU(o)||"Anonymous";return wt.str(o)?o=s[o]||(s[o]=oU(o,r)):o=o[aU]||(o[aU]=oU(o,r)),o.displayName=`Animated(${a})`,o};return bf(n,(o,a)=>{wt.arr(n)&&(a=lU(o)),s[a]=s(o)}),{animated:s}},lU=n=>wt.str(n)?n:n&&wt.str(n.displayName)?n.displayName:wt.fun(n)&&n.name||null;function Vp(n,...e){return wt.fun(n)?n(...e):n}var Yx=(n,e)=>n===!0||!!(e&&n&&(wt.fun(n)?n(e):El(n).includes(e))),x6=(n,e)=>wt.obj(n)?e&&n[e]:n,_6=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,ole=n=>n,$2=(n,e=ole)=>{let t=ale;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);wt.und(s)||(i[r]=s)}return i},ale=["config","onProps","onStart","onChange","onPause","onResume","onRest"],lle={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function cle(n){const e={};let t=0;if(bf(n,(i,r)=>{lle[r]||(e[r]=i,t++)}),t)return e}function S6(n){const e=cle(n);if(e){const t={to:e};return bf(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function $_(n){return n=pl(n),wt.arr(n)?n.map($_):bb(n)?dc.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function ule(n){for(const e in n)return!0;return!1}function FI(n){return wt.fun(n)||wt.arr(n)&&wt.obj(n[0])}function fle(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function hle(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var dle={default:{tension:170,friction:26}},NI={...dle.default,mass:1,damping:1,easing:Nae.linear,clamp:!1},ple=class{constructor(){this.velocity=0,Object.assign(this,NI)}};function mle(n,e,t){t&&(t={...t},cU(t,e),e={...t,...e}),cU(n,e),Object.assign(n,e);for(const o in NI)n[o]==null&&(n[o]=NI[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return wt.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function cU(n,e){if(!wt.und(e.decay))n.duration=void 0;else{const t=!wt.und(e.tension)||!wt.und(e.friction);(t||!wt.und(e.frequency)||!wt.und(e.damping)||!wt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var uU=[],gle=class{constructor(){this.changed=!1,this.values=uU,this.toValues=null,this.fromValues=uU,this.config=new ple,this.immediate=!1}};function E6(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Yx(t.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{wt.und(t.pause)||(r.paused=Yx(t.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Yx(g,e)),l=Vp(t.delay||0,e),g?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function f(){r.resumeQueue.add(h),r.timeouts.delete(c),c.cancel(),l=c.time-Rn.now()}function h(){l>0&&!dc.skipAnimation?(r.delayed=!0,c=Rn.setTimeout(p,l),r.pauseQueue.add(f),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(f),r.timeouts.delete(c),n<=(r.cancelId||0)&&(u=!0);try{s.start({...t,callId:n,cancel:u},o)}catch(g){a(g)}}})}var W2=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?tv(n.get()):e.every(t=>t.noop)?A6(n.get()):lc(n.get(),e.every(t=>t.finished)),A6=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),lc=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),tv=n=>({value:n,cancelled:!0,finished:!1});function T6(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=$2(e,(_,S)=>S==="onRest"?void 0:_);let u,f;const h=new Promise((_,S)=>(u=_,f=S)),p=_=>{const S=r<=(t.cancelId||0)&&tv(i)||r!==t.asyncId&&lc(i,!1);if(S)throw _.result=S,f(_),_},g=(_,S)=>{const A=new fU,T=new hU;return(async()=>{if(dc.skipAnimation)throw W_(t),T.result=lc(i,!1),f(T),T;p(A);const b=wt.obj(_)?{..._}:{...S,to:_};b.parentId=r,bf(c,(L,P)=>{wt.und(b[P])&&(b[P]=L)});const C=await i.start(b);return p(A),t.paused&&await new Promise(L=>{t.resumeQueue.add(L)}),C})()};let v;if(dc.skipAnimation)return W_(t),lc(i,!1);try{let _;wt.arr(n)?_=(async S=>{for(const A of S)await g(A)})(n):_=Promise.resolve(n(g,i.stop.bind(i))),await Promise.all([_.then(u),h]),v=lc(i.get(),!0,!1)}catch(_){if(_ instanceof fU)v=_.result;else if(_ instanceof hU)v=_.result;else throw _}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return wt.fun(o)&&Rn.batchedUpdates(()=>{o(v,i,i.item)}),v})()}function W_(n,e){Kx(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var fU=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},hU=class extends Error{constructor(){super("SkipAnimationSignal")}},UI=n=>n instanceof j2,vle=1,j2=class extends Gae{constructor(){super(...arguments),this.id=vle++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Gc(this);return n&&n.getValue()}to(...n){return dc.to(this,n)}interpolate(...n){return Kae(),dc.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){UT(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||Ab.sort(this),UT(this,{type:"priority",parent:this,priority:n})}},Cm=Symbol.for("SpringPhase"),w6=1,b6=2,M6=4,NC=n=>(n[Cm]&w6)>0,Mh=n=>(n[Cm]&b6)>0,ax=n=>(n[Cm]&M6)>0,dU=(n,e)=>e?n[Cm]|=b6|w6:n[Cm]&=-3,pU=(n,e)=>e?n[Cm]|=M6:n[Cm]&=-5,yle=class extends j2{constructor(n,e){if(super(),this.animation=new gle,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!wt.und(n)||!wt.und(e)){const t=wt.obj(n)?{...n}:{...e,from:n};wt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Mh(this)||this._state.asyncTo)||ax(this)}get goal(){return pl(this.animation.to)}get velocity(){const n=Gc(this);return n instanceof K1?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return NC(this)}get isAnimating(){return Mh(this)}get isPaused(){return ax(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Mb(i.to);!o&&$c(i.to)&&(r=El(pl(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const f=c.constructor==z_?1:o?o[u].lastPosition:r[u];let h=i.immediate,p=f;if(!h){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=n;const v=i.fromValues[u],_=c.v0!=null?c.v0:c.v0=wt.arr(s.velocity)?s.velocity[u]:s.velocity;let S;const A=s.precision||(v==f?.005:Math.min(1,Math.abs(f-v)*.001));if(wt.und(s.duration))if(s.decay){const T=s.decay===!0?.998:s.decay,b=Math.exp(-(1-T)*g);p=v+_/(1-T)*(1-b),h=Math.abs(c.lastPosition-p)<=A,S=_*b}else{S=c.lastVelocity==null?_:c.lastVelocity;const T=s.restVelocity||A/10,b=s.clamp?0:s.bounce,C=!wt.und(b),L=v==f?c.v0>0:v<f;let P,k=!1;const I=1,D=Math.ceil(n/I);for(let G=0;G<D&&(P=Math.abs(S)>T,!(!P&&(h=Math.abs(f-p)<=A,h)));++G){C&&(k=p==f||p>f==L,k&&(S=-S*b,p=f));const H=-s.tension*1e-6*(p-f),q=-s.friction*.001*S,W=(H+q)/s.mass;S=S+W*I,p=p+S*I}}else{let T=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=n)),T=(s.progress||0)+g/this._memoizedDuration,T=T>1?1:T<0?0:T,c.durationProgress=T),p=v+s.easing(T)*(f-v),S=(p-c.lastPosition)/n,h=T==1}c.lastVelocity=S,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[u].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(p,s.round)&&(t=!0)});const a=Gc(this),l=a.getValue();if(e){const c=pl(i.to);(l!==c||t)&&!s.decay?(a.setValue(c),this._onChange(c)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(n){return Rn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Mh(this)){const{to:n,config:e}=this.animation;Rn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return wt.und(n)?(t=this.queue||[],this.queue=[]):t=[wt.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>W2(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),W_(this._state,n&&this._lastCallId),Rn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=wt.obj(t)?t[e]:t,(t==null||FI(t))&&(t=void 0),i=wt.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return NC(this)||(n.reverse&&([t,i]=[i,t]),i=pl(i),wt.und(i)?Gc(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,$2(n,(o,a)=>/^on/.test(a)?x6(o,t):o)),gU(this,n,"onProps"),cx(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return E6(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{ax(this)||(pU(this,!0),wx(s.pauseQueue),cx(this,"onPause",lc(this,lx(this,this.animation.to)),this))},resume:()=>{ax(this)&&(pU(this,!1),Mh(this)&&this._resume(),wx(s.resumeQueue),cx(this,"onResume",lc(this,lx(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=C6(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(tv(this));const i=!wt.und(n.to),r=!wt.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(tv(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:f=c}=n;r&&!i&&(!e.default||wt.und(u))&&(u=f),e.reverse&&([u,f]=[f,u]);const h=!nf(f,c);h&&(a.from=f),f=pl(f);const p=!nf(u,l);p&&this._focus(u);const g=FI(e.to),{config:v}=a,{decay:_,velocity:S}=v;(i||r)&&(v.velocity=0),e.config&&!g&&mle(v,Vp(e.config,s),e.config!==o.config?Vp(o.config,s):void 0);let A=Gc(this);if(!A||wt.und(u))return t(lc(this,!0));const T=wt.und(e.reset)?r&&!e.default:!wt.und(f)&&Yx(e.reset,s),b=T?f:this.get(),C=$_(u),L=wt.num(C)||wt.arr(C)||bb(C),P=!g&&(!L||Yx(o.immediate||e.immediate,s));if(p){const G=OI(u);if(G!==A.constructor)if(P)A=this._set(C);else throw Error(`Cannot animate between ${A.constructor.name} and ${G.name}, as the "to" prop suggests`)}const k=A.constructor;let I=$c(u),D=!1;if(!I){const G=T||!NC(this)&&h;(p||G)&&(D=nf($_(b),C),I=!D),(!nf(a.immediate,P)&&!P||!nf(v.decay,_)||!nf(v.velocity,S))&&(I=!0)}if(D&&Mh(this)&&(a.changed&&!T?I=!0:I||this._stop(l)),!g&&((I||$c(l))&&(a.values=A.getPayload(),a.toValues=$c(u)?null:k==z_?[1]:El(C)),a.immediate!=P&&(a.immediate=P,!P&&!T&&this._set(l)),I)){const{onRest:G}=a;di(_le,q=>gU(this,e,q));const H=lc(this,lx(this,l));wx(this._pendingCalls,H),this._pendingCalls.add(t),a.changed&&Rn.batchedUpdates(()=>{var q;a.changed=!T,G==null||G(H,this),T?Vp(o.onRest,H):(q=a.onStart)==null||q.call(a,H,this)})}T&&this._set(b),g?t(T6(e.to,e,this._state,this)):I?this._start():Mh(this)&&!p?this._pendingCalls.add(t):t(A6(b))}_focus(n){const e=this.animation;n!==e.to&&(iU(this)&&this._detach(),e.to=n,iU(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;$c(e)&&(j1(e,this),UI(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;$c(n)&&GT(n,this)}_set(n,e=!0){const t=pl(n);if(!wt.und(t)){const i=Gc(this);if(!i||!nf(t,i.getValue())){const r=OI(t);!i||i.constructor!=r?H2(this,r.create(t)):i.setValue(t),i&&Rn.batchedUpdates(()=>{this._onChange(t,e)})}}return Gc(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,cx(this,"onStart",lc(this,lx(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Vp(this.animation.onChange,n,this)),Vp(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;Gc(this).reset(pl(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Mh(this)||(dU(this,!0),ax(this)||this._resume())}_resume(){dc.skipAnimation?this.finish():Ab.start(this)}_stop(n,e){if(Mh(this)){dU(this,!1);const t=this.animation;di(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),UT(this,{type:"idle",parent:this});const i=e?tv(this.get()):lc(this.get(),lx(this,n??t.to));wx(this._pendingCalls,i),t.changed&&(t.changed=!1,cx(this,"onRest",i,this))}}};function lx(n,e){const t=$_(e),i=$_(n.get());return nf(i,t)}function C6(n,e=n.loop,t=n.to){const i=Vp(e);if(i){const r=i!==!0&&S6(i),s=(r||n).reverse,o=!r||r.reset;return j_({...n,loop:e,default:!1,pause:void 0,to:!s||FI(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function j_(n){const{to:e,from:t}=n=S6(n),i=new Set;return wt.obj(e)&&mU(e,i),wt.obj(t)&&mU(t,i),n.keys=i.size?Array.from(i):null,n}function xle(n){const e=j_(n);return wt.und(e.default)&&(e.default=$2(e)),e}function mU(n,e){bf(n,(t,i)=>t!=null&&e.add(i))}var _le=["onStart","onRest","onChange","onPause","onResume"];function gU(n,e,t){n.animation[t]=e[t]!==_6(e,t)?x6(e[t],n.key):void 0}function cx(n,e,...t){var i,r,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var Sle=["onStart","onChange","onRest"],Ele=1,Ale=class{constructor(n,e){this.id=Ele++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];wt.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(j_(n)),this}start(n){let{queue:e}=this;return n?e=El(n).map(j_):this.queue=[],this._flush?this._flush(this,e):(D6(this,e),GI(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;di(El(e),i=>t[i].stop(!!n))}else W_(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(wt.und(n))this.start({pause:!0});else{const e=this.springs;di(El(n),t=>e[t].pause())}return this}resume(n){if(wt.und(n))this.start({pause:!1});else{const e=this.springs;di(El(n),t=>e[t].resume())}return this}each(n){bf(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Kx(n,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&t.size?this.get():null;r&&e.size&&Kx(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Kx(t,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;Rn.onFrame(this._onFrame)}};function GI(n,e){return Promise.all(e.map(t=>R6(n,t))).then(t=>W2(n,t))}async function R6(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=wt.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=wt.arr(r)||wt.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):di(Sle,v=>{const _=e[v];if(wt.fun(_)){const S=n._events[v];e[v]=({finished:A,cancelled:T})=>{const b=S.get(_);b?(A||(b.finished=!1),T&&(b.cancelled=!0)):S.set(_,{value:null,finished:A||!1,cancelled:T||!1})},c&&(c[v]=e[v])}});const f=n._state;e.pause===!f.paused?(f.paused=e.pause,wx(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(n.springs)).map(v=>n.springs[v].start(e)),p=e.cancel===!0||_6(e,"cancel")===!0;(u||p&&f.asyncId)&&h.push(E6(++n._lastAsyncId,{props:e,state:f,actions:{pause:BI,resume:BI,start(v,_){p?(W_(f,n._lastAsyncId),_(tv(n))):(v.onRest=a,_(T6(u,v,f,n)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});const g=W2(n,await Promise.all(h));if(o&&g.finished&&!(t&&g.noop)){const v=C6(e,o,r);if(v)return D6(n,[v]),R6(n,v,!0)}return l&&Rn.batchedUpdates(()=>l(g,n,n.item)),g}function vU(n,e){const t={...n.springs};return e&&di(El(e),i=>{wt.und(i.keys)&&(i=j_(i)),wt.obj(i.to)||(i={...i,to:void 0}),L6(t,i,r=>I6(r))}),P6(n,t),t}function P6(n,e){bf(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,j1(t,n))})}function I6(n,e){const t=new yle;return t.key=n,e&&j1(t,e),t}function L6(n,e,t){e.keys&&di(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function D6(n,e){di(e,t=>{L6(n.springs,t,i=>I6(i,n))})}var Cb=({children:n,...e})=>{const t=O.useContext(HT),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=Jae(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=HT;return O.createElement(s,{value:e},n)},HT=Tle(Cb,{});Cb.Provider=HT.Provider;Cb.Consumer=HT.Consumer;function Tle(n,e){return Object.assign(n,O.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var wle=()=>{const n=[],e=function(i){Yae();const r=[];return di(n,(s,o)=>{if(wt.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return di(n,i=>i.pause(...arguments)),this},e.resume=function(){return di(n,i=>i.resume(...arguments)),this},e.set=function(i){di(n,(r,s)=>{const o=wt.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return di(n,(s,o)=>{if(wt.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return di(n,i=>i.stop(...arguments)),this},e.update=function(i){return di(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return wt.fun(i)?i(s,r):i};return e._getProps=t,e};function ble(n,e,t){const i=wt.fun(e)&&e;i&&!t&&(t=[]);const r=O.useMemo(()=>i||arguments.length==3?wle():void 0,[]),s=O.useRef(0),o=m6(),a=O.useMemo(()=>({ctrls:[],queue:[],flush(S,A){const T=vU(S,A);return s.current>0&&!a.queue.length&&!Object.keys(T).some(C=>!S.springs[C])?GI(S,A):new Promise(C=>{P6(S,T),a.queue.push(()=>{C(GI(S,A))}),o()})}}),[]),l=O.useRef([...a.ctrls]),c=[],u=sU(n)||0;O.useMemo(()=>{di(l.current.slice(n,u),S=>{fle(S,r),S.stop(!0)}),l.current.length=n,f(u,n)},[n]),O.useMemo(()=>{f(0,Math.min(u,n))},t);function f(S,A){for(let T=S;T<A;T++){const b=l.current[T]||(l.current[T]=new Ale(null,a.flush)),C=i?i(T,b):e[T];C&&(c[T]=xle(C))}}const h=l.current.map((S,A)=>vU(S,c[A])),p=O.useContext(Cb),g=sU(p),v=p!==g&&ule(p);V2(()=>{s.current++,a.ctrls=l.current;const{queue:S}=a;S.length&&(a.queue=[],di(S,A=>A())),di(l.current,(A,T)=>{r==null||r.add(A),v&&A.start({default:p});const b=c[T];b&&(hle(A,b.ref),A.ref?A.queue.push(b):A.start(b))})}),g6(()=>()=>{di(a.ctrls,S=>S.stop(!0))});const _=h.map(S=>({...S}));return r?[_,r]:_}function Mle(n,e){const t=wt.fun(n),[[i],r]=ble(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}var Cle=class extends j2{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=G_(...e);const t=this._get(),i=OI(t);H2(this,i.create(t))}advance(n){const e=this._get(),t=this.get();nf(e,t)||(Gc(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&yU(this._active)&&UC(this)}_get(){const n=wt.arr(this.source)?this.source.map(pl):El(pl(this.source));return this.calc(...n)}_start(){this.idle&&!yU(this._active)&&(this.idle=!1,di(Mb(this),n=>{n.done=!1}),dc.skipAnimation?(Rn.batchedUpdates(()=>this.advance()),UC(this)):Ab.start(this))}_attach(){let n=1;di(El(this.source),e=>{$c(e)&&j1(e,this),UI(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){di(El(this.source),n=>{$c(n)&&GT(n,this)}),this._active.clear(),UC(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=El(this.source).reduce((e,t)=>Math.max(e,(UI(t)?t.priority:0)+1),0))}};function Rle(n){return n.idle!==!1}function yU(n){return!n.size||Array.from(n).every(Rle)}function UC(n){n.idle||(n.idle=!0,di(Mb(n),e=>{e.done=!0}),UT(n,{type:"idle",parent:n}))}dc.assign({createStringInterpolator:d6,to:(n,e)=>new Cle(n,e)});var Ple=["primitive"].concat(Object.keys(F_).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));dc.assign({createStringInterpolator:d6,colors:bae,frameLoop:"demand"});Cse(()=>{Rn.advance()});var Ile=sle(Ple,{applyAnimatedValues:Kp}),Lle=Ile.animated;const Rb=parseInt(w1.replace(/\D+/g,"")),Dle=Rb>=125?"uv1":"uv2";function Ble(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let o=0;const a=Object.keys(n.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"];for(let v=0,_=a.length;v<_;v++){const S=a[v];l[S]=[];const A=n.morphAttributes[S];A&&(c[S]=new Array(A.length).fill(0).map(()=>[]))}const h=Math.log10(1/e),p=Math.pow(10,h);for(let v=0;v<s;v++){const _=i?i.getX(v):v;let S="";for(let A=0,T=a.length;A<T;A++){const b=a[A],C=n.getAttribute(b),L=C.itemSize;for(let P=0;P<L;P++)S+=`${~~(C[f[P]](_)*p)},`}if(S in t)u.push(t[S]);else{for(let A=0,T=a.length;A<T;A++){const b=a[A],C=n.getAttribute(b),L=n.morphAttributes[b],P=C.itemSize,k=l[b],I=c[b];for(let D=0;D<P;D++){const G=f[D];if(k.push(C[G](_)),L)for(let H=0,q=L.length;H<q;H++)I[H].push(L[H][G](_))}}t[S]=o,u.push(o),o++}}const g=n.clone();for(let v=0,_=a.length;v<_;v++){const S=a[v],A=n.getAttribute(S),T=new A.array.constructor(l[S]),b=new Jn(T,A.itemSize,A.normalized);if(g.setAttribute(S,b),S in c)for(let C=0;C<c[S].length;C++){const L=n.morphAttributes[S][C],P=new L.array.constructor(c[S][C]),k=new Jn(P,L.itemSize,L.normalized);g.morphAttributes[S][C]=k}}return g.setIndex(u),g}function xU(n,e){if(e===v$)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===IT||e===qD){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===IT)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function kle(n,e=Math.PI/3){const t=Math.cos(e),i=(1+1e-10)*100,r=[new re,new re,new re],s=new re,o=new re,a=new re,l=new re;function c(v){const _=~~(v.x*i),S=~~(v.y*i),A=~~(v.z*i);return`${_},${S},${A}`}const u=n.index?n.toNonIndexed():n,f=u.attributes.position,h={};for(let v=0,_=f.count/3;v<_;v++){const S=3*v,A=r[0].fromBufferAttribute(f,S+0),T=r[1].fromBufferAttribute(f,S+1),b=r[2].fromBufferAttribute(f,S+2);s.subVectors(b,T),o.subVectors(A,T);const C=new re().crossVectors(s,o).normalize();for(let L=0;L<3;L++){const P=r[L],k=c(P);k in h||(h[k]=[]),h[k].push(C)}}const p=new Float32Array(f.count*3),g=new Jn(p,3,!1);for(let v=0,_=f.count/3;v<_;v++){const S=3*v,A=r[0].fromBufferAttribute(f,S+0),T=r[1].fromBufferAttribute(f,S+1),b=r[2].fromBufferAttribute(f,S+2);s.subVectors(b,T),o.subVectors(A,T),a.crossVectors(s,o).normalize();for(let C=0;C<3;C++){const L=r[C],P=c(L),k=h[P];l.set(0,0,0);for(let I=0,D=k.length;I<D;I++){const G=k[I];a.dot(G)>t&&l.add(G)}l.normalize(),g.setXYZ(S+C,l.x,l.y,l.z)}}return u.setAttribute("normal",g),u}var Sl=Uint8Array,Vh=Uint16Array,VI=Uint32Array,B6=new Sl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k6=new Sl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ole=new Sl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O6=function(n,e){for(var t=new Vh(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new VI(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},F6=O6(B6,2),N6=F6[0],Fle=F6[1];N6[28]=258,Fle[258]=28;var Nle=O6(k6,0),Ule=Nle[0],HI=new Vh(32768);for(var ji=0;ji<32768;++ji){var Ch=(ji&43690)>>>1|(ji&21845)<<1;Ch=(Ch&52428)>>>2|(Ch&13107)<<2,Ch=(Ch&61680)>>>4|(Ch&3855)<<4,HI[ji]=((Ch&65280)>>>8|(Ch&255)<<8)>>>1}var qx=function(n,e,t){for(var i=n.length,r=0,s=new Vh(e);r<i;++r)++s[n[r]-1];var o=new Vh(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Vh(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],f=o[n[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[HI[f]>>>l]=c}else for(a=new Vh(i),r=0;r<i;++r)n[r]&&(a[r]=HI[o[n[r]-1]++]>>>15-n[r]);return a},X1=new Sl(288);for(var ji=0;ji<144;++ji)X1[ji]=8;for(var ji=144;ji<256;++ji)X1[ji]=9;for(var ji=256;ji<280;++ji)X1[ji]=7;for(var ji=280;ji<288;++ji)X1[ji]=8;var U6=new Sl(32);for(var ji=0;ji<32;++ji)U6[ji]=5;var Gle=qx(X1,9,1),Vle=qx(U6,5,1),GC=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},nc=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},VC=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Hle=function(n){return(n/8|0)+(n&7&&1)},zle=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Vh?Vh:n instanceof VI?VI:Sl)(t-e);return i.set(n.subarray(e,t)),i},$le=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Sl(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Sl(i*3));var o=function(Me){var Le=e.length;if(Me>Le){var je=new Sl(Math.max(Le*2,Me));je.set(e),e=je}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,h=t.m,p=t.n,g=i*8;do{if(!u){t.f=a=nc(n,l,1);var v=nc(n,l+1,3);if(l+=3,v)if(v==1)u=Gle,f=Vle,h=9,p=5;else if(v==2){var T=nc(n,l,31)+257,b=nc(n,l+10,15)+4,C=T+nc(n,l+5,31)+1;l+=14;for(var L=new Sl(C),P=new Sl(19),k=0;k<b;++k)P[Ole[k]]=nc(n,l+k*3,7);l+=b*3;for(var I=GC(P),D=(1<<I)-1,G=qx(P,I,1),k=0;k<C;){var H=G[nc(n,l,D)];l+=H&15;var _=H>>>4;if(_<16)L[k++]=_;else{var q=0,W=0;for(_==16?(W=3+nc(n,l,3),l+=2,q=L[k-1]):_==17?(W=3+nc(n,l,7),l+=3):_==18&&(W=11+nc(n,l,127),l+=7);W--;)L[k++]=q}}var te=L.subarray(0,T),ee=L.subarray(T);h=GC(te),p=GC(ee),u=qx(te,h,1),f=qx(ee,p,1)}else throw"invalid block type";else{var _=Hle(l)+4,S=n[_-4]|n[_-3]<<8,A=_+S;if(A>i){if(s)throw"unexpected EOF";break}r&&o(c+S),e.set(n.subarray(_,A),c),t.b=c+=S,t.p=l=A*8;continue}if(l>g){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var ne=(1<<h)-1,Y=(1<<p)-1,Q=l;;Q=l){var q=u[VC(n,l)&ne],F=q>>>4;if(l+=q&15,l>g){if(s)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(F<256)e[c++]=F;else if(F==256){Q=l,u=null;break}else{var ie=F-254;if(F>264){var k=F-257,he=B6[k];ie=nc(n,l,(1<<he)-1)+N6[k],l+=he}var pe=f[VC(n,l)&Y],ye=pe>>>4;if(!pe)throw"invalid distance";l+=pe&15;var ee=Ule[ye];if(ye>3){var he=k6[ye];ee+=VC(n,l)&(1<<he)-1,l+=he}if(l>g){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Be=c+ie;c<Be;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=Be}}t.l=u,t.p=Q,t.b=c,u&&(a=1,t.m=h,t.d=f,t.n=p)}while(!a);return c==e.length?e:zle(e,0,c)},Wle=new Sl(0),jle=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function bx(n,e){return $le((jle(n),n.subarray(2,-4)),e)}var Kle=typeof TextDecoder<"u"&&new TextDecoder,Xle=0;try{Kle.decode(Wle,{stream:!0}),Xle=1}catch{}const Yle=n=>n&&n.isCubeTexture;class qle extends Ni{constructor(e,t){var i,r;const s=Yle(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],p=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Rb>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new F1(1,16),S=new fo({uniforms:v,fragmentShader:g,vertexShader:p,side:xl});super(_,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function yv(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Xp="srgb",gf="srgb-linear",_U=3001,Jle=3e3;class K2 extends as{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new nce(t)}),this.register(function(t){return new ice(t)}),this.register(function(t){return new hce(t)}),this.register(function(t){return new dce(t)}),this.register(function(t){return new pce(t)}),this.register(function(t){return new sce(t)}),this.register(function(t){return new oce(t)}),this.register(function(t){return new ace(t)}),this.register(function(t){return new lce(t)}),this.register(function(t){return new tce(t)}),this.register(function(t){return new cce(t)}),this.register(function(t){return new rce(t)}),this.register(function(t){return new fce(t)}),this.register(function(t){return new uce(t)}),this.register(function(t){return new Zle(t)}),this.register(function(t){return new mce(t)}),this.register(function(t){return new gce(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=mf.extractUrlBase(e);o=mf.resolveURL(c,this.path)}else o=mf.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new rs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(yv(new Uint8Array(e.slice(0,4)))===G6){try{o[Yn.KHR_BINARY_GLTF]=new vce(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Yn.KHR_BINARY_GLTF].content)}else s=JSON.parse(yv(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Pce(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Yn.KHR_MATERIALS_UNLIT:o[u]=new ece;break;case Yn.KHR_DRACO_MESH_COMPRESSION:o[u]=new yce(s,this.dracoLoader);break;case Yn.KHR_TEXTURE_TRANSFORM:o[u]=new xce;break;case Yn.KHR_MESH_QUANTIZATION:o[u]=new _ce;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Qle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Yn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Zle{constructor(e){this.parser=e,this.name=Yn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new ht(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],gf);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new yb(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new O_(u),c.distance=f;break;case"spot":c=new vb(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,rf(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class ece{constructor(){this.name=Yn.KHR_MATERIALS_UNLIT}getMaterialType(){return ua}extendParams(e,t,i){const r=[];e.color=new ht(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],gf),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Xp))}return Promise.all(r)}}class tce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class nce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Qe(a,a)}return Promise.all(s)}}class ice{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class rce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class sce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ht(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],gf)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Xp)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class oce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ace{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ht().setRGB(a[0],a[1],a[2],gf),Promise.all(s)}}class lce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class cce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ht().setRGB(a[0],a[1],a[2],gf),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Xp)),Promise.all(s)}}class uce{constructor(e){this.parser=e,this.name=Yn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class fce{constructor(e){this.parser=e,this.name=Yn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Pl}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hce{constructor(e){this.parser=e,this.name=Yn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class dce{constructor(e){this.parser=e,this.name=Yn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class pce{constructor(e){this.parser=e,this.name=Yn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mce{constructor(e){this.name=Yn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(p),u,f,h,r.mode,r.filter),p})})}else return null}}class gce{constructor(e){this.name=Yn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==hl.TRIANGLES&&c.mode!==hl.TRIANGLE_STRIP&&c.mode!==hl.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,p=[];for(const g of f){const v=new Lt,_=new re,S=new Pi,A=new re(1,1,1),T=new l2(g.geometry,g.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&S.fromBufferAttribute(l.ROTATION,b),l.SCALE&&A.fromBufferAttribute(l.SCALE,b),T.setMatrixAt(b,v.compose(_,S,A));for(const b in l)if(b==="_COLOR_0"){const C=l[b];T.instanceColor=new Tm(C.array,C.itemSize,C.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&g.geometry.setAttribute(b,l[b]);Hn.prototype.copy.call(T,g),this.parser.assignFinalMaterial(T),p.push(T)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const G6="glTF",ux=12,SU={JSON:1313821514,BIN:5130562};class vce{constructor(e){this.name=Yn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ux);if(this.header={magic:yv(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==G6)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-ux,r=new DataView(e,ux);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===SU.JSON){const l=new Uint8Array(e,ux+s,o);this.content=yv(l)}else if(a===SU.BIN){const l=ux+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yce{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Yn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=zI[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=zI[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],p=nv[h.componentType];c[f]=p.name,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(p){for(const g in p.attributes){const v=p.attributes[g],_=l[g];_!==void 0&&(v.normalized=_)}f(p)},a,c,gf,h)})})}}class xce{constructor(){this.name=Yn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class _ce{constructor(){this.name=Yn.KHR_MESH_QUANTIZATION}}class V6 extends Vv{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,f=(i-t)/u,h=f*f,p=h*f,g=e*c,v=g-c,_=-2*p+3*h,S=p-h,A=1-_,T=S-h+f;for(let b=0;b!==a;b++){const C=o[v+b+a],L=o[v+b+l]*u,P=o[g+b+a],k=o[g+b]*u;s[b]=A*C+T*L+_*P+S*k}return s}}const Sce=new Pi;class Ece extends V6{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Sce.fromArray(s).normalize().toArray(s),s}}const hl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},nv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},EU={9728:pr,9729:oi,9984:T_,9985:$w,9986:J0,9987:du},AU={33071:Ri,33648:fv,10497:hu},HC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zI={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Rb>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Rh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ace={CUBICSPLINE:void 0,LINEAR:Em,STEP:hv},zC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Tce(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Oa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:uu})),n.DefaultMaterial}function Sp(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function rf(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function wce(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function bce(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Mce(n){let e;const t=n.extensions&&n.extensions[Yn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+$C(t.attributes):e=n.indices+":"+$C(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+$C(n.targets[i]);return e}function $C(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function $I(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Cce(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Rce=new Lt;class Pce{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Qle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Hv(this.options.manager):this.textureLoader=new E8(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Sp(s,a,r),rf(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Yn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(mf.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=HC[r.type],a=nv[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Jn(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=HC[r.type],c=nv[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let v,_;if(p&&p!==f){const S=Math.floor(h/p),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+S+":"+r.count;let T=t.cache.get(A);T||(v=new c(a,S*p,r.count*p/u),T=new D1(v,p/u),t.cache.add(A,T)),_=new od(T,l,h%p/u,g)}else a===null?v=new c(r.count*l):v=new c(a,h,r.count*l),_=new Jn(v,l,g);if(r.sparse!==void 0){const S=HC.SCALAR,A=nv[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,C=new A(o[1],T,r.sparse.count*S),L=new c(o[2],b,r.sparse.count*l);a!==null&&(_=new Jn(_.array.slice(),_.itemSize,_.normalized));for(let P=0,k=C.length;P<k;P++){const I=C[P];if(_.setX(I,L[P*l]),l>=2&&_.setY(I,L[P*l+1]),l>=3&&_.setZ(I,L[P*l+2]),l>=4&&_.setW(I,L[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=EU[h.magFilter]||oi,u.minFilter=EU[h.minFilter]||du,u.wrapS=AU[h.wrapS]||hu,u.wrapT=AU[h.wrapT]||hu,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,p){let g=h;t.isImageBitmapLoader===!0&&(g=function(v){const _=new ri(v);_.needsUpdate=!0,h(_)}),t.load(mf.resolveURL(f,s.path),g,void 0,p)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),rf(f,o),f.userData.mimeType=o.mimeType||Cce(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Yn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Yn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Yn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===_U?Xp:gf),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Xp?_U:Jle),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new nb,is.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Us,is.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Oa}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Yn.KHR_MATERIALS_UNLIT]){const f=r[Yn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new ht(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],gf),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,Xp)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=xl);const u=s.alphaMode||zC.OPAQUE;if(u===zC.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===zC.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ua&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Qe(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==ua&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ua){const f=s.emissiveFactor;a.emissive=new ht().setRGB(f[0],f[1],f[2],gf)}return s.emissiveTexture!==void 0&&o!==ua&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Xp)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),rf(f,s),t.associations.set(f,{materials:e}),s.extensions&&Sp(r,f,s),f})}createUniqueName(e){const t=Wn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Yn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return TU(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Mce(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[Yn.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=TU(new Mn,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Tce(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let p=0,g=u.length;p<g;p++){const v=u[p],_=o[p];let S;const A=c[p];if(_.mode===hl.TRIANGLES||_.mode===hl.TRIANGLE_STRIP||_.mode===hl.TRIANGLE_FAN||_.mode===void 0)S=s.isSkinnedMesh===!0?new B1(v,A):new Ni(v,A),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),_.mode===hl.TRIANGLE_STRIP?S.geometry=xU(S.geometry,qD):_.mode===hl.TRIANGLE_FAN&&(S.geometry=xU(S.geometry,IT));else if(_.mode===hl.LINES)S=new mc(v,A);else if(_.mode===hl.LINE_STRIP)S=new pu(v,A);else if(_.mode===hl.LINE_LOOP)S=new c2(v,A);else if(_.mode===hl.POINTS)S=new u2(v,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(S.geometry.morphAttributes).length>0&&bce(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),rf(S,s),_.extensions&&Sp(r,S,_),t.assignFinalMaterial(S),f.push(S)}for(let p=0,g=f.length;p<g;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return s.extensions&&Sp(r,f[0],s),f[0];const h=new uc;s.extensions&&Sp(r,h,s),t.associations.set(h,{meshes:e});for(let p=0,g=f.length;p<g;p++)h.add(f[p]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new $r(Gn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Ad(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),rf(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new Lt;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new km(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const p=r.channels[f],g=r.samplers[p.sampler],v=p.target,_=v.node,S=r.parameters!==void 0?r.parameters[g.input]:g.input,A=r.parameters!==void 0?r.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",S)),l.push(this.getDependency("accessor",A)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],p=f[1],g=f[2],v=f[3],_=f[4],S=[];for(let A=0,T=h.length;A<T;A++){const b=h[A],C=p[A],L=g[A],P=v[A],k=_[A];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const I=i._createAnimationTracks(b,C,L,P,k);if(I)for(let D=0;D<I.length;D++)S.push(I[D])}return new bm(s,void 0,S)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,Rce)});for(let p=0,g=f.length;p<g;p++)u.add(f[p]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Am:c.length>1?u=new uc:c.length===1?u=c[0]:u=new Hn,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),rf(u,s),s.extensions&&Sp(i,u,s),s.matrix!==void 0){const f=new Lt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new uc;i.name&&(s.name=r.createUniqueName(i.name)),rf(s,i),i.extensions&&Sp(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,p]of r.associations)(h instanceof is||h instanceof ri)&&f.set(h,p);return u.traverse(h=>{const p=r.associations.get(h);p!=null&&f.set(h,p)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Rh[s.path]===Rh.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(Rh[s.path]){case Rh.weights:c=ad;break;case Rh.rotation:c=wf;break;case Rh.position:case Rh.scale:c=ld;break;default:switch(i.itemSize){case 1:c=ad;break;case 2:case 3:default:c=ld;break}break}const u=r.interpolation!==void 0?Ace[r.interpolation]:Em,f=this._getArrayFromAccessor(i);for(let h=0,p=l.length;h<p;h++){const g=new c(l[h]+"."+Rh[s.path],t.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=$I(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof wf?Ece:V6;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ice(n,e,t){const i=e.attributes,r=new Fs;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new re(l[0],l[1],l[2]),new re(c[0],c[1],c[2])),a.normalized){const u=$I(nv[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new re,l=new re;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],p=h.min,g=h.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),h.normalized){const v=$I(nv[h.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new xs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function TU(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=zI[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return rf(n,e),Ice(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?wce(n,e.targets,t):n})}class Lce extends O1{constructor(e,t={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=t;if(o===void 0)super();else{const h=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(h,{...f,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a})}this.type="TextGeometry"}}const Dce={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Bce={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};function H6(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function kce(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],h=r[c]/(u+f);r[c]=l+u*h,l=f*h}r[a]=l}return r}function Oce(n,e,t,i){const r=H6(n,i,e),s=kce(r,i,n,e),o=new qn(0,0,0,0);for(let a=0;a<=n;++a){const l=t[r-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function Fce(n,e,t,i,r){const s=[];for(let f=0;f<=t;++f)s[f]=0;const o=[];for(let f=0;f<=i;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=t;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=t;++f){l[f]=e-r[n+1-f],c[f]=r[n+f]-e;let h=0;for(let p=0;p<f;++p){const g=c[p+1],v=l[f-p];a[f][p]=g+v;const _=a[p][f-1]/a[f][p];a[p][f]=h+g*_,h=v*_}a[f][f]=h}for(let f=0;f<=t;++f)o[0][f]=a[f][t];for(let f=0;f<=t;++f){let h=0,p=1;const g=[];for(let v=0;v<=t;++v)g[v]=s.slice(0);g[0][0]=1;for(let v=1;v<=i;++v){let _=0;const S=f-v,A=t-v;f>=v&&(g[p][0]=g[h][0]/a[A+1][S],_=g[p][0]*a[S][A]);const T=S>=-1?1:-S,b=f-1<=A?v-1:t-f;for(let L=T;L<=b;++L)g[p][L]=(g[h][L]-g[h][L-1])/a[A+1][S+L],_+=g[p][L]*a[S+L][A];f<=A&&(g[p][v]=-g[h][v-1]/a[A+1][f],_+=g[p][v]*a[f][A]),o[v][f]=_;const C=h;h=p,p=C}}let u=t;for(let f=1;f<=i;++f){for(let h=0;h<=t;++h)o[f][h]*=u;u*=t-f}return o}function Nce(n,e,t,i,r){const s=r<n?r:n,o=[],a=H6(n,i,e),l=Fce(a,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),h=f.w;f.x*=h,f.y*=h,f.z*=h,c[u]=f}for(let u=0;u<=s;++u){const f=c[a-n].clone().multiplyScalar(l[u][0]);for(let h=1;h<=n;++h)f.add(c[a-n+h].clone().multiplyScalar(l[u][h]));o[u]=f}for(let u=s+1;u<=r+1;++u)o[u]=new qn(0,0,0);return o}function Uce(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function Gce(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new re(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(Uce(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function Vce(n,e,t,i,r){const s=Nce(n,e,t,i,r);return Gce(s)}class wU extends Rl{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new qn(a.x,a.y,a.z,a.w)}}getPoint(e,t){const i=t||new re,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Oce(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t){const i=t||new re,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Vce(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let Xn,br,ra;class X2 extends as{constructor(e){super(e)}load(e,t,i,r){const s=this,o=s.path===""?mf.extractUrlBase(e):s.path,a=new rs(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(Kce(e))Xn=new jce().parse(e);else{const r=j6(e);if(!Xce(r))throw new Error("THREE.FBXLoader: Unknown format.");if(MU(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+MU(r));Xn=new Wce().parse(r)}const i=new Hv(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Hce(i,this.manager).parse(Xn)}}class Hce{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){br=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new zce().parse(r);return this.parseScene(r,s,i),ra}parseConnections(){const e=new Map;return"Connections"in Xn&&Xn.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Xn.Objects){const i=Xn.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Xn.Objects){const i=Xn.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?hu:Ri,i.wrapT=a===0?hu:Ri,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=br.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new ri):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new ri):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in Xn.Objects){const i=Xn.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!br.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new $x;break;case"lambert":a=new v2;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new $x;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new ht().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new ht().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new ht().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new ht().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new ht().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new ht().fromArray(e.SpecularColor.value));const s=this;return br.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=_m,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in Xn.Objects&&t in Xn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=br.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Xn.Objects){const i=Xn.Objects.Deformer;for(const r in i){const s=i[r],o=br.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Lt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=br.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){ra=new uc;const r=this.parseModels(e.skeletons,t,i),s=Xn.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),br.get(l.ID).parents.forEach(function(f){const h=r.get(f.ID);h!==void 0&&h.add(l)}),l.parent===null&&ra.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),ra.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=$6(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new $ce().parse();ra.children.length===1&&ra.children[0].isGroup&&(ra.children[0].animations=a,ra=ra.children[0]),ra.animations=a}parseModels(e,t,i){const r=new Map,s=Xn.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=br.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new Am;break;case"Null":default:u=new uc;break}u.name=l.attrName?Wn.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new Am,s.matrixWorld.copy(c.transformLink),s.name=r?Wn.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=Xn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Hn;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const f=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new $r(u,c,s,o),f!==null&&t.setFocalLength(f);break;case 1:t=new Ad(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Hn;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=Xn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Hn;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new ht().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new O_(s,o,a,l);break;case 1:t=new yb(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=Gn.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=Gn.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new vb(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new O_(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new $x({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new B1(s,o),r.normalizeSkinWeights()):r=new Ni(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new Us({color:3342591,linewidth:1});return new pu(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=W6(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&br.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=Xn.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),ra.add(e.target)):e.lookAt(new re().fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];br.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;br.get(c).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new km(o.bones),r[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Xn.Objects){const t=Xn.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Lt().fromArray(s.Matrix.a)}):e[r.Node]=new Lt().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Xn&&"AmbientColor"in Xn.GlobalSettings){const e=Xn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new ht(t,i,r);ra.add(new A2(s,1))}}}}class zce{parse(e){const t=new Map;if("Geometry"in Xn.Objects){const i=Xn.Objects.Geometry;for(const r in i){const s=br.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(f){return Xn.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,h){return r[h.ID]!==void 0&&(f=r[h.ID]),f},null);e.children.forEach(function(f){i.morphTargets[f.ID]!==void 0&&s.push(i.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=W6(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=$6(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,r){const s=new Mn;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Ht(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Ht(a.colors,3)),t&&(s.setAttribute("skinIndex",new C1(a.weightsIndices,4)),s.setAttribute("skinWeight",new Ht(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new On().getNormalMatrix(r),u=new Ht(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){Dle==="uv2"&&u++;const f=u===0?"uv":`uv${u}`;s.setAttribute(f,new Ht(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==c&&(s.addGroup(u,h-u,c),c=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(p,g){let v,_=!1;p<0&&(p=p^-1,_=!0);let S=[],A=[];if(o.push(p*3,p*3+1,p*3+2),e.color){const T=sA(g,i,p,e.color);l.push(T[0],T[1],T[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(T){A.push(T.weight),S.push(T.id)}),A.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const T=[0,0,0,0],b=[0,0,0,0];A.forEach(function(C,L){let P=C,k=S[L];b.forEach(function(I,D,G){if(P>I){G[D]=P,P=I;const H=T[D];T[D]=k,k=H}})}),S=T,A=b}for(;A.length<4;)A.push(0),S.push(0);for(let T=0;T<4;++T)u.push(A[T]),f.push(S[T])}if(e.normal){const T=sA(g,i,p,e.normal);a.push(T[0],T[1],T[2])}e.material&&e.material.mappingType!=="AllSame"&&(v=sA(g,i,p,e.material)[0]),e.uv&&e.uv.forEach(function(T,b){const C=sA(g,i,p,T);c[b]===void 0&&(c[b]=[]),c[b].push(C[0]),c[b].push(C[1])}),r++,_&&(h.genFace(t,e,o,v,a,l,c,u,f,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],f=[])}),t}genFace(e,t,i,r,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(f-1)*3]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[i[f*3]]),e.vertex.push(t.vertexPositions[i[f*3+1]]),e.vertex.push(t.vertexPositions[i[f*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),t.uv&&t.uv.forEach(function(h,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(a[p][0]),e.uvs[p].push(a[p][1]),e.uvs[p].push(a[p][(f-1)*2]),e.uvs[p].push(a[p][(f-1)*2+1]),e.uvs[p].push(a[p][f*2]),e.uvs[p].push(a[p][f*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=Xn.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let g=0;g<l.length;g++){const v=l[g]*3;u[v]=a[g*3],u[v+1]=a[g*3+1],u[v+2]=a[g*3+2]}const f={vertexIndices:o,vertexPositions:u},h=this.genBuffers(f),p=new Ht(h.vertex,3);p.name=s||i.attrName,p.applyMatrix4(r),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(wU===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Mn;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Mn;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push(new qn().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let f=0;f<i;++f)s.push(s[f])}const u=new wU(i,r,s,a,l).getPoints(s.length*12);return new Mn().setFromPoints(u)}}class $ce{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Xn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Xn.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Xn.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(Yce),values:t[i].KeyValueFloat.a},s=br.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=Xn.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=br.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=br.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(f!==void 0){const h=Xn.Objects.Model[f.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const p={modelName:h.attrName?Wn.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ra.traverse(function(g){g.ID===h.id&&(p.transform=g.matrix,g.userData.transformData&&(p.eulerOrder=g.userData.transformData.eulerOrder))}),p.transform||(p.transform=new Lt),"PreRotation"in h&&(p.preRotation=h.PreRotation.value),"PostRotation"in h&&(p.postRotation=h.PostRotation.value),s[c]=p}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=br.get(l.ID).parents.filter(function(S){return S.relationship!==void 0})[0].ID,h=br.get(f).parents[0].ID,p=br.get(h).parents[0].ID,g=br.get(p).parents[0].ID,v=Xn.Objects.Model[g],_={modelName:v.attrName?Wn.sanitizeNodeName(v.attrName):"",morphName:Xn.Objects.Deformer[f].attrName};s[c]=_}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=Xn.Objects.AnimationStack,i={};for(const r in t){const s=br.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new bm(e.name,-1,t)}generateTracks(e){const t=[];let i=new re,r=new Pi,s=new re;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new so().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new ld(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Gn.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Gn.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Gn.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);r!==void 0&&(r=r.map(Gn.degToRad),r.push(o),r=new so().fromArray(r),r=new Pi().setFromEuler(r)),s!==void 0&&(s=s.map(Gn.degToRad),s.push(o),s=new so().fromArray(s),s=new Pi().setFromEuler(s).invert());const c=new Pi,u=new so,f=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(f,h/3*4);return new wf(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=ra.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ad(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[t-1],f=(e.times[t]-c)/o;let h=c+f;const p=[],g=[];for(;h<e.times[t];)p.push(h),h+=f,g.push(l),l+=a;e.times=CU(e.times,t,p),e.values=CU(e.values,t,g)}}}}class Wce{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new z6,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],Jce(s,f),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=jC(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=jC(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=jC(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class jce{parse(e){const t=new bU(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new z6;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),f!==""&&(i.attrType=f),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=bx(new Uint8Array(e.getArrayBuffer(o))),l=new bU(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class bU{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),yv(new Uint8Array(t))}}class z6{add(e,t){this[e]=t}}function Kce(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===j6(n,0,e.length)}function Xce(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function MU(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Yce(n){return n/46186158e3}const qce=[];function sA(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return Qce(qce,i.buffer,s,o)}const WC=new so,g0=new re;function $6(n){const e=new Lt,t=new Lt,i=new Lt,r=new Lt,s=new Lt,o=new Lt,a=new Lt,l=new Lt,c=new Lt,u=new Lt,f=new Lt,h=new Lt,p=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(g0.fromArray(n.translation)),n.preRotation){const D=n.preRotation.map(Gn.degToRad);D.push(n.eulerOrder),t.makeRotationFromEuler(WC.fromArray(D))}if(n.rotation){const D=n.rotation.map(Gn.degToRad);D.push(n.eulerOrder),i.makeRotationFromEuler(WC.fromArray(D))}if(n.postRotation){const D=n.postRotation.map(Gn.degToRad);D.push(n.eulerOrder),r.makeRotationFromEuler(WC.fromArray(D)),r.invert()}n.scale&&s.scale(g0.fromArray(n.scale)),n.scalingOffset&&a.setPosition(g0.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(g0.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(g0.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(g0.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(f.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const g=t.clone().multiply(i).multiply(r),v=new Lt;v.extractRotation(u);const _=new Lt;_.copyPosition(u);const S=_.clone().invert().multiply(u),A=v.clone().invert().multiply(S),T=s,b=new Lt;if(p===0)b.copy(v).multiply(g).multiply(A).multiply(T);else if(p===1)b.copy(v).multiply(A).multiply(g).multiply(T);else{const G=new Lt().scale(new re().setFromMatrixScale(f)).clone().invert(),H=A.clone().multiply(G);b.copy(v).multiply(g).multiply(H).multiply(T)}const C=c.clone().invert(),L=o.clone().invert();let P=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(C).multiply(a).multiply(o).multiply(s).multiply(L);const k=new Lt().copyPosition(P),I=u.clone().multiply(k);return h.copyPosition(I),P=h.clone().multiply(b),P.premultiply(u.invert()),P}function W6(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function jC(n){return n.split(",").map(function(t){return parseFloat(t)})}function j6(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),yv(new Uint8Array(n,e,t))}function Jce(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function Qce(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function CU(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}var Zce=Object.defineProperty,eue=(n,e,t)=>e in n?Zce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KC=(n,e,t)=>(eue(n,typeof e!="symbol"?e+"":e,t),t);class tue extends as{constructor(e){super(e)}load(e,t,i,r){const s=new rs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);t&&t(l)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new nue(e)}}class nue{constructor(e){KC(this,"data"),KC(this,"isFont",!0),KC(this,"type","Font"),this.data=e}generateShapes(e,t=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=iue(e,t,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}function iue(n,e,t,i){const r=Array.from(n),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)l=0,c-=o*i.lineHeight;else{const h=rue(f,s,l,c,t);h&&(l+=h.offsetX+i.letterSpacing,a.push(h.path))}}return a}function rue(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new R8;let a,l,c,u,f,h,p,g;if(s.o){const v=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let _=0,S=v.length;_<S;)switch(v[_++]){case"m":a=parseInt(v[_++])*e+t,l=parseInt(v[_++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(v[_++])*e+t,l=parseInt(v[_++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(v[_++])*e+t,u=parseInt(v[_++])*e+i,f=parseInt(v[_++])*e+t,h=parseInt(v[_++])*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=parseInt(v[_++])*e+t,u=parseInt(v[_++])*e+i,f=parseInt(v[_++])*e+t,h=parseInt(v[_++])*e+i,p=parseInt(v[_++])*e+t,g=parseInt(v[_++])*e+i,o.bezierCurveTo(f,h,p,g,c,u);break}}return{offsetX:s.ha*e,path:o}}class sue extends S2{constructor(e){super(e),this.type=ys}parse(e){const o=function(k,I){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,f=function(k,I,D){I=I||1024;let H=k.pos,q=-1,W=0,te="",ee=String.fromCharCode.apply(null,new Uint16Array(k.subarray(H,H+128)));for(;0>(q=ee.indexOf(u))&&W<I&&H<k.byteLength;)te+=ee,W+=ee.length,H+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(H,H+128)));return-1<q?(k.pos+=W+q+1,te+ee.slice(0,q)):!1},h=function(k){const I=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let te,ee;for((k.pos>=k.byteLength||!(te=f(k)))&&o(1,"no header found"),(ee=te.match(I))||o(3,"bad initial token"),W.valid|=1,W.programtype=ee[1],W.string+=te+`
`;te=f(k),te!==!1;){if(W.string+=te+`
`,te.charAt(0)==="#"){W.comments+=te+`
`;continue}if((ee=te.match(D))&&(W.gamma=parseFloat(ee[1])),(ee=te.match(G))&&(W.exposure=parseFloat(ee[1])),(ee=te.match(H))&&(W.valid|=2,W.format=ee[1]),(ee=te.match(q))&&(W.valid|=4,W.height=parseInt(ee[1],10),W.width=parseInt(ee[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||o(3,"missing format specifier"),W.valid&4||o(3,"missing image size specifier"),W},p=function(k,I,D){const G=I;if(G<8||G>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);G!==(k[2]<<8|k[3])&&o(3,"wrong scanline width");const H=new Uint8Array(4*I*D);H.length||o(4,"unable to allocate buffer space");let q=0,W=0;const te=4*G,ee=new Uint8Array(4),ne=new Uint8Array(te);let Y=D;for(;Y>0&&W<k.byteLength;){W+4>k.byteLength&&o(1),ee[0]=k[W++],ee[1]=k[W++],ee[2]=k[W++],ee[3]=k[W++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=G)&&o(3,"bad rgbe scanline format");let Q=0,F;for(;Q<te&&W<k.byteLength;){F=k[W++];const he=F>128;if(he&&(F-=128),(F===0||Q+F>te)&&o(3,"bad scanline data"),he){const pe=k[W++];for(let ye=0;ye<F;ye++)ne[Q++]=pe}else ne.set(k.subarray(W,W+F),Q),Q+=F,W+=F}const ie=G;for(let he=0;he<ie;he++){let pe=0;H[q]=ne[he+pe],pe+=G,H[q+1]=ne[he+pe],pe+=G,H[q+2]=ne[he+pe],pe+=G,H[q+3]=ne[he+pe],q+=4}Y--}return H},g=function(k,I,D,G){const H=k[I+3],q=Math.pow(2,H-128)/255;D[G+0]=k[I+0]*q,D[G+1]=k[I+1]*q,D[G+2]=k[I+2]*q,D[G+3]=1},v=function(k,I,D,G){const H=k[I+3],q=Math.pow(2,H-128)/255;D[G+0]=Wp.toHalfFloat(Math.min(k[I+0]*q,65504)),D[G+1]=Wp.toHalfFloat(Math.min(k[I+1]*q,65504)),D[G+2]=Wp.toHalfFloat(Math.min(k[I+2]*q,65504)),D[G+3]=Wp.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const S=h(_),A=S.width,T=S.height,b=p(_.subarray(_.pos),A,T);let C,L,P;switch(this.type){case Wr:P=b.length/4;const k=new Float32Array(P*4);for(let D=0;D<P;D++)g(b,D*4,k,D*4);C=k,L=Wr;break;case ys:P=b.length/4;const I=new Uint16Array(P*4);for(let D=0;D<P;D++)v(b,D*4,I,D*4);C=I,L=ys;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:T,data:C,header:S.string,gamma:S.gamma,exposure:S.exposure,type:L}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Wr:case ys:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=oi,o.magFilter=oi,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const fx=Rb>=152;class oue extends S2{constructor(e){super(e),this.type=ys}parse(e){const I=Math.pow(2.7182818,2.2);function D($,J){for(var me=0,z=0;z<65536;++z)(z==0||$[z>>3]&1<<(z&7))&&(J[me++]=z);for(var se=me-1;me<65536;)J[me++]=0;return se}function G($){for(var J=0;J<16384;J++)$[J]={},$[J].len=0,$[J].lit=0,$[J].p=null}const H={l:0,c:0,lc:0};function q($,J,me,z,se){for(;me<$;)J=J<<8|wn(z,se),me+=8;me-=$,H.l=J>>me&(1<<$)-1,H.c=J,H.lc=me}const W=new Array(59);function te($){for(var J=0;J<=58;++J)W[J]=0;for(var J=0;J<65537;++J)W[$[J]]+=1;for(var me=0,J=58;J>0;--J){var z=me+W[J]>>1;W[J]=me,me=z}for(var J=0;J<65537;++J){var se=$[J];se>0&&($[J]=se|W[se]++<<6)}}function ee($,J,me,z,se,oe,fe){for(var le=me,be=0,Oe=0;se<=oe;se++){if(le.value-me.value>z)return!1;q(6,be,Oe,$,le);var Ve=H.l;if(be=H.c,Oe=H.lc,fe[se]=Ve,Ve==63){if(le.value-me.value>z)throw"Something wrong with hufUnpackEncTable";q(8,be,Oe,$,le);var we=H.l+6;if(be=H.c,Oe=H.lc,se+we>oe+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)fe[se++]=0;se--}else if(Ve>=59){var we=Ve-59+2;if(se+we>oe+1)throw"Something wrong with hufUnpackEncTable";for(;we--;)fe[se++]=0;se--}}te(fe)}function ne($){return $&63}function Y($){return $>>6}function Q($,J,me,z){for(;J<=me;J++){var se=Y($[J]),oe=ne($[J]);if(se>>oe)throw"Invalid table entry";if(oe>14){var fe=z[se>>oe-14];if(fe.len)throw"Invalid table entry";if(fe.lit++,fe.p){var le=fe.p;fe.p=new Array(fe.lit);for(var be=0;be<fe.lit-1;++be)fe.p[be]=le[be]}else fe.p=new Array(1);fe.p[fe.lit-1]=J}else if(oe)for(var Oe=0,be=1<<14-oe;be>0;be--){var fe=z[(se<<14-oe)+Oe];if(fe.len||fe.p)throw"Invalid table entry";fe.len=oe,fe.lit=J,Oe++}}return!0}const F={c:0,lc:0};function ie($,J,me,z){$=$<<8|wn(me,z),J+=8,F.c=$,F.lc=J}const he={c:0,lc:0};function pe($,J,me,z,se,oe,fe,le,be,Oe){if($==J){z<8&&(ie(me,z,se,fe),me=F.c,z=F.lc),z-=8;var Ve=me>>z,Ve=new Uint8Array([Ve])[0];if(be.value+Ve>Oe)return!1;for(var we=le[be.value-1];Ve-- >0;)le[be.value++]=we}else if(be.value<Oe)le[be.value++]=$;else return!1;he.c=me,he.lc=z}function ye($){return $&65535}function Be($){var J=ye($);return J>32767?J-65536:J}const Me={a:0,b:0};function Le($,J){var me=Be($),z=Be(J),se=z,oe=me+(se&1)+(se>>1),fe=oe,le=oe-se;Me.a=fe,Me.b=le}function je($,J){var me=ye($),z=ye(J),se=me-(z>>1)&65535,oe=z+se-32768&65535;Me.a=oe,Me.b=se}function lt($,J,me,z,se,oe,fe){for(var le=fe<16384,be=me>se?se:me,Oe=1,Ve;Oe<=be;)Oe<<=1;for(Oe>>=1,Ve=Oe,Oe>>=1;Oe>=1;){for(var we=0,pt=we+oe*(se-Ve),Ye=oe*Oe,it=oe*Ve,Bt=z*Oe,Qt=z*Ve,zt,sn,Et,xt;we<=pt;we+=it){for(var mn=we,un=we+z*(me-Ve);mn<=un;mn+=Qt){var vn=mn+Bt,ui=mn+Ye,wi=ui+Bt;le?(Le($[mn+J],$[ui+J]),zt=Me.a,Et=Me.b,Le($[vn+J],$[wi+J]),sn=Me.a,xt=Me.b,Le(zt,sn),$[mn+J]=Me.a,$[vn+J]=Me.b,Le(Et,xt),$[ui+J]=Me.a,$[wi+J]=Me.b):(je($[mn+J],$[ui+J]),zt=Me.a,Et=Me.b,je($[vn+J],$[wi+J]),sn=Me.a,xt=Me.b,je(zt,sn),$[mn+J]=Me.a,$[vn+J]=Me.b,je(Et,xt),$[ui+J]=Me.a,$[wi+J]=Me.b)}if(me&Oe){var ui=mn+Ye;le?Le($[mn+J],$[ui+J]):je($[mn+J],$[ui+J]),zt=Me.a,$[ui+J]=Me.b,$[mn+J]=zt}}if(se&Oe)for(var mn=we,un=we+z*(me-Ve);mn<=un;mn+=Qt){var vn=mn+Bt;le?Le($[mn+J],$[vn+J]):je($[mn+J],$[vn+J]),zt=Me.a,$[vn+J]=Me.b,$[mn+J]=zt}Ve=Oe,Oe>>=1}return we}function bt($,J,me,z,se,oe,fe,le,be,Oe){for(var Ve=0,we=0,pt=le,Ye=Math.trunc(se.value+(oe+7)/8);se.value<Ye;)for(ie(Ve,we,me,se),Ve=F.c,we=F.lc;we>=14;){var it=Ve>>we-14&16383,Bt=J[it];if(Bt.len)we-=Bt.len,pe(Bt.lit,fe,Ve,we,me,z,se,be,Oe,pt),Ve=he.c,we=he.lc;else{if(!Bt.p)throw"hufDecode issues";var Qt;for(Qt=0;Qt<Bt.lit;Qt++){for(var zt=ne($[Bt.p[Qt]]);we<zt&&se.value<Ye;)ie(Ve,we,me,se),Ve=F.c,we=F.lc;if(we>=zt&&Y($[Bt.p[Qt]])==(Ve>>we-zt&(1<<zt)-1)){we-=zt,pe(Bt.p[Qt],fe,Ve,we,me,z,se,be,Oe,pt),Ve=he.c,we=he.lc;break}}if(Qt==Bt.lit)throw"hufDecode issues"}}var sn=8-oe&7;for(Ve>>=sn,we-=sn;we>0;){var Bt=J[Ve<<14-we&16383];if(Bt.len)we-=Bt.len,pe(Bt.lit,fe,Ve,we,me,z,se,be,Oe,pt),Ve=he.c,we=he.lc;else throw"hufDecode issues"}return!0}function gt($,J,me,z,se,oe){var fe={value:0},le=me.value,be=Ke(J,me),Oe=Ke(J,me);me.value+=4;var Ve=Ke(J,me);if(me.value+=4,be<0||be>=65537||Oe<0||Oe>=65537)throw"Something wrong with HUF_ENCSIZE";var we=new Array(65537),pt=new Array(16384);G(pt);var Ye=z-(me.value-le);if(ee($,J,me,Ye,be,Oe,we),Ve>8*(z-(me.value-le)))throw"Something wrong with hufUncompress";Q(we,be,Oe,pt),bt(we,pt,$,J,me,Ve,Oe,oe,se,fe)}function ue($,J,me){for(var z=0;z<me;++z)J[z]=$[J[z]]}function Ne($){for(var J=1;J<$.length;J++){var me=$[J-1]+$[J]-128;$[J]=me}}function ke($,J){for(var me=0,z=Math.floor(($.length+1)/2),se=0,oe=$.length-1;!(se>oe||(J[se++]=$[me++],se>oe));)J[se++]=$[z++]}function Ze($){for(var J=$.byteLength,me=new Array,z=0,se=new DataView($);J>0;){var oe=se.getInt8(z++);if(oe<0){var fe=-oe;J-=fe+1;for(var le=0;le<fe;le++)me.push(se.getUint8(z++))}else{var fe=oe;J-=2;for(var be=se.getUint8(z++),le=0;le<fe+1;le++)me.push(be)}}return me}function We($,J,me,z,se,oe){var vn=new DataView(oe.buffer),fe=me[$.idx[0]].width,le=me[$.idx[0]].height,be=3,Oe=Math.floor(fe/8),Ve=Math.ceil(fe/8),we=Math.ceil(le/8),pt=fe-(Ve-1)*8,Ye=le-(we-1)*8,it={value:0},Bt=new Array(be),Qt=new Array(be),zt=new Array(be),sn=new Array(be),Et=new Array(be);for(let Pn=0;Pn<be;++Pn)Et[Pn]=J[$.idx[Pn]],Bt[Pn]=Pn<1?0:Bt[Pn-1]+Ve*we,Qt[Pn]=new Float32Array(64),zt[Pn]=new Uint16Array(64),sn[Pn]=new Uint16Array(Ve*64);for(let Pn=0;Pn<we;++Pn){var xt=8;Pn==we-1&&(xt=Ye);var mn=8;for(let Cn=0;Cn<Ve;++Cn){Cn==Ve-1&&(mn=pt);for(let Un=0;Un<be;++Un)zt[Un].fill(0),zt[Un][0]=se[Bt[Un]++],_e(it,z,zt[Un]),ft(zt[Un],Qt[Un]),dt(Qt[Un]);Rt(Qt);for(let Un=0;Un<be;++Un)Dt(Qt[Un],sn[Un],Cn*64)}let Hi=0;for(let Cn=0;Cn<be;++Cn){const Un=me[$.idx[Cn]].type;for(let mi=8*Pn;mi<8*Pn+xt;++mi){Hi=Et[Cn][mi];for(let Gs=0;Gs<Oe;++Gs){const yr=Gs*64+(mi&7)*8;vn.setUint16(Hi+0*2*Un,sn[Cn][yr+0],!0),vn.setUint16(Hi+1*2*Un,sn[Cn][yr+1],!0),vn.setUint16(Hi+2*2*Un,sn[Cn][yr+2],!0),vn.setUint16(Hi+3*2*Un,sn[Cn][yr+3],!0),vn.setUint16(Hi+4*2*Un,sn[Cn][yr+4],!0),vn.setUint16(Hi+5*2*Un,sn[Cn][yr+5],!0),vn.setUint16(Hi+6*2*Un,sn[Cn][yr+6],!0),vn.setUint16(Hi+7*2*Un,sn[Cn][yr+7],!0),Hi+=8*2*Un}}if(Oe!=Ve)for(let mi=8*Pn;mi<8*Pn+xt;++mi){const Gs=Et[Cn][mi]+8*Oe*2*Un,yr=Oe*64+(mi&7)*8;for(let Wa=0;Wa<mn;++Wa)vn.setUint16(Gs+Wa*2*Un,sn[Cn][yr+Wa],!0)}}}for(var un=new Uint16Array(fe),vn=new DataView(oe.buffer),ui=0;ui<be;++ui){me[$.idx[ui]].decoded=!0;var wi=me[$.idx[ui]].type;if(me[ui].type==2)for(var pi=0;pi<le;++pi){const Pn=Et[ui][pi];for(var Nn=0;Nn<fe;++Nn)un[Nn]=vn.getUint16(Pn+Nn*2*wi,!0);for(var Nn=0;Nn<fe;++Nn)vn.setFloat32(Pn+Nn*2*wi,qe(un[Nn]),!0)}}}function _e($,J,me){for(var z,se=1;se<64;)z=J[$.value],z==65280?se=64:z>>8==255?se+=z&255:(me[se]=z,se++),$.value++}function ft($,J){J[0]=qe($[0]),J[1]=qe($[1]),J[2]=qe($[5]),J[3]=qe($[6]),J[4]=qe($[14]),J[5]=qe($[15]),J[6]=qe($[27]),J[7]=qe($[28]),J[8]=qe($[2]),J[9]=qe($[4]),J[10]=qe($[7]),J[11]=qe($[13]),J[12]=qe($[16]),J[13]=qe($[26]),J[14]=qe($[29]),J[15]=qe($[42]),J[16]=qe($[3]),J[17]=qe($[8]),J[18]=qe($[12]),J[19]=qe($[17]),J[20]=qe($[25]),J[21]=qe($[30]),J[22]=qe($[41]),J[23]=qe($[43]),J[24]=qe($[9]),J[25]=qe($[11]),J[26]=qe($[18]),J[27]=qe($[24]),J[28]=qe($[31]),J[29]=qe($[40]),J[30]=qe($[44]),J[31]=qe($[53]),J[32]=qe($[10]),J[33]=qe($[19]),J[34]=qe($[23]),J[35]=qe($[32]),J[36]=qe($[39]),J[37]=qe($[45]),J[38]=qe($[52]),J[39]=qe($[54]),J[40]=qe($[20]),J[41]=qe($[22]),J[42]=qe($[33]),J[43]=qe($[38]),J[44]=qe($[46]),J[45]=qe($[51]),J[46]=qe($[55]),J[47]=qe($[60]),J[48]=qe($[21]),J[49]=qe($[34]),J[50]=qe($[37]),J[51]=qe($[47]),J[52]=qe($[50]),J[53]=qe($[56]),J[54]=qe($[59]),J[55]=qe($[61]),J[56]=qe($[35]),J[57]=qe($[36]),J[58]=qe($[48]),J[59]=qe($[49]),J[60]=qe($[57]),J[61]=qe($[58]),J[62]=qe($[62]),J[63]=qe($[63])}function dt($){const J=.5*Math.cos(.7853975),me=.5*Math.cos(3.14159/16),z=.5*Math.cos(3.14159/8),se=.5*Math.cos(3*3.14159/16),oe=.5*Math.cos(5*3.14159/16),fe=.5*Math.cos(3*3.14159/8),le=.5*Math.cos(7*3.14159/16);for(var be=new Array(4),Oe=new Array(4),Ve=new Array(4),we=new Array(4),pt=0;pt<8;++pt){var Ye=pt*8;be[0]=z*$[Ye+2],be[1]=fe*$[Ye+2],be[2]=z*$[Ye+6],be[3]=fe*$[Ye+6],Oe[0]=me*$[Ye+1]+se*$[Ye+3]+oe*$[Ye+5]+le*$[Ye+7],Oe[1]=se*$[Ye+1]-le*$[Ye+3]-me*$[Ye+5]-oe*$[Ye+7],Oe[2]=oe*$[Ye+1]-me*$[Ye+3]+le*$[Ye+5]+se*$[Ye+7],Oe[3]=le*$[Ye+1]-oe*$[Ye+3]+se*$[Ye+5]-me*$[Ye+7],Ve[0]=J*($[Ye+0]+$[Ye+4]),Ve[3]=J*($[Ye+0]-$[Ye+4]),Ve[1]=be[0]+be[3],Ve[2]=be[1]-be[2],we[0]=Ve[0]+Ve[1],we[1]=Ve[3]+Ve[2],we[2]=Ve[3]-Ve[2],we[3]=Ve[0]-Ve[1],$[Ye+0]=we[0]+Oe[0],$[Ye+1]=we[1]+Oe[1],$[Ye+2]=we[2]+Oe[2],$[Ye+3]=we[3]+Oe[3],$[Ye+4]=we[3]-Oe[3],$[Ye+5]=we[2]-Oe[2],$[Ye+6]=we[1]-Oe[1],$[Ye+7]=we[0]-Oe[0]}for(var it=0;it<8;++it)be[0]=z*$[16+it],be[1]=fe*$[16+it],be[2]=z*$[48+it],be[3]=fe*$[48+it],Oe[0]=me*$[8+it]+se*$[24+it]+oe*$[40+it]+le*$[56+it],Oe[1]=se*$[8+it]-le*$[24+it]-me*$[40+it]-oe*$[56+it],Oe[2]=oe*$[8+it]-me*$[24+it]+le*$[40+it]+se*$[56+it],Oe[3]=le*$[8+it]-oe*$[24+it]+se*$[40+it]-me*$[56+it],Ve[0]=J*($[it]+$[32+it]),Ve[3]=J*($[it]-$[32+it]),Ve[1]=be[0]+be[3],Ve[2]=be[1]-be[2],we[0]=Ve[0]+Ve[1],we[1]=Ve[3]+Ve[2],we[2]=Ve[3]-Ve[2],we[3]=Ve[0]-Ve[1],$[0+it]=we[0]+Oe[0],$[8+it]=we[1]+Oe[1],$[16+it]=we[2]+Oe[2],$[24+it]=we[3]+Oe[3],$[32+it]=we[3]-Oe[3],$[40+it]=we[2]-Oe[2],$[48+it]=we[1]-Oe[1],$[56+it]=we[0]-Oe[0]}function Rt($){for(var J=0;J<64;++J){var me=$[0][J],z=$[1][J],se=$[2][J];$[0][J]=me+1.5747*se,$[1][J]=me-.1873*z-.4682*se,$[2][J]=me+1.8556*z}}function Dt($,J,me){for(var z=0;z<64;++z)J[me+z]=Wp.toHalfFloat(gn($[z]))}function gn($){return $<=1?Math.sign($)*Math.pow(Math.abs($),2.2):Math.sign($)*Math.pow(I,Math.abs($)-1)}function Z($){return new DataView($.array.buffer,$.offset.value,$.size)}function j($){var J=$.viewer.buffer.slice($.offset.value,$.offset.value+$.size),me=new Uint8Array(Ze(J)),z=new Uint8Array(me.length);return Ne(me),ke(me,z),new DataView(z.buffer)}function Ee($){var J=$.array.slice($.offset.value,$.offset.value+$.size),me=bx(J),z=new Uint8Array(me.length);return Ne(me),ke(me,z),new DataView(z.buffer)}function Xe($){for(var J=$.viewer,me={value:$.offset.value},z=new Uint16Array($.width*$.scanlineBlockSize*($.channels*$.type)),se=new Uint8Array(8192),oe=0,fe=new Array($.channels),le=0;le<$.channels;le++)fe[le]={},fe[le].start=oe,fe[le].end=fe[le].start,fe[le].nx=$.width,fe[le].ny=$.lines,fe[le].size=$.type,oe+=fe[le].nx*fe[le].ny*fe[le].size;var be=ve(J,me),Oe=ve(J,me);if(Oe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(be<=Oe)for(var le=0;le<Oe-be+1;le++)se[le+be]=$t(J,me);var Ve=new Uint16Array(65536),we=D(se,Ve),pt=Ke(J,me);gt($.array,J,me,pt,z,oe);for(var le=0;le<$.channels;++le)for(var Ye=fe[le],it=0;it<fe[le].size;++it)lt(z,Ye.start+it,Ye.nx,Ye.size,Ye.ny,Ye.nx*Ye.size,we);ue(Ve,z,oe);for(var Bt=0,Qt=new Uint8Array(z.buffer.byteLength),zt=0;zt<$.lines;zt++)for(var sn=0;sn<$.channels;sn++){var Ye=fe[sn],Et=Ye.nx*Ye.size,xt=new Uint8Array(z.buffer,Ye.end*2,Et*2);Qt.set(xt,Bt),Bt+=Et*2,Ye.end+=Et}return new DataView(Qt.buffer)}function He($){var J=$.array.slice($.offset.value,$.offset.value+$.size),me=bx(J);const z=$.lines*$.channels*$.width,se=$.type==1?new Uint16Array(z):new Uint32Array(z);let oe=0,fe=0;const le=new Array(4);for(let be=0;be<$.lines;be++)for(let Oe=0;Oe<$.channels;Oe++){let Ve=0;switch($.type){case 1:le[0]=oe,le[1]=le[0]+$.width,oe=le[1]+$.width;for(let we=0;we<$.width;++we){const pt=me[le[0]++]<<8|me[le[1]++];Ve+=pt,se[fe]=Ve,fe++}break;case 2:le[0]=oe,le[1]=le[0]+$.width,le[2]=le[1]+$.width,oe=le[2]+$.width;for(let we=0;we<$.width;++we){const pt=me[le[0]++]<<24|me[le[1]++]<<16|me[le[2]++]<<8;Ve+=pt,se[fe]=Ve,fe++}break}}return new DataView(se.buffer)}function Je($){var J=$.viewer,me={value:$.offset.value},z=new Uint8Array($.width*$.lines*($.channels*$.type*2)),se={version:Mt(J,me),unknownUncompressedSize:Mt(J,me),unknownCompressedSize:Mt(J,me),acCompressedSize:Mt(J,me),dcCompressedSize:Mt(J,me),rleCompressedSize:Mt(J,me),rleUncompressedSize:Mt(J,me),rleRawSize:Mt(J,me),totalAcUncompressedCount:Mt(J,me),totalDcUncompressedCount:Mt(J,me),acCompression:Mt(J,me)};if(se.version<2)throw"EXRLoader.parse: "+on.compression+" version "+se.version+" is unsupported";for(var oe=new Array,fe=ve(J,me)-2;fe>0;){var le=St(J.buffer,me),be=$t(J,me),Oe=be>>2&3,Ve=(be>>4)-1,we=new Int8Array([Ve])[0],pt=$t(J,me);oe.push({name:le,index:we,type:pt,compression:Oe}),fe-=le.length+3}for(var Ye=on.channels,it=new Array($.channels),Bt=0;Bt<$.channels;++Bt){var Qt=it[Bt]={},zt=Ye[Bt];Qt.name=zt.name,Qt.compression=0,Qt.decoded=!1,Qt.type=zt.pixelType,Qt.pLinear=zt.pLinear,Qt.width=$.width,Qt.height=$.lines}for(var sn={idx:new Array(3)},Et=0;Et<$.channels;++Et)for(var Qt=it[Et],Bt=0;Bt<oe.length;++Bt){var xt=oe[Bt];Qt.name==xt.name&&(Qt.compression=xt.compression,xt.index>=0&&(sn.idx[xt.index]=Et),Qt.offset=Et)}if(se.acCompressedSize>0)switch(se.acCompression){case 0:var vn=new Uint16Array(se.totalAcUncompressedCount);gt($.array,J,me,se.acCompressedSize,vn,se.totalAcUncompressedCount);break;case 1:var mn=$.array.slice(me.value,me.value+se.totalAcUncompressedCount),un=bx(mn),vn=new Uint16Array(un.buffer);me.value+=se.totalAcUncompressedCount;break}if(se.dcCompressedSize>0){var ui={array:$.array,offset:me,size:se.dcCompressedSize},wi=new Uint16Array(Ee(ui).buffer);me.value+=se.dcCompressedSize}if(se.rleRawSize>0){var mn=$.array.slice(me.value,me.value+se.rleCompressedSize),un=bx(mn),pi=Ze(un.buffer);me.value+=se.rleCompressedSize}for(var Nn=0,Pn=new Array(it.length),Bt=0;Bt<Pn.length;++Bt)Pn[Bt]=new Array;for(var Hi=0;Hi<$.lines;++Hi)for(var Cn=0;Cn<it.length;++Cn)Pn[Cn].push(Nn),Nn+=it[Cn].width*$.type*2;We(sn,Pn,it,vn,wi,z);for(var Bt=0;Bt<it.length;++Bt){var Qt=it[Bt];if(!Qt.decoded)switch(Qt.compression){case 2:for(var Un=0,mi=0,Hi=0;Hi<$.lines;++Hi){for(var Gs=Pn[Bt][Un],yr=0;yr<Qt.width;++yr){for(var Wa=0;Wa<2*Qt.type;++Wa)z[Gs++]=pi[mi+Wa*Qt.width*Qt.height];mi++}Un++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(z.buffer)}function St($,J){for(var me=new Uint8Array($),z=0;me[J.value+z]!=0;)z+=1;var se=new TextDecoder().decode(me.slice(J.value,J.value+z));return J.value=J.value+z+1,se}function nt($,J,me){var z=new TextDecoder().decode(new Uint8Array($).slice(J.value,J.value+me));return J.value=J.value+me,z}function vt($,J){var me=cn($,J),z=Ke($,J);return[me,z]}function Pt($,J){var me=Ke($,J),z=Ke($,J);return[me,z]}function cn($,J){var me=$.getInt32(J.value,!0);return J.value=J.value+4,me}function Ke($,J){var me=$.getUint32(J.value,!0);return J.value=J.value+4,me}function wn($,J){var me=$[J.value];return J.value=J.value+1,me}function $t($,J){var me=$.getUint8(J.value);return J.value=J.value+1,me}const Mt=function($,J){let me;return"getBigInt64"in DataView.prototype?me=Number($.getBigInt64(J.value,!0)):me=$.getUint32(J.value+4,!0)+Number($.getUint32(J.value,!0)<<32),J.value+=8,me};function At($,J){var me=$.getFloat32(J.value,!0);return J.value+=4,me}function et($,J){return Wp.toHalfFloat(At($,J))}function qe($){var J=($&31744)>>10,me=$&1023;return($>>15?-1:1)*(J?J===31?me?NaN:1/0:Math.pow(2,J-15)*(1+me/1024):6103515625e-14*(me/1024))}function ve($,J){var me=$.getUint16(J.value,!0);return J.value+=2,me}function yt($,J){return qe(ve($,J))}function rt($,J,me,z){for(var se=me.value,oe=[];me.value<se+z-1;){var fe=St(J,me),le=cn($,me),be=$t($,me);me.value+=3;var Oe=cn($,me),Ve=cn($,me);oe.push({name:fe,pixelType:le,pLinear:be,xSampling:Oe,ySampling:Ve})}return me.value+=1,oe}function ze($,J){var me=At($,J),z=At($,J),se=At($,J),oe=At($,J),fe=At($,J),le=At($,J),be=At($,J),Oe=At($,J);return{redX:me,redY:z,greenX:se,greenY:oe,blueX:fe,blueY:le,whiteX:be,whiteY:Oe}}function ut($,J){var me=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],z=$t($,J);return me[z]}function qt($,J){var me=Ke($,J),z=Ke($,J),se=Ke($,J),oe=Ke($,J);return{xMin:me,yMin:z,xMax:se,yMax:oe}}function En($,J){var me=["INCREASING_Y"],z=$t($,J);return me[z]}function Ft($,J){var me=At($,J),z=At($,J);return[me,z]}function kt($,J){var me=At($,J),z=At($,J),se=At($,J);return[me,z,se]}function Ut($,J,me,z,se){if(z==="string"||z==="stringvector"||z==="iccProfile")return nt(J,me,se);if(z==="chlist")return rt($,J,me,se);if(z==="chromaticities")return ze($,me);if(z==="compression")return ut($,me);if(z==="box2i")return qt($,me);if(z==="lineOrder")return En($,me);if(z==="float")return At($,me);if(z==="v2f")return Ft($,me);if(z==="v3f")return kt($,me);if(z==="int")return cn($,me);if(z==="rational")return vt($,me);if(z==="timecode")return Pt($,me);if(z==="preview")return me.value+=se,"skipped";me.value+=se}function at($,J,me){const z={};if($.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";z.version=$.getUint8(4);const se=$.getUint8(5);z.spec={singleTile:!!(se&2),longName:!!(se&4),deepFormat:!!(se&8),multiPart:!!(se&16)},me.value=8;for(var oe=!0;oe;){var fe=St(J,me);if(fe==0)oe=!1;else{var le=St(J,me),be=Ke($,me),Oe=Ut($,J,me,le,be);Oe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${le}'.`):z[fe]=Oe}}if(se&-5)throw console.error("EXRHeader:",z),"THREE.EXRLoader: provided file is currently unsupported.";return z}function Jt($,J,me,z,se){const oe={size:0,viewer:J,array:me,offset:z,width:$.dataWindow.xMax-$.dataWindow.xMin+1,height:$.dataWindow.yMax-$.dataWindow.yMin+1,channels:$.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:$.channels[0].pixelType,uncompress:null,getter:null,format:null,[fx?"colorSpace":"encoding"]:null};switch($.compression){case"NO_COMPRESSION":oe.lines=1,oe.uncompress=Z;break;case"RLE_COMPRESSION":oe.lines=1,oe.uncompress=j;break;case"ZIPS_COMPRESSION":oe.lines=1,oe.uncompress=Ee;break;case"ZIP_COMPRESSION":oe.lines=16,oe.uncompress=Ee;break;case"PIZ_COMPRESSION":oe.lines=32,oe.uncompress=Xe;break;case"PXR24_COMPRESSION":oe.lines=16,oe.uncompress=He;break;case"DWAA_COMPRESSION":oe.lines=32,oe.uncompress=Je;break;case"DWAB_COMPRESSION":oe.lines=256,oe.uncompress=Je;break;default:throw"EXRLoader.parse: "+$.compression+" is unsupported"}if(oe.scanlineBlockSize=oe.lines,oe.type==1)switch(se){case Wr:oe.getter=yt,oe.inputSize=2;break;case ys:oe.getter=ve,oe.inputSize=2;break}else if(oe.type==2)switch(se){case Wr:oe.getter=At,oe.inputSize=4;break;case ys:oe.getter=et,oe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+oe.type+" for "+$.compression+".";oe.blockCount=($.dataWindow.yMax+1)/oe.scanlineBlockSize;for(var fe=0;fe<oe.blockCount;fe++)Mt(J,z);oe.outputChannels=oe.channels==3?4:oe.channels;const le=oe.width*oe.height*oe.outputChannels;switch(se){case Wr:oe.byteArray=new Float32Array(le),oe.channels<oe.outputChannels&&oe.byteArray.fill(1,0,le);break;case ys:oe.byteArray=new Uint16Array(le),oe.channels<oe.outputChannels&&oe.byteArray.fill(15360,0,le);break;default:console.error("THREE.EXRLoader: unsupported type: ",se);break}return oe.bytesPerLine=oe.width*oe.inputSize*oe.channels,oe.outputChannels==4?oe.format=ts:oe.format=$D,fx?oe.colorSpace="srgb-linear":oe.encoding=3e3,oe}const Kt=new DataView(e),rn=new Uint8Array(e),Qn={value:0},on=at(Kt,e,Qn),Gt=Jt(on,Kt,rn,Qn,this.type),Ii={value:0},ci={R:0,G:1,B:2,A:3,Y:0};for(let $=0;$<Gt.height/Gt.scanlineBlockSize;$++){const J=Ke(Kt,Qn);Gt.size=Ke(Kt,Qn),Gt.lines=J+Gt.scanlineBlockSize>Gt.height?Gt.height-J:Gt.scanlineBlockSize;const z=Gt.size<Gt.lines*Gt.bytesPerLine?Gt.uncompress(Gt):Z(Gt);Qn.value+=Gt.size;for(let se=0;se<Gt.scanlineBlockSize;se++){const oe=se+$*Gt.scanlineBlockSize;if(oe>=Gt.height)break;for(let fe=0;fe<Gt.channels;fe++){const le=ci[on.channels[fe].name];for(let be=0;be<Gt.width;be++){Ii.value=(se*(Gt.channels*Gt.width)+fe*Gt.width+be)*Gt.inputSize;const Oe=(Gt.height-1-oe)*(Gt.width*Gt.outputChannels)+be*Gt.outputChannels+le;Gt.byteArray[Oe]=Gt.getter(z,Ii)}}}}return{header:on,width:Gt.width,height:Gt.height,data:Gt.byteArray,format:Gt.format,[fx?"colorSpace":"encoding"]:Gt[fx?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){fx?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=oi,o.magFilter=oi,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const XC=new WeakMap;class aue extends as{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new rs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(XC.has(e)){const l=XC.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),XC.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Mn;e.index&&t.setIndex(new Jn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Jn(o,a))}return t}_loadLibrary(e,t){const i=new rs(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=lue.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function lue(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,p=new f.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(f,h,p,c),v=g.attributes.map(_=>_.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(p),f.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,p;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)h=new o.Mesh,p=a.DecodeBufferToMesh(l,h);else if(g===o.POINT_CLOUD)h=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const v={index:null,attributes:[]};for(const _ in u){const S=self[f[_]];let A,T;if(c.useUniqueIDs)T=u[_],A=a.GetAttributeByUniqueId(h,T);else{if(T=a.GetAttributeId(h,o[u[_]]),T===-1)continue;A=a.GetAttribute(h,T)}v.attributes.push(r(o,a,h,_,S,A))}return g===o.TRIANGULAR_MESH&&(v.index=i(o,a,h)),o.destroy(h),v}function i(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const p=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:p,itemSize:1}}function r(o,a,l,c,u,f){const h=f.num_components(),g=l.num_points()*h,v=g*u.BYTES_PER_ELEMENT,_=s(o,u),S=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,f,_,v,S);const A=new u(o.HEAPF32.buffer,S,g).slice();return o._free(S),{name:c,array:A,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let oA;const YC=()=>{if(oA)return oA;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const v=f.charCodeAt(g);h[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let p=0;for(let g=0;g<f.length;++g)h[p++]=h[g]<60?i[h[g]]:(h[g]-60)*64+h[++g];return h.buffer.slice(0,p)}function l(f,h,p,g,v,_){const S=s.exports.sbrk,A=p+3&-4,T=S(A*g),b=S(v.length),C=new Uint8Array(s.exports.memory.buffer);C.set(v,b);const L=f(T,p,g,b,v.length);if(L===0&&_&&_(T,A,g),h.set(C.subarray(T,T+p*g)),S(T-S(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return oA={ready:o,supported:!0,decodeVertexBuffer(f,h,p,g,v){l(s.exports.meshopt_decodeVertexBuffer,f,h,p,g,s.exports[c[v]])},decodeIndexBuffer(f,h,p,g){l(s.exports.meshopt_decodeIndexBuffer,f,h,p,g)},decodeIndexSequence(f,h,p,g){l(s.exports.meshopt_decodeIndexSequence,f,h,p,g)},decodeGltfBuffer(f,h,p,g,v,_){l(s.exports[u[v]],f,h,p,g,s.exports[c[_]])}},oA},cue=n=>typeof n=="object"&&typeof n.then=="function",Yp=[];function K6(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function X6(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Yp)if(K6(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Yp.indexOf(r);s!==-1&&Yp.splice(s,1)},promise:(cue(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Yp.push(r),!t)throw r.promise}const Y6=(n,e,t)=>X6(n,e,!1,t),uue=(n,e,t)=>void X6(n,e,!0,t),fue=n=>{if(n===void 0||n.length===0)Yp.splice(0,Yp.length);else{const e=Yp.find(t=>K6(n,t.keys,t.equal));e&&e.remove()}};let qC=null;async function hue(n){return typeof n=="string"?await(await fetch(n)).json():n}function due(n){return qC||(qC=new tue),qC.parse(n)}async function q6(n){const e=await hue(n);return due(e)}function Y2(n){return Y6(q6,[n])}Y2.preload=n=>uue(q6,[n]);Y2.clear=n=>fue([n]);const pue=["string","number"],mue=n=>{let e="";const t=[];return O.Children.forEach(n,i=>{pue.includes(typeof i)?e+=i+"":t.push(i)}),[e,...t]},gue=O.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:f,children:h,...p},g)=>{O.useMemo(()=>_b({RenamedTextGeometry:Lce}),[]);const v=O.useRef(null),_=Y2(n),S=O.useMemo(()=>({font:_,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:t}),[_,i,r,s,o,a,c,l,u,e,t]),[A,...T]=O.useMemo(()=>mue(h),[h]),b=O.useMemo(()=>[A,S],[A,S]);return O.useLayoutEffect(()=>{f&&(v.current.geometry=Ble(v.current.geometry,f),v.current.geometry.computeVertexNormals())},[b,f]),O.useImperativeHandle(g,()=>v.current,[]),O.createElement("mesh",Vi({},p,{ref:v}),O.createElement("renamedTextGeometry",{args:b}),T)});function vue(n,e,t,i){const r=class extends fo{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[c,u])=>{const f=n2.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o)}};return r.key=Gn.generateUUID(),r}const JC=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function Nm(n,e){const t=Ml(s=>s.gl),i=Uo(Hv,JC(n)?Object.values(n):n);return O.useLayoutEffect(()=>{e==null||e(i)},[e]),O.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof ri?s=[i]:JC(i)&&(s=Object.values(i)),s.forEach(o=>{o instanceof ri&&t.initTexture(o)})}},[t,i]),O.useMemo(()=>{if(JC(n)){const s={};let o=0;for(const a in n)s[a]=i[o++];return s}else return i},[n,i])}Nm.preload=n=>Uo.preload(Hv,n);Nm.clear=n=>Uo.clear(Hv,n);let aA=null,J6="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Q6(n=!0,e=!0,t){return i=>{t&&t(i),n&&(aA||(aA=new aue),aA.setDecoderPath(typeof n=="string"?n:J6),i.setDRACOLoader(aA)),e&&i.setMeshoptDecoder(typeof YC=="function"?YC():YC)}}const Rr=(n,e,t,i)=>Uo(K2,n,Q6(e,t,i));Rr.preload=(n,e,t,i)=>Uo.preload(K2,n,Q6(e,t,i));Rr.clear=n=>Uo.clear(K2,n);Rr.setDecoderPath=n=>{J6=n};function cd(n){return Uo(X2,n)}cd.preload=n=>Uo.preload(X2,n);cd.clear=n=>Uo.clear(X2,n);const yue="modulepreload",xue=function(n){return"/portfolio-website/"+n},RU={},_ue=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=xue(l),l in RU)return;RU[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":yue,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Sue(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Z6={exports:{}};(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");return f.path=a.normalizePath(f.path),a.buildURLFromParts(f)}var h=a.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=a.normalizePath(h.path),a.buildURLFromParts(h)):c;var p=a.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var g=r.exec(p.path);p.netLoc=g[1],p.path=g[2]}p.netLoc&&!p.path&&(p.path="/");var v={scheme:p.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(v.netLoc=p.netLoc,h.path[0]!=="/"))if(!h.path)v.path=p.path,h.params||(v.params=p.params,h.query||(v.query=p.query));else{var _=p.path,S=_.substring(0,_.lastIndexOf("/")+1)+h.path;v.path=a.normalizePath(S)}return v.path===null&&(v.path=u.alwaysNormalize?a.normalizePath(h.path):h.path),a.buildURLFromParts(v)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=a})()})(Z6);var q2=Z6.exports;function PU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _s(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(t),!0).forEach(function(i){Tue(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PU(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Eue(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Aue(n){var e=Eue(n,"string");return typeof e=="symbol"?e:String(e)}function Tue(n,e,t){return e=Aue(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jr(){return jr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},jr.apply(this,arguments)}const jt=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},wue=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=bue},bue=Number.MAX_SAFE_INTEGER||9007199254740991;let K=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n}({}),_n=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),Ue=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const Ip=function(){},WI={trace:Ip,debug:Ip,log:Ip,warn:Ip,info:Ip,error:Ip};let Jx=WI;function Mue(n){const e=self.console[n];return e?e.bind(self.console,`[${n}] >`):Ip}function Cue(n,...e){e.forEach(function(t){Jx[t]=n[t]?n[t].bind(n):Mue(t)})}function Rue(n,e){if(typeof console=="object"&&n===!0||typeof n=="object"){Cue(n,"debug","log","info","warn","error");try{Jx.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{Jx=WI}}else Jx=WI}const Ce=Jx,Pue=/^(\d+)x(\d+)$/,IU=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Yi{constructor(e){typeof e=="string"&&(e=Yi.parseAttrList(e)),jr(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(r*2,r*2+2),16);return i}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Pue.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const i={},r='"';for(IU.lastIndex=0;(t=IU.exec(e))!==null;){let s=t[2];s.indexOf(r)===0&&s.lastIndexOf(r)===s.length-1&&(s=s.slice(1,-1));const o=t[1].trim();i[o]=s}return i}}function Iue(n){return n!=="ID"&&n!=="CLASS"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function Lue(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"}class J2{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const i=t.attr;for(const r in i)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==i[r]){Ce.warn(`DATERANGE tag attribute: "${r}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=r;break}e=jr(new Yi({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=new Date(this.attr["END-DATE"]);jt(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(jt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&jt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Y1{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var xi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Q2{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[xi.AUDIO]:null,[xi.VIDEO]:null,[xi.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const i=e.split("@",2);let r;i.length===1?r=(t==null?void 0:t.byteRangeEndOffset)||0:r=parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=q2.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class sT extends Q2{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Y1,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!jt(this.programDateTime))return null;const e=jt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),i=t.length;if(i>1||i===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,r,s,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:t,endPTS:i,startDTS:r,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[xi.AUDIO]=null,e[xi.VIDEO]=null,e[xi.AUDIOVIDEO]=null}}class e9 extends Q2{constructor(e,t,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Y1,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const Due=10;class t9{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?jt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Due}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Z2(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function Bue(n){const e=jI(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function kue(n){const e=function(i,r,s){const o=i[r];i[r]=i[s],i[s]=o};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function Oue(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),r=i[i.length-1].split(",");if(r.length===2){const s=r[0]==="base64",o=r[1];s?(i.splice(-1,1),t=Z2(o)):t=Bue(o)}}return t}function jI(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}const xv=typeof self<"u"?self:void 0;var fi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Io={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function QC(n){switch(n){case Io.FAIRPLAY:return fi.FAIRPLAY;case Io.PLAYREADY:return fi.PLAYREADY;case Io.WIDEVINE:return fi.WIDEVINE;case Io.CLEARKEY:return fi.CLEARKEY}}var lA={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function ZC(n){if(n===lA.WIDEVINE)return fi.WIDEVINE;if(n===lA.PLAYREADY)return fi.PLAYREADY;if(n===lA.CENC||n===lA.CLEARKEY)return fi.CLEARKEY}function eR(n){switch(n){case fi.FAIRPLAY:return Io.FAIRPLAY;case fi.PLAYREADY:return Io.PLAYREADY;case fi.WIDEVINE:return Io.WIDEVINE;case fi.CLEARKEY:return Io.CLEARKEY}}function cA(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[fi.FAIRPLAY,fi.WIDEVINE,fi.PLAYREADY,fi.CLEARKEY].filter(r=>!!e[r]):[];return!i[fi.WIDEVINE]&&t&&i.push(fi.WIDEVINE),i}const n9=function(n){return xv!=null&&(n=xv.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Fue(n,e,t,i){let r;switch(n){case fi.FAIRPLAY:r=["cenc","sinf"];break;case fi.WIDEVINE:case fi.PLAYREADY:r=["cenc"];break;case fi.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return Nue(r,e,t,i)}function Nue(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function i9(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),o=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=Z2(a).subarray(0,16);return kue(l),l}}return null}function om(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const eB=(n,e)=>e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,r9=(n,e)=>e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,K_=(n,e)=>{const t=e;let i=0;for(;eB(n,e);){i+=10;const r=Pb(n,e+6);i+=r,r9(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)},Pb=(n,e)=>{let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t},Uue=(n,e)=>eB(n,e)&&Pb(n,e+6)+10<=n.length-e,tB=n=>{const e=o9(n);for(let t=0;t<e.length;t++){const i=e[t];if(s9(i))return Wue(i)}},s9=n=>n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp",Gue=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=Pb(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}},o9=n=>{let e=0;const t=[];for(;eB(n,e);){const i=Pb(n,e+6);e+=10;const r=e+i;for(;e+8<r;){const s=Gue(n.subarray(e)),o=Vue(s);o&&t.push(o),e+=s.size+10}r9(n,e)&&(e+=10)}return t},Vue=n=>n.type==="PRIV"?Hue(n):n.type[0]==="W"?$ue(n):zue(n),Hue=n=>{if(n.size<2)return;const e=nu(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},zue=n=>{if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=nu(n.data.subarray(t),!0);t+=i.length+1;const r=nu(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=nu(n.data.subarray(1));return{key:n.type,data:e}},$ue=n=>{if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=nu(n.data.subarray(t),!0);t+=i.length+1;const r=nu(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=nu(n.data);return{key:n.type,data:e}},Wue=n=>{if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}},nu=(n,e=!1)=>{const t=jue();if(t){const c=t.decode(n);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const i=n.length;let r,s,o,a="",l=0;for(;l<i;){if(r=n[l++],r===0&&e)return a;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:s=n[l++],a+=String.fromCharCode((r&31)<<6|s&63);break;case 14:s=n[l++],o=n[l++],a+=String.fromCharCode((r&15)<<12|(s&63)<<6|(o&63)<<0);break}}return a};let tR;function jue(){if(!navigator.userAgent.includes("PlayStation 4"))return!tR&&typeof self.TextDecoder<"u"&&(tR=new self.TextDecoder("utf-8")),tR}const Vc={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}},zT=Math.pow(2,32)-1,Kue=[].push,a9={video:1,audio:2,id3:3,text:4};function Qr(n){return String.fromCharCode.apply(null,n)}function l9(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function dn(n,e){const t=c9(n,e);return t<0?4294967296+t:t}function LU(n,e){let t=dn(n,e);return t*=Math.pow(2,32),t+=dn(n,e+4),t}function c9(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function nR(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function Xue(n){const e=n.byteLength;for(let t=0;t<e;){const i=dn(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function Ln(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let r=0;r<i;){const s=dn(n,r),o=Qr(n.subarray(r+4,r+8)),a=s>1?r+s:i;if(o===e[0])if(e.length===1)t.push(n.subarray(r+8,a));else{const l=Ln(n.subarray(r+8,a),e.slice(1));l.length&&Kue.apply(t,l)}r=a}return t}function Yue(n){const e=[],t=n[0];let i=8;const r=dn(n,i);i+=4;let s=0,o=0;t===0?(s=dn(n,i),o=dn(n,i+4),i+=8):(s=LU(n,i),o=LU(n,i+8),i+=16),i+=2;let a=n.length+o;const l=l9(n,i);i+=2;for(let c=0;c<l;c++){let u=i;const f=dn(n,u);u+=4;const h=f&2147483647;if((f&2147483648)>>>31===1)return Ce.warn("SIDX has hierarchical references (not supported)"),null;const g=dn(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:g,info:{duration:g/r,start:a,end:a+h-1}}),a+=h,u+=4,i=u}return{earliestPresentationTime:s,timescale:r,version:t,referencesCount:l,references:e}}function u9(n){const e=[],t=Ln(n,["moov","trak"]);for(let r=0;r<t.length;r++){const s=t[r],o=Ln(s,["tkhd"])[0];if(o){let a=o[0];const l=dn(o,a===0?12:20),c=Ln(s,["mdia","mdhd"])[0];if(c){a=c[0];const u=dn(c,a===0?12:20),f=Ln(s,["mdia","hdlr"])[0];if(f){const h=Qr(f.subarray(8,12)),p={soun:xi.AUDIO,vide:xi.VIDEO}[h];if(p){const g=Ln(s,["mdia","minf","stbl","stsd"])[0],v=que(g);e[l]={timescale:u,type:p},e[p]=_s({timescale:u,id:l},v)}}}}}return Ln(n,["moov","mvex","trex"]).forEach(r=>{const s=dn(r,4),o=e[s];o&&(o.default={duration:dn(r,12),flags:dn(r,20)})}),e}function que(n){const e=n.subarray(8),t=e.subarray(86),i=Qr(e.subarray(4,8));let r=i;const s=i==="enca"||i==="encv";if(s){const a=Ln(e,[i])[0].subarray(i==="enca"?28:78);Ln(a,["sinf"]).forEach(c=>{const u=Ln(c,["schm"])[0];if(u){const f=Qr(u.subarray(4,8));if(f==="cbcs"||f==="cenc"){const h=Ln(c,["frma"])[0];h&&(r=Qr(h))}}})}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const o=Ln(t,["avcC"])[0];r+="."+uA(o[1])+uA(o[2])+uA(o[3]);break}case"mp4a":{const o=Ln(e,[i])[0],a=Ln(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=iR(a,l),l+=2;const c=a[l++];if(c&128&&(l+=2),c&64&&(l+=a[l++]),a[l++]!==4)break;l=iR(a,l);const u=a[l++];if(u===64)r+="."+uA(u);else break;if(l+=12,a[l++]!==5)break;l=iR(a,l);const f=a[l++];let h=(f&248)>>3;h===31&&(h+=1+((f&7)<<3)+((a[l]&224)>>5)),r+="."+h}break}case"hvc1":case"hev1":{const o=Ln(t,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],c=a&31,u=dn(o,2),f=(a&32)>>5?"H":"L",h=o[12],p=o.subarray(6,12);r+="."+l+c,r+="."+u.toString(16).toUpperCase(),r+="."+f+h;let g="";for(let v=p.length;v--;){const _=p[v];(_||g)&&(g="."+_.toString(16).toUpperCase()+g)}r+=g;break}case"dvh1":case"dvhe":{const o=Ln(t,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;r+="."+Oc(a)+"."+Oc(l);break}case"vp09":{const o=Ln(t,["vpcC"])[0],a=o[4],l=o[5],c=o[6]>>4&15;r+="."+Oc(a)+"."+Oc(l)+"."+Oc(c);break}case"av01":{const o=Ln(t,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,c=o[2]>>>7?"H":"M",u=(o[2]&64)>>6,f=(o[2]&32)>>5,h=a===2&&u?f?12:10:u?10:8,p=(o[2]&16)>>4,g=(o[2]&8)>>3,v=(o[2]&4)>>2,_=o[2]&3;r+="."+a+"."+Oc(l)+c+"."+Oc(h)+"."+p+"."+g+v+_+"."+Oc(1)+"."+Oc(1)+"."+Oc(1)+"."+0;break}}return{codec:r,encrypted:s}}function iR(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function uA(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function Oc(n){return(n<10?"0":"")+n}function Jue(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&Ln(n,["moov","trak"]).forEach(r=>{const o=Ln(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=Ln(o,["enca"]);const l=a.length>0;l||(a=Ln(o,["encv"])),a.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);Ln(u,["sinf"]).forEach(h=>{const p=f9(h);if(p){const g=p.subarray(8,24);g.some(v=>v!==0)||(Ce.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Vc.hexDump(g)} -> ${Vc.hexDump(t)}`),p.set(t,8))}})})}),n}function f9(n){const e=Ln(n,["schm"])[0];if(e){const t=Qr(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Ln(n,["schi","tenc"])[0]}return null}function Que(n,e){return Ln(e,["moof","traf"]).reduce((t,i)=>{const r=Ln(i,["tfdt"])[0],s=r[0],o=Ln(i,["tfhd"]).reduce((a,l)=>{const c=dn(l,4),u=n[c];if(u){let f=dn(r,4);if(s===1){if(f===zT)return Ce.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;f*=zT+1,f+=dn(r,8)}const h=u.timescale||9e4,p=f/h;if(jt(p)&&(a===null||p<a))return p}return a},null);return o!==null&&jt(o)&&(t===null||o<t)?o:t},null)}function Zue(n,e){let t=0,i=0,r=0;const s=Ln(n,["moof","traf"]);for(let o=0;o<s.length;o++){const a=s[o],l=Ln(a,["tfhd"])[0],c=dn(l,4),u=e[c];if(!u)continue;const f=u.default,h=dn(l,0)|(f==null?void 0:f.flags);let p=f==null?void 0:f.duration;h&8&&(h&2?p=dn(l,12):p=dn(l,8));const g=u.timescale||9e4,v=Ln(a,["trun"]);for(let _=0;_<v.length;_++){if(t=efe(v[_]),!t&&p){const S=dn(v[_],4);t=p*S}u.type===xi.VIDEO?i+=t/g:u.type===xi.AUDIO&&(r+=t/g)}}if(i===0&&r===0){let o=1/0,a=0,l=0;const c=Ln(n,["sidx"]);for(let u=0;u<c.length;u++){const f=Yue(c[u]);if(f!=null&&f.references){o=Math.min(o,f.earliestPresentationTime/f.timescale);const h=f.references.reduce((p,g)=>p+g.info.duration||0,0);a=Math.max(a,h+f.earliestPresentationTime/f.timescale),l=a-o}}if(l&&jt(l))return l}return i||r}function efe(n){const e=dn(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let i=0;const r=dn(n,4);for(let s=0;s<r;s++){if(e&256){const o=dn(n,t);i+=o,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return i}function tfe(n,e,t){Ln(e,["moof","traf"]).forEach(i=>{Ln(i,["tfhd"]).forEach(r=>{const s=dn(r,4),o=n[s];if(!o)return;const a=o.timescale||9e4;Ln(i,["tfdt"]).forEach(l=>{const c=l[0],u=t*a;if(u){let f=dn(l,4);if(c===0)f-=u,f=Math.max(f,0),nR(l,4,f);else{f*=Math.pow(2,32),f+=dn(l,8),f-=u,f=Math.max(f,0);const h=Math.floor(f/(zT+1)),p=Math.floor(f%(zT+1));nR(l,4,h),nR(l,8,p)}}})})})}function nfe(n){const e={valid:null,remainder:null},t=Ln(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=om(n,0,i.byteOffset-8),e.remainder=om(n,i.byteOffset-8),e}function Cl(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function DU(n,e){const t=[],i=e.samples,r=e.timescale,s=e.id;let o=!1;return Ln(i,["moof"]).map(l=>{const c=l.byteOffset-8;Ln(l,["traf"]).map(f=>{const h=Ln(f,["tfdt"]).map(p=>{const g=p[0];let v=dn(p,4);return g===1&&(v*=Math.pow(2,32),v+=dn(p,8)),v/r})[0];return h!==void 0&&(n=h),Ln(f,["tfhd"]).map(p=>{const g=dn(p,4),v=dn(p,0)&16777215,_=(v&1)!==0,S=(v&2)!==0,A=(v&8)!==0;let T=0;const b=(v&16)!==0;let C=0;const L=(v&32)!==0;let P=8;g===s&&(_&&(P+=8),S&&(P+=4),A&&(T=dn(p,P),P+=4),b&&(C=dn(p,P),P+=4),L&&(P+=4),e.type==="video"&&(o=ife(e.codec)),Ln(f,["trun"]).map(k=>{const I=k[0],D=dn(k,0)&16777215,G=(D&1)!==0;let H=0;const q=(D&4)!==0,W=(D&256)!==0;let te=0;const ee=(D&512)!==0;let ne=0;const Y=(D&1024)!==0,Q=(D&2048)!==0;let F=0;const ie=dn(k,4);let he=8;G&&(H=dn(k,he),he+=4),q&&(he+=4);let pe=H+c;for(let ye=0;ye<ie;ye++){if(W?(te=dn(k,he),he+=4):te=T,ee?(ne=dn(k,he),he+=4):ne=C,Y&&(he+=4),Q&&(I===0?F=dn(k,he):F=c9(k,he),he+=4),e.type===xi.VIDEO){let Be=0;for(;Be<ne;){const Me=dn(i,pe);if(pe+=4,rfe(o,i[pe])){const Le=i.subarray(pe,pe+Me);h9(Le,o?2:1,n+F/r,t)}pe+=Me,Be+=Me+4}}n+=te/r}}))})})}),t}function ife(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function rfe(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function h9(n,e,t,i){const r=d9(n);let s=0;s+=e;let o=0,a=0,l=0;for(;s<r.length;){o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(l===255);a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(l===255);const c=r.length-s;let u=s;if(a<c)s+=a;else if(a>c){Ce.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(r[u++]===181){const h=l9(r,u);if(u+=2,h===49){const p=dn(r,u);if(u+=4,p===1195456820){const g=r[u++];if(g===3){const v=r[u++],_=31&v,S=64&v,A=S?2+_*3:0,T=new Uint8Array(A);if(S){T[0]=v;for(let b=1;b<A;b++)T[b]=r[u++]}i.push({type:g,payloadType:o,pts:t,bytes:T})}}}}}else if(o===5&&a>16){const f=[];for(let g=0;g<16;g++){const v=r[u++].toString(16);f.push(v.length==1?"0"+v:v),(g===3||g===5||g===7||g===9)&&f.push("-")}const h=a-16,p=new Uint8Array(h);for(let g=0;g<h;g++)p[g]=r[u++];i.push({payloadType:o,pts:t,uuid:f.join(""),userData:nu(p),userDataBytes:p})}}}function d9(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const r=e-t.length,s=new Uint8Array(r);let o=0;for(i=0;i<r;o++,i++)o===t[0]&&(o++,t.shift()),s[i]=n[o];return s}function sfe(n){const e=n[0];let t="",i="",r=0,s=0,o=0,a=0,l=0,c=0;if(e===0){for(;Qr(n.subarray(c,c+1))!=="\0";)t+=Qr(n.subarray(c,c+1)),c+=1;for(t+=Qr(n.subarray(c,c+1)),c+=1;Qr(n.subarray(c,c+1))!=="\0";)i+=Qr(n.subarray(c,c+1)),c+=1;i+=Qr(n.subarray(c,c+1)),c+=1,r=dn(n,12),s=dn(n,16),a=dn(n,20),l=dn(n,24),c=28}else if(e===1){c+=4,r=dn(n,c),c+=4;const f=dn(n,c);c+=4;const h=dn(n,c);for(c+=4,o=2**32*f+h,wue(o)||(o=Number.MAX_SAFE_INTEGER,Ce.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=dn(n,c),c+=4,l=dn(n,c),c+=4;Qr(n.subarray(c,c+1))!=="\0";)t+=Qr(n.subarray(c,c+1)),c+=1;for(t+=Qr(n.subarray(c,c+1)),c+=1;Qr(n.subarray(c,c+1))!=="\0";)i+=Qr(n.subarray(c,c+1)),c+=1;i+=Qr(n.subarray(c,c+1)),c+=1}const u=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:u}}function ofe(n,...e){const t=e.length;let i=8,r=t;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=i&255,s.set(n,4),r=0,i=8;r<t;r++)s.set(e[r],i),i+=e[r].byteLength;return s}function afe(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,r;i=0,r=new Uint8Array;let s;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(o.buffer).setUint32(0,t.byteLength,!1),ofe([112,115,115,104],new Uint8Array([i,0,0,0]),n,s,r,o,t||new Uint8Array)}function lfe(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const r=new DataView(n,i),s=cfe(r);e.push(s),i+=s.size}}return e}function cfe(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const s=n.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const o=n.buffer,a=Vc.hexDump(new Uint8Array(o,t+12,16)),l=n.getUint32(28);let c=null,u=null;if(s===0){if(e-32<l||l<22)return{offset:t,size:e};u=new Uint8Array(o,t+32,l)}else if(s===1){if(!l||i<t+32+l*16+16)return{offset:t,size:e};c=[];for(let f=0;f<l;f++)c.push(new Uint8Array(o,t+32+f*16,16))}return{version:s,systemId:a,kids:c,data:u,offset:t,size:e}}let fA={};class _v{static clearKeyUriToKeyIdMap(){fA={}}constructor(e,t,i,r=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Io.FAIRPLAY:case Io.WIDEVINE:case Io.PLAYREADY:case Io.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&Ce.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=ufe(e);return new _v(this.method,this.uri,"identity",this.keyFormatVersions,i)}const t=Oue(this.uri);if(t)switch(this.keyFormat){case Io.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Io.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=afe(i,null,t),this.keyId=i9(t);break}default:{let i=t.subarray(0,16);if(i.length!==16){const r=new Uint8Array(16);r.set(i,16-i.length),i=r}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=fA[this.uri];if(!i){const r=Object.keys(fA).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,r),fA[this.uri]=i}this.keyId=i}return this}}function ufe(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const p9=/\{\$([a-zA-Z0-9-_]+)\}/g;function BU(n){return p9.test(n)}function ia(n,e,t){if(n.variableList!==null||n.hasVariableRefs)for(let i=t.length;i--;){const r=t[i],s=e[r];s&&(e[r]=KI(n,s))}}function KI(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(p9,i=>{const r=i.substring(2,i.length-1),s=t==null?void 0:t[r];return s===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function kU(n,e,t){let i=n.variableList;i||(n.variableList=i={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const o=new self.URL(t).searchParams;if(o.has(r))s=o.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(o){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else r=e.NAME,s=e.VALUE;r in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function ffe(n,e,t){const i=e.IMPORT;if(t&&i in t){let r=n.variableList;r||(n.variableList=r={}),r[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function ud(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function hfe(n){return typeof self<"u"&&n===self.ManagedMediaSource}const $T={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function dfe(n,e){const t=$T[e];return!!t&&!!t[n.slice(0,4)]}function rR(n,e,t=!0){return!n.split(",").some(i=>!m9(i,e,t))}function m9(n,e,t=!0){var i;const r=ud(t);return(i=r==null?void 0:r.isTypeSupported(X_(n,e)))!=null?i:!1}function X_(n,e){return`${e}/mp4;codecs="${n}"`}function OU(n){if(n){const e=n.substring(0,4);return $T.video[e]}return 2}function WT(n){return n.split(",").reduce((e,t)=>{const i=$T.video[t];return i?(i*2+e)/(e?3:2):($T.audio[t]+e)/(e?2:1)},0)}const sR={};function pfe(n,e=!0){if(sR[n])return sR[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[n];for(let i=0;i<t.length;i++)if(m9(t[i],"audio",e))return sR[n]=t[i],t[i];return n}const mfe=/flac|opus/i;function jT(n,e=!0){return n.replace(mfe,t=>pfe(t.toLowerCase(),e))}function FU(n,e){return n&&n!=="mp4a"?n:e&&e.split(",")[0]}function gfe(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");if(i.length>2){let r=i.shift()+".";r+=parseInt(i.shift()).toString(16),r+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[t]=r}}return e.join(",")}const NU=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,UU=/#EXT-X-MEDIA:(.*)/g,vfe=/^#EXT(?:INF|-X-TARGETDURATION):/m,GU=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),yfe=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Xc{static findGroup(e,t){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===t)return r}}static resolve(e,t){return q2.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return vfe.test(e)}static parseMasterPlaylist(e,t){const i=BU(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},s=[];NU.lastIndex=0;let o;for(;(o=NU.exec(e))!=null;)if(o[1]){var a;const c=new Yi(o[1]);ia(r,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=KI(r,o[2]),f={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:Xc.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(f.width=h.width,f.height=h.height),xfe(c.CODECS,f),(a=f.unknownCodecs)!=null&&a.length||s.push(f),r.levels.push(f)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const f=new Yi(u);ia(r,f,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=f["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=f);break}case"SESSION-KEY":{const f=VU(u,t,r);f.encrypted&&f.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(f)):Ce.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const f=new Yi(u);ia(r,f,["NAME","VALUE","QUERYPARAM"]),kU(r,f,t)}break}case"CONTENT-STEERING":{const f=new Yi(u);ia(r,f,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:Xc.resolve(f["SERVER-URI"],t),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=HU(u);break}}}const l=s.length>0&&s.length<r.levels.length;return r.levels=l?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,i){let r;const s={},o=i.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(UU.lastIndex=0;(r=UU.exec(e))!==null;){const c=new Yi(r[1]),u=c.TYPE;if(u){const f=a[u],h=s[u]||[];s[u]=h,ia(i,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const p=c.LANGUAGE,g=c["ASSOC-LANGUAGE"],v=c.CHANNELS,_=c.CHARACTERISTICS,S=c["INSTREAM-ID"],A={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||p||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:p,url:c.URI?Xc.resolve(c.URI,t):""};if(g&&(A.assocLang=g),v&&(A.channels=v),_&&(A.characteristics=_),S&&(A.instreamId=S),f!=null&&f.length){const T=Xc.findGroup(f,A.groupId)||f[0];zU(A,T,"audioCodec"),zU(A,T,"textCodec")}h.push(A)}}return s}static parseLevelPlaylist(e,t,i,r,s,o){const a=new t9(t),l=a.fragments;let c=null,u=0,f=0,h=0,p=0,g=null,v=new sT(r,t),_,S,A,T=-1,b=!1,C=null;for(GU.lastIndex=0,a.m3u8=e,a.hasVariableRefs=BU(e);(_=GU.exec(e))!==null;){b&&(b=!1,v=new sT(r,t),v.start=h,v.sn=u,v.cc=p,v.level=i,c&&(v.initSegment=c,v.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,C&&(v.setByteRange(C),C=null)));const I=_[1];if(I){v.duration=parseFloat(I);const D=(" "+_[2]).slice(1);v.title=D||null,v.tagList.push(D?["INF",I,D]:["INF",I])}else if(_[3]){if(jt(v.duration)){v.start=h,A&&jU(v,A,a),v.sn=u,v.level=i,v.cc=p,l.push(v);const D=(" "+_[3]).slice(1);v.relurl=KI(a,D),$U(v,g),g=v,h+=v.duration,u++,f=0,b=!0}}else if(_[4]){const D=(" "+_[4]).slice(1);g?v.setByteRange(D,g):v.setByteRange(D)}else if(_[5])v.rawProgramDateTime=(" "+_[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),T===-1&&(T=l.length);else{if(_=_[0].match(yfe),!_){Ce.warn("No matches on slow regex match for level playlist!");continue}for(S=1;S<_.length&&!(typeof _[S]<"u");S++);const D=(" "+_[S]).slice(1),G=(" "+_[S+1]).slice(1),H=_[S+2]?(" "+_[S+2]).slice(1):"";switch(D){case"PLAYLIST-TYPE":a.type=G.toUpperCase();break;case"MEDIA-SEQUENCE":u=a.startSN=parseInt(G);break;case"SKIP":{const q=new Yi(G);ia(a,q,["RECENTLY-REMOVED-DATERANGES"]);const W=q.decimalInteger("SKIPPED-SEGMENTS");if(jt(W)){a.skippedSegments=W;for(let ee=W;ee--;)l.unshift(null);u+=W}const te=q.enumeratedString("RECENTLY-REMOVED-DATERANGES");te&&(a.recentlyRemovedDateranges=te.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(G),1);break;case"VERSION":a.version=parseInt(G);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(G||H)&&v.tagList.push(H?[G,H]:[G]);break;case"DISCONTINUITY":p++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([D]);break;case"BITRATE":v.tagList.push([D,G]);break;case"DATERANGE":{const q=new Yi(G);ia(a,q,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ia(a,q,q.clientAttrs);const W=new J2(q,a.dateRanges[q.ID]);W.isValid||a.skippedSegments?a.dateRanges[W.id]=W:Ce.warn(`Ignoring invalid DATERANGE tag: "${G}"`),v.tagList.push(["EXT-X-DATERANGE",G]);break}case"DEFINE":{{const q=new Yi(G);ia(a,q,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in q?ffe(a,q,o):kU(a,q,t)}break}case"DISCONTINUITY-SEQUENCE":p=parseInt(G);break;case"KEY":{const q=VU(G,t,a);if(q.isSupported()){if(q.method==="NONE"){A=void 0;break}A||(A={}),A[q.keyFormat]&&(A=jr({},A)),A[q.keyFormat]=q}else Ce.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${G}"`);break}case"START":a.startTimeOffset=HU(G);break;case"MAP":{const q=new Yi(G);if(ia(a,q,["BYTERANGE","URI"]),v.duration){const W=new sT(r,t);WU(W,q,i,A),c=W,v.initSegment=c,c.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=c.rawProgramDateTime)}else{const W=v.byteRangeEndOffset;if(W){const te=v.byteRangeStartOffset;C=`${W-te}@${te}`}else C=null;WU(v,q,i,A),c=v,b=!0}break}case"SERVER-CONTROL":{const q=new Yi(G);a.canBlockReload=q.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=q.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&q.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=q.optionalFloat("PART-HOLD-BACK",0),a.holdBack=q.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const q=new Yi(G);a.partTarget=q.decimalFloatingPoint("PART-TARGET");break}case"PART":{let q=a.partList;q||(q=a.partList=[]);const W=f>0?q[q.length-1]:void 0,te=f++,ee=new Yi(G);ia(a,ee,["BYTERANGE","URI"]);const ne=new e9(ee,v,t,te,W);q.push(ne),v.duration+=ne.duration;break}case"PRELOAD-HINT":{const q=new Yi(G);ia(a,q,["URI"]),a.preloadHint=q;break}case"RENDITION-REPORT":{const q=new Yi(G);ia(a,q,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(q);break}default:Ce.warn(`line parsed but not handled: ${_}`);break}}}g&&!g.relurl?(l.pop(),h-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&($U(v,g),v.cc=p,a.fragmentHint=v,A&&jU(v,A,a));const L=l.length,P=l[0],k=l[L-1];if(h+=a.skippedSegments*a.targetduration,h>0&&L&&k){a.averagetargetduration=h/L;const I=k.sn;a.endSN=I!=="initSegment"?I:0,a.live||(k.endList=!0),P&&(a.startCC=P.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(h+=a.fragmentHint.duration),a.totalduration=h,a.endCC=p,T>0&&_fe(l,T),a}}function VU(n,e,t){var i,r;const s=new Yi(n);ia(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(i=s.METHOD)!=null?i:"",a=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(r=s.KEYFORMAT)!=null?r:"identity";a&&s.IV&&!l&&Ce.error(`Invalid IV: ${s.IV}`);const f=a?Xc.resolve(a,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new _v(o,f,u,h,l)}function HU(n){const t=new Yi(n).decimalFloatingPoint("TIME-OFFSET");return jt(t)?t:null}function xfe(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const r=t.filter(s=>dfe(s,i));r.length&&(e[`${i}Codec`]=r.join(","),t=t.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=t}function zU(n,e,t){const i=e[t];i&&(n[t]=i)}function _fe(n,e){let t=n[e];for(let i=e;i--;){const r=n[i];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function $U(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),jt(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function WU(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function jU(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(n)}var ii={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ln={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function KU(n){const{type:e}=n;switch(e){case ii.AUDIO_TRACK:return ln.AUDIO;case ii.SUBTITLE_TRACK:return ln.SUBTITLE;default:return ln.MAIN}}function oR(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Sfe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.LEVEL_LOADING,this.onLevelLoading,this),e.on(K.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(K.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.LEVEL_LOADING,this.onLevelLoading,this),e.off(K.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(K.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,r=t.loader,s=i||r,o=new s(t);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ii.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,t){const{id:i,level:r,pathwayId:s,url:o,deliveryDirectives:a}=t;this.load({id:i,level:r,pathwayId:s,responseType:"text",type:ii.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:ii.AUDIO_TRACK,url:s,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:ii.SUBTITLE_TRACK,url:s,deliveryDirectives:o})}load(e){var t;const i=this.hls.config;let r=this.getInternalLoader(e);if(r){const c=r.context;if(c&&c.url===e.url&&c.level===e.level){Ce.trace("[playlist-loader]: playlist request ongoing");return}Ce.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===ii.MANIFEST?s=i.manifestLoadPolicy.default:s=jr({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),jt((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===ii.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===ii.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===ii.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,f=c.targetduration;if(u&&f){const h=Math.max(u*3,f*.8)*1e3;s=jr({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,f,h)=>{const p=this.getInternalLoader(f);this.resetInternalLoader(f.type);const g=c.data;if(g.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,f,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),Xc.isMediaPlaylist(g)?this.handleTrackOrLevelPlaylist(c,u,f,h||null,p):this.handleMasterPlaylist(c,u,f,h)},onError:(c,u,f,h)=>{this.handleNetworkError(u,f,!1,c,h)},onTimeout:(c,u,f)=>{this.handleNetworkError(u,f,!0,void 0,c)}};r.load(e,a,l)}handleMasterPlaylist(e,t,i,r){const s=this.hls,o=e.data,a=oR(e,i),l=Xc.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,r,t);return}const{contentSteering:c,levels:u,sessionData:f,sessionKeys:h,startTimeOffset:p,variableList:g}=l;this.variableList=g;const{AUDIO:v=[],SUBTITLES:_,"CLOSED-CAPTIONS":S}=Xc.parseMasterPlaylistMedia(o,a,l);v.length&&!v.some(T=>!T.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(Ce.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Yi({}),bitrate:0,url:""})),s.trigger(K.MANIFEST_LOADED,{levels:u,audioTracks:v,subtitles:_,captions:S,contentSteering:c,url:a,stats:t,networkDetails:r,sessionData:f,sessionKeys:h,startTimeOffset:p,variableList:g})}handleTrackOrLevelPlaylist(e,t,i,r,s){const o=this.hls,{id:a,level:l,type:c}=i,u=oR(e,i),f=0,h=jt(l)?l:jt(a)?a:0,p=KU(i),g=Xc.parseLevelPlaylist(e.data,u,h,p,f,this.variableList);if(c===ii.MANIFEST){const v={attrs:new Yi({}),bitrate:0,details:g,name:"",url:u};o.trigger(K.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:u,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=g,this.handlePlaylistLoaded(g,e,t,i,r,s)}handleManifestParsingError(e,t,i,r,s){this.hls.trigger(K.ERROR,{type:_n.NETWORK_ERROR,details:Ue.MANIFEST_PARSING_ERROR,fatal:t.type===ii.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:r,stats:s})}handleNetworkError(e,t,i=!1,r,s){let o=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===ii.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===ii.AUDIO_TRACK||e.type===ii.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);Ce.warn(`[playlist-loader]: ${o}`);let l=Ue.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case ii.MANIFEST:l=i?Ue.MANIFEST_LOAD_TIMEOUT:Ue.MANIFEST_LOAD_ERROR,c=!0;break;case ii.LEVEL:l=i?Ue.LEVEL_LOAD_TIMEOUT:Ue.LEVEL_LOAD_ERROR,c=!1;break;case ii.AUDIO_TRACK:l=i?Ue.AUDIO_TRACK_LOAD_TIMEOUT:Ue.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case ii.SUBTITLE_TRACK:l=i?Ue.SUBTITLE_TRACK_LOAD_TIMEOUT:Ue.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const f={type:_n.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:t,stats:s};if(r){const h=(t==null?void 0:t.url)||e.url;f.response=_s({url:h,data:void 0},r)}this.hls.trigger(K.ERROR,f)}handlePlaylistLoaded(e,t,i,r,s,o){const a=this.hls,{type:l,level:c,id:u,groupId:f,deliveryDirectives:h}=r,p=oR(t,r),g=KU(r),v=typeof r.level=="number"&&g===ln.MAIN?c:void 0;if(!e.fragments.length){const S=new Error("No Segments found in Playlist");a.trigger(K.ERROR,{type:_n.NETWORK_ERROR,details:Ue.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:S,reason:S.message,response:t,context:r,level:v,parent:g,networkDetails:s,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const _=e.playlistParsingError;if(_){a.trigger(K.ERROR,{type:_n.NETWORK_ERROR,details:Ue.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:_,reason:_.message,response:t,context:r,level:v,parent:g,networkDetails:s,stats:i});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case ii.MANIFEST:case ii.LEVEL:a.trigger(K.LEVEL_LOADED,{details:e,level:v||0,id:u||0,stats:i,networkDetails:s,deliveryDirectives:h});break;case ii.AUDIO_TRACK:a.trigger(K.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:f||"",stats:i,networkDetails:s,deliveryDirectives:h});break;case ii.SUBTITLE_TRACK:a.trigger(K.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:f||"",stats:i,networkDetails:s,deliveryDirectives:h});break}}}function g9(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function v9(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){Ce.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}catch(r){Ce.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(n.mode=t)}function B0(n){const e=n.mode;if(e==="disabled"&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);e==="disabled"&&(n.mode=e)}function XI(n,e,t,i){const r=n.mode;if(r==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const s=Afe(n.cues,e,t);for(let o=0;o<s.length;o++)(!i||i(s[o]))&&n.removeCue(s[o])}r==="disabled"&&(n.mode=r)}function Efe(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,r=t;for(;i<=r;){const s=Math.floor((r+i)/2);if(e<n[s].startTime)r=s-1;else if(e>n[s].startTime&&i<t)i=s+1;else return s}return n[i].startTime-e<e-n[r].startTime?i:r}function Afe(n,e,t){const i=[],r=Efe(n,e);if(r>-1)for(let s=r,o=n.length;s<o;s++){const a=n[s];if(a.startTime>=e&&a.endTime<=t)i.push(a);else if(a.startTime>t)return i}return i}function oT(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}var gl={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const Tfe=.25;function YI(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function XU(n,e,t,i,r){let s=new n(e,t,"");try{s.value=i,r&&(s.type=r)}catch{s=new n(e,t,JSON.stringify(r?_s({type:r},i):i))}return s}const hA=(()=>{const n=YI();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function aR(n,e){return n.getTime()/1e3-e}function wfe(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class bfe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(K.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(K.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(B0(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return g9(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:r}}}=this;if(!i&&!r)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=YI();if(o)for(let a=0;a<s.length;a++){const l=s[a].type;if(l===gl.emsg&&!i||!r)continue;const c=o9(s[a].data);if(c){const u=s[a].pts;let f=u+s[a].duration;f>hA&&(f=hA),f-u<=0&&(f=u+Tfe);for(let p=0;p<c.length;p++){const g=c[p];if(!s9(g)){this.updateId3CueEnds(u,l);const v=XU(o,u,f,g,l);v&&this.id3Track.addCue(v)}}}}}updateId3CueEnds(e,t){var i;const r=(i=this.id3Track)==null?void 0:i.cues;if(r)for(let s=r.length;s--;){const o=r[s];o.type===t&&o.startTime<e&&o.endTime===hA&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:r}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let c;r==="audio"?c=u=>u.type===gl.audioId3&&l:r==="video"?c=u=>u.type===gl.emsg&&a:c=u=>u.type===gl.audioId3&&l||u.type===gl.emsg&&a,XI(s,t,i,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:r}=this,{dateRanges:s}=t,o=Object.keys(s);if(r){const u=Object.keys(i).filter(f=>!o.includes(f));for(let f=u.length;f--;){const h=u[f];Object.keys(i[h].cues).forEach(p=>{r.removeCue(i[h].cues[p])}),delete i[h]}}const a=t.fragments[t.fragments.length-1];if(o.length===0||!jt(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=YI();for(let u=0;u<o.length;u++){const f=o[u],h=s[f],p=aR(h.startDate,l),g=i[f],v=(g==null?void 0:g.cues)||{};let _=(g==null?void 0:g.durationKnown)||!1,S=hA;const A=h.endDate;if(A)S=aR(A,l),_=!0;else if(h.endOnNext&&!_){const b=o.reduce((C,L)=>{if(L!==h.id){const P=s[L];if(P.class===h.class&&P.startDate>h.startDate&&(!C||h.startDate<C.startDate))return P}return C},null);b&&(S=aR(b.startDate,l),_=!0)}const T=Object.keys(h.attr);for(let b=0;b<T.length;b++){const C=T[b];if(!Iue(C))continue;const L=v[C];if(L)_&&!g.durationKnown&&(L.endTime=S);else if(c){let P=h.attr[C];Lue(C)&&(P=wfe(P));const k=XU(c,p,S,{key:C,data:P},gl.dateRange);k&&(k.id=f,this.id3Track.addCue(k),v[C]=k)}}i[f]={cues:v,dateRange:h,durationKnown:_}}}}class Mfe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&i||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:o*r);const u=r;return c+Math.min(this.stallCount*1,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(e===null||t===null||i===null)return null;const r=i.edge,s=e-t-this.edgeStalled,o=r-i.totalduration,a=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(o,s),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(K.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(K.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(K.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(K.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(K.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(K.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var i;t.details===Ue.BUFFER_STALLED_ERROR&&(this.stallCount++,(i=this.levelDetails)!=null&&i.live&&Ce.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:s}=this.config;if(!r||s===1||!t.live)return;const o=this.targetLatency;if(o===null)return;const a=i-o,l=Math.min(this.maxLatency,o+t.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,s)),f=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,f))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const qI=["NONE","TYPE-0","TYPE-1",null];function Cfe(n){return qI.indexOf(n)>-1}const KT=["SDR","PQ","HLG"];function Rfe(n){return!!n&&KT.indexOf(n)>-1}var Qx={No:"",Yes:"YES",v2:"v2"};function YU(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,r=i<e/2;return e&&r?t?Qx.v2:Qx.Yes:Qx.No}class JI{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Rm{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return qU(this._audioGroups,e)}hasSubtitleGroup(e){return qU(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function qU(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function lR(n,e){const t=e.startPTS;if(jt(t)){let i=0,r;e.sn>n.sn?(i=t-n.start,r=n):(i=n.start-t,r=e),r.duration!==i&&(r.duration=i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.start=n.start+(n.minEndPTS-n.start):e.start=n.start+n.duration:e.start=Math.max(n.start-e.duration,0)}function y9(n,e,t,i,r,s){i-t<=0&&(Ce.warn("Fragment should have a positive duration",e),i=t+e.duration,s=r+e.duration);let a=t,l=i;const c=e.startPTS,u=e.endPTS;if(jt(c)){const _=Math.abs(c-t);jt(e.deltaPTS)?e.deltaPTS=Math.max(_,e.deltaPTS):e.deltaPTS=_,a=Math.max(t,c),t=Math.min(t,c),r=Math.min(r,e.startDTS),l=Math.min(i,u),i=Math.max(i,u),s=Math.max(s,e.endDTS)}const f=t-e.start;e.start!==0&&(e.start=t),e.duration=i-e.start,e.startPTS=t,e.maxStartPTS=a,e.startDTS=r,e.endPTS=i,e.minEndPTS=l,e.endDTS=s;const h=e.sn;if(!n||h<n.startSN||h>n.endSN)return 0;let p;const g=h-n.startSN,v=n.fragments;for(v[g]=e,p=g;p>0;p--)lR(v[p],v[p-1]);for(p=g;p<v.length-1;p++)lR(v[p],v[p+1]);return n.fragmentHint&&lR(v[v.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,f}function Pfe(n,e){let t=null;const i=n.fragments;for(let a=i.length-1;a>=0;a--){const l=i[a].initSegment;if(l){t=l;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let r;Dfe(n,e,(a,l,c,u)=>{if(e.skippedSegments&&l.cc!==a.cc){const f=a.cc-l.cc;for(let h=c;h<u.length;h++)u[h].cc+=f}jt(a.startPTS)&&jt(a.endPTS)&&(l.start=l.startPTS=a.startPTS,l.startDTS=a.startDTS,l.maxStartPTS=a.maxStartPTS,l.endPTS=a.endPTS,l.endDTS=a.endDTS,l.minEndPTS=a.minEndPTS,l.duration=a.endPTS-a.startPTS,l.duration&&(r=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=a.elementaryStreams,l.loader=a.loader,l.stats=a.stats,a.initSegment&&(l.initSegment=a.initSegment,t=a.initSegment)});const s=e.fragments;if(t&&(e.fragmentHint?s.concat(e.fragmentHint):s).forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(a=>!a),e.deltaUpdateFailed){Ce.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)s.shift();e.startSN=s[0].sn}else e.canSkipDateRanges&&(e.dateRanges=Ife(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=s[s.length-1].cc}Lfe(n.partList,e.partList,(a,l)=>{l.elementaryStreams=a.elementaryStreams,l.stats=a.stats}),r?y9(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):x9(n,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const a=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=a),e.driftEndTime=o,e.driftEnd=a}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}function Ife(n,e,t){const i=jr({},n);return t&&t.forEach(r=>{delete i[r]}),Object.keys(e).forEach(r=>{const s=new J2(e[r].attr,i[r]);s.isValid?i[r]=s:Ce.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[r].attr)}"`)}),i}function Lfe(n,e,t){if(n&&e){let i=0;for(let r=0,s=n.length;r<=s;r++){const o=n[r],a=e[r+i];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?t(o,a):i--}}}function Dfe(n,e,t){const i=e.skippedSegments,r=Math.max(n.startSN,e.startSN)-e.startSN,s=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,o=e.startSN-n.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=r;c<=s;c++){const u=l[o+c];let f=a[c];i&&!f&&c<i&&(f=e.fragments[c]=u),u&&f&&t(u,f,c,a)}}function x9(n,e){const t=e.startSN+e.skippedSegments-n.startSN,i=n.fragments;t<0||t>=i.length||QI(e,i[t].start)}function QI(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function Bfe(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const s=i[i.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function kfe(n,e,t){if(!(n!=null&&n.details))return null;const i=n.details;let r=i.fragments[e-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===e)?r:e<i.startSN&&t&&t.sn===e?t:null}function JU(n,e,t){var i;return n!=null&&n.details?_9((i=n.details)==null?void 0:i.partList,e,t):null}function _9(n,e,t){if(n)for(let i=n.length;i--;){const r=n[i];if(r.index===t&&r.fragment.sn===e)return r}return null}function S9(n){n.forEach((e,t)=>{const{details:i}=e;i!=null&&i.fragments&&i.fragments.forEach(r=>{r.level=t})})}function XT(n){switch(n.details){case Ue.FRAG_LOAD_TIMEOUT:case Ue.KEY_LOAD_TIMEOUT:case Ue.LEVEL_LOAD_TIMEOUT:case Ue.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function QU(n,e){const t=XT(e);return n.default[`${t?"timeout":"error"}Retry`]}function nB(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function ZU(n){return _s(_s({},n),{errorRetry:null,timeoutRetry:null})}function YT(n,e,t,i){if(!n)return!1;const r=i==null?void 0:i.code,s=e<n.maxNumRetry&&(Ofe(r)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,s):s}function Ofe(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}const E9={search:function(n,e){let t=0,i=n.length-1,r=null,s=null;for(;t<=i;){r=(t+i)/2|0,s=n[r];const o=e(s);if(o>0)t=r+1;else if(o<0)i=r-1;else return s}return null}};function Ffe(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!jt(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const r=n[n.length-1].endProgramDateTime;if(e>=(r||0))return null;t=t||0;for(let s=0;s<n.length;++s){const o=n[s];if(Ufe(e,t,o))return o}return null}function qT(n,e,t=0,i=0,r=.005){let s=null;if(n){s=e[n.sn-e[0].sn+1]||null;const a=n.endDTS-t;a>0&&a<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!n||n.level===s.level)&&ZI(t,i,s)===0||Nfe(s,n,Math.min(r,i))))return s;const o=E9.search(e,ZI.bind(null,t,i));return o&&(o!==n||!s)?o:s}function Nfe(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),t);return n.start<=i}return!1}function ZI(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function Ufe(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function Gfe(n,e){return E9.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}var Zr={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ll={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class A9{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=Ce.log.bind(Ce,"[info]:"),this.warn=Ce.warn.bind(Ce,"[warning]:"),this.error=Ce.error.bind(Ce,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(K.ERROR,this.onError,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(K.ERROR,this.onError,this),e.off(K.ERROR,this.onErrorOut,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ln.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,r;if(t.fatal)return;const s=this.hls,o=t.context;switch(t.details){case Ue.FRAG_LOAD_ERROR:case Ue.FRAG_LOAD_TIMEOUT:case Ue.KEY_LOAD_ERROR:case Ue.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Ue.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction={action:Zr.DoNothing,flags:ll.None};return}case Ue.FRAG_GAP:case Ue.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Zr.SendAlternateToPenaltyBox;return}case Ue.LEVEL_EMPTY_ERROR:case Ue.LEVEL_PARSING_ERROR:{var a,l;const c=t.parent===ln.MAIN?t.level:s.loadLevel;t.details===Ue.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(l=a.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case Ue.LEVEL_LOAD_ERROR:case Ue.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case Ue.AUDIO_TRACK_LOAD_ERROR:case Ue.AUDIO_TRACK_LOAD_TIMEOUT:case Ue.SUBTITLE_LOAD_ERROR:case Ue.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=s.levels[s.loadLevel];if(c&&(o.type===ii.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===ii.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=Zr.SendAlternateToPenaltyBox,t.errorAction.flags=ll.MoveAllAlternatesMatchingHost;return}}return;case Ue.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.levels[s.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?t.errorAction={action:Zr.SendAlternateToPenaltyBox,flags:ll.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case Ue.BUFFER_ADD_CODEC_ERROR:case Ue.REMUX_ALLOC_ERROR:case Ue.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(r=t.level)!=null?r:s.loadLevel);return;case Ue.INTERNAL_EXCEPTION:case Ue.BUFFER_APPENDING_ERROR:case Ue.BUFFER_FULL_ERROR:case Ue.LEVEL_SWITCH_ERROR:case Ue.BUFFER_STALLED_ERROR:case Ue.BUFFER_SEEK_OVER_HOLE:case Ue.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Zr.DoNothing,flags:ll.None};return}t.type===_n.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,r=QU(i.config.playlistLoadPolicy,e),s=this.playlistError++;if(YT(r,s,XT(e),e.response))return{action:Zr.RetryRequest,flags:ll.None,retryConfig:r,retryCount:s};const a=this.getLevelSwitchAction(e,t);return r&&(a.retryConfig=r,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),r=t.levels[i],{fragLoadPolicy:s,keyLoadPolicy:o}=t.config,a=QU(e.details.startsWith("key")?o:s,e),l=t.levels.reduce((u,f)=>u+f.fragmentError,0);if(r&&(e.details!==Ue.FRAG_GAP&&r.fragmentError++,YT(a,l,XT(e),e.response)))return{action:Zr.RetryRequest,flags:ll.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,i);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const r=this.hls.levels[t];if(r){var s,o;const c=e.details;r.loadError++,c===Ue.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:f,loadLevel:h,minAutoLevel:p,maxAutoLevel:g}=i;i.autoLevelEnabled||(i.loadLevel=-1);const v=(s=e.frag)==null?void 0:s.type,S=(v===ln.AUDIO&&c===Ue.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Ue.BUFFER_ADD_CODEC_ERROR||c===Ue.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:L})=>r.audioCodec!==L),T=e.sourceBufferName==="video"&&(c===Ue.BUFFER_ADD_CODEC_ERROR||c===Ue.BUFFER_APPEND_ERROR)&&f.some(({codecSet:L,audioCodec:P})=>r.codecSet!==L&&r.audioCodec===P),{type:b,groupId:C}=(o=e.context)!=null?o:{};for(let L=f.length;L--;){const P=(L+h)%f.length;if(P!==h&&P>=p&&P<=g&&f[P].loadError===0){var a,l;const k=f[P];if(c===Ue.FRAG_GAP&&v===ln.MAIN&&e.frag){const I=f[P].details;if(I){const D=qT(e.frag,I.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else{if(b===ii.AUDIO_TRACK&&k.hasAudioGroup(C)||b===ii.SUBTITLE_TRACK&&k.hasSubtitleGroup(C))continue;if(v===ln.AUDIO&&(a=r.audioGroups)!=null&&a.some(I=>k.hasAudioGroup(I))||v===ln.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(I=>k.hasSubtitleGroup(I))||S&&r.audioCodec===k.audioCodec||!S&&r.audioCodec!==k.audioCodec||T&&r.codecSet===k.codecSet)continue}u=P;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Zr.SendAlternateToPenaltyBox,flags:ll.None,nextAutoLevel:u}}return{action:Zr.SendAlternateToPenaltyBox,flags:ll.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case Zr.DoNothing:break;case Zr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Ue.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break;case Zr.RetryRequest:break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:r,hdcpLevel:s,nextAutoLevel:o}=i;switch(r){case ll.None:this.switchLevel(e,o);break;case ll.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=qI[qI.indexOf(s)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,o)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class Ib{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Ce.log.bind(Ce,`${t}:`),this.warn=Ce.warn.bind(Ce,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const r=t==null?void 0:t.renditionReports;if(r){let s=-1;for(let o=0;o<r.length;o++){const a=r[o];let l;try{l=new self.URL(a.URI,t.url).href}catch(c){Ce.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===e){s=o;break}else l===e.substring(0,l.length)&&(s=o)}if(s!==-1){const o=r[s],a=parseInt(o["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(o["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=i&&YU(i);return new JI(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,i){const{details:r,stats:s}=t,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;if(r.advancedDateTime=Date.now()-a,r.live||i!=null&&i.live){if(r.reloaded(i),i&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),i&&r.fragments.length>0&&Pfe(i,r),!this.canLoad||!r.live)return;let l,c,u;if(r.canBlockReload&&r.endSN&&r.advanced){const _=this.hls.config.lowLatencyMode,S=r.lastPartSn,A=r.endSN,T=r.lastPartIndex,b=T!==-1,C=S===A,L=_?0:T;b?(c=C?A+1:S,u=C?L:T+1):c=A+1;const P=r.age,k=P+r.ageHeader;let I=Math.min(k-r.partTarget,r.targetduration*1.5);if(I>0){if(i&&I>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${I} with playlist age: ${r.age}`),I=0;else{const D=Math.floor(I/r.targetduration);if(c+=D,u!==void 0){const G=Math.round(I%r.targetduration/r.partTarget);u+=G}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${P.toFixed(2)}s goal: ${I} skip sn ${D} to part ${u}`)}r.tuneInGoal=I}if(l=this.getDeliveryDirectives(r,t.deliveryDirectives,c,u),_||!C){this.loadPlaylist(l);return}}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,c,u));const f=this.hls.mainForwardBufferInfo,h=f?f.end-f.len:0,p=(r.edge-h)*1e3,g=Bfe(r,p);r.updated&&o>this.requestScheduled+g&&(this.requestScheduled=s.loading.start),c!==void 0&&r.canBlockReload?this.requestScheduled=s.loading.first+g-(r.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+g<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=g);let v=this.requestScheduled-o;v=Math.max(0,v),this.log(`reload live playlist ${e} in ${Math.round(v)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),v)}else this.clearTimer()}getDeliveryDirectives(e,t,i,r){let s=YU(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,r=t.part,s=Qx.No),new JI(i,r,s)}checkRetry(e){const t=e.details,i=XT(e),r=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=r||{},l=!!r&&!!a&&(s===Zr.RetryRequest||!r.resolved&&s===Zr.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=nB(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}class v0{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Vfe{constructor(e,t,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new v0(e),this.fast_=new v0(t),this.defaultTTFB_=r,this.ttfb_=new v0(e)}update(e,t){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new v0(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==t&&(this.fast_=new v0(t,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new v0(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,r=e/1e3,s=i/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const T9={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},e4={};function Hfe(n,e,t,i,r,s){const o=n.audioCodec?n.audioGroups:null,a=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,c=l?parseInt(l):a?1/0:2;let u=null;if(o!=null&&o.length)try{o.length===1&&o[0]?u=e.groups[o[0]].channels:u=o.reduce((f,h)=>{if(h){const p=e.groups[h];if(!p)throw new Error(`Audio track group ${h} not found`);Object.keys(p.channels).forEach(g=>{f[g]=(f[g]||0)+p.channels[g]})}return f},{2:0})}catch{return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(r,8e6))||!!u&&jt(c)&&Object.keys(u).some(f=>parseInt(f)>c)}function zfe(n,e,t){const i=n.videoCodec,r=n.audioCodec;if(!i||!r||!t)return Promise.resolve(T9);const s={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},o=n.videoRange;o!=="SDR"&&(s.transferFunction=o.toLowerCase());const a=i.split(",").map(l=>({type:"media-source",video:_s(_s({},s),{},{contentType:X_(l,"video")})}));return r&&n.audioGroups&&n.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const f=u.channels||"",h=parseFloat(f);jt(h)&&h>2&&a.push.apply(a,r.split(",").map(p=>({type:"media-source",audio:{contentType:X_(p,"audio"),channels:""+h}})))}}))}),Promise.all(a.map(l=>{const c=$fe(l);return e4[c]||(e4[c]=t.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function $fe(n){const{audio:e,video:t}=n,i=t||e;if(i){const r=i.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${r}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${r}`}return""}function Wfe(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function jfe(n,e){let t=!1,i=[];return n&&(t=n!=="SDR",i=[n]),e&&(i=e.allowedVideoRanges||KT.slice(0),t=e.preferHDR!==void 0?e.preferHDR:Wfe(),t?i=i.filter(r=>r!=="SDR"):i=["SDR"]),{preferHDR:t,allowedVideoRanges:i}}function Kfe(n,e,t,i,r){const s=Object.keys(n),o=i==null?void 0:i.channels,a=i==null?void 0:i.audioCodec,l=o&&parseInt(o)===2;let c=!0,u=!1,f=1/0,h=1/0,p=1/0,g=0,v=[];const{preferHDR:_,allowedVideoRanges:S}=jfe(e,r);for(let C=s.length;C--;){const L=n[s[C]];c=L.channels[2]>0,f=Math.min(f,L.minHeight),h=Math.min(h,L.minFramerate),p=Math.min(p,L.minBitrate);const P=S.filter(k=>L.videoRanges[k]>0);P.length>0&&(u=!0,v=P)}f=jt(f)?f:0,h=jt(h)?h:0;const A=Math.max(1080,f),T=Math.max(30,h);return p=jt(p)?p:t,t=Math.max(p,t),u||(e=void 0,v=[]),{codecSet:s.reduce((C,L)=>{const P=n[L];if(L===C)return C;if(P.minBitrate>t)return Zu(L,`min bitrate of ${P.minBitrate} > current estimate of ${t}`),C;if(!P.hasDefaultAudio)return Zu(L,"no renditions with default or auto-select sound found"),C;if(a&&L.indexOf(a.substring(0,4))%5!==0)return Zu(L,`audio codec preference "${a}" not found`),C;if(o&&!l){if(!P.channels[o])return Zu(L,`no renditions with ${o} channel sound found (channels options: ${Object.keys(P.channels)})`),C}else if((!a||l)&&c&&P.channels[2]===0)return Zu(L,"no renditions with stereo sound found"),C;return P.minHeight>A?(Zu(L,`min resolution of ${P.minHeight} > maximum of ${A}`),C):P.minFramerate>T?(Zu(L,`min framerate of ${P.minFramerate} > maximum of ${T}`),C):v.some(k=>P.videoRanges[k]>0)?P.maxScore<g?(Zu(L,`max score of ${P.maxScore} < selected max of ${g}`),C):C&&(WT(L)>=WT(C)||P.fragmentError>n[C].fragmentError)?C:(g=P.maxScore,L):(Zu(L,`no variants with VIDEO-RANGE of ${JSON.stringify(v)} found`),C)},void 0),videoRanges:v,preferHDR:_,minFramerate:h,minBitrate:p}}function Zu(n,e){Ce.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function Xfe(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const r=t.channels||"2";return i.channels[r]=(i.channels[r]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Yfe(n,e,t,i){return n.slice(t,i+1).reduce((r,s)=>{if(!s.codecSet)return r;const o=s.audioGroups;let a=r[s.codecSet];a||(r[s.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,s.frameRate),a.maxScore=Math.max(a.maxScore,s.score),a.fragmentError+=s.fragmentError,a.videoRanges[s.videoRange]=(a.videoRanges[s.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(f=>{a.channels[f]=(a.channels[f]||0)+u.channels[f]}))}),r},{})}function Yc(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const r=e[i];if(am(n,r,t))return i}return-1}function am(n,e,t){const{groupId:i,name:r,lang:s,assocLang:o,default:a}=n,l=n.forced;return(i===void 0||e.groupId===i)&&(r===void 0||e.name===r)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in n)||qfe(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function qfe(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(r=>i.indexOf(r)===-1)}function Lp(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function Jfe(n,e,t,i,r){const s=e[i],a=e.reduce((h,p,g)=>{const v=p.uri;return(h[v]||(h[v]=[])).push(g),h},{})[s.uri];a.length>1&&(i=Math.max.apply(Math,a));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),f=t4(e,i,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const p=h.audioGroups,g=t.filter(v=>!p||p.indexOf(v.groupId)!==-1);return Yc(n,g,r)>-1});return f>-1?f:t4(e,i,h=>{const p=h.audioGroups,g=t.filter(v=>!p||p.indexOf(v.groupId)!==-1);return Yc(n,g,r)>-1})}function t4(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}class w9{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:i,hls:r}=this,{autoLevelEnabled:s,media:o}=r;if(!t||!o)return;const a=performance.now(),l=i?i.stats:t.stats,c=i?i.duration:t.duration,u=a-l.loading.start,f=r.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||o.paused||!o.playbackRate||!o.readyState)return;const h=r.mainForwardBufferInfo;if(h===null)return;const p=this.bwEstimator.getEstimateTTFB(),g=Math.abs(o.playbackRate);if(u<=Math.max(p,1e3*(c/(g*2))))return;const v=h.len/g,_=l.loading.first?l.loading.first-l.loading.start:-1,S=l.loaded&&_>-1,A=this.getBwEstimate(),T=r.levels,b=T[t.level],C=l.total||Math.max(l.loaded,Math.round(c*b.averageBitrate/8));let L=S?u-_:u;L<1&&S&&(L=Math.min(u,l.loaded*8/A));const P=S?l.loaded*1e3/L:0,k=P?(C-l.loaded)/P:C*8/A+p/1e3;if(k<=v)return;const I=P?P*8:A;let D=Number.POSITIVE_INFINITY,G;for(G=t.level-1;G>f;G--){const q=T[G].maxBitrate;if(D=this.getTimeToLoadFrag(p/1e3,I,c*q,!T[G].details),D<v)break}if(D>=k||D>c*10)return;r.nextLoadLevel=r.nextAutoLevel=G,S?this.bwEstimator.sample(u-Math.min(p,_),l.loaded):this.bwEstimator.sampleTTFB(u);const H=T[G].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>H&&this.resetEstimator(H),this.clearTimer(),Ce.warn(`[abr] Fragment ${t.sn}${i?" part "+i.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${v.toFixed(3)} s
      Estimated load time for current fragment: ${k.toFixed(3)} s
      Estimated load time for down switch fragment: ${D.toFixed(3)} s
      TTFB estimate: ${_|0} ms
      Current BW estimate: ${jt(A)?A|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${G} @ ${H|0} bps`),r.trigger(K.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:i,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(Ce.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Vfe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.FRAG_LOADING,this.onFragLoading,this),e.on(K.FRAG_LOADED,this.onFragLoaded,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this),e.on(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(K.LEVEL_LOADED,this.onLevelLoaded,this),e.on(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(K.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(K.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.FRAG_LOADING,this.onFragLoading,this),e.off(K.FRAG_LOADED,this.onFragLoaded,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this),e.off(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(K.LEVEL_LOADED,this.onLevelLoaded,this),e.off(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(K.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(K.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var r;this.fragCurrent=i,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Ue.BUFFER_ADD_CODEC_ERROR:case Ue.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Ue.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:r,partCurrent:s}=this;if(i&&r&&i.sn===r.sn&&i.level===r.level){const o=performance.now(),a=s?s.stats:i.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(f,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,i,r){const s=e+i/t,o=r?this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,t){const i=this.hls.config,{loading:r}=t.stats,s=r.end-r.start;jt(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:i}){const r=i?i.stats:t.stats;if(t.type===ln.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=i?i.duration:t.duration,o=this.hls.levels[t.level],a=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(t.bitrateTest){const s={stats:r,frag:t,part:i,id:t.type};this.onFragBuffered(K.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:r}=t,s=r!=null&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ln.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(i,t,e,0,r,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,t),e);return Ce.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=i&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{maxAutoLevel:r,config:s,minAutoLevel:o}=i,a=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,f=s.abrBandWidthUpFactor;if(c){const _=this.findBestLevel(l,o,r,c,0,u,f);if(_>=0)return _}let h=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const _=this.bitrateTestDelay;_&&(h=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-_,Ce.info(`[abr] bitrate test took ${Math.round(1e3*_)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=f=1)}const p=this.findBestLevel(l,o,r,c,h,u,f);if(Ce.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`),p>-1)return p;const g=i.levels[o],v=i.levels[i.loadLevel];return(g==null?void 0:g.bitrate)<(v==null?void 0:v.bitrate)?o:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,r,s,o,a){var l;const c=r+s,u=this.lastLoadedFragLevel,f=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:p}=this,{levels:g,allAudioTracks:v,loadLevel:_,config:S}=this.hls;if(g.length===1)return 0;const A=g[f],T=!!(A!=null&&(l=A.details)!=null&&l.live),b=_===-1||u===-1;let C,L="SDR",P=(A==null?void 0:A.frameRate)||0;const{audioPreference:k,videoPreference:I}=S,D=this.audioTracksByGroup||(this.audioTracksByGroup=Xfe(v));if(b){if(this.firstSelection!==-1)return this.firstSelection;const te=this.codecTiers||(this.codecTiers=Yfe(g,D,t,i)),ee=Kfe(te,L,e,k,I),{codecSet:ne,videoRanges:Y,minFramerate:Q,minBitrate:F,preferHDR:ie}=ee;C=ne,L=ie?Y[Y.length-1]:Y[0],P=Q,e=Math.max(e,F),Ce.log(`[abr] picked start tier ${JSON.stringify(ee)}`)}else C=A==null?void 0:A.codecSet,L=A==null?void 0:A.videoRange;const G=p?p.duration:h?h.duration:0,H=this.bwEstimator.getEstimateTTFB()/1e3,q=[];for(let te=i;te>=t;te--){var W;const ee=g[te],ne=te>f;if(!ee)continue;if(S.useMediaCapabilities&&!ee.supportedResult&&!ee.supportedPromise){const ye=navigator.mediaCapabilities;typeof(ye==null?void 0:ye.decodingInfo)=="function"&&Hfe(ee,D,L,P,e,k)?(ee.supportedPromise=zfe(ee,D,ye),ee.supportedPromise.then(Be=>{if(!this.hls)return;ee.supportedResult=Be;const Me=this.hls.levels,Le=Me.indexOf(ee);Be.error?Ce.warn(`[abr] MediaCapabilities decodingInfo error: "${Be.error}" for level ${Le} ${JSON.stringify(Be)}`):Be.supported||(Ce.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Le} ${JSON.stringify(Be)}`),Le>-1&&Me.length>1&&(Ce.log(`[abr] Removing unsupported level ${Le}`),this.hls.removeLevel(Le)))})):ee.supportedResult=T9}if(C&&ee.codecSet!==C||L&&ee.videoRange!==L||ne&&P>ee.frameRate||!ne&&P>0&&P<ee.frameRate||ee.supportedResult&&!((W=ee.supportedResult.decodingInfoResults)!=null&&W[0].smooth)){q.push(te);continue}const Y=ee.details,Q=(p?Y==null?void 0:Y.partTarget:Y==null?void 0:Y.averagetargetduration)||G;let F;ne?F=a*e:F=o*e;const ie=G&&r>=G*2&&s===0?g[te].averageBitrate:g[te].maxBitrate,he=this.getTimeToLoadFrag(H,F,ie*Q,Y===void 0);if(F>=ie&&(te===u||ee.loadError===0&&ee.fragmentError===0)&&(he<=H||!jt(he)||T&&!this.bitrateTestDelay||he<c)){const ye=this.forcedAutoLevel;return te!==_&&(ye===-1||ye!==_)&&(q.length&&Ce.trace(`[abr] Skipped level(s) ${q.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${g[q[0]].codecs}" ${g[q[0]].videoRange}; not compatible with "${A.codecs}" ${L}`),Ce.info(`[abr] switch candidate:${f}->${te} adjustedbw(${Math.round(F)})-bitrate=${Math.round(F-ie)} ttfb:${H.toFixed(1)} avgDuration:${Q.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${he.toFixed(1)} firstSelection:${b} codecSet:${C} videoRange:${L} hls.loadLevel:${_}`)),b&&(this.firstSelection=te),te}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls,r=Math.min(Math.max(e,i),t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}class Qfe{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var vs={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Zfe{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(K.BUFFER_APPENDED,this.onBufferAppended,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this),e.on(K.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.BUFFER_APPENDED,this.onBufferAppended,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this),e.off(K.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;const o=s.end;if(s.start<=e&&o!==null&&e<=o)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:i}=this,r=Object.keys(i);for(let s=r.length;s--;){const o=i[r[s]];if((o==null?void 0:o.body.type)===t&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,t,i,r){this.timeRanges&&(this.timeRanges[e]=t);const s=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||s>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===i&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(a.body),u})})}detectPartialFragments(e){const t=this.timeRanges,{frag:i,part:r}=e;if(!t||i.sn==="initSegment")return;const s=y0(i),o=this.fragments[s];if(!o||o.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach(l=>{const c=i.elementaryStreams[l];if(!c)return;const u=t[l],f=a||c.partial===!0;o.range[l]=this.getBufferedTimes(i,r,f,u)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=i.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),dA(o)||this.removeParts(i.sn-1,i.type)):this.removeFragment(o.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter(r=>r.fragment.sn>=e))}fragBuffered(e,t){const i=y0(e);let r=this.fragments[i];!r&&t&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,i,r){const s={time:[],partial:i},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<r.length;u++){const f=r.start(u)-this.bufferPadding,h=r.end(u)+this.bufferPadding;if(c>=f&&l<=h){s.time.push({startPTS:Math.max(o,r.start(u)),endPTS:Math.min(a,r.end(u))});break}else if(o<h&&a>f){const p=Math.max(o,r.start(u)),g=Math.min(a,r.end(u));g>p&&(s.partial=!0,s.time.push({startPTS:p,endPTS:g}))}else if(a<=f)break}return s}getPartialFragment(e){let t=null,i,r,s,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&dA(u)&&(r=u.body.start-a,s=u.body.end+a,e>=r&&e<=s&&(i=Math.min(e-r,s-e),o<=i&&(t=u.body,o=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||dA(t))}getState(e){const t=y0(e),i=this.fragments[t];return i?i.buffered?dA(i)?vs.PARTIAL:vs.OK:vs.APPENDING:vs.NOT_LOADED}isTimeBuffered(e,t,i){let r,s;for(let o=0;o<i.length;o++){if(r=i.start(o)-this.bufferPadding,s=i.end(o)+this.bufferPadding,e>=r&&t<=s)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:i,part:r}=t;if(i.sn==="initSegment"||i.bitrateTest)return;const s=r?null:t,o=y0(i);this.fragments[o]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:r,timeRanges:s}=t;if(i.sn==="initSegment")return;const o=i.type;if(r){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(r)}this.timeRanges=s,Object.keys(s).forEach(a=>{const l=s[a];this.detectEvictedFragments(a,l,o,r)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=y0(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==i||r&&!l.gap||l.start<t&&l.end>e&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const t=y0(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=i.filter(s=>s.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function dA(n){var e,t,i;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((i=n.range.audiovideo)==null?void 0:i.partial))}function y0(n){return`${n.type}_${n.level}_${n.sn}`}const ehe={length:0,start:()=>0,end:()=>0};class Fi{static isBuffered(e,t){try{if(e){const i=Fi.getBuffered(e);for(let r=0;r<i.length;r++)if(t>=i.start(r)&&t<=i.end(r))return!0}}catch{}return!1}static bufferInfo(e,t,i){try{if(e){const r=Fi.getBuffered(e),s=[];let o;for(o=0;o<r.length;o++)s.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(s,t,i)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.sort(function(c,u){const f=c.start-u.start;return f||u.end-c.end});let r=[];if(i)for(let c=0;c<e.length;c++){const u=r.length;if(u){const f=r[u-1].end;e[c].start-f<i?e[c].end>f&&(r[u-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let s=0,o,a=t,l=t;for(let c=0;c<r.length;c++){const u=r[c].start,f=r[c].end;if(t+i>=u&&t<f)a=u,l=f,s=l-t;else if(t+i<u){o=u;break}}return{len:s,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(t){return Ce.log("failed to get media.buffered",t),ehe}}}class Lb{constructor(e,t,i,r=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=pA(),this.buffering={audio:pA(),video:pA(),audiovideo:pA()},this.level=e,this.sn=t,this.id=i,this.size=r,this.part=s,this.partial=o}}function pA(){return{start:0,executeStart:0,executeEnd:0,end:0}}function aT(n,e){for(let i=0,r=n.length;i<r;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function the(n,e,t){return!!(e&&(t.endCC>t.startCC||n&&n.cc<t.startCC))}function nhe(n,e){const t=n.fragments,i=e.fragments;if(!i.length||!t.length){Ce.log("No fragments to align");return}const r=aT(t,i[0].cc);if(!r||r&&!r.startPTS){Ce.log("No frag in previous level to align on");return}return r}function n4(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function b9(n,e){const t=e.fragments;for(let i=0,r=t.length;i<r;i++)n4(t[i],n);e.fragmentHint&&n4(e.fragmentHint,n),e.alignedSliding=!0}function ihe(n,e,t){e&&(rhe(n,t,e),!t.alignedSliding&&e&&JT(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&x9(e,t))}function rhe(n,e,t){if(the(n,t,e)){const i=nhe(t,e);i&&jt(i.start)&&(Ce.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),b9(i.start,e))}}function JT(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let r,s;const o=Math.min(e.endCC,n.endCC);e.startCC<o&&n.startCC<o&&(r=aT(i,o),s=aT(t,o)),(!r||!s)&&(r=i[Math.floor(i.length/2)],s=aT(t,r.cc)||t[Math.floor(t.length/2)]);const a=r.programDateTime,l=s.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(s.start-r.start);b9(c,n)}const i4=Math.pow(2,17);class she{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new sf({type:_n.NETWORK_ERROR,details:Ue.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){l(s4(e));return}else e.gap=!1;const c=this.loader=e.loader=s?new s(r):new o(r),u=r4(e),f=ZU(r.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:i4};e.stats=c.stats,c.load(u,h,{onSuccess:(p,g,v,_)=>{this.resetLoader(e,c);let S=p.data;v.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),a({frag:e,part:null,payload:S,networkDetails:_})},onError:(p,g,v,_)=>{this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:_s({url:i,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:_}))},onAbort:(p,g,v)=>{this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,g,v)=>{this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:v,stats:p}))},onProgress:(p,g,v,_)=>{t&&t({frag:e,part:null,payload:v,networkDetails:_})}})})}loadPart(e,t,i){this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(s4(e,t));return}const c=this.loader=e.loader=s?new s(r):new o(r),u=r4(e,t),f=ZU(r.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:i4};t.stats=c.stats,c.load(u,h,{onSuccess:(p,g,v,_)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const S={frag:e,part:t,payload:p.data,networkDetails:_};i(S),a(S)},onError:(p,g,v,_)=>{this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:_s({url:u.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:_}))},onAbort:(p,g,v)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,g,v)=>{this.resetLoader(e,c),l(new sf({type:_n.NETWORK_ERROR,details:Ue.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:v,stats:p}))}})})}updateStatsFromPart(e,t){const i=e.stats,r=t.stats,s=r.total;if(i.loaded+=r.loaded,s){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(i.loaded/s),l),f=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+f}else i.total=Math.max(i.loaded,i.total);const o=i.loading,a=r.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function r4(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(jt(r)&&jt(s)){var o;let a=r,l=s;if(n.sn==="initSegment"&&((o=n.decryptdata)==null?void 0:o.method)==="AES-128"){const c=s-r;c%16&&(l=s+(16-c%16)),r!==0&&(i.resetIV=!0,a=r-16)}i.rangeStart=a,i.rangeEnd=l}return i}function s4(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:_n.MEDIA_ERROR,details:Ue.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new sf(i)}class sf extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class ohe{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class ahe{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function lhe(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?om(n,0,e-t):n}class che{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=t.getUint32(r*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],s=i[1],o=i[2],a=i[3],l=this.invSubMix,c=l[0],u=l[1],f=l[2],h=l[3],p=new Uint32Array(256);let g=0,v=0,_=0;for(_=0;_<256;_++)_<128?p[_]=_<<1:p[_]=_<<1^283;for(_=0;_<256;_++){let S=v^v<<1^v<<2^v<<3^v<<4;S=S>>>8^S&255^99,e[g]=S,t[S]=g;const A=p[g],T=p[A],b=p[T];let C=p[S]*257^S*16843008;r[g]=C<<24|C>>>8,s[g]=C<<16|C>>>16,o[g]=C<<8|C>>>24,a[g]=C,C=b*16843009^T*65537^A*257^g*16843008,c[S]=C<<24|C>>>8,u[S]=C<<16|C>>>16,f[S]=C<<8|C>>>24,h[S]=C,g?(g=A^p[p[p[b^A]]],v^=p[p[v]]):g=v=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<t.length&&i;)i=t[r]===this.key[r],r++;if(i)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),f=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],v=p[1],_=p[2],S=p[3];let A,T;for(a=0;a<o;a++){if(a<s){A=c[a]=t[a];continue}T=A,a%s===0?(T=T<<8|T>>>24,T=f[T>>>24]<<24|f[T>>>16&255]<<16|f[T>>>8&255]<<8|f[T&255],T^=h[a/s|0]<<24):s>6&&a%s===4&&(T=f[T>>>24]<<24|f[T>>>16&255]<<16|f[T>>>8&255]<<8|f[T&255]),c[a]=A=(c[a-s]^T)>>>0}for(l=0;l<o;l++)a=o-l,l&3?T=c[a]:T=c[a-4],l<4||a<=4?u[l]=T:u[l]=g[f[T>>>24]]^v[f[T>>>16&255]]^_[f[T>>>8&255]]^S[f[T&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const r=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],f=a[3],h=this.uint8ArrayToUint32Array_(i);let p=h[0],g=h[1],v=h[2],_=h[3];const S=new Int32Array(e),A=new Int32Array(S.length);let T,b,C,L,P,k,I,D,G,H,q,W,te,ee;const ne=this.networkToHostOrderSwap;for(;t<S.length;){for(G=ne(S[t]),H=ne(S[t+1]),q=ne(S[t+2]),W=ne(S[t+3]),P=G^s[0],k=W^s[1],I=q^s[2],D=H^s[3],te=4,ee=1;ee<r;ee++)T=l[P>>>24]^c[k>>16&255]^u[I>>8&255]^f[D&255]^s[te],b=l[k>>>24]^c[I>>16&255]^u[D>>8&255]^f[P&255]^s[te+1],C=l[I>>>24]^c[D>>16&255]^u[P>>8&255]^f[k&255]^s[te+2],L=l[D>>>24]^c[P>>16&255]^u[k>>8&255]^f[I&255]^s[te+3],P=T,k=b,I=C,D=L,te=te+4;T=o[P>>>24]<<24^o[k>>16&255]<<16^o[I>>8&255]<<8^o[D&255]^s[te],b=o[k>>>24]<<24^o[I>>16&255]<<16^o[D>>8&255]<<8^o[P&255]^s[te+1],C=o[I>>>24]<<24^o[D>>16&255]<<16^o[P>>8&255]<<8^o[k&255]^s[te+2],L=o[D>>>24]<<24^o[P>>16&255]<<16^o[k>>8&255]<<8^o[I&255]^s[te+3],A[t]=ne(T^p),A[t+1]=ne(L^g),A[t+2]=ne(C^v),A[t+3]=ne(b^_),p=G,g=H,v=q,_=W,t=t+4}return A.buffer}}const uhe=16;class iB{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?lhe(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i){return this.useSoftware?new Promise((r,s)=>{this.softwareDecrypt(new Uint8Array(e),t,i);const o=this.flush();o?r(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i)}softwareDecrypt(e,t,i){const{currentIV:r,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=Cl(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;r&&(i=r);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new che),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(a.buffer,0,i),this.currentIV=om(a,-16).buffer,c||null}webCryptoDecrypt(e,t,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i));this.key=t,this.fastAesKey=new ahe(this.subtle,t)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new ohe(this.subtle,new Uint8Array(i)).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(Ce.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,i)))}onWebCryptoError(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%uhe;return i!==e.length&&(t=om(e,0,i),this.remainderData=om(e,i)),t}logOnce(e){this.logEnabled&&(Ce.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const fhe={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},tt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Db extends Qfe{constructor(e,t,i,r,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=tt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=r,this.log=Ce.log.bind(Ce,`${r}:`),this.warn=Ce.warn.bind(Ce,`${r}:`),this.hls=e,this.fragmentLoader=new she(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new iB(e.config),e.on(K.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=tt.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const i=t.partList;if(i!=null&&i.length){const s=i[i.length-1];return Fi.isBuffered(this.media,s.start+s.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===tt.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:i,mediaBuffer:r,state:s}=this,o=i?i.currentTime:0,a=Fi.bufferInfo(r||i,o,e.maxBufferHole);if(this.log(`media seeking to ${jt(o)?o.toFixed(3):o}, state: ${s}`),this.state===tt.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,u=t.start+t.duration+l;if(!a.len||u<a.start||c>a.end){const f=o>u;(o<c||f)&&(f&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(K.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=tt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const r=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,i,r).then(s=>{if(!s)return;const o=this.state;if(this.fragContextChanged(e)){(o===tt.FRAG_LOADING||!this.fragCurrent&&o===tt.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=tt.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(K.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===tt.STOPPED||this.state===tt.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===vs.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===vs.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:i};this.hls.trigger(K.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{if(!i||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{payload:s}=i,o=e.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(l=>{throw r.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return r.trigger(K.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),i.payload=l,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===tt.STOPPED||this.state===tt.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state=tt.IDLE,e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var i,r,s,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===ln.MAIN?"level":"track"} ${e.level} (frag:[${((i=e.startPTS)!=null?i:NaN).toFixed(3)}-${((r=e.endPTS)!=null?r:NaN).toFixed(3)}] > buffer:${a?fhe.toString(Fi.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==ln.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(f=>!!u[f])){this.state=tt.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=tt.IDLE,a&&(!this.loadedmetadata&&e.type==ln.MAIN&&a.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:r,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new Lb(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!o);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,r){var s;const o=t==null?void 0:t.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=tt.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(K.KEY_LOADED,u),this.state===tt.KEY_LOADING&&(this.state=tt.IDLE),u}),this.hls.trigger(K.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=o.partList;if(u&&r){i>e.end&&o.fragmentHint&&(e=o.fragmentHint);const f=this.getNextPart(u,e,i);if(f>-1){const h=u[f];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${f}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=tt.FRAG_LOADING;let p;return a?p=a.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,h,t,r)).catch(g=>this.handleFragLoadError(g)):p=this.doFragPartsLoad(e,h,t,r).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(K.FRAG_LOADING,{frag:e,part:h,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(u,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),jt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=tt.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,r)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?r:void 0),a]).then(([u])=>(!l&&u&&r&&r(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(K.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,i,r){return new Promise((s,o)=>{var a;const l=[],c=(a=i.details)==null?void 0:a.partList,u=f=>{this.fragmentLoader.loadPart(e,f,r).then(h=>{l[f.index]=h;const p=h.part;this.hls.trigger(K.FRAG_LOADED,h);const g=JU(i,e.sn,f.index+1)||_9(c,e.sn,f.index+1);if(g)u(g);else return s({frag:e,part:p,partsLoaded:l})}).catch(o)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Ue.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(K.ERROR,t)}else this.hls.trigger(K.ERROR,{type:_n.OTHER_ERROR,details:Ue.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==tt.PARSING){!this.fragCurrent&&this.state!==tt.STOPPED&&this.state!==tt.ERROR&&(this.state=tt.IDLE);return}const{frag:i,part:r,level:s}=t,o=self.performance.now();i.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(i,r,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:r,sn:s,part:o}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${r}. The current chunk will not be buffered.`),null;const a=t[r],l=o>-1?JU(a,s,o):null,c=l?l.fragment:kfe(a,s,i);return c?(i&&i!==c&&(c.stats=i.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,i,r,s){var o;if(!e||this.state!==tt.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=Cl(a,l)),!((o=c)!=null&&o.length))return;const u={type:e.type,frag:t,part:i,chunkMeta:r,parent:t.type,data:c};if(this.hls.trigger(K.BUFFER_APPENDING,u),e.dropped&&e.independent&&!i){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Fi.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,r=Fi.bufferInfo(t,i,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,r.end-o),i+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const i=this.getLoadPosition();return jt(i)?this.getFwdBufferInfoAtPos(e,i,t):null}getFwdBufferInfoAtPos(e,t,i){const{config:{maxBufferHole:r}}=this,s=Fi.bufferInfo(e,t,r);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(t,i);if(o&&s.nextStart<o.end)return Fi.bufferInfo(e,t,Math.max(s.nextStart,r))}return s}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,r=Math.max(Math.min(e-t,i.maxBufferLength),t),s=Math.max(e-t*3,i.maxMaxBufferLength/2,r);return s>=r?(i.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=ln.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,ln.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,r=i.length;if(!r)return null;const{config:s}=this,o=i[0].start;let a;if(t.live){const l=s.initialLiveManifestSize;if(r<l)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${l})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=i[0]);if(!a){const l=s.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===vs.OK||i===vs.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,r,s){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(a===null)return a;if(e=a,o&&e&&!e.gap&&i.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r);if(l!==null&&i.len+l.len>=s)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let r=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,r>-1&&i<c.start)break;const u=c.loaded;u?r=-1:(s||c.independent||o)&&c.fragment===t&&(r=a),s=u}return r}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=Ffe(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=t[s-e.startSN];i.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=Gfe(t,i.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:c}=r,u=i.partList,f=!!(r.lowLatencyMode&&u!=null&&u.length&&l);f&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let h;if(e<t){const p=e>t-c?0:c;h=qT(s,o,e,p)}else h=o[o.length-1];if(h){const p=h.sn-i.startSN,g=this.fragmentTracker.getState(h);if((g===vs.OK||g===vs.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!f||u[0].fragment.sn>h.sn)&&s&&h.level===s.level){const _=o[p+1];h.sn<a&&this.fragmentTracker.getState(_)!==vs.OK?h=_:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=i.currentTime,o=e.fragments[0].start,a=e.edge,l=s>=o-t.maxFragLookUpTolerance&&s<=a;if(r!==null&&i.duration>r&&(s<r||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||s<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=r),i.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),i.currentTime=r))}}alignPlaylists(e,t,i){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,o=!t,a=e.alignedSliding&&jt(s);if(o||!a&&!s){const{fragPrevious:l}=this;ihe(l,i,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${r}`),c}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;if(i<t&&(i=-1),i===-1||this.lastCurrentTime===-1){const r=this.startTimeOffset!==null,s=r?this.startTimeOffset:e.startTimeOffset;s!==null&&jt(s)?(i=t+s,s<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Start time offset ${s} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==tt.FRAG_LOADING_WAITING_RETRY)&&(this.state=tt.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const u=this.getCurrentContext(t.chunkMeta);u&&(t.frag=u.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var r;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const s=t.details===Ue.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===Zr.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=nB(c,l);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),o.resolved=!0,this.retryDate=self.performance.now()+u,this.state=tt.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!s&&a!==Zr.RemoveAlternatePermanently&&(o.resolved=!0);else{Ce.warn(`${t.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===Zr.SendAlternateToPenaltyBox?this.state=tt.WAITING_LEVEL:this.state=tt.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===tt.PARSING||this.state===tt.PARSED){const t=e.frag,i=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,i),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,(t==null?void 0:t.duration)||10);const o=!s;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===ln.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==tt.STOPPED&&(this.state=tt.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const r=Fi.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,i),this.state===tt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=tt.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,r){var s;const o=i.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const f=u.endPTS-u.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${f})`),l||!1;const h=r?0:y9(o,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(K.LEVEL_PTS_UPDATED,{details:o,level:i,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(i.fragmentError===0&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=tt.PARSED,this.hls.trigger(K.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class M9{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=hhe(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function hhe(n,e){const t=new Uint8Array(e);let i=0;for(let r=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function dhe(){return typeof __HLS_WORKER_BUNDLE__=="function"}function phe(){const n=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}function mhe(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Wc(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class rB{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Cl(this.cachedData,e),this.cachedData=null);let i=K_(e,0),r=i?i.length:0,s;const o=this._audioTrack,a=this._id3Track,l=i?tB(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&jt(l))&&(this.basePTS=ghe(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:gl.audioId3,duration:Number.POSITIVE_INFINITY});r<c;){if(this.canParse(e,r)){const u=this.appendFrame(o,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,s=r):r=c}else Uue(e,r)?(i=K_(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:gl.audioId3,duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===c&&s!==c){const u=om(e,s);this.cachedData?this.cachedData=Cl(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:Wc(),id3Track:a,textTrack:Wc()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Wc(),id3Track:this._id3Track,textTrack:Wc()}}destroy(){}}const ghe=(n,e,t)=>{if(jt(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};function vhe(n,e,t,i){let r,s,o,a;const l=navigator.userAgent.toLowerCase(),c=i,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=((e[t+2]&192)>>>6)+1;const f=(e[t+2]&60)>>>2;if(f>u.length-1){const h=new Error(`invalid ADTS sampling index:${f}`);n.emit(K.ERROR,K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return o=(e[t+2]&1)<<2,o|=(e[t+3]&192)>>>6,Ce.log(`manifest codec:${i}, ADTS type:${r}, samplingIndex:${f}`),/firefox/i.test(l)?f>=6?(r=5,a=new Array(4),s=f-3):(r=2,a=new Array(2),s=f):l.indexOf("android")!==-1?(r=2,a=new Array(2),s=f):(r=5,a=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&f>=6?s=f-3:((i&&i.indexOf("mp4a.40.2")!==-1&&(f>=6&&o===1||/vivaldi/i.test(l))||!i&&o===1)&&(r=2,a=new Array(2)),s=f)),a[0]=r<<3,a[0]|=(f&14)>>1,a[1]|=(f&1)<<7,a[1]|=o<<3,r===5&&(a[1]|=(s&14)>>1,a[2]=(s&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[f],channelCount:o,codec:"mp4a.40."+r,manifestCodec:c}}function C9(n,e){return n[e]===255&&(n[e+1]&246)===240}function R9(n,e){return n[e+1]&1?7:9}function sB(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function yhe(n,e){return e+5<n.length}function QT(n,e){return e+1<n.length&&C9(n,e)}function xhe(n,e){return yhe(n,e)&&C9(n,e)&&sB(n,e)<=n.length-e}function _he(n,e){if(QT(n,e)){const t=R9(n,e);if(e+t>=n.length)return!1;const i=sB(n,e);if(i<=t)return!1;const r=e+i;return r===n.length||QT(n,r)}return!1}function P9(n,e,t,i,r){if(!n.samplerate){const s=vhe(e,t,i,r);if(!s)return;n.config=s.config,n.samplerate=s.samplerate,n.channelCount=s.channelCount,n.codec=s.codec,n.manifestCodec=s.manifestCodec,Ce.log(`parsed codec:${n.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function I9(n){return 1024*9e4/n}function She(n,e){const t=R9(n,e);if(e+t<=n.length){const i=sB(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function L9(n,e,t,i,r){const s=I9(n.samplerate),o=i+r*s,a=She(e,t);let l;if(a){const{frameLength:f,headerLength:h}=a,p=h+f,g=Math.max(0,t+p-e.length);g?(l=new Uint8Array(p-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+p);const v={unit:l,pts:o};return g||n.samples.push(v),{sample:v,length:p,missing:g}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}let mA=null;const Ehe=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ahe=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],The=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],whe=[0,1,1,4];function D9(n,e,t,i,r){if(t+24>e.length)return;const s=B9(e,t);if(s&&t+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=i+r*o,l={unit:e.subarray(t,t+s.frameLength),pts:a,dts:a};return n.config=[],n.channelCount=s.channelCount,n.samplerate=s.sampleRate,n.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function B9(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,r=n[e+2]>>4&15,s=n[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&s!==3){const o=n[e+2]>>1&1,a=n[e+3]>>6,l=t===3?3-i:i===3?3:4,c=Ehe[l*14+r-1]*1e3,f=Ahe[(t===3?0:t===2?1:2)*3+s],h=a===3?1:2,p=The[t][i],g=whe[i],v=p*8*g,_=Math.floor(p*c/f+o)*g;if(mA===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);mA=T?parseInt(T[1]):0}return!!mA&&mA<=87&&i===2&&c>=224e3&&a===0&&(n[e+3]=n[e+3]|128),{sampleRate:f,channelCount:h,frameLength:_,samplesPerFrame:v}}}function oB(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function k9(n,e){return e+1<n.length&&oB(n,e)}function bhe(n,e){return oB(n,e)&&4<=n.length-e}function O9(n,e){if(e+1<n.length&&oB(n,e)){const i=B9(n,e);let r=4;i!=null&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===n.length||k9(n,s)}return!1}class Mhe extends rB{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=K_(e,0);let i=(t==null?void 0:t.length)||0;if(O9(e,i))return!1;for(let r=e.length;i<r;i++)if(_he(e,i))return Ce.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return xhe(e,t)}appendFrame(e,t,i){P9(e,this.observer,t,i,e.manifestCodec);const r=L9(e,t,i,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const Che=/\/emsg[-/]ID3/i;class Rhe{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,r){const s=this.videoTrack=Wc("video",1),o=this.audioTrack=Wc("audio",1),a=this.txtTrack=Wc("text",1);if(this.id3Track=Wc("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=u9(e);if(l.video){const{id:c,timescale:u,codec:f}=l.video;s.id=c,s.timescale=a.timescale=u,s.codec=f}if(l.audio){const{id:c,timescale:u,codec:f}=l.audio;o.id=c,o.timescale=u,o.codec=f}a.id=a9.text,s.sampleDuration=0,s.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Xue(e)}demux(e,t){this.timeOffset=t;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Cl(this.remainderData,e));const a=nfe(i);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=i;const o=this.extractID3Track(r,t);return s.samples=DU(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return i.samples=DU(e,t),{videoTrack:t,audioTrack:Wc(),id3Track:r,textTrack:Wc()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const r=Ln(e.samples,["emsg"]);r&&r.forEach(s=>{const o=sfe(s);if(Che.test(o.schemeIdUri)){const a=jt(o.presentationTime)?o.presentationTime/o.timeScale:t+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;i.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:gl.emsg,duration:l})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const F9=(n,e)=>{let t=0,i=5;e+=i;const r=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;i>0;){o[0]=n[e];const a=Math.min(i,8),l=8-a;s[0]=4278190080>>>24+l<<l,r[0]=(o[0]&s[0])>>l,t=t?t<<a|r[0]:r[0],e+=1,i-=a}return t};class Phe extends rB{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const r=N9(e,t,i,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=K_(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&tB(t)!==void 0&&F9(e,i)<16}}function N9(n,e,t,i,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(t+u>e.length)return-1;const f=e[t+6]>>5;let h=0;f===2?h+=2:(f&1&&f!==1&&(h+=2),f&4&&(h+=2));const p=(e[t+6]<<8|e[t+7])>>12-h&1,v=[2,1,2,3,3,4,4,5][f]+p,_=e[t+5]>>3,S=e[t+5]&7,A=new Uint8Array([s<<6|_<<1|S>>2,(S&3)<<6|f<<3|p<<2|l>>4,l<<4&224]),T=1536/a*9e4,b=i+r*T,C=e.subarray(t,t+u);return n.config=A,n.channelCount=v,n.samplerate=a,n.samples.push({unit:C,pts:b}),u}class Ihe{constructor(){this.VideoSample=null}createVideoSample(e,t,i,r){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:r,length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,r;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const s=i.units;r=s[s.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,r=i.length;if(r){const s=i[r-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&Ce.log(e.pts+"/"+e.dts+":"+e.debug)}}class o4{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&Ce.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,i=8,r;for(let s=0;s<e;s++)i!==0&&(r=this.readEG(),i=(t+r+256)%256),t=i===0?t:i}readSPS(){let e=0,t=0,i=0,r=0,s,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),f=this.readBoolean.bind(this),h=this.skipBits.bind(this),p=this.skipEG.bind(this),g=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);l();const _=l();if(c(5),h(3),l(),g(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const L=u();if(L===3&&h(1),g(),g(),h(1),f())for(o=L!==3?8:12,a=0;a<o;a++)f()&&(a<6?v(16):v(64))}g();const S=u();if(S===0)u();else if(S===1)for(h(1),p(),p(),s=u(),a=0;a<s;a++)p();g(),h(1);const A=u(),T=u(),b=c(1);b===0&&h(1),h(1),f()&&(e=u(),t=u(),i=u(),r=u());let C=[1,1];if(f()&&f())switch(l()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:{C=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((A+1)*16-e*2-t*2),height:(2-b)*(T+1)*16-(b?2:4)*(i+r),pixelRatio:C}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Lhe extends Ihe{parseAVCPES(e,t,i,r,s){const o=this.parseAVCNALu(e,i.data);let a=this.VideoSample,l,c=!1;i.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),o.forEach(u=>{var f;switch(u.type){case 1:{let v=!1;l=!0;const _=u.data;if(c&&_.length>4){const S=new o4(_).readSliceType();(S===2||S===4||S===7||S===9)&&(v=!0)}if(v){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.frame=!0,a.key=v;break}case 5:l=!0,(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,h9(u.data,1,i.pts,t.samples);break}case 7:{var p,g;l=!0,c=!0;const v=u.data,S=new o4(v).readSPS();if(!e.sps||e.width!==S.width||e.height!==S.height||((p=e.pixelRatio)==null?void 0:p[0])!==S.pixelRatio[0]||((g=e.pixelRatio)==null?void 0:g[1])!==S.pixelRatio[1]){e.width=S.width,e.height=S.height,e.pixelRatio=S.pixelRatio,e.sps=[v],e.duration=s;const A=v.subarray(1,4);let T="avc1.";for(let b=0;b<3;b++){let C=A[b].toString(16);C.length<2&&(C="0"+C),T+=C}e.codec=T}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+u.type+" ");break}a&&l&&a.units.push(u)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,t){const i=t.byteLength;let r=e.naluState||0;const s=r,o=[];let a=0,l,c,u,f=-1,h=0;for(r===-1&&(f=0,h=t[0]&31,r=0,a=1);a<i;){if(l=t[a++],!r){r=l?0:1;continue}if(r===1){r=l?0:2;continue}if(!l)r=3;else if(l===1){if(c=a-r-1,f>=0){const p={data:t.subarray(f,c),type:h};o.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(s&&a<=4-s&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-s)),c>0&&(p.data=Cl(p.data,t.subarray(0,c)),p.state=0))}a<i?(u=t[a]&31,f=a,h=u,r=0):r=-1}else r=0}if(f>=0&&r>=0){const p={data:t.subarray(f,i),type:h,state:r};o.push(p)}if(o.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=Cl(p.data,t))}return e.naluState=r,o}}class Dhe{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new iB(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,i){const r=e[t].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,t,i,r,s){const o=d9(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,r)})}decryptAvcSamples(e,t,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){r();return}const s=e[t].units;for(;!(i>=s.length);i++){const o=s[i];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,t,i,r,o),!this.decrypter.isSync()))return}}}}const ds=188;class Fh{constructor(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new Lhe}static probe(e){const t=Fh.syncOffset(e);return t>0&&Ce.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let i=Math.min(ds*5,t-ds)+1,r=0;for(;r<i;){let s=!1,o=-1,a=0;for(let l=r;l<t;l+=ds)if(e[l]===71&&(t-l===ds||e[l+ds]===71)){if(a++,o===-1&&(o=l,o!==0&&(i=Math.min(o+ds*99,e.length-ds)+1)),s||(s=eL(e,l)===0),s&&a>1&&(o===0&&a>2||l+ds>i))return o}else{if(a)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:a9[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Fh.createTrack("video"),this._audioTrack=Fh.createTrack("audio",r),this._id3Track=Fh.createTrack("id3"),this._txtTrack=Fh.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,r=!1){i||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,f=o.pesData,h=a.pid,p=l.pid,g=a.pesData,v=l.pesData,_=null,S=this.pmtParsed,A=this._pmtId,T=e.length;if(this.remainderData&&(e=Cl(this.remainderData,e),T=e.length,this.remainderData=null),T<ds&&!r)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const b=Math.max(0,Fh.syncOffset(e));T-=(T-b)%ds,T<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let C=0;for(let P=b;P<T;P+=ds)if(e[P]===71){const k=!!(e[P+1]&64),I=eL(e,P),D=(e[P+3]&48)>>4;let G;if(D>1){if(G=P+5+e[P+4],G===P+ds)continue}else G=P+4;switch(I){case u:k&&(f&&(s=x0(f))&&this.videoParser.parseAVCPES(o,c,s,!1,this._duration),f={data:[],size:0}),f&&(f.data.push(e.subarray(G,P+ds)),f.size+=P+ds-G);break;case h:if(k){if(g&&(s=x0(g)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}g={data:[],size:0}}g&&(g.data.push(e.subarray(G,P+ds)),g.size+=P+ds-G);break;case p:k&&(v&&(s=x0(v))&&this.parseID3PES(l,s),v={data:[],size:0}),v&&(v.data.push(e.subarray(G,P+ds)),v.size+=P+ds-G);break;case 0:k&&(G+=e[G]+1),A=this._pmtId=Bhe(e,G);break;case A:{k&&(G+=e[G]+1);const H=khe(e,G,this.typeSupported,i,this.observer);u=H.videoPid,u>0&&(o.pid=u,o.segmentCodec=H.segmentVideoCodec),h=H.audioPid,h>0&&(a.pid=h,a.segmentCodec=H.segmentAudioCodec),p=H.id3Pid,p>0&&(l.pid=p),_!==null&&!S&&(Ce.warn(`MPEG-TS PMT found at ${P} after unknown PID '${_}'. Backtracking to sync byte @${b} to parse all TS packets.`),_=null,P=b-188),S=this.pmtParsed=!0;break}case 17:case 8191:break;default:_=I;break}}else C++;C>0&&ZT(this.observer,new Error(`Found ${C} TS packet/s that do not start with 0x47`)),o.pesData=f,a.pesData=g,l.pesData=v;const L={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return r&&this.extractRemainingSamples(L),L}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:r,textTrack:s}=e,o=i.pesData,a=t.pesData,l=r.pesData;let c;if(o&&(c=x0(o))?(this.videoParser.parseAVCPES(i,s,c,!0,this._duration),i.pesData=null):i.pesData=o,a&&(c=x0(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else a!=null&&a.size&&Ce.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;l&&(c=x0(l))?(this.parseID3PES(r,c),r.pesData=null):r.pesData=l}demuxSampleAes(e,t,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new Dhe(this.observer,this.config,t);return this.decrypt(r,s)}decrypt(e,t){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let i=0;const r=this.aacOverFlow;let s=t.data;if(r){this.aacOverFlow=null;const f=r.missing,h=r.sample.unit.byteLength;if(f===-1)s=Cl(r.sample.unit,s);else{const p=h-f;r.sample.unit.set(s.subarray(0,f),p),e.samples.push(r.sample),i=r.missing}}let o,a;for(o=i,a=s.length;o<a-1&&!QT(s,o);o++);if(o!==i){let f;const h=o<a-1;if(h?f=`AAC PES did not start with ADTS header,offset:${o}`:f="No ADTS header found in AAC PES",ZT(this.observer,new Error(f),h),!h)return}P9(e,this.observer,s,o,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(r){const f=I9(e.samplerate);l=r.sample.pts+f}else{Ce.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=L9(e,s,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!QT(s,o);o++);}parseMPEGPES(e,t){const i=t.data,r=i.length;let s=0,o=0;const a=t.pts;if(a===void 0){Ce.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<r;)if(k9(i,o)){const l=D9(e,i,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,t){{const i=t.data,r=t.pts;if(r===void 0){Ce.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=i.length;let o=0,a=0,l;for(;a<s&&(l=N9(e,i,a,r,o++))>0;)a+=l}}parseID3PES(e,t){if(t.pts===void 0){Ce.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=jr({},t,{type:this._videoTrack?gl.emsg:gl.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function eL(n,e){return((n[e+1]&31)<<8)+n[e+2]}function Bhe(n,e){return(n[e+10]&31)<<8|n[e+11]}function khe(n,e,t,i,r){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(n[e+1]&15)<<8|n[e+2],a=e+3+o-4,l=(n[e+10]&15)<<8|n[e+11];for(e+=12+l;e<a;){const c=eL(n,e),u=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){cR("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=c);break;case 21:s.id3Pid===-1&&(s.id3Pid=c);break;case 219:if(!i){cR("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=c,s.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?Ce.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="mp3");break;case 193:if(!i){cR("AC-3");break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="ac3"):Ce.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&u>0){let f=e+5,h=u;for(;h>2;){switch(n[f]){case 106:t.ac3!==!0?Ce.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=c,s.segmentAudioCodec="ac3");break}const g=n[f+1]+2;f+=g,h-=g}}break;case 194:case 135:return ZT(r,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return ZT(r,new Error("Unsupported HEVC in M2TS found")),s}e+=u+5}return s}function ZT(n,e,t){Ce.warn(`parsing error: ${e.message}`),n.emit(K.ERROR,K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function cR(n){Ce.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function x0(n){let e=0,t,i,r,s,o;const a=n.data;if(!n||n.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=Cl(a[0],a[1]),a.splice(1,1);if(t=a[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(i=(t[4]<<8)+t[5],i&&i>n.size-6)return null;const c=t[7];c&192&&(s=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,c&64?(o=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,s-o>60*9e4&&(Ce.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),r=t[8];let u=r+9;if(n.size<=u)return null;n.size-=u;const f=new Uint8Array(n.size);for(let h=0,p=a.length;h<p;h++){t=a[h];let g=t.byteLength;if(u)if(u>g){u-=g;continue}else t=t.subarray(u),g-=u,u=0;f.set(t,e),e+=g}return i&&(i-=r+3),{data:f,pts:s,dts:o,len:i}}return null}class Ohe extends rB{resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=K_(e,0);let i=(t==null?void 0:t.length)||0;if(t&&e[i]===11&&e[i+1]===119&&tB(t)!==void 0&&F9(e,i)<=16)return!1;for(let r=e.length;i<r;i++)if(O9(e,i))return Ce.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return bhe(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return D9(e,t,i,this.basePTS,this.frameIndex)}}class a4{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ph=Math.pow(2,32)-1;class Pe{static init(){Pe.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Pe.types)Pe.types.hasOwnProperty(e)&&(Pe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Pe.HDLR_TYPES={video:t,audio:i};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);Pe.STTS=Pe.STSC=Pe.STCO=s,Pe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Pe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Pe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Pe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Pe.FTYP=Pe.box(Pe.types.ftyp,o,l,o,a),Pe.DINF=Pe.box(Pe.types.dinf,Pe.box(Pe.types.dref,r))}static box(e,...t){let i=8,r=t.length;const s=r;for(;r--;)i+=t[r].byteLength;const o=new Uint8Array(i);for(o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=i&255,o.set(e,4),r=0,i=8;r<s;r++)o.set(t[r],i),i+=t[r].byteLength;return o}static hdlr(e){return Pe.box(Pe.types.hdlr,Pe.HDLR_TYPES[e])}static mdat(e){return Pe.box(Pe.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(Ph+1)),r=Math.floor(t%(Ph+1));return Pe.box(Pe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return Pe.box(Pe.types.mdia,Pe.mdhd(e.timescale,e.duration),Pe.hdlr(e.type),Pe.minf(e))}static mfhd(e){return Pe.box(Pe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Pe.box(Pe.types.minf,Pe.box(Pe.types.smhd,Pe.SMHD),Pe.DINF,Pe.stbl(e)):Pe.box(Pe.types.minf,Pe.box(Pe.types.vmhd,Pe.VMHD),Pe.DINF,Pe.stbl(e))}static moof(e,t,i){return Pe.box(Pe.types.moof,Pe.mfhd(e),Pe.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=Pe.trak(e[t]);return Pe.box.apply(null,[Pe.types.moov,Pe.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(Pe.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=Pe.trex(e[t]);return Pe.box.apply(null,[Pe.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(Ph+1)),r=Math.floor(t%(Ph+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Pe.box(Pe.types.mvhd,s)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let r,s;for(r=0;r<t.length;r++)s=t[r].flags,i[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return Pe.box(Pe.types.sdtp,i)}static stbl(e){return Pe.box(Pe.types.stbl,Pe.stsd(e),Pe.box(Pe.types.stts,Pe.STTS),Pe.box(Pe.types.stsc,Pe.STSC),Pe.box(Pe.types.stsz,Pe.STSZ),Pe.box(Pe.types.stco,Pe.STCO))}static avc1(e){let t=[],i=[],r,s,o;for(r=0;r<e.sps.length;r++)s=e.sps[r],o=s.byteLength,t.push(o>>>8&255),t.push(o&255),t=t.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],o=s.byteLength,i.push(o>>>8&255),i.push(o&255),i=i.concat(Array.prototype.slice.call(s));const a=Pe.box(Pe.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),l=e.width,c=e.height,u=e.pixelRatio[0],f=e.pixelRatio[1];return Pe.box(Pe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Pe.box(Pe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Pe.box(Pe.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return Pe.box(Pe.types.mp4a,Pe.audioStsd(e),Pe.box(Pe.types.esds,Pe.esds(e)))}static mp3(e){return Pe.box(Pe.types[".mp3"],Pe.audioStsd(e))}static ac3(e){return Pe.box(Pe.types["ac-3"],Pe.audioStsd(e),Pe.box(Pe.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?Pe.box(Pe.types.stsd,Pe.STSD,Pe.mp3(e)):e.segmentCodec==="ac3"?Pe.box(Pe.types.stsd,Pe.STSD,Pe.ac3(e)):Pe.box(Pe.types.stsd,Pe.STSD,Pe.mp4a(e)):Pe.box(Pe.types.stsd,Pe.STSD,Pe.avc1(e))}static tkhd(e){const t=e.id,i=e.duration*e.timescale,r=e.width,s=e.height,o=Math.floor(i/(Ph+1)),a=Math.floor(i%(Ph+1));return Pe.box(Pe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const i=Pe.sdtp(e),r=e.id,s=Math.floor(t/(Ph+1)),o=Math.floor(t%(Ph+1));return Pe.box(Pe.types.traf,Pe.box(Pe.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),Pe.box(Pe.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),Pe.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,Pe.box(Pe.types.trak,Pe.tkhd(e),Pe.mdia(e))}static trex(e){const t=e.id;return Pe.box(Pe.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],r=i.length,s=12+16*r,o=new Uint8Array(s);let a,l,c,u,f,h;for(t+=8+s,o.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),a=0;a<r;a++)l=i[a],c=l.duration,u=l.size,f=l.flags,h=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*a);return Pe.box(Pe.types.trun,o)}static initSegment(e){Pe.types||Pe.init();const t=Pe.moov(e);return Cl(Pe.FTYP,t)}}Pe.types=void 0;Pe.HDLR_TYPES=void 0;Pe.STTS=void 0;Pe.STSC=void 0;Pe.STCO=void 0;Pe.STSZ=void 0;Pe.VMHD=void 0;Pe.SMHD=void 0;Pe.STSD=void 0;Pe.FTYP=void 0;Pe.DINF=void 0;const U9=9e4;function aB(n,e,t=1,i=!1){const r=n*e*t;return i?Math.round(r):r}function Fhe(n,e,t=1,i=!1){return aB(n,e,1/t,i)}function hx(n,e=!1){return aB(n,1e3,1/U9,e)}function Nhe(n,e=1){return aB(n,U9,1/e)}const Uhe=10*1e3,l4=1024,Ghe=1152,Vhe=1536;let _0=null,uR=null;class lT{constructor(e,t,i,r=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,_0===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_0=o?parseInt(o[1]):0}if(uR===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);uR=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){Ce.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){Ce.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Ce.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,r=e.reduce((s,o)=>{let a=o.pts,l=a-s;return l<-4294967296&&(t=!0,a=dl(a,i),l=a-s),l>0?s:a},i);return t&&Ce.debug("PTS rollover detected"),r}remux(e,t,i,r,s,o,a,l){let c,u,f,h,p,g,v=s,_=s;const S=e.pid>-1,A=t.pid>-1,T=t.samples.length,b=e.samples.length>0,C=a&&T>0||T>1;if((!S||b)&&(!A||C)||this.ISGenerated||a){if(this.ISGenerated){var P,k,I,D;const W=this.videoTrackConfig;W&&(t.width!==W.width||t.height!==W.height||((P=t.pixelRatio)==null?void 0:P[0])!==((k=W.pixelRatio)==null?void 0:k[0])||((I=t.pixelRatio)==null?void 0:I[1])!==((D=W.pixelRatio)==null?void 0:D[1]))&&this.resetInitSegment()}else f=this.generateIS(e,t,s,o);const G=this.isVideoContiguous;let H=-1,q;if(C&&(H=Hhe(t.samples),!G&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,H>0){Ce.warn(`[mp4-remuxer]: Dropped ${H} out of ${T} video samples due to a missing keyframe`);const W=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(H),t.dropped+=H,_+=(t.samples[0].pts-W)/t.inputTimeScale,q=_}else H===-1&&(Ce.warn(`[mp4-remuxer]: No keyframe found out of ${T} video samples`),g=!1);if(this.ISGenerated){if(b&&C){const W=this.getVideoStartPts(t.samples),ee=(dl(e.samples[0].pts,W)-W)/t.inputTimeScale;v+=Math.max(0,ee),_+=Math.max(0,-ee)}if(b){if(e.samplerate||(Ce.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(e,t,s,o)),u=this.remuxAudio(e,v,this.isAudioContiguous,o,A||C||l===ln.AUDIO?_:void 0),C){const W=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(Ce.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(e,t,s,o)),c=this.remuxVideo(t,_,G,W)}}else C&&(c=this.remuxVideo(t,_,G,0));c&&(c.firstKeyFrame=H,c.independent=H!==-1,c.firstKeyFramePTS=q)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(p=G9(i,s,this._initPTS,this._initDTS)),r.samples.length&&(h=V9(r,s,this._initPTS))),{audio:u,video:c,initSegment:f,independent:g,text:h,id3:p}}generateIS(e,t,i,r){const s=e.samples,o=t.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||r,f="audio/mp4",h,p,g;if(u&&(h=p=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):Pe.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(g=e.inputTimeScale,!c||g!==c.timescale?h=p=s[0].pts-Math.round(g*i):u=!1)}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Pe.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(g=t.inputTimeScale,!c||g!==c.timescale){const v=this.getVideoStartPts(o),_=Math.round(g*i);p=Math.min(p,dl(o[0].dts,v)-_),h=Math.min(h,v-_)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:g},this._initDTS={baseTime:p,timescale:g}):h=g=void 0,{tracks:l,initPTS:h,timescale:g}}remuxVideo(e,t,i,r){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let u=this.nextAvcDts,f=8,h=this.videoSampleDuration,p,g,v=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,S=!1;if(!i||u===null){const Q=t*s,F=o[0].pts-dl(o[0].dts,o[0].pts);_0&&u!==null&&Math.abs(Q-F-u)<15e3?i=!0:u=Q-F}const A=c.baseTime*s/c.timescale;for(let Q=0;Q<l;Q++){const F=o[Q];F.pts=dl(F.pts-A,u),F.dts=dl(F.dts-A,u),F.dts<o[Q>0?Q-1:Q].dts&&(S=!0)}S&&o.sort(function(Q,F){const ie=Q.dts-F.dts,he=Q.pts-F.pts;return ie||he}),p=o[0].dts,g=o[o.length-1].dts;const T=g-p,b=T?Math.round(T/(l-1)):h||e.inputTimeScale/30;if(i){const Q=p-u,F=Q>b,ie=Q<-1;if((F||ie)&&(F?Ce.warn(`AVC: ${hx(Q,!0)} ms (${Q}dts) hole between fragments detected at ${t.toFixed(3)}`):Ce.warn(`AVC: ${hx(-Q,!0)} ms (${Q}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!ie||u>=o[0].pts||_0)){p=u;const he=o[0].pts-Q;if(F)o[0].dts=p,o[0].pts=he;else for(let pe=0;pe<o.length&&!(o[pe].dts>he);pe++)o[pe].dts-=Q,o[pe].pts-=Q;Ce.log(`Video: Initial PTS/DTS adjusted: ${hx(he,!0)}/${hx(p,!0)}, delta: ${hx(Q,!0)} ms`)}}p=Math.max(0,p);let C=0,L=0,P=p;for(let Q=0;Q<l;Q++){const F=o[Q],ie=F.units,he=ie.length;let pe=0;for(let ye=0;ye<he;ye++)pe+=ie[ye].data.length;L+=pe,C+=he,F.length=pe,F.dts<P?(F.dts=P,P+=b/4|0||1):P=F.dts,v=Math.min(F.pts,v),_=Math.max(F.pts,_)}g=o[l-1].dts;const k=L+4*C+8;let I;try{I=new Uint8Array(k)}catch(Q){this.observer.emit(K.ERROR,K.ERROR,{type:_n.MUX_ERROR,details:Ue.REMUX_ALLOC_ERROR,fatal:!1,error:Q,bytes:k,reason:`fail allocating video mdat ${k}`});return}const D=new DataView(I.buffer);D.setUint32(0,k),I.set(Pe.types.mdat,4);let G=!1,H=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,te=Number.NEGATIVE_INFINITY;for(let Q=0;Q<l;Q++){const F=o[Q],ie=F.units;let he=0;for(let Be=0,Me=ie.length;Be<Me;Be++){const Le=ie[Be],je=Le.data,lt=Le.data.byteLength;D.setUint32(f,lt),f+=4,I.set(je,f),f+=lt,he+=4+lt}let pe;if(Q<l-1)h=o[Q+1].dts-F.dts,pe=o[Q+1].pts-F.pts;else{const Be=this.config,Me=Q>0?F.dts-o[Q-1].dts:b;if(pe=Q>0?F.pts-o[Q-1].pts:b,Be.stretchShortVideoTrack&&this.nextAudioPts!==null){const Le=Math.floor(Be.maxBufferHole*s),je=(r?v+r*s:this.nextAudioPts)-F.pts;je>Le?(h=je-Me,h<0?h=Me:G=!0,Ce.log(`[mp4-remuxer]: It is approximately ${je/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=Me}else h=Me}const ye=Math.round(F.pts-F.dts);H=Math.min(H,h),W=Math.max(W,h),q=Math.min(q,pe),te=Math.max(te,pe),a.push(new c4(F.key,h,he,ye))}if(a.length){if(_0){if(_0<70){const Q=a[0].flags;Q.dependsOn=2,Q.isNonSync=0}}else if(uR&&te-q<W-H&&b/W<.025&&a[0].cts===0){Ce.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Q=p;for(let F=0,ie=a.length;F<ie;F++){const he=Q+a[F].duration,pe=Q+a[F].cts;if(F<ie-1){const ye=he+a[F+1].cts;a[F].duration=ye-pe}else a[F].duration=F?a[F-1].duration:b;a[F].cts=0,Q=he}}}h=G||!h?b:h,this.nextAvcDts=u=g+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const Y={data1:Pe.moof(e.sequenceNumber++,p,jr({},e,{samples:a})),data2:I,startPTS:v/s,endPTS:(_+h)/s,startDTS:p/s,endDTS:u/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Y}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Ghe;case"ac3":return Vhe;default:return l4}}remuxAudio(e,t,i,r,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),u=c*l,f=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],g=s!==void 0;let v=e.samples,_=h?0:8,S=this.nextAudioPts||-1;const A=t*o,T=f.baseTime*o/f.timescale;if(this.isAudioContiguous=i=i||v.length&&S>0&&(r&&Math.abs(A-S)<9e3||Math.abs(dl(v[0].pts-T,A)-S)<20*u),v.forEach(function(ee){ee.pts=dl(ee.pts-T,A)}),!i||S<0){if(v=v.filter(ee=>ee.pts>=0),!v.length)return;s===0?S=0:r&&!g?S=Math.max(0,A):S=v[0].pts}if(e.segmentCodec==="aac"){const ee=this.config.maxAudioFramesDrift;for(let ne=0,Y=S;ne<v.length;ne++){const Q=v[ne],F=Q.pts,ie=F-Y,he=Math.abs(1e3*ie/o);if(ie<=-ee*u&&g)ne===0&&(Ce.warn(`Audio frame @ ${(F/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*ie/o)} ms.`),this.nextAudioPts=S=Y=F);else if(ie>=ee*u&&he<Uhe&&g){let pe=Math.round(ie/u);Y=F-pe*u,Y<0&&(pe--,Y+=u),ne===0&&(this.nextAudioPts=S=Y),Ce.warn(`[mp4-remuxer]: Injecting ${pe} audio frame @ ${(Y/o).toFixed(3)}s due to ${Math.round(1e3*ie/o)} ms gap.`);for(let ye=0;ye<pe;ye++){const Be=Math.max(Y,0);let Me=a4.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Me||(Ce.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Me=Q.unit.subarray()),v.splice(ne,0,{unit:Me,pts:Be}),Y+=u,ne++}}Q.pts=Y,Y+=u}}let b=null,C=null,L,P=0,k=v.length;for(;k--;)P+=v[k].unit.byteLength;for(let ee=0,ne=v.length;ee<ne;ee++){const Y=v[ee],Q=Y.unit;let F=Y.pts;if(C!==null){const he=p[ee-1];he.duration=Math.round((F-C)/l)}else if(i&&e.segmentCodec==="aac"&&(F=S),b=F,P>0){P+=_;try{L=new Uint8Array(P)}catch(he){this.observer.emit(K.ERROR,K.ERROR,{type:_n.MUX_ERROR,details:Ue.REMUX_ALLOC_ERROR,fatal:!1,error:he,bytes:P,reason:`fail allocating audio mdat ${P}`});return}h||(new DataView(L.buffer).setUint32(0,P),L.set(Pe.types.mdat,4))}else return;L.set(Q,_);const ie=Q.byteLength;_+=ie,p.push(new c4(!0,c,ie,0)),C=F}const I=p.length;if(!I)return;const D=p[p.length-1];this.nextAudioPts=S=C+l*D.duration;const G=h?new Uint8Array(0):Pe.moof(e.sequenceNumber++,b/l,jr({},e,{samples:p}));e.samples=[];const H=b/o,q=S/o,te={data1:G,data2:L,startPTS:H,endPTS:q,startDTS:H,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:I};return this.isAudioContiguous=!0,te}remuxEmptyAudio(e,t,i,r){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,a=s/o,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,f=(l!==null?l:r.startDTS*s)+u,h=r.endDTS*s+u,p=a*l4,g=Math.ceil((h-f)/p),v=a4.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(Ce.warn("[mp4-remuxer]: remux empty Audio"),!v){Ce.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const _=[];for(let S=0;S<g;S++){const A=f+S*p;_.push({unit:v,pts:A,dts:A})}return e.samples=_,this.remuxAudio(e,t,i,!1)}}function dl(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function Hhe(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function G9(n,e,t,i){const r=n.samples.length;if(!r)return;const s=n.inputTimeScale;for(let a=0;a<r;a++){const l=n.samples[a];l.pts=dl(l.pts-t.baseTime*s/t.timescale,e*s)/s,l.dts=dl(l.dts-i.baseTime*s/i.timescale,e*s)/s}const o=n.samples;return n.samples=[],{samples:o}}function V9(n,e,t){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let o=0;o<i;o++){const a=n.samples[o];a.pts=dl(a.pts-t.baseTime*r/t.timescale,e*r)/r}n.samples.sort((o,a)=>o.pts-a.pts);const s=n.samples;return n.samples=[],{samples:s}}class c4{constructor(e,t,i,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class zhe{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,r){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(Jue(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=u9(e);r.audio&&(t=u4(r.audio,xi.AUDIO)),r.video&&(i=u4(r.video,xi.VIDEO));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:Ce.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,i,r,s,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const f={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};jt(u)||(u=this.lastEndTime=s||0);const h=t.samples;if(!(h!=null&&h.length))return f;const p={initPTS:void 0,timescale:1};let g=this.initData;if((a=g)!=null&&a.length||(this.generateInitSegment(h),g=this.initData),!((l=g)!=null&&l.length))return Ce.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const v=Zue(h,g),_=Que(g,h),S=_===null?s:_;($he(c,S,s,v)||p.timescale!==c.timescale&&o)&&(p.initPTS=S-s,c&&c.timescale===1&&Ce.warn(`Adjusting initPTS by ${p.initPTS-c.baseTime}`),this.initPTS=c={baseTime:p.initPTS,timescale:1});const A=e?S-c.baseTime/c.timescale:u,T=A+v;tfe(g,h,c.baseTime/c.timescale),v>0?this.lastEndTime=T:(Ce.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!g.audio,C=!!g.video;let L="";b&&(L+="audio"),C&&(L+="video");const P={data1:h,startPTS:A,startDTS:A,endPTS:T,endDTS:T,type:L,hasAudio:b,hasVideo:C,nb:1,dropped:0};return f.audio=P.type==="audio"?P:void 0,f.video=P.type!=="audio"?P:void 0,f.initSegment=p,f.id3=G9(i,s,c,c),r.samples.length&&(f.text=V9(r,s,c)),f}}function $he(n,e,t,i){if(n===null)return!0;const r=Math.max(i,1),s=e-n.baseTime/n.timescale;return Math.abs(s-t)>r}function u4(n,e){const t=n==null?void 0:n.codec;if(t&&t.length>4)return t;if(e===xi.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return jT(t,!1);const i="mp4a.40.5";return Ce.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${i}"`),i}return Ce.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let of;try{of=self.performance.now.bind(self.performance)}catch{Ce.debug("Unable to use Performance API on this environment"),of=xv==null?void 0:xv.Date.now}const cT=[{demux:Rhe,remux:zhe},{demux:Fh,remux:lT},{demux:Mhe,remux:lT},{demux:Ohe,remux:lT}];cT.splice(2,0,{demux:Phe,remux:lT});class f4{constructor(e,t,i,r,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=r,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,r){const s=i.transmuxing;s.executeStart=of();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:u,trackSwitch:f,accurateTimeOffset:h,timeOffset:p,initSegmentChange:g}=r||a,{audioCodec:v,videoCodec:_,defaultInitPts:S,duration:A,initSegmentData:T}=l,b=Whe(o,t);if(b&&b.method==="AES-128"){const k=this.getDecrypter();if(k.isSync()){let I=k.softwareDecrypt(o,b.key.buffer,b.iv.buffer);if(i.part>-1&&(I=k.flush()),!I)return s.executeEnd=of(),fR(i);o=new Uint8Array(I)}else return this.decryptionPromise=k.webCryptoDecrypt(o,b.key.buffer,b.iv.buffer).then(I=>{const D=this.push(I,null,i);return this.decryptionPromise=null,D}),this.decryptionPromise}const C=this.needsProbing(u,f);if(C){const k=this.configureTransmuxer(o);if(k)return Ce.warn(`[transmuxer] ${k.message}`),this.observer.emit(K.ERROR,K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),s.executeEnd=of(),fR(i)}(u||f||g||C)&&this.resetInitSegment(T,v,_,A,t),(u||g||C)&&this.resetInitialTimestamp(S),c||this.resetContiguity();const L=this.transmux(o,b,p,h,i),P=this.currentTransmuxState;return P.contiguous=!0,P.discontinuity=!1,P.trackSwitch=!1,s.executeEnd=of(),L}flush(e){const t=e.transmuxing;t.executeStart=of();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:a}=r;if(i){const f=i.flush();f&&o.push(this.push(f,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=of(),[fR(e)];const u=l.flush(a);return uT(u)?u.then(f=>(this.flushRemux(o,f,e),o)):(this.flushRemux(o,u,e),o)}flushRemux(e,t,i){const{audioTrack:r,videoTrack:s,id3Track:o,textTrack:a}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;Ce.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const u=this.remuxer.remux(r,s,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=of()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,r,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,t,i,r),a.resetInitSegment(e,t,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,r,s){let o;return t&&t.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,t,i,r,s):o=this.transmuxUnencrypted(e,i,r,s),o}transmuxUnencrypted(e,t,i,r){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,t,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,i,r,s){return this.demuxer.demuxSampleAes(e,t,i).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:r,vendor:s}=this;let o;for(let h=0,p=cT.length;h<p;h++){var a;if((a=cT[h].demux)!=null&&a.probe(e)){o=cT[h];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=o.remux,f=o.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(i,t,r,s)),(!l||!(l instanceof f))&&(this.demuxer=new f(i,t,r),this.probe=f.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new iB(this.config)),e}}function Whe(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const fR=n=>({remuxResult:{},chunkMeta:n});function uT(n){return"then"in n&&n.then instanceof Function}class jhe{constructor(e,t,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class Khe{constructor(e,t,i,r,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=o}}var H9={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,f||l,h),g=t?t+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},a.prototype.listenerCount=function(c){var u=t?t+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,h,p,g){var v=t?t+c:c;if(!this._events[v])return!1;var _=this._events[v],S=arguments.length,A,T;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),S){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,u),!0;case 3:return _.fn.call(_.context,u,f),!0;case 4:return _.fn.call(_.context,u,f,h),!0;case 5:return _.fn.call(_.context,u,f,h,p),!0;case 6:return _.fn.call(_.context,u,f,h,p,g),!0}for(T=1,A=new Array(S-1);T<S;T++)A[T-1]=arguments[T];_.fn.apply(_.context,A)}else{var b=_.length,C;for(T=0;T<b;T++)switch(_[T].once&&this.removeListener(c,_[T].fn,void 0,!0),S){case 1:_[T].fn.call(_[T].context);break;case 2:_[T].fn.call(_[T].context,u);break;case 3:_[T].fn.call(_[T].context,u,f);break;case 4:_[T].fn.call(_[T].context,u,f,h);break;default:if(!A)for(C=1,A=new Array(S-1);C<S;C++)A[C-1]=arguments[C];_[T].fn.apply(_[T].context,A)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,h){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var v=0,_=[],S=g.length;v<S;v++)(g[v].fn!==u||h&&!g[v].once||f&&g[v].context!==f)&&_.push(g[v]);_.length?this._events[p]=_.length===1?_[0]:_:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(H9);var Xhe=H9.exports,lB=Sue(Xhe);class z9{constructor(e,t,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const o=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===K.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new lB,this.observer.on(K.FRAG_DECRYPTED,o),this.observer.on(K.ERROR,o);const a=ud(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||dhe())){try{s.workerPath?(Ce.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=mhe(s.workerPath)):(Ce.log(`injecting Web Worker for "${t}"`),this.workerContext=phe()),this.onwmsg=f=>this.onWorkerMessage(f);const{worker:u}=this.workerContext;u.addEventListener("message",this.onwmsg),u.onerror=f=>{const h=new Error(`${f.message}  (${f.filename}:${f.lineno})`);s.enableWorker=!1,Ce.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(K.ERROR,{type:_n.OTHER_ERROR,details:Ue.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:t,config:JSON.stringify(s)})}catch(u){Ce.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.resetWorker(),this.error=null,this.transmuxer=new f4(this.observer,l,s,"",t)}return}this.transmuxer=new f4(this.observer,l,s,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,i,r,s,o,a,l,c,u){var f,h;c.transmuxing.start=self.performance.now();const{transmuxer:p}=this,g=o?o.start:s.start,v=s.decryptdata,_=this.frag,S=!(_&&s.cc===_.cc),A=!(_&&c.level===_.level),T=_?c.sn-_.sn:-1,b=this.part?c.part-this.part.index:-1,C=T===0&&c.id>1&&c.id===(_==null?void 0:_.stats.chunkCount),L=!A&&(T===1||T===0&&(b===1||C&&b<=0)),P=self.performance.now();(A||T||s.stats.parsing.start===0)&&(s.stats.parsing.start=P),o&&(b||!L)&&(o.stats.parsing.start=P);const k=!(_&&((f=s.initSegment)==null?void 0:f.url)===((h=_.initSegment)==null?void 0:h.url)),I=new Khe(S,L,l,A,g,k);if(!L||S||k){Ce.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${S}
        trackSwitch: ${A}
        contiguous: ${L}
        accurateTimeOffset: ${l}
        timeOffset: ${g}
        initSegmentChange: ${k}`);const D=new jhe(i,r,t,a,u);this.configureTransmuxer(D)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:v,chunkMeta:c,state:I},e instanceof ArrayBuffer?[e]:[]);else if(p){const D=p.push(e,v,c,I);uT(D)?(p.async=!0,D.then(G=>{this.handleTransmuxComplete(G)}).catch(G=>{this.transmuxerError(G,c,"transmuxer-interface push error")})):(p.async=!1,this.handleTransmuxComplete(D))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let i=t.flush(e);uT(i)||t.async?(uT(i)||(i=Promise.resolve(i)),i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){Ce.warn(`worker message received with no ${t?"event name":"data"}`);return}const i=this.hls;if(this.hls)switch(t.event){case"init":{var r;const s=(r=this.workerContext)==null?void 0:r.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":Ce[t.data.logType]&&Ce[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const h4=100;class $9 extends Db{constructor(e,t,i){super(e,t,i,"[audio-stream-controller]",ln.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.LEVEL_LOADED,this.onLevelLoaded,this),e.on(K.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(K.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(K.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(K.ERROR,this.onError,this),e.on(K.BUFFER_RESET,this.onBufferReset,this),e.on(K.BUFFER_CREATED,this.onBufferCreated,this),e.on(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(K.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(K.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.LEVEL_LOADED,this.onLevelLoaded,this),e.off(K.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(K.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(K.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(K.ERROR,this.onError,this),e.off(K.BUFFER_RESET,this.onBufferReset,this),e.off(K.BUFFER_CREATED,this.onBufferCreated,this),e.off(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(K.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(K.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){if(i==="main"){const o=t.cc;this.initPTS[t.cc]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${r}`),this.videoTrackCC=o,this.state===tt.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=tt.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(h4),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=tt.IDLE):(this.loadedmetadata=!1,this.state=tt.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case tt.IDLE:this.doTickIdle();break;case tt.WAITING_TRACK:{var e;const{levels:i,trackId:r}=this,s=i==null||(e=i[r])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=tt.WAITING_INIT_PTS}break}case tt.FRAG_LOADING_WAITING_RETRY:{var t;const i=performance.now(),r=this.retryDate;if(!r||i>=r||(t=this.media)!=null&&t.seeking){const{levels:s,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[o])||null),this.state=tt.IDLE}break}case tt.WAITING_INIT_PTS:{const i=this.waitingData;if(i){const{frag:r,part:s,cache:o,complete:a}=i;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=tt.FRAG_LOADING;const l=o.flush(),c={frag:r,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${r.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=Fi.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);ZI(c.end,this.config.maxFragLookUpTolerance,r)<0&&(this.log(`Waiting fragment cc (${r.cc}) @ ${r.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=tt.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=tt.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:i,trackId:r}=this,s=e.config;if(!this.buffering||!i&&(this.startFragRequested||!s.startFragPrefetch)||!(t!=null&&t[r]))return;const o=t[r],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=tt.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,xi.AUDIO,ln.AUDIO));const c=this.getFwdBufferInfo(l,ln.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,a)){e.trigger(K.BUFFER_EOS,{type:"audio"}),this.state=tt.ENDED;return}const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ln.MAIN),f=c.len,h=this.getMaxBufferLength(u==null?void 0:u.len),p=a.fragments,g=p[0].start,v=this.getLoadPosition(),_=this.flushing?v:c.end;if(this.switchingTrack&&i){const b=v;a.PTSKnown&&b<g&&(c.end>g||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=g+.05)}if(f>=h&&!this.switchingTrack&&_<p[p.length-1].start)return;let S=this.getNextFragment(_,a),A=!1;if(S&&this.isLoopLoading(S,_)&&(A=!!S.gap,S=this.getNextFragmentLoopLoading(S,a,c,ln.MAIN,h)),!S){this.bufferFlushed=!0;return}const T=u&&S.start>u.end+a.targetduration;if(T||!(u!=null&&u.len)&&c.len){const b=this.getAppendedFrag(S.start,ln.MAIN);if(b===null||(A||(A=!!b.gap||!!T&&u.len===0),T&&!A||A&&c.nextStart&&c.nextStart<b.end))return}this.loadFragment(S,o,_)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Rm(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?this.setInterval(h4):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=tt.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=tt.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(K.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var i;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:r}=this,{details:s,id:o}=t;if(!r){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const a=r[o];let l=0;if(s.live||(i=a.details)!=null&&i.live){this.checkLiveUpdate(s);const u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;if(!a.details&&s.hasProgramDateTime&&u.hasProgramDateTime)JT(s,u),l=s.fragments[0].start;else{var c;l=this.alignPlaylists(s,a.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}a.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===tt.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=tt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:r,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const f=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new z9(this.hls,ln.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[i.cc],g=(t=i.initSegment)==null?void 0:t.data;if(p!==void 0){const _=r?r.index:-1,S=_!==-1,A=new Lb(i.level,i.sn,i.stats.chunkCount,s.byteLength,_,S);h.push(s,g,f,"",i,r,u.totalduration,!1,A,p)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:v}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new M9,complete:!1};v.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=tt.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i.type!==ln.AUDIO){if(!this.loadedmetadata&&i.type===ln.MAIN){const s=this.videoBuffer||this.media;s&&Fi.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(i.sn!=="initSegment"){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(K.AUDIO_TRACK_SWITCHED,_s({},s)))}this.fragBufferedComplete(i,r)}onError(e,t){var i;if(t.fatal){this.state=tt.ERROR;return}switch(t.details){case Ue.FRAG_GAP:case Ue.FRAG_PARSING_ERROR:case Ue.FRAG_DECRYPT_ERROR:case Ue.FRAG_LOAD_ERROR:case Ue.FRAG_LOAD_TIMEOUT:case Ue.KEY_LOAD_ERROR:case Ue.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ln.AUDIO,t);break;case Ue.AUDIO_TRACK_LOAD_ERROR:case Ue.AUDIO_TRACK_LOAD_TIMEOUT:case Ue.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===tt.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===ii.AUDIO_TRACK&&(this.state=tt.IDLE);break;case Ue.BUFFER_APPEND_ERROR:case Ue.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===Ue.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Ue.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==xi.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==xi.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===tt.ENDED&&(this.state=tt.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,ln.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:f}=u,{audio:h,text:p,id3:g,initSegment:v}=s;if(this.fragContextChanged(l)||!f){this.fragmentTracker.removeFragment(l);return}if(this.state=tt.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),v!=null&&v.tracks){const _=l.initSegment||l;this._bufferInitSegment(u,v.tracks,_,o),r.trigger(K.FRAG_PARSING_INIT_SEGMENT,{frag:_,id:i,tracks:v.tracks})}if(h){const{startPTS:_,endPTS:S,startDTS:A,endDTS:T}=h;c&&(c.elementaryStreams[xi.AUDIO]={startPTS:_,endPTS:S,startDTS:A,endDTS:T}),l.setElementaryStreamInfo(xi.AUDIO,_,S,A,T),this.bufferFragmentData(h,l,c,o)}if(g!=null&&(t=g.samples)!=null&&t.length){const _=jr({id:i,frag:l,details:f},g);r.trigger(K.FRAG_PARSING_METADATA,_)}if(p){const _=jr({id:i,frag:l,details:f},p);r.trigger(K.FRAG_PARSING_USERDATA,_)}}_bufferInitSegment(e,t,i,r){if(this.state!==tt.PARSING)return;t.video&&delete t.video;const s=t.audio;if(!s)return;s.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(K.BUFFER_CODECS,t);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:r,parent:i.type,data:a};this.hls.trigger(K.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||r===vs.NOT_LOADED||r===vs.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=tt.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==t.details.fragments[0].start&&JT(t.details,o)}else this.startFragRequested=!0,super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:r,characteristics:s,audioCodec:o,channels:a}=this.bufferedTrack;am({name:t,lang:i,assocLang:r,characteristics:s,audioCodec:o,channels:a},e,Lp)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(K.AUDIO_TRACK_SWITCHED,_s({},e))}}function W9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Y_(n[t].attrs,e[t].attrs))return!1;return!0}function Y_(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>n[r]!==e[r])}function tL(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class j9 extends Ib{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.LEVEL_LOADING,this.onLevelLoading,this),e.on(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(K.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(K.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.LEVEL_LOADING,this.onLevelLoading,this),e.off(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(K.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(K.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==r){this.warn(`Audio track with id:${i} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=t.details,this.log(`Audio track ${i} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,p)=>{h.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const h=Yc(l,a,Lp);if(h>-1)s=a[h];else{const p=Yc(l,this.tracks);s=this.tracks[p]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger(K.AUDIO_TRACKS_UPDATED,u);const f=this.trackId;if(c!==-1&&f===-1)this.setAudioTrack(c);else if(a.length&&f===-1){var o;const h=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(h.message),this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===ii.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const r=this.currentTrack;if(r&&am(e,r,Lp))return r;const s=Yc(e,this.tracksInGroup,Lp);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(r){let o=t.loadLevel;o===-1&&(o=t.firstAutoLevel);const a=Jfe(e,t.levels,i,o,Lp);if(a===-1)return null;t.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=Yc(e,i);if(o>-1)return i[o]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===i&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(K.AUDIO_TRACK_SWITCHING,_s({},r)),s))return;const o=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(!(this.selectDefaultTrack&&!r.default)&&(!e||am(e,r,Lp)))return i}if(e){const{name:i,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(am({name:i,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l},u,Lp))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Y_(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Y_(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const i=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${i} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(K.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}}const d4=500;class K9 extends Db{constructor(e,t,i){super(e,t,i,"[subtitle-stream-controller]",ln.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.LEVEL_LOADED,this.onLevelLoaded,this),e.on(K.ERROR,this.onError,this),e.on(K.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(K.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(K.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(K.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.LEVEL_LOADED,this.onLevelLoaded,this),e.off(K.ERROR,this.onError,this),e.off(K.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(K.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(K.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(K.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=tt.IDLE,this.setInterval(d4),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:r}=t;if(this.fragPrevious=i,this.state=tt.IDLE,!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=i.start;for(let c=0;c<s.length;c++)if(a>=s[c].start&&a<=s[c].end){o=s[c];break}const l=i.start+i.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,t){const{startOffset:i,endOffset:r}=t;if(i===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(i,s,ln.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===ln.MAIN){var i;(i=this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const i=t.frag;(i==null?void 0:i.type)===ln.SUBTITLE&&(t.details===Ue.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==tt.STOPPED&&(this.state=tt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&W9(this.levels,t)){this.levels=t.map(i=>new Rm(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const r=new Rm(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ln.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(d4)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:r,levels:s}=this,{details:o,id:a}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[a];if(a>=s.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(i=l.details)!=null&&i.live){const f=this.mainDetails;if(o.deltaUpdateFailed||!f)return;const h=f.fragments[0];if(!l.details)o.hasProgramDateTime&&f.hasProgramDateTime?(JT(o,f),c=o.fragments[0].start):h&&(c=h.start,QI(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,QI(o,c))}}l.details=o,this.levelLastLoaded=l,a===r&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===tt.IDLE&&(qT(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,r=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&r!=null&&r.key&&r.iv&&r.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch(a=>{throw s.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:t}),a}).then(a=>{const l=performance.now();s.trigger(K.FRAG_DECRYPTED,{frag:t,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=tt.IDLE})}}doTick(){if(!this.media){this.state=tt.IDLE;return}if(this.state===tt.IDLE){const{currentTrackId:e,levels:t}=this,i=t==null?void 0:t[e];if(!i||!t.length||!i.details)return;const{config:r}=this,s=this.getLoadPosition(),o=Fi.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,ln.MAIN),u=i.details,f=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>f)return;const h=u.fragments,p=h.length,g=u.edge;let v=null;const _=this.fragPrevious;if(a<g){const S=r.maxFragLookUpTolerance,A=a>g-S?0:S;v=qT(_,h,Math.max(h[0].start,a),A),!v&&_&&_.start<h[0].start&&(v=h[0])}else v=h[p-1];if(!v)return;if(v=this.mapToInitFragWhenRequired(v),v.sn!=="initSegment"){const S=v.sn-u.startSN,A=h[S-1];A&&A.cc===v.cc&&this.fragmentTracker.getState(A)===vs.NOT_LOADED&&(v=A)}this.fragmentTracker.getState(v)===vs.NOT_LOADED&&this.loadFragment(v,i,a)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,i){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,i))}get mediaBufferTimeRanges(){return new Yhe(this.tracksBuffered[this.currentTrackId]||[])}}class Yhe{constructor(e){this.buffered=void 0;const t=(i,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}class X9 extends Ib{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=oT(this.media.textTracks);for(let s=0;s<i.length;s++)if(i[s].mode==="hidden")t=i[s];else if(i[s].mode==="showing"){t=i[s];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.LEVEL_LOADING,this.onLevelLoading,this),e.on(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(K.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(K.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.LEVEL_LOADING,this.onLevelLoading,this),e.off(K.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(K.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(K.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),oT(this.media.textTracks).forEach(t=>{B0(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==r){this.warn(`Subtitle track with id:${i} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=t.details,this.log(`Subtitle track ${i} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(u=>!i||i.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,f)=>{u.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const u=Yc(a,o);if(u>-1)s=o[u];else{const f=Yc(a,this.tracks);s=this.tracks[f]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger(K.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const s=t[r];if(!(i&&!s.default||!i&&!e)&&(!e||am(s,e)))return r}if(e){for(let r=0;r<t.length;r++){const s=t[r];if(Y_(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const s=t[r];if(Y_(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(tL(r,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===ii.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&am(e,i))return i;const r=Yc(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(i)return null;{const s=Yc(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const i=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${i}`),this.hls.trigger(K.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=oT(e.textTracks),i=this.currentTrack;let r;if(i&&(r=t.filter(s=>tL(i,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!jt(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(K.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===i&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:o,groupId:a="",name:l,type:c,url:u}=r;this.hls.trigger(K.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const f=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(f)}}class qhe{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,i){const r=this.queues[t];r.push(e),r.length===1&&!i&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const i=new Promise(s=>{t=s}),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),i}executeNext(e){const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){Ce.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${r}`),i.onError(r);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const p4=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class Y9{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=i=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:i,mediaSource:r}=this;this.log("Media source opened"),i&&(i.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(K.MEDIA_ATTACHED,{media:i,mediaSource:r})),r&&r.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:r}=this;i!==r&&Ce.error(`Media element src was set while attaching MediaSource (${r} > ${i})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=hfe(ud(e.config.preferManagedMediaSource)),this.log=Ce.log.bind(Ce,t),this.warn=Ce.warn.bind(Ce,t),this.error=Ce.error.bind(Ce,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.BUFFER_RESET,this.onBufferReset,this),e.on(K.BUFFER_APPENDING,this.onBufferAppending,this),e.on(K.BUFFER_CODECS,this.onBufferCodecs,this),e.on(K.BUFFER_EOS,this.onBufferEos,this),e.on(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(K.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(K.FRAG_PARSED,this.onFragParsed,this),e.on(K.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.BUFFER_RESET,this.onBufferReset,this),e.off(K.BUFFER_APPENDING,this.onBufferAppending,this),e.off(K.BUFFER_CODECS,this.onBufferCodecs,this),e.off(K.BUFFER_EOS,this.onBufferEos,this),e.off(K.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(K.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(K.FRAG_PARSED,this.onFragParsed,this),e.off(K.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new qhe(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const i=this.media=t.media,r=ud(this.appendSource);if(i&&r){var s;const o=this.mediaSource=new r;this.log(`created media source: ${(s=o.constructor)==null?void 0:s.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&o instanceof l,m4(i),Jhe(i,a),i.load()}catch{i.src=a}else i.src=a;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:i}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(r){this.warn(`onMediaDetaching: ${r.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&m4(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(K.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var i;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(r){this.warn(`onBufferReset ${e}`,r)}}onBufferCodecs(e,t){const i=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach(o=>{if(i){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:c,codec:u,levelCodec:f,container:h,metadata:p}=t[o],g=FU(l.codec,l.levelCodec),v=g==null?void 0:g.replace(p4,"$1");let _=FU(u,f);const S=(a=_)==null?void 0:a.replace(p4,"$1");if(_&&v!==S){o.slice(0,5)==="audio"&&(_=jT(_,this.appendSource));const A=`${h};codecs=${_}`;this.appendChangeType(o,A),this.log(`switching codec ${g} to ${_}`),this.tracks[o]={buffer:l.buffer,codec:u,container:h,levelCodec:f,metadata:p,id:c}}}}else this.pendingTracks[o]=t[o]}),i)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:i}=this,r={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};i.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:i,operationQueue:r,tracks:s}=this,{data:o,type:a,frag:l,part:c,chunkMeta:u}=t,f=u.buffering[a],h=self.performance.now();f.start=h;const p=l.stats.buffering,g=c?c.stats.buffering:null;p.start===0&&(p.start=h),g&&g.start===0&&(g.start=h);const v=s.audio;let _=!1;a==="audio"&&(v==null?void 0:v.container)==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const S=l.start,A={execute:()=>{if(f.executeStart=self.performance.now(),_){const T=this.sourceBuffer[a];if(T){const b=S-T.timestampOffset;Math.abs(b)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${S} (delta: ${b}) sn: ${l.sn})`),T.timestampOffset=S)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const T=self.performance.now();f.executeEnd=f.end=T,p.first===0&&(p.first=T),g&&g.first===0&&(g.first=T);const{sourceBuffer:b}=this,C={};for(const L in b)C[L]=Fi.getBuffered(b[L]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(K.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:C})},onError:T=>{const b={type:_n.MEDIA_ERROR,parent:l.type,details:Ue.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:c,chunkMeta:u,error:T,err:T,fatal:!1};if(T.code===DOMException.QUOTA_EXCEEDED_ERR)b.details=Ue.BUFFER_FULL_ERROR;else{const C=++this.appendErrors[a];b.details=Ue.BUFFER_APPEND_ERROR,this.warn(`Failed ${C}/${i.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),C>=i.config.appendErrorMaxRetry&&(b.fatal=!0)}i.trigger(K.ERROR,b)}};r.append(A,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:i}=this,r=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(K.BUFFER_FLUSHED,{type:s})},onError:o=>{this.warn(`Failed to remove from ${s} SourceBuffer`,o)}});t.type?i.append(r(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{i.append(r(s),s)})}onFragParsed(e,t){const{frag:i,part:r}=t,s=[],o=r?r.elementaryStreams:i.elementaryStreams;o[xi.AUDIOVIDEO]?s.push("audiovideo"):(o[xi.AUDIO]&&s.push("audio"),o[xi.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();i.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const c=r?r.stats:i.stats;this.hls.trigger(K.FRAG_BUFFERED,{frag:i,part:r,stats:c,id:i.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(a,s)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((r,s)=>{const o=this.sourceBuffer[s];return o&&(!t.type||t.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} sourceBuffer now EOS`))),r&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:r}=this;if(!r||r.readyState!=="open"){r&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),r.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.getSourceBufferTypes().length)return;const s=e.config,o=i.currentTime,a=t.levelTargetDuration,l=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(jt(l)&&l>0){const c=Math.max(l,a),u=Math.floor(o/a)*a-c;this.flushBackBuffer(o,a,u)}if(jt(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const c=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),u=Math.max(c,a),f=Math.floor(o/a)*a+u;this.flushFrontBuffer(o,a,f)}}flushBackBuffer(e,t,i){const{details:r,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const l=s[a];if(l){const c=Fi.getBuffered(l);if(c.length>0&&i>c.start(0)){if(this.hls.trigger(K.BACK_BUFFER_REACHED,{bufferEnd:i}),r!=null&&r.live)this.hls.trigger(K.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l.ended&&c.end(c.length-1)-e<t*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(K.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:a})}}})}flushFrontBuffer(e,t,i){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(o=>{const a=r[o];if(a){const l=Fi.getBuffered(a),c=l.length;if(c<2)return;const u=l.start(c-1),f=l.end(c-1);if(i>u||e>=u&&e<=f)return;if(a.ended&&e-f<2*t){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(K.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:i,mediaSource:r}=this,s=e.fragments[0].start+e.totalduration,o=i.duration,a=jt(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(s>a&&s>o||!jt(o))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),r.duration=s)}updateSeekableRange(e){const t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&t!=null&&t.setLiveSeekableRange){const s=Math.max(0,i[0].start),o=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${s}-${o}.`),t.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:i}=this,r=Object.keys(i).length;if(r&&(!e||r===2||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(K.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{t.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!t[s]){var r;const o=e[s];if(!o)throw Error(`source buffer exists for track ${s}, however track does not`);let a=((r=o.levelCodec)==null?void 0:r.indexOf(","))===-1?o.levelCodec:o.codec;a&&s.slice(0,5)==="audio"&&(a=jT(a,this.appendSource));const l=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${l})`);try{const c=t[s]=i.addSourceBuffer(l),u=s;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(f,h)=>{const p=h.removedRanges;p!=null&&p.length&&this.hls.trigger(K.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:c,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(c){this.error(`error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:s,mimeType:l})}}}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i==null?void 0:i.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:i}=this;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var i;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${r}`,t),this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(r)}removeExecutor(e,t,i){const{media:r,mediaSource:s,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!r||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const c=jt(r.duration)?r.duration:1/0,u=jt(s.duration)?s.duration:1/0,f=Math.max(0,t),h=Math.min(i,c,u);h>f&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${f},${h}] from the ${e} SourceBuffer`),l.remove(f,h)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.sourceBuffer[t];if(!i){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:i}=this,r=t.map(s=>i.appendBlocker(s));Promise.all(r).then(()=>{e(),t.forEach(s=>{const o=this.sourceBuffer[s];o!=null&&o.updating||i.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const r=this.sourceBuffer[e];if(!r)return;const s=i.bind(this,e);this.listeners[e].push({event:t,listener:s}),r.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(i=>{t.removeEventListener(i.event,i.listener)})}}function m4(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function Jhe(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}const Qhe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},q9=n=>String.fromCharCode(Qhe[n]||n),rc=15,ef=100,Zhe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ede={17:2,18:4,21:6,22:8,23:10,19:13,20:15},tde={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},nde={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ide=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class rde{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;Ce.log(`${this.time} [${e}] ${i}`)}}}const Ep=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class J9{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const r=t[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class sde{constructor(){this.uchar=" ",this.penState=new J9}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}let ode=class{constructor(e){this.chars=[],this.pos=0,this.currPenState=new J9,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<ef;t++)this.chars.push(new sde);this.logger=e}equals(e){for(let t=0;t<ef;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<ef;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<ef;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ef&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ef)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=q9(e);if(this.pos>=ef){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<ef;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<ef;i++){const r=this.chars[i].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};class hR{constructor(e){this.rows=[],this.currRow=rc-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<rc;t++)this.rows.push(new ode(e));this.logger=e}reset(){for(let e=0;e<rc;e++)this.rows[e].clear();this.currRow=rc-1}equals(e){let t=!0;for(let i=0;i<rc;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<rc;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<rc;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let a=0;a<rc;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(o.rows[s+c])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);i.setCursor(e.indent),e.color=i.chars[o].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",r=-1;for(let s=0;s<rc;s++){const o=this.rows[s].getTextString();o&&(r=s+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class g4{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new hR(i),this.nonDisplayedMemory=new hR(i),this.lastOutputScreen=new hR(i),this.currRollUpRow=this.displayedMemory.rows[rc-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[rc-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class v4{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=lde(),this.logger=void 0;const r=this.logger=new rde;this.channels=[null,new g4(e,t,r),new g4(e+1,i,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const r=t[i]&127,s=t[i+1]&127;let o=!1,a=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+Ep([t[i],t[i+1]])+"] -> ("+Ep([r,s])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if(ade(r,s,l)){gA(null,null,l),this.logger.log(3,()=>"Repeated command ("+Ep([r,s])+") is dropped");continue}gA(r,s,this.cmdHistory),o=this.parseCmd(r,s),o||(o=this.parseMidrow(r,s)),o||(o=this.parsePAC(r,s)),o||(o=this.parseBackgroundAttributes(r,s))}else gA(null,null,l);if(!o&&(a=this.parseChars(r,s),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ep([r,s])+" orig: "+Ep([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(i||r))return!1;const s=e===20||e===21||e===23?1:2,o=this.channels[s];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ep([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(r||s))return!1;const o=e<=23?1:2;t>=64&&t<=95?i=o===1?Zhe[e]:tde[e]:i=o===1?ede[e]:nde[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(i,t)),this.currentChannel=o,!0):!1}interpretPAC(e,t){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,r.underline=(i&1)===1,i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((i-16)/2)*4,r}parseChars(e,t){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let o;s===17?o=t+80:s===18?o=t+112:o=t+144,this.logger.log(2,()=>"Special char '"+q9(o)+"' in channel "+i),r=[o]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+Ep(r).join(",")),r}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(i||r))return!1;let s;const o={};e===16||e===24?(s=Math.floor((t-32)/2),o.background=ide[s],t%2===1&&(o.background=o.background+"_semi")):t===45?o.background="transparent":(o.foreground="black",t===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}gA(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function gA(n,e,t){t.a=n,t.b=e}function ade(n,e,t){return t.a===n&&t.b===e}function lde(){return{a:null,b:null}}class vA{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var cB=function(){if(xv!=null&&xv.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function i(a){return t(n,a)}function r(a){return t(e,a)}function s(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const f in u)a[f]=u[f]}return a}function o(a,l,c){const u=this,f={enumerable:!0};u.hasBeenReset=!1;let h="",p=!1,g=a,v=l,_=c,S=null,A="",T=!0,b="auto",C="start",L=50,P="middle",k=50,I="middle";Object.defineProperty(u,"id",s({},f,{get:function(){return h},set:function(D){h=""+D}})),Object.defineProperty(u,"pauseOnExit",s({},f,{get:function(){return p},set:function(D){p=!!D}})),Object.defineProperty(u,"startTime",s({},f,{get:function(){return g},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");g=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},f,{get:function(){return v},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");v=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},f,{get:function(){return _},set:function(D){_=""+D,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},f,{get:function(){return S},set:function(D){S=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},f,{get:function(){return A},set:function(D){const G=i(D);if(G===!1)throw new SyntaxError("An invalid or illegal string was specified.");A=G,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},f,{get:function(){return T},set:function(D){T=!!D,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},f,{get:function(){return b},set:function(D){if(typeof D!="number"&&D!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");b=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},f,{get:function(){return C},set:function(D){const G=r(D);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");C=G,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},f,{get:function(){return L},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");L=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},f,{get:function(){return P},set:function(D){const G=r(D);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");P=G,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},f,{get:function(){return k},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");k=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},f,{get:function(){return I},set:function(D){const G=r(D);if(!G)throw new SyntaxError("An invalid or illegal string was specified.");I=G,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class cde{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Q9(n){function e(i,r,s,o){return(i|0)*3600+(r|0)*60+(s|0)+parseFloat(o||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class ude{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function Z9(n,e,t,i){const r=i?n.split(i):[n];for(const s in r){if(typeof r[s]!="string")continue;const o=r[s].split(t);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const nL=new cB(0,0,""),yA=nL.align==="middle"?"middle":"center";function fde(n,e,t){const i=n;function r(){const a=Q9(n);if(a===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const c=new ude;Z9(a,function(h,p){let g;switch(h){case"region":for(let v=t.length-1;v>=0;v--)if(t[v].id===p){c.set(h,t[v].region);break}break;case"vertical":c.alt(h,p,["rl","lr"]);break;case"line":g=p.split(","),c.integer(h,g[0]),c.percent(h,g[0])&&c.set("snapToLines",!1),c.alt(h,g[0],["auto"]),g.length===2&&c.alt("lineAlign",g[1],["start",yA,"end"]);break;case"position":g=p.split(","),c.percent(h,g[0]),g.length===2&&c.alt("positionAlign",g[1],["start",yA,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,p);break;case"align":c.alt(h,p,["start",yA,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&nL.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",yA);let f=c.get("position","auto");f==="auto"&&nL.position===50&&(f=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=f}function o(){n=n.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),o(),e.endTime=r(),o(),s(n,e)}function eW(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class hde{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new cde,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let s=t.buffer,o=0;for(s=eW(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,t.buffer=s.slice(o),a}function r(s){Z9(s,function(o,a){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=i();const a=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let o=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:s=i(),t.state){case"HEADER":/:/.test(s)?r(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new cB(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{fde(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const dde=/\r\n|\n\r|\n|\r/g,dR=function(e,t,i=0){return e.slice(i,i+t.length)===t},pde=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!jt(t)||!jt(i)||!jt(r)||!jt(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*r,t+=60*60*1e3*s,t},pR=function(e){let t=5381,i=e.length;for(;i;)t=t*33^e.charCodeAt(--i);return(t>>>0).toString()};function uB(n,e,t){return pR(n.toString())+pR(e.toString())+pR(t)}const mde=function(e,t,i){let r=e[t],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};function gde(n,e,t,i,r,s,o){const a=new hde,l=nu(new Uint8Array(n)).trim().replace(dde,`
`).split(`
`),c=[],u=e?Nhe(e.baseTime,e.timescale):0;let f="00:00.000",h=0,p=0,g,v=!0;a.oncue=function(_){const S=t[i];let A=t.ccOffset;const T=(h-u)/9e4;if(S!=null&&S.new&&(p!==void 0?A=t.ccOffset=S.start:mde(t,i,T)),T){if(!e){g=new Error("Missing initPTS for VTT MPEGTS");return}A=T-t.presentationOffset}const b=_.endTime-_.startTime,C=dl((_.startTime+A-p)*9e4,r*9e4)/9e4;_.startTime=Math.max(C,0),_.endTime=Math.max(C+b,0);const L=_.text.trim();_.text=decodeURIComponent(encodeURIComponent(L)),_.id||(_.id=uB(_.startTime,_.endTime,L)),_.endTime>0&&c.push(_)},a.onparsingerror=function(_){g=_},a.onflush=function(){if(g){o(g);return}s(c)},l.forEach(_=>{if(v)if(dR(_,"X-TIMESTAMP-MAP=")){v=!1,_.slice(16).split(",").forEach(S=>{dR(S,"LOCAL:")?f=S.slice(6):dR(S,"MPEGTS:")&&(h=parseInt(S.slice(7)))});try{p=pde(f)/1e3}catch(S){g=S}return}else _===""&&(v=!1);a.parse(_+`
`)}),a.flush()}const mR="stpp.ttml.im1t",tW=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nW=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,vde={left:"start",center:"center",right:"end",start:"start",end:"end"};function y4(n,e,t,i){const r=Ln(new Uint8Array(n),["mdat"]);if(r.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(a=>nu(a)),o=Fhe(e.baseTime,1,e.timescale);try{s.forEach(a=>t(yde(a,o)))}catch(a){i(a)}}function yde(n,e){const r=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((f,h)=>(f[h]=r.getAttribute(`ttp:${h}`)||s[h],f),{}),a=r.getAttribute("xml:space")!=="preserve",l=x4(gR(r,"styling","style")),c=x4(gR(r,"layout","region")),u=gR(r,"body","[begin]");return[].map.call(u,f=>{const h=iW(f,a);if(!h||!f.hasAttribute("begin"))return null;const p=yR(f.getAttribute("begin"),o),g=yR(f.getAttribute("dur"),o);let v=yR(f.getAttribute("end"),o);if(p===null)throw _4(f);if(v===null){if(g===null)throw _4(f);v=p+g}const _=new cB(p-e,v-e,h);_.id=uB(_.startTime,_.endTime,_.text);const S=c[f.getAttribute("region")],A=l[f.getAttribute("style")],T=xde(S,A,l),{textAlign:b}=T;if(b){const C=vde[b];C&&(_.lineAlign=C),_.align=b}return jr(_,T),_}).filter(f=>f!==null)}function gR(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function x4(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function iW(n,e){return[].slice.call(n.childNodes).reduce((t,i,r)=>{var s;return i.nodeName==="br"&&r?t+`
`:(s=i.childNodes)!=null&&s.length?iW(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function xde(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return o&&t.hasOwnProperty(o)&&(r=t[o]),s.reduce((a,l)=>{const c=vR(e,i,l)||vR(n,i,l)||vR(r,i,l);return c&&(a[l]=c),a},{})}function vR(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function _4(n){return new Error(`Could not parse ttml timestamp ${n}`)}function yR(n,e){if(!n)return null;let t=Q9(n);return t===null&&(tW.test(n)?t=_de(n,e):nW.test(n)&&(t=Sde(n,e))),t}function _de(n,e){const t=tW.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function Sde(n,e){const t=nW.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class rW{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=E4(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(K.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(K.FRAG_LOADING,this.onFragLoading,this),e.on(K.FRAG_LOADED,this.onFragLoaded,this),e.on(K.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(K.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(K.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(K.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(K.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(K.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(K.FRAG_LOADING,this.onFragLoading,this),e.off(K.FRAG_LOADED,this.onFragLoaded,this),e.off(K.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(K.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(K.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(K.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(K.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new vA(this,"textTrack1"),t=new vA(this,"textTrack2"),i=new vA(this,"textTrack3"),r=new vA(this,"textTrack4");this.cea608Parser1=new v4(1,e,t),this.cea608Parser2=new v4(3,i,r)}}addCues(e,t,i,r,s){let o=!1;for(let a=s.length;a--;){const l=s[a],c=Ede(l[0],l[1],t,i);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],i),o=!0,c/(i-t)>.5))return}if(o||s.push([t,i]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,t,i,r)}else{const a=this.Cues.newCue(null,t,i,r);this.hls.trigger(K.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){const{unparsedVttFrags:o}=this;i==="main"&&(this.initPTS[t.cc]={baseTime:r,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(K.FRAG_LOADED,a)}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let r=0;r<i.textTracks.length;r++){const s=i.textTracks[r];if(S4(s,{name:e,lang:t}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:r}=this,{label:s,languageCode:o}=t[e],a=this.getExistingTrack(s,o);if(a)i[e]=a,B0(i[e]),g9(i[e],r);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,r={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(K.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,i){const r=this.media;if(r)return r.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{B0(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=E4(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)B0(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],r=i.some(s=>s.textCodec===mR);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(W9(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const o=this.media,a=o?oT(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(a){let f=null;for(let h=0;h<a.length;h++)if(a[h]&&S4(a[h],l)){f=a[h],a[h]=null;break}f&&(u=f)}if(u)B0(u);else{const f=sW(l);u=this.createTextTrack(f,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&Ce.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(K.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const s=`textTrack${r[1]}`,o=this.captionsProperties[s];o&&(o.label=i.name,i.lang&&(o.languageCode=i.lang),o.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===ln.MAIN){var i,r;const{cea608Parser1:s,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=t.frag,u=(i=(r=t.part)==null?void 0:r.index)!=null?i:-1;s&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:i,payload:r}=t;if(i.type===ln.SUBTITLE)if(r.byteLength){const s=i.decryptdata,o="stats"in t;if(s==null||!s.encrypted||o){const a=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),a&&a.textCodec===mR?this._parseIMSC1(i,r):this._parseVTTs(t)}}else this.hls.trigger(K.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;y4(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger(K.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{Ce.log(`Failed to parse IMSC1: ${r}`),i.trigger(K.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[i.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(t=i.initSegment)!=null&&t.data?Cl(i.initSegment.data,new Uint8Array(r)):r;gde(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,u=>{this._appendCues(u,i.level),l.trigger(K.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},u=>{const f=u.message==="Missing initPTS for VTT MPEGTS";f?o.push(e):this._fallbackToIMSC1(i,r),Ce.log(`Failed to parse VTT cue: ${u}`),!(f&&a>i.cc)&&l.trigger(K.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||y4(t,this.initPTS[e.cc],()=>{i.textCodec=mR,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(s=>v9(r,s))}else{const r=this.tracks[t];if(!r)return;const s=r.default?"default":"subtitles"+t;i.trigger(K.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===ln.SUBTITLE&&this.onFragLoaded(K.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:r}=this;if(!this.enabled||!i||!r)return;const{frag:s,samples:o}=t;if(!(s.type===ln.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);i.addData(o[a].pts,c[0]),r.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:o}=this;if(!(!o||o.currentTime<i)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>XI(a[l],t,i))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>XI(a[l],t,r))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let r=2;for(let s=0;s<i;s++){const o=e[r++],a=127&e[r++],l=127&e[r++];if(a===0&&l===0)continue;if((4&o)!==0){const u=3&o;(u===0||u===1)&&(t[u].push(a),t[u].push(l))}}return t}}function sW(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function S4(n,e){return!!n&&n.kind===sW(e)&&tL(e,n)}function Ede(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function E4(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Bb{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(K.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(K.BUFFER_CODECS,this.onBufferCodecs,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(K.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(K.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(K.BUFFER_CODECS,this.onBufferCodecs,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&jt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&Ce.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,Bb.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const r=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(t,i);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&r(l,e[a+1])){s=a;break}}return s}}class oW{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(K.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(K.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const r=performance.now();if(t){if(this.lastTime){const s=r-this.lastTime,o=i-this.lastDroppedFrames,a=t-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;if(c.trigger(K.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:i}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;Ce.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(K.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const xA="[eme]";class lm{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=lm.CDMCleanupPromise?[lm.CDMCleanupPromise]:[],this.debug=Ce.debug.bind(Ce,xA),this.log=Ce.log.bind(Ce,xA),this.warn=Ce.warn.bind(Ce,xA),this.error=Ce.error.bind(Ce,xA),this.onMediaEncrypted=t=>{const{initDataType:i,initData:r}=t,s=`"${t.type}" event: init data type: "${i}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=cA(this.config));const a=o.map(eR).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=QC(o);let l,c;if(i==="sinf"){if(a!==fi.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${a}`);return}const g=Qr(new Uint8Array(r));try{const v=Z2(JSON.parse(g).sinf),_=f9(v);if(!_)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=_.subarray(8,24),c=fi.FAIRPLAY}catch(v){this.warn(`${s} Failed to parse sinf: ${v}`);return}}else{if(a!==fi.WIDEVINE&&a!==fi.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${a}`);return}const g=lfe(r),v=g.filter(S=>!!S.systemId&&ZC(S.systemId)===a);v.length>1&&this.warn(`${s} Using first of ${v.length} pssh found for selected key-system ${a}`);const _=v[0];if(!_){g.length===0||g.some(S=>!S.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${g.map(S=>ZC(S.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=ZC(_.systemId),_.version===0&&_.data)if(c===fi.WIDEVINE){const S=_.data.length-22;l=_.data.subarray(S,S+16)}else c===fi.PLAYREADY&&(l=i9(_.data))}if(!c||!l){this.log(`Unable to handle ${s} with key-system ${a}`);return}const u=Vc.hexDump(l),{keyIdToKeySessionPromise:f,mediaKeySessions:h}=this;let p=f[u];for(let g=0;g<h.length;g++){const v=h[g],_=v.decryptdata;if(!_.keyId)continue;const S=Vc.hexDump(_.keyId);if(u===S||_.uri.replace(/-/g,"").indexOf(u)!==-1){if(p=f[S],_.pssh)break;delete f[S],_.pssh=new Uint8Array(r),_.keyId=l,p=f[u]=p.then(()=>this.generateRequestWithPreferredKeySession(v,i,r,"encrypted-event-key-match")),p.catch(A=>this.handleError(A));break}}if(!p){if(c!==a){this.log(`Ignoring "${s}" with ${c} init data for selected key-system ${a}`);return}p=f[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:g,mediaKeys:v})=>{var _;this.throwIfDestroyed();const S=new _v("ISO-23001-7",u,(_=eR(g))!=null?_:"");return S.pssh=new Uint8Array(r),S.keyId=l,this.attemptSetMediaKeys(g,v).then(()=>{this.throwIfDestroyed();const A=this.createMediaKeySessionContext({decryptdata:S,keySystem:g,mediaKeys:v});return this.generateRequestWithPreferredKeySession(A,i,r,"encrypted-event-no-match")})}),p.catch(g=>this.handleError(g))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(K.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(K.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(K.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(K.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(K.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(K.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===fi.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(o,a,l)=>!!o&&l.indexOf(o)===a,r=t.map(o=>o.audioCodec).filter(i),s=t.map(o=>o.videoCodec).filter(i);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,r,s).then(f=>o({keySystem:u,mediaKeys:f})).catch(f=>{c.length?l(c):f instanceof sl?a(f):a(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${i}`;return n9===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return i(e,t)}getMediaKeysPromise(e,t,i){const r=Fue(e,t,i,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let o=s==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),o=this.requestMediaKeySystemAccess(e,r);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(f=>f?this.setMediaKeysServerCertificate(u,e,f):u))),a.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),a.mediaKeys})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Vc.hexDump(e.keyId||[])}`);const r=i.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(i,s,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Vc.hexDump(e.keyId)}updateKeySession(e,t){var i;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Vc.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,i)=>{const r=cA(this.config),s=e.map(QC).filter(o=>!!o&&r.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:o})=>{const a=eR(o);a?t(a):i(new Error(`Unable to find format for key-system "${o}"`))}).catch(i)})}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),r=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let s=this.keyIdToKeySessionPromise[i];return s||(s=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:t});return this.generateRequestWithPreferredKeySession(l,"cenc",t.pssh,"playlist-key")}))),s.catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof sl?this.hls.trigger(K.ERROR,e.data):this.hls.trigger(K.ERROR,{type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const r=QC(e.keyFormat),s=r?[r]:cA(this.config);return this.attemptKeySystemAccess(s)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=cA(this.config)),e.length===0)throw new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>i.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,i,r){var s,o;const a=(s=this.config.drmSystems)==null||(o=s[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const g=a.call(this.hls,t,i,e);if(!g)throw new Error("Invalid response from configured generateRequest filter");t=g.initDataType,i=e.decryptdata.pssh=g.initData?new Uint8Array(g.initData):null}catch(g){var l;if(this.warn(g.message),(l=this.hls)!=null&&l.config.debug)throw g}if(i===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${t} length: ${i?i.byteLength:null})`);const u=new lB,f=e._onmessage=g=>{const v=e.mediaKeysSession;if(!v){u.emit("error",new Error("invalid state"));return}const{messageType:_,message:S}=g;this.log(`"${_}" message event for session "${v.sessionId}" message size: ${S.byteLength}`),_==="license-request"||_==="license-renewal"?this.renewLicense(e,S).catch(A=>{this.handleError(A),u.emit("error",A)}):_==="license-release"?e.keySystem===fi.FAIRPLAY&&(this.updateKeySession(e,jI("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${_}"`)},h=e._onkeystatuseschange=g=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const _=e.keyStatus;u.emit("keyStatus",_),_==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",f),e.mediaKeysSession.addEventListener("keystatuseschange",h);const p=new Promise((g,v)=>{u.on("error",v),u.on("keyStatus",_=>{_.startsWith("usable")?g():_==="output-restricted"?v(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):_==="internal-error"?v(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${_}"`)):_==="expired"?v(new Error("key expired while generating request")):this.warn(`unhandled key status change "${_}"`)})});return e.mediaKeysSession.generateRequest(t,i).then(()=>{var g;this.log(`Request generated for key-session "${(g=e.mediaKeysSession)==null?void 0:g.sessionId}" keyId: ${c}`)}).catch(g=>{throw new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_NO_SESSION,error:g,fatal:!1},`Error generating key-session request: ${g}`)}).then(()=>p).catch(g=>{throw u.removeAllListeners(),this.removeSession(e),g}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,i)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Vc.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Vc.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,i=t.loader,r=new i(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,p,g,v)=>{o(h.data)},onError:(h,p,g,v)=>{a(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:_s({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,p,g)=>{a(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,p,g)=>{a(new Error("aborted"))}};r.load(l,u,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((r,s)=>{e.setServerCertificate(i).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${i==null?void 0:i.byteLength}) on "${t}"`),r(e)}).catch(o=>{s(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(r=>{throw new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(i,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let f=0,h=s.length;f<h;f++){var o,a;u=s[f];const p=(o=u.querySelector("name"))==null?void 0:o.textContent,g=(a=u.querySelector("value"))==null?void 0:a.textContent;p&&g&&e.setRequestHeader(p,g)}}const l=r.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return jI(atob(c))}setupLicenseXHR(e,t,i,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,i,r)}).catch(o=>{if(!i.decryptdata)throw o;return e.open("POST",t,!0),s.call(this.hls,e,t,i,r)}).then(o=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:o||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}r(l)}else{const l=i.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)s(new sl({type:_n.KEY_SYSTEM_ERROR,details:Ue.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==fi.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.removeEventListener("encrypted",this.onMediaEncrypted),i.removeEventListener("waitingforkey",this.onWaitingForKey),i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},_v.clearKeyUriToKeyIdMap();const i=t.length;lm.CDMCleanupPromise=Promise.all(t.map(r=>this.removeSession(r)).concat(e==null?void 0:e.setMediaKeys(null).catch(r=>{this.log(`Could not clear media keys: ${r}`)}))).then(()=>{i&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(r=>{this.log(`Could not close sessions and clear media keys: ${r}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>t.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}lm.CDMCleanupPromise=void 0;class sl extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var Qs;(function(n){n.MANIFEST="m",n.AUDIO="a",n.VIDEO="v",n.MUXED="av",n.INIT="i",n.CAPTION="c",n.TIMED_TEXT="tt",n.KEY="k",n.OTHER="o"})(Qs||(Qs={}));var iL;(function(n){n.DASH="d",n.HLS="h",n.SMOOTH="s",n.OTHER="o"})(iL||(iL={}));var qp;(function(n){n.OBJECT="CMCD-Object",n.REQUEST="CMCD-Request",n.SESSION="CMCD-Session",n.STATUS="CMCD-Status"})(qp||(qp={}));const Ade={[qp.OBJECT]:["br","d","ot","tb"],[qp.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[qp.SESSION]:["cid","pr","sf","sid","st","v"],[qp.STATUS]:["bs","rtp"]};class Sv{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(i=>i instanceof Sv?i:new Sv(i))),this.value=e,this.params=t}}class aW{constructor(e){this.description=void 0,this.description=e}}const Tde="Dict";function wde(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function bde(n,e,t,i){return new Error(`failed to ${n} "${wde(e)}" as ${t}`,{cause:i})}const A4="Bare Item",Mde="Boolean",Cde="Byte Sequence",Rde="Decimal",Pde="Integer";function Ide(n){return n<-999999999999999||999999999999999<n}const Lde=/[\x00-\x1f\x7f]+/,Dde="Token",Bde="Key";function mu(n,e,t){return bde("serialize",n,e,t)}function kde(n){if(typeof n!="boolean")throw mu(n,Mde);return n?"?1":"?0"}function Ode(n){return btoa(String.fromCharCode(...n))}function Fde(n){if(ArrayBuffer.isView(n)===!1)throw mu(n,Cde);return`:${Ode(n)}:`}function lW(n){if(Ide(n))throw mu(n,Pde);return n.toString()}function Nde(n){return`@${lW(n.getTime()/1e3)}`}function cW(n,e){if(n<0)return-cW(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const r=Math.floor(n*t);return(r%2===0?r:r+1)/t}else return Math.round(n*t)/t}function Ude(n){const e=cW(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw mu(n,Rde);const t=e.toString();return t.includes(".")?t:`${t}.0`}const Gde="String";function Vde(n){if(Lde.test(n))throw mu(n,Gde);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Hde(n){return n.description||n.toString().slice(7,-1)}function T4(n){const e=Hde(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw mu(e,Dde);return e}function rL(n){switch(typeof n){case"number":if(!jt(n))throw mu(n,A4);return Number.isInteger(n)?lW(n):Ude(n);case"string":return Vde(n);case"symbol":return T4(n);case"boolean":return kde(n);case"object":if(n instanceof Date)return Nde(n);if(n instanceof Uint8Array)return Fde(n);if(n instanceof aW)return T4(n);default:throw mu(n,A4)}}function sL(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw mu(n,Bde);return n}function fB(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${sL(e)}`:`;${sL(e)}=${rL(t)}`).join("")}function uW(n){return n instanceof Sv?`${rL(n.value)}${fB(n.params)}`:rL(n)}function zde(n){return`(${n.value.map(uW).join(" ")})${fB(n.params)}`}function $de(n,e={whitespace:!0}){if(typeof n!="object")throw mu(n,Tde);const t=n instanceof Map?n.entries():Object.entries(n),i=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([r,s])=>{s instanceof Sv||(s=new Sv(s));let o=sL(r);return s.value===!0?o+=fB(s.params):(o+="=",Array.isArray(s.value)?o+=zde(s):o+=uW(s)),o}).join(`,${i}`)}function Wde(n,e){return $de(n,e)}const jde=n=>n==="ot"||n==="sf"||n==="st",Kde=n=>typeof n=="number"?jt(n):n!=null&&n!==""&&n!==!1;function Xde(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const r=t.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}function Yde(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?s:s&3|8).toString(16)})}}}const fT=n=>Math.round(n),qde=(n,e)=>(e!=null&&e.baseUrl&&(n=Xde(n,e.baseUrl)),encodeURIComponent(n)),_A=n=>fT(n/100)*100,Jde={br:fT,d:fT,bl:_A,dl:_A,mtp:_A,nor:qde,rtp:_A,tb:fT};function Qde(n,e){const t={};if(n==null||typeof n!="object")return t;const i=Object.keys(n).sort(),r=jr({},Jde,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return i.forEach(o=>{if(s!=null&&s(o))return;let a=n[o];const l=r[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||Kde(a)&&(jde(o)&&typeof a=="string"&&(a=new aW(a)),t[o]=a))}),t}function fW(n,e={}){return n?Wde(Qde(n,e),jr({whitespace:!1},e)):""}function Zde(n,e={}){if(!n)return{};const t=Object.entries(n),i=Object.entries(Ade).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),r=t.reduce((s,o)=>{var a,l;const[c,u]=o,f=((a=i.find(h=>h[1].includes(c)))==null?void 0:a[0])||qp.REQUEST;return(l=s[f])!=null||(s[f]={}),s[f][c]=u,s},{});return Object.entries(r).reduce((s,[o,a])=>(s[o]=fW(a,e),s),{})}function epe(n,e,t){return jr(n,Zde(e,t))}const tpe="CMCD";function npe(n,e={}){if(!n)return"";const t=fW(n,e);return`${tpe}=${encodeURIComponent(t)}`}const w4=/CMCD=[^&#]+/;function ipe(n,e,t){const i=npe(e,t);if(!i)return n;if(w4.test(n))return n.replace(w4,i);const r=n.includes("?")?"&":"?";return`${n}${r}${i}`}class hW{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Qs.MANIFEST,su:!this.initialized})}catch(s){Ce.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const s=r.frag,o=this.hls.levels[s.level],a=this.getObjectType(s),l={d:s.duration*1e3,ot:a};(a===Qs.VIDEO||a===Qs.AUDIO||a==Qs.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(r,l)}catch(s){Ce.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||Yde(),this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHED,this.onMediaDetached,this),e.on(K.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHED,this.onMediaDetached,this),e.off(K.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,r;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:iL.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){jr(t,this.createData());const i=t.ot===Qs.INIT||t.ot===Qs.VIDEO||t.ot===Qs.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((s,o)=>(r.includes(o)&&(s[o]=t[o]),s),{})),this.useHeaders?(e.headers||(e.headers={}),epe(e.headers,t)):e.url=ipe(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Qs.TIMED_TEXT;if(e.sn==="initSegment")return Qs.INIT;if(t==="audio")return Qs.AUDIO;if(t==="main")return this.hls.audioTracks.length?Qs.VIDEO:Qs.MUXED}getTopBandwidth(e){let t=0,i;const r=this.hls;if(e===Qs.AUDIO)i=r.audioTracks;else{const s=r.maxAutoLevel,o=s>-1?s+1:r.levels.length;i=r.levels.slice(0,o)}for(const s of i)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,i=e===Qs.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:Fi.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){t(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){t(s),this.loader.load(s,o,a)}}}}const rpe=3e5;class dW{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=Ce.log.bind(Ce,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((i==null?void 0:i.action)===Zr.SendAlternateToPenaltyBox&&i.flags===ll.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this.pathwayPriority,o=this.pathwayId;if(t.context){const{groupId:a,pathwayId:l,type:c}=t.context;a&&r?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&r&&(s=r.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==o),i.resolved||Ce.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${o} levels: ${r&&r.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>rpe&&delete i[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in i)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(t=this.getLevelsForPathway(o),t.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,S9(t),this.hls.trigger(K.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,i){const r=this.getLevelsForPathway(i).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(t===ii.AUDIO_TRACK&&r[s].hasAudioGroup(e)||t===ii.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},r={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(t.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const f=new Yi(u.attrs);f["PATHWAY-ID"]=o;const h=f.AUDIO&&`${f.AUDIO}_clone_${o}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;h&&(i[f.AUDIO]=h,f.AUDIO=h),p&&(r[f.SUBTITLES]=p,f.SUBTITLES=p);const g=pW(u.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),v=new Rm({attrs:f,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:g,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let _=1;_<u.audioGroups.length;_++)v.addGroupId("audio",`${u.audioGroups[_]}_clone_${o}`);if(u.subtitleGroups)for(let _=1;_<u.subtitleGroups.length;_++)v.addGroupId("text",`${u.subtitleGroups[_]}_clone_${o}`);return v});t.push(...c),b4(this.audioTracks,i,l,o),b4(this.subtitleTracks,r,l,o)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:r.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,f,h,p)=>{this.log(`Loaded steering manifest: "${r}"`);const g=u.data;if(g.VERSION!==1){this.log(`Steering VERSION ${g.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=g.TTL;const{"RELOAD-URI":v,"PATHWAY-CLONES":_,"PATHWAY-PRIORITY":S}=g;if(v)try{this.uri=new self.URL(v,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${v}`);return}this.scheduleRefresh(this.uri||h.url),_&&this.clonePathways(_);const A={steeringManifest:g,url:r.toString()};this.hls.trigger(K.STEERING_MANIFEST_LOADED,A),S&&this.updatePathwayPriority(S)},onError:(u,f,h,p)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${f.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let g=this.timeToLoad*1e3;if(u.code===429){const v=this.loader;if(typeof(v==null?void 0:v.getResponseHeader)=="function"){const _=v.getResponseHeader("Retry-After");_&&(g=parseFloat(_)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,g)},onTimeout:(u,f,h)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const r=(i=this.hls)==null?void 0:i.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function b4(n,e,t,i){n&&Object.keys(e).forEach(r=>{const s=n.filter(o=>o.groupId===r).map(o=>{const a=jr({},o);return a.details=void 0,a.attrs=new Yi(a.attrs),a.url=a.attrs.URI=pW(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),a.groupId=a.attrs["GROUP-ID"]=e[r],a.attrs["PATHWAY-ID"]=i,a});n.push(...s)})}function pW(n,e,t,i){const{HOST:r,PARAMS:s,[t]:o}=i;let a;e&&(a=o==null?void 0:o[e],a&&(n=a));const l=new self.URL(n);return r&&!a&&(l.host=r),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}const spe=/^age:\s*[\d.]+\s*$/im;class mW{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Y1,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return s(i,t.url)}).catch(o=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),s(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(o=>{this.callbacks.onError({code:i.status,text:o.message},t,i,r)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=i.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&jt(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const r=t.readyState,s=this.config;if(!i.aborted&&r>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const o=t.status,a=t.responseType==="text"?t.responseText:null;if(o>=200&&o<300){const f=a??t.response;if(f!=null){i.loading.end=Math.max(self.performance.now(),i.loading.first);const h=t.responseType==="arraybuffer"?f.byteLength:f.length;if(i.loaded=i.total=h,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first),!this.callbacks)return;const p=this.callbacks.onProgress;if(p&&p(i,e,f,t),!this.callbacks)return;const g={url:t.responseURL,data:f,code:o};this.callbacks.onSuccess(g,i,e,t);return}}const l=s.loadPolicy.errorRetry,c=i.retry,u={url:e.url,data:void 0,code:o};YT(l,c,!1,u)?this.retry(l):(Ce.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:t.statusText},e,t,i))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(YT(e,t,!0))this.retry(e);else{var i;Ce.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=nB(e,i.retry),i.retry++,Ce.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&spe.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function ope(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const ape=/(\d+)-(\d+)\/(\d+)/;class M4{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||fpe,this.controller=new self.AbortController,this.stats=new Y1}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=lpe(e,this.controller.signal),o=i.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=c&&jt(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},t.timeout),self.fetch(this.request).then(f=>{this.response=this.loader=f;const h=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},u-(h-r.loading.start)),!f.ok){const{status:p,statusText:g}=f;throw new hpe(g||"fetch, bad network response",p,f)}return r.loading.first=h,r.total=upe(f.headers)||r.total,o&&jt(t.highWaterMark)?this.loadProgressively(f,r,e,t.highWaterMark,o):a?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const p=f[l];p&&(r.loaded=r.total=p);const g={url:h.url,data:f,code:h.status};o&&!jt(t.highWaterMark)&&o(r,e,f,h),i.onSuccess(g,r,e,h)}).catch(f=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const h=f&&f.code||0,p=f?f.message:null;i.onError({code:h,text:p},e,f?f.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,r=0,s){const o=new M9,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&s(t,i,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,f=u.length;return t.loaded+=f,f<r||o.dataLength?(o.push(u),o.dataLength>=r&&s(t,i,o.flush(),e)):s(t,i,u,e),l()}).catch(()=>Promise.reject());return l()}}function lpe(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(jr({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function cpe(n){const e=ape.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function upe(n){const e=n.get("Content-Range");if(e){const i=cpe(e);if(jt(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function fpe(n,e){return new self.Request(n.url,e)}class hpe extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const dpe=/\s/,ppe={newCue(n,e,t,i){const r=[];let s,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],a=!0,l=0,c="",!s.isEmpty()){var f;for(let v=0;v<s.chars.length;v++)dpe.test(s.chars[v].uchar)&&a?l++:(c+=s.chars[v].uchar,a=!1);s.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const p=eW(c.trim()),g=uB(e,t,p);n!=null&&(f=n.cues)!=null&&f.getCueById(g)||(o=new u(e,t,p),o.id=g,o.line=h+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(o))}return n&&r.length&&(r.sort((h,p)=>h.line==="auto"||p.line==="auto"?0:h.line>8&&p.line>8?p.line-h.line:h.line-p.line),r.forEach(h=>v9(n,h))),r}},mpe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},gW=_s(_s({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:mW,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:w9,bufferController:Y9,capLevelController:Bb,errorController:A9,fpsController:oW,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:n9,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:mpe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},gpe()),{},{subtitleStreamController:K9,subtitleTrackController:X9,timelineController:rW,audioStreamController:$9,audioTrackController:j9,emeController:lm,cmcdController:hW,contentSteeringController:dW});function gpe(){return{cueHandler:ppe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function vpe(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=oL(n),i=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,a=e[o]===void 0,l=[];r.forEach(c=>{const u=`${s}Loading${c}`,f=e[u];if(f!==void 0&&a){l.push(u);const h=t[o].default;switch(e[o]={default:h},c){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),l.length&&Ce.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),_s(_s({},t),e)}function oL(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(oL):Object.keys(n).reduce((e,t)=>(e[t]=oL(n[t]),e),{}):n}function ype(n){const e=n.loader;e!==M4&&e!==mW?(Ce.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):ope()&&(n.loader=M4,n.progressive=!0,n.enableSoftwareAES=!0,Ce.log("[config]: Progressive streaming enabled, using FetchLoader"))}let xR;class xpe extends Ib{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(K.LEVEL_LOADED,this.onLevelLoaded,this),e.on(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this),e.on(K.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(K.LEVEL_LOADED,this.onLevelLoaded,this),e.off(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this),e.off(K.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,r=[],s={},o={};let a=!1,l=!1,c=!1;t.levels.forEach(u=>{var f,h;const p=u.attrs;let{audioCodec:g,videoCodec:v}=u;((f=g)==null?void 0:f.indexOf("mp4a.40.34"))!==-1&&(xR||(xR=/chrome|firefox/i.test(navigator.userAgent)),xR&&(u.audioCodec=g=void 0)),g&&(u.audioCodec=g=jT(g,i)),((h=v)==null?void 0:h.indexOf("avc1"))===0&&(v=u.videoCodec=gfe(v));const{width:_,height:S,unknownCodecs:A}=u;if(a||(a=!!(_&&S)),l||(l=!!v),c||(c=!!g),A!=null&&A.length||g&&!rR(g,"audio",i)||v&&!rR(v,"video",i))return;const{CODECS:T,"FRAME-RATE":b,"HDCP-LEVEL":C,"PATHWAY-ID":L,RESOLUTION:P,"VIDEO-RANGE":k}=p,D=`${`${L||"."}-`}${u.bitrate}-${P}-${b}-${T}-${k}-${C}`;if(s[D])if(s[D].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const G=o[D]+=1;u.attrs["PATHWAY-ID"]=new Array(G+1).join(".");const H=new Rm(u);s[D]=H,r.push(H)}else s[D].addGroupId("audio",p.AUDIO),s[D].addGroupId("text",p.SUBTITLES);else{const G=new Rm(u);s[D]=G,o[D]=1,r.push(G)}}),this.filterAndSortMediaOptions(r,t,a,l,c)}filterAndSortMediaOptions(e,t,i,r,s){let o=[],a=[],l=e;if((i||r)&&s&&(l=l.filter(({videoCodec:g,videoRange:v,width:_,height:S})=>(!!g||!!(_&&S))&&Rfe(v))),l.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const g=new Error("no level with compatible codecs found in manifest");this.hls.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:g,reason:g.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:g}=this.hls.config;o=t.audioTracks.filter(v=>!v.audioCodec||rR(v.audioCodec,"audio",g)),C4(o)}t.subtitles&&(a=t.subtitles,C4(a));const c=l.slice(0);l.sort((g,v)=>{if(g.attrs["HDCP-LEVEL"]!==v.attrs["HDCP-LEVEL"])return(g.attrs["HDCP-LEVEL"]||"")>(v.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&g.height!==v.height)return g.height-v.height;if(g.frameRate!==v.frameRate)return g.frameRate-v.frameRate;if(g.videoRange!==v.videoRange)return KT.indexOf(g.videoRange)-KT.indexOf(v.videoRange);if(g.videoCodec!==v.videoCodec){const _=OU(g.videoCodec),S=OU(v.videoCodec);if(_!==S)return S-_}if(g.uri===v.uri&&g.codecSet!==v.codecSet){const _=WT(g.codecSet),S=WT(v.codecSet);if(_!==S)return S-_}return g.averageBitrate!==v.averageBitrate?g.averageBitrate-v.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let g=0;g<c.length;g++)if(c[g].pathwayId===l[0].pathwayId){u=c[g];break}}this._levels=l;for(let g=0;g<l.length;g++)if(l[g]===u){var f;this._firstLevel=g;const v=u.bitrate,_=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${v}`),((f=this.hls.userConfig)==null?void 0:f.abrEwmaDefaultEstimate)===void 0){const S=Math.min(v,this.hls.config.abrEwmaDefaultEstimateMax);S>_&&_===gW.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=S)}break}const h=s&&!r,p={levels:l,audioTracks:o,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:r,altAudio:!h&&o.some(g=>!!g.url)};this.hls.trigger(K.MANIFEST_PARSED,p),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(K.ERROR,{type:_n.OTHER_ERROR,details:Ue.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:u,reason:u.message}),f)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,o=t[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i===e&&o.details&&r&&s===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${i}${s?" with Pathway "+s:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(K.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,r==null?void 0:r.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===ii.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===ln.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(s=>!!i[s]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var i;const{level:r,details:s}=t,o=this._levels[r];if(!o){var a;this.warn(`Invalid level index ${r}`),(a=t.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}r===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):(i=t.deliveryDirectives)!=null&&i.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let r=i.uri;if(e)try{r=e.addDirectives(r)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const s=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${r}`),this.clearTimer(),this.hls.trigger(K.LEVEL_LOADING,{url:r,level:t,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const i=this._levels.filter((r,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(o=>o.level=-1)),!1));S9(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(K.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(K.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function C4(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}class _pe{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[i].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=Ue.KEY_LOAD_ERROR,i,r,s){return new sf({type:_n.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:r}=e;for(let s=0;s<t.length;s++){const o=t[s];if(r<=o.cc&&(i==="initSegment"||o.sn==="initSegment"||i<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,r;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Ue.KEY_LOAD_ERROR,c))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Ue.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((i=a)!=null&&i.decryptdata.key)return s.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((r=a)!=null&&r.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Ue.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(i);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,i))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,r=i.loader,s=new r(i);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,p,g,v)=>{const{frag:_,keyInfo:S,url:A}=g;if(!_.decryptdata||S!==this.keyUriToKeyInfo[A])return a(this.createKeyLoadError(_,Ue.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),v));S.decryptdata.key=_.decryptdata.key=new Uint8Array(h.data),_.keyLoader=null,S.loader=null,o({frag:_,keyInfo:S})},onError:(h,p,g,v)=>{this.resetLoader(p),a(this.createKeyLoadError(t,Ue.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),g,_s({url:l.url,data:void 0},h)))},onTimeout:(h,p,g)=>{this.resetLoader(p),a(this.createKeyLoadError(t,Ue.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),g))},onAbort:(h,p,g)=>{this.resetLoader(p),a(this.createKeyLoadError(t,Ue.INTERNAL_ABORTED,new Error("key loading aborted"),g))}};s.load(l,u,f)})}resetLoader(e){const{frag:t,keyInfo:i,url:r}=e,s=i.loader;t.keyLoader===s&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}function vW(){return self.SourceBuffer||self.WebKitSourceBuffer}function hB(){if(!ud())return!1;const e=vW();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function yW(){if(!hB())return!1;const n=ud();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(X_(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(X_(e,"audio"))))}function Spe(){var n;const e=vW();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const Epe=250,hT=2,Ape=.1,Tpe=.05;class wpe{constructor(e,t,i,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:i,media:r,stalled:s}=this;if(r===null)return;const{currentTime:o,seeking:a}=r,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),s!==null){if(this.stallReported){const _=self.performance.now()-s;Ce.warn(`playback not stuck anymore @${o}, after ${Math.round(_)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(r.paused&&!a||r.ended||r.playbackRate===0||!Fi.getBuffered(r).length){this.nudgeRetry=0;return}const u=Fi.bufferInfo(r,o,0),f=u.nextStart||0;if(a){const _=u.len>hT,S=!f||t&&t.start<=o||f-o>hT&&!this.fragmentTracker.getPartialFragment(o);if(_||S)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(u.len>0)&&!f)return;const S=Math.max(f,u.start||0)-o,A=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(A==null||(h=A.details)==null?void 0:h.live)?A.details.targetduration*2:hT,C=this.fragmentTracker.getPartialFragment(o);if(S>0&&(S<=b||C)){r.paused||this._trySkipBufferHole(C);return}}const p=self.performance.now();if(s===null){this.stalled=p;return}const g=p-s;if(!a&&g>=Epe&&(this._reportStall(u),!this.media))return;const v=Fi.bufferInfo(r,o,i.maxBufferHole);this._tryFixBufferStall(v,g)}_tryFixBufferStall(e,t){const{config:i,fragmentTracker:r,media:s}=this;if(s===null)return;const o=s.currentTime,a=r.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-o<i.maxBufferHole)&&t>i.highBufferWatchdogPeriod*1e3&&(Ce.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:i,stallReported:r}=this;if(!r&&i){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);Ce.warn(s.message),t.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:i,media:r}=this;if(r===null)return 0;const s=r.currentTime,o=Fi.bufferInfo(r,s,0),a=s<o.start?o.start:o.nextStart;if(a){const l=o.len<=t.maxBufferHole,c=o.len>0&&o.len<1&&r.readyState<3,u=a-s;if(u>0&&(l||c)){if(u>t.maxBufferHole){const{fragmentTracker:h}=this;let p=!1;if(s===0){const g=h.getAppendedFrag(0,ln.MAIN);g&&a<g.end&&(p=!0)}if(!p){const g=e||h.getAppendedFrag(s,ln.MAIN);if(g){let v=!1,_=g.end;for(;_<a;){const S=h.getPartialFragment(_);if(S)_+=S.duration;else{v=!0;break}}if(v)return 0}}}const f=Math.max(a+Tpe,s+Ape);if(Ce.warn(`skipping hole, adjusting currentTime from ${s} to ${f}`),this.moved=!0,this.stalled=null,r.currentTime=f,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${f}`);i.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return f}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:r}=this;if(i===null)return;const s=i.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=s+(r+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${s} to ${o}`);Ce.warn(a.message),i.currentTime=o,t.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);Ce.error(o.message),t.trigger(K.ERROR,{type:_n.MEDIA_ERROR,details:Ue.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const bpe=100;class Mpe extends Db{constructor(e,t,i){super(e,t,i,"[stream-controller]",ln.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(K.MANIFEST_LOADING,this.onManifestLoading,this),e.on(K.MANIFEST_PARSED,this.onManifestParsed,this),e.on(K.LEVEL_LOADING,this.onLevelLoading,this),e.on(K.LEVEL_LOADED,this.onLevelLoaded,this),e.on(K.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(K.ERROR,this.onError,this),e.on(K.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(K.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(K.BUFFER_CREATED,this.onBufferCreated,this),e.on(K.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(K.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(K.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(K.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(K.MANIFEST_LOADING,this.onManifestLoading,this),e.off(K.MANIFEST_PARSED,this.onManifestParsed,this),e.off(K.LEVEL_LOADED,this.onLevelLoaded,this),e.off(K.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(K.ERROR,this.onError,this),e.off(K.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(K.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(K.BUFFER_CREATED,this.onBufferCreated,this),e.off(K.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(K.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(K.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:i}=this;if(this.stopLoad(),this.setInterval(bpe),this.level=-1,!this.startFragRequested){let r=i.startLevel;r===-1&&(i.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=i.firstAutoLevel),i.nextLoadLevel=r,this.level=i.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=tt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=tt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case tt.WAITING_LEVEL:{const{levels:t,level:i}=this,r=t==null?void 0:t[i],s=r==null?void 0:r.details;if(s&&(!s.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(s))break;this.state=tt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=tt.IDLE;break}break}case tt.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:r,level:s}=this,o=r==null?void 0:r[s];this.resetStartWhenNotLoaded(o||null),this.state=tt.IDLE}}break}this.state===tt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:r}=this;if(t===null||!r&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[s]))return;const o=i[s],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const v={};this.altAudio&&(v.type="video"),this.hls.trigger(K.BUFFER_EOS,v),this.state=tt.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=o.details;if(!c||this.state===tt.WAITING_LEVEL||c.live&&this.levelLastLoaded!==o){this.level=s,this.state=tt.WAITING_LEVEL;return}const u=a.len,f=this.getMaxBufferLength(o.maxBitrate);if(u>=f)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:a.end;let p=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&p.sn!=="initSegment"&&this.fragmentTracker.getState(p)!==vs.OK){var g;const _=((g=this.backtrackFragment)!=null?g:p).sn-c.startSN,S=c.fragments[_-1];S&&p.cc===S.cc&&(p=S,this.fragmentTracker.removeFragment(S))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const _=this.audioOnly&&!this.altAudio?xi.AUDIO:xi.VIDEO,S=(_===xi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;S&&this.afterBufferFlushed(S,_,ln.MAIN)}p=this.getNextFragmentLoopLoading(p,c,a,ln.MAIN,f)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,h))}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===vs.NOT_LOADED||r===vs.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ln.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!t.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:i=0}else i=0;const o=this.getBufferedFrag(t.currentTime+i);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case tt.KEY_LOADING:case tt.FRAG_LOADING:case tt.FRAG_LOADING_WAITING_RETRY:case tt.PARSING:case tt.PARSED:this.state=tt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new wpe(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;jt(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const i=this.getMainFwdBufferInfo();if(i===null||i.len===0){this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(K.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let i=!1,r=!1;t.levels.forEach(s=>{const o=s.audioCodec;o&&(i=i||o.indexOf("mp4a.40.2")!==-1,r=r||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&r&&!Spe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==tt.IDLE)return;const r=i[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=tt.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:r}=this,s=t.level,o=t.details,a=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=r[s],c=this.fragCurrent;c&&(this.state===tt.FRAG_LOADING||this.state===tt.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(o.live||(i=l.details)!=null&&i.live){var f;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,l.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(K.LEVEL_UPDATED,{details:o,level:s}),this.state===tt.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=tt.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:r,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const a=o[i.level],l=a.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,f=(t=i.initSegment)==null?void 0:t.data,h=this._getAudioCodec(a),p=this.transmuxer=this.transmuxer||new z9(this.hls,ln.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=r?r.index:-1,v=g!==-1,_=new Lb(i.level,i.sn,i.stats.chunkCount,s.byteLength,g,v),S=this.initPTS[i.cc];p.push(s,f,h,c,i,r,l.totalduration,u,_,S)}onAudioTrackSwitching(e,t){const i=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;i&&(s.trigger(K.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(K.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=t.id,r=!!this.hls.audioTracks[i].url;if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const i=t.tracks;let r,s,o=!1;for(const a in i){const l=i[a];if(l.id==="main"){if(s=a,r=l,a==="video"){const c=i[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i&&i.type!==ln.MAIN)return;if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===tt.PARSED&&(this.state=tt.IDLE);return}const s=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),i.sn!=="initSegment"&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}onError(e,t){var i;if(t.fatal){this.state=tt.ERROR;return}switch(t.details){case Ue.FRAG_GAP:case Ue.FRAG_PARSING_ERROR:case Ue.FRAG_DECRYPT_ERROR:case Ue.FRAG_LOAD_ERROR:case Ue.FRAG_LOAD_TIMEOUT:case Ue.KEY_LOAD_ERROR:case Ue.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ln.MAIN,t);break;case Ue.LEVEL_LOAD_ERROR:case Ue.LEVEL_LOAD_TIMEOUT:case Ue.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===tt.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===ii.LEVEL&&(this.state=tt.IDLE);break;case Ue.BUFFER_APPEND_ERROR:case Ue.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===Ue.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Ue.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!Fi.getBuffered(e).length){const i=this.state!==tt.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=tt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==xi.AUDIO||this.audioOnly&&!this.altAudio){const i=(t===xi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,t,ln.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const r=Fi.getBuffered(e),o=(r.length?r.start(0):0)-i;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),i+=o,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${t}`),e.currentTime=i}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:r}=this;if(!i||this.fragContextChanged(e))return;t.fragmentError=0,this.state=tt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),r.trigger(K.FRAG_LOADED,i),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i="main",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{video:f,text:h,id3:p,initSegment:g}=s,{details:v}=u,_=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=tt.PARSING,g){if(g!=null&&g.tracks){const T=l.initSegment||l;this._bufferInitSegment(u,g.tracks,T,o),r.trigger(K.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:i,tracks:g.tracks})}const S=g.initPTS,A=g.timescale;jt(S)&&(this.initPTS[l.cc]={baseTime:S,timescale:A},r.trigger(K.INIT_PTS_FOUND,{frag:l,id:i,initPTS:S,timescale:A}))}if(f&&v&&l.sn!=="initSegment"){const S=v.fragments[l.sn-1-v.startSN],A=l.sn===v.startSN,T=!S||l.cc>S.cc;if(s.independent!==!1){const{startPTS:b,endPTS:C,startDTS:L,endDTS:P}=f;if(c)c.elementaryStreams[f.type]={startPTS:b,endPTS:C,startDTS:L,endDTS:P};else if(f.firstKeyFrame&&f.independent&&o.id===1&&!T&&(this.couldBacktrack=!0),f.dropped&&f.independent){const k=this.getMainFwdBufferInfo(),I=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,D=f.firstKeyFramePTS?f.firstKeyFramePTS:b;if(!A&&I<D-this.config.maxBufferHole&&!T){this.backtrack(l);return}else T&&(l.gap=!0);l.setElementaryStreamInfo(f.type,l.start,C,l.start,P,!0)}else A&&b>hT&&(l.gap=!0);l.setElementaryStreamInfo(f.type,b,C,L,P),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(f,l,c,o,A||T)}else if(A||T)l.gap=!0;else{this.backtrack(l);return}}if(_){const{startPTS:S,endPTS:A,startDTS:T,endDTS:b}=_;c&&(c.elementaryStreams[xi.AUDIO]={startPTS:S,endPTS:A,startDTS:T,endDTS:b}),l.setElementaryStreamInfo(xi.AUDIO,S,A,T,b),this.bufferFragmentData(_,l,c,o)}if(v&&p!=null&&(t=p.samples)!=null&&t.length){const S={id:i,frag:l,details:v,samples:p.samples};r.trigger(K.FRAG_PARSING_METADATA,S)}if(v&&h){const S={id:i,frag:l,details:v,samples:h.samples};r.trigger(K.FRAG_PARSING_USERDATA,S)}}_bufferInitSegment(e,t,i,r){if(this.state!==tt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:o,audiovideo:a}=t;if(s){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const u=s.metadata;u&&"channelCount"in u&&(u.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(K.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const u=t[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(K.BUFFER_APPENDING,{type:l,data:u,frag:i,part:null,chunkMeta:r,parent:i.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ln.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=tt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(Fi.isBuffered(e,i)?t=this.getAppendedFrag(i):Fi.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,s=t.level;(!r||t.sn!==r.sn||r.level!==s)&&(this.fragPlaying=t,this.hls.trigger(K.FRAG_CHANGED,{frag:t}),(!r||r.level!==s)&&this.hls.trigger(K.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,i=this.currentFrag;if(i&&jt(t)&&jt(i.programDateTime)){const r=i.programDateTime+(t-i.start)*1e3;return new Date(r)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Hh{static get version(){return"1.5.20"}static isMSESupported(){return hB()}static isSupported(){return yW()}static getMediaSource(){return ud()}static get Events(){return K}static get ErrorTypes(){return _n}static get ErrorDetails(){return Ue}static get DefaultConfig(){return Hh.defaultConfig?Hh.defaultConfig:gW}static set DefaultConfig(e){Hh.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new lB,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,Rue(e.debug||!1,"Hls instance");const t=this.config=vpe(Hh.DefaultConfig,e);this.userConfig=e,t.progressive&&ype(t);const{abrController:i,bufferController:r,capLevelController:s,errorController:o,fpsController:a}=t,l=new o(this),c=this.abrController=new i(this),u=this.bufferController=new r(this),f=this.capLevelController=new s(this),h=new a(this),p=new Sfe(this),g=new bfe(this),v=t.contentSteeringController,_=v?new v(this):null,S=this.levelController=new xpe(this,_),A=new Zfe(this),T=new _pe(this.config),b=this.streamController=new Mpe(this,A,T);f.setStreamController(b),h.setStreamController(b);const C=[p,S,b];_&&C.splice(1,0,_),this.networkControllers=C;const L=[c,u,f,h,g,A];this.audioTrackController=this.createController(t.audioTrackController,C);const P=t.audioStreamController;P&&C.push(new P(this,A,T)),this.subtitleTrackController=this.createController(t.subtitleTrackController,C);const k=t.subtitleStreamController;k&&C.push(new k(this,A,T)),this.createController(t.timelineController,L),T.emeController=this.emeController=this.createController(t.emeController,L),this.cmcdController=this.createController(t.cmcdController,L),this.latencyController=this.createController(Mfe,L),this.coreComponents=L,C.push(l);const I=l.onErrorOut;typeof I=="function"&&this.on(K.ERROR,I,l)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,r){this._emitter.off(e,t,i,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(Ce.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const r=e===K.ERROR;this.trigger(K.ERROR,{type:_n.OTHER_ERROR,details:Ue.INTERNAL_EXCEPTION,fatal:r,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){Ce.log("destroy"),this.trigger(K.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){Ce.log("attachMedia"),this._media=e,this.trigger(K.MEDIA_ATTACHING,{media:e})}detachMedia(){Ce.log("detachMedia"),this.trigger(K.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,i=this.url,r=this.url=q2.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,Ce.log(`loadSource:${r}`),t&&i&&(i!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(K.MANIFEST_LOADING,{url:e})}startLoad(e=-1){Ce.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){Ce.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){Ce.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){Ce.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){Ce.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Ce.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){Ce.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){Ce.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){Ce.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){Ce.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){Ce.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(Ce.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Cfe(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let r=0;r<i;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,i)for(let s=r;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=i)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hh.defaultConfig=void 0;const Cpe=Object.freeze(Object.defineProperty({__proto__:null,AbrController:w9,AttrList:Yi,AudioStreamController:$9,AudioTrackController:j9,BasePlaylistController:Ib,BaseSegment:Q2,BaseStreamController:Db,BufferController:Y9,CMCDController:hW,CapLevelController:Bb,ChunkMetadata:Lb,ContentSteeringController:dW,DateRange:J2,EMEController:lm,ErrorActionFlags:ll,ErrorController:A9,ErrorDetails:Ue,ErrorTypes:_n,Events:K,FPSController:oW,Fragment:sT,Hls:Hh,HlsSkip:Qx,HlsUrlParameters:JI,KeySystemFormats:Io,KeySystems:fi,Level:Rm,LevelDetails:t9,LevelKey:_v,LoadStats:Y1,MetadataSchema:gl,NetworkErrorAction:Zr,Part:e9,PlaylistLevelType:ln,SubtitleStreamController:K9,SubtitleTrackController:X9,TimelineController:rW,default:Hh,getMediaSource:ud,isMSESupported:hB,isSupported:yW},Symbol.toStringTag,{value:"Module"})),Rpe=((n,e)=>typeof window<"u"&&typeof((n=window.document)==null?void 0:n.createElement)=="function"&&typeof((e=window.navigator)==null?void 0:e.userAgent)=="string")();let _R=null;async function Ppe(...n){var e;(e=_R)!==null&&e!==void 0||(_R=await _ue(()=>Promise.resolve().then(()=>Cpe),void 0));const t=_R.default;return t.isSupported()?new t(...n):null}function Ipe(n,{unsuspend:e="loadedmetadata",start:t=!0,hls:i={},crossOrigin:r="anonymous",muted:s=!0,loop:o=!0,playsInline:a=!0,onVideoFrame:l,...c}={}){const u=Ml(g=>g.gl),f=O.useRef(null),h=Y6(()=>new Promise(async g=>{let v,_;v=n;const S=Object.assign(document.createElement("video"),{src:v,srcObject:_,crossOrigin:r,loop:o,muted:s,playsInline:a,...c});if(v&&Rpe&&v.endsWith(".m3u8")){const T=f.current=await Ppe(i);T&&(T.on(K.MEDIA_ATTACHED,()=>void T.loadSource(v)),T.attachMedia(S))}const A=new K$(S);"colorSpace"in A?A.colorSpace=u.outputColorSpace:A.encoding=u.outputEncoding,S.addEventListener(e,()=>g(A))}),[n]),p=h.source.data;return Lpe(p,l),O.useEffect(()=>(t&&h.image.play(),()=>{f.current&&(f.current.destroy(),f.current=null)}),[h,t]),h}const Lpe=(n,e)=>{O.useEffect(()=>{if(!e||!n.requestVideoFrameCallback)return;let t;const i=(...r)=>{e(...r),t=n.requestVideoFrameCallback(i)};return n.requestVideoFrameCallback(i),()=>n.cancelVideoFrameCallback(t)},[n,e])};function xW(n,e){const t=O.useRef(),[i]=O.useState(()=>e?e instanceof Hn?{current:e}:e:t),[r]=O.useState(()=>new b8(void 0));O.useLayoutEffect(()=>{e&&(i.current=e instanceof Hn?e:e.current),r._root=i.current});const s=O.useRef({}),o=O.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:n,actions:a,names:n.map(l=>l.name),mixer:r}},[n]);return Go((a,l)=>r.update(l)),O.useEffect(()=>{const a=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[n]),o}const R4=O.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:f,onCentered:h,precise:p=!0,cacheKey:g=0,...v},_){const S=O.useRef(null),A=O.useRef(null),T=O.useRef(null);return O.useLayoutEffect(()=>{A.current.matrixWorld.identity();const b=new Fs().setFromObject(T.current,p),C=new re,L=new xs,P=b.max.x-b.min.x,k=b.max.y-b.min.y,I=b.max.z-b.min.z;b.getCenter(C),b.getBoundingSphere(L);const D=l?k/2:c?-k/2:0,G=o?-P/2:a?P/2:0,H=u?I/2:f?-I/2:0;A.current.position.set(t||i?0:-C.x+G,t||r?0:-C.y+D,t||s?0:-C.z+H),typeof h<"u"&&h({parent:S.current.parent,container:S.current,width:P,height:k,depth:I,boundingBox:b,boundingSphere:L,center:C,verticalAlignment:D,horizontalAlignment:G,depthAlignment:H})},[g,h,l,o,u,t,i,r,s,p,a,c,f]),O.useImperativeHandle(_,()=>S.current,[]),O.createElement("group",Vi({ref:S},v),O.createElement("group",{ref:A},O.createElement("group",{ref:T},e)))});var SR={exports:{}},ER,P4;function Dpe(){if(P4)return ER;P4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ER=n,ER}var AR,I4;function Bpe(){if(I4)return AR;I4=1;var n=Dpe();function e(){}function t(){}return t.resetWarningCache=e,AR=function(){function i(o,a,l,c,u,f){if(f!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},AR}var L4;function kpe(){return L4||(L4=1,SR.exports=Bpe()()),SR.exports}var Ope=kpe();const Bi=Ov(Ope),Fpe=3e3,Npe=3001,Nc=1e-5;function Upe(n,e,t){const i=new Qh,r=t-Nc;return i.absarc(Nc,Nc,Nc,-Math.PI/2,-Math.PI,!0),i.absarc(Nc,e-r*2,Nc,Math.PI,Math.PI/2,!0),i.absarc(n-r*2,e-r*2,Nc,Math.PI/2,0,!0),i.absarc(n-r*2,Nc,Nc,0,-Math.PI/2,!0),i}const Gpe=O.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...u},f){const h=O.useMemo(()=>Upe(e,t,r),[e,t,r]),p=O.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-Nc,bevelThickness:r,curveSegments:o}),[i,r,o]),g=O.useRef(null);return O.useLayoutEffect(()=>{g.current&&(g.current.center(),kle(g.current,l))},[h,p]),O.createElement("mesh",Vi({ref:f},u),O.createElement("extrudeGeometry",{ref:g,args:[h,p]}),c)}),TR=O.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=O.useRef(null);O.useImperativeHandle(l,()=>c.current,[]);const u=O.useRef(Math.random()*1e4);return Go(f=>{var h,p;if(!e||t===0)return;o&&f.invalidate();const g=u.current+f.clock.getElapsedTime();c.current.rotation.x=Math.cos(g/4*t)/8*i,c.current.rotation.y=Math.sin(g/4*t)/8*i,c.current.rotation.z=Math.sin(g/4*t)/20*i;let v=Math.sin(g/4*t)/10;v=Gn.mapLinear(v,-.1,.1,(h=s==null?void 0:s[0])!==null&&h!==void 0?h:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),c.current.position.y=v*r,c.current.updateMatrix()}),O.createElement("group",a,O.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),_W=(n,e,t)=>{let i;switch(n){case wl:i=new Uint8ClampedArray(e*t*4);break;case ys:i=new Uint16Array(e*t*4);break;case Kc:i=new Uint32Array(e*t*4);break;case GD:i=new Int8Array(e*t*4);break;case VD:i=new Int16Array(e*t*4);break;case jw:i=new Int32Array(e*t*4);break;case Wr:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let SA;const Vpe=(n,e,t,i)=>{if(SA!==void 0)return SA;const r=new No(1,1,i);e.setRenderTarget(r);const s=new Ni(new Df,new ua({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=_W(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),SA=o[0]!==0,SA};class dB{constructor(e){var t,i,r,s,o,a,l,c,u,f,h,p,g,v,_,S;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(T){throw this._renderer.setRenderTarget(null),T}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:ts,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:oi,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:oi,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:Ri,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:Ri};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=dB.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new L1,this._camera=new Ad,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Vpe(this._type,this._renderer,this._camera,A)){let T;switch(this._type){case ys:T=this._renderer.extensions.has("EXT_color_buffer_float")?Wr:void 0;break}T!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Wr}`),this._type=T):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ni(new Df,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new No(this.width,this.height,A),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.mapping:rd}static instantiateRenderer(){const e=new Zw;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=_W(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Jh(this.toArray(),this.width,this.height,ts,this._type,(e==null?void 0:e.mapping)||rd,(e==null?void 0:e.wrapS)||Ri,(e==null?void 0:e.wrapT)||Ri,(e==null?void 0:e.magFilter)||oi,(e==null?void 0:e.minFilter)||oi,(e==null?void 0:e.anisotropy)||1,Ha);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof fo&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ri&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ri&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Hpe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,zpe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class $pe extends fo{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:Hpe,fragmentShader:zpe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new re(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new re().fromArray(t)},offsetSdr:{value:new re().fromArray(i)},gainMapMin:{value:new re().fromArray(r)},gainMapMax:{value:new re().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Qc,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class SW extends Error{}class EW extends Error{}const dx=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Wpe=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=dx(r,"hdrgm:GainMapMin","0"),o=dx(r,"hdrgm:GainMapMax"),a=dx(r,"hdrgm:Gamma","1"),l=dx(r,"hdrgm:OffsetSDR","0.015625"),c=dx(r,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),f=u?u[1]:"0",h=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!h)throw new Error("Incomplete gainmap metadata");const p=h[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class jpe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let h;if(s.getUint16(f)===18761)h=!1;else if(s.getUint16(f)===19789)h=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!h)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=s.getUint32(f+4,!h);if(p<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=f+p,v=s.getUint16(g,!h),_=g+2;let S=0;for(let C=_;C<_+12*v;C+=12)s.getUint16(C,!h)===45057&&(S=s.getUint32(C+8,!h));const T=g+2+v*12+4,b=[];for(let C=T;C<T+S*16;C+=16){const L={MPType:s.getUint32(C,!h),size:s.getUint32(C+4,!h),dataOffset:s.getUint32(C+8,!h),dependantImages:s.getUint32(C+12,!h),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=f+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,b.push(L)}if(this.options.extractNonFII&&b.length){const C=new Blob([s]),L=[];for(const P of b){if(P.isFII&&!this.options.extractFII)continue;const k=C.slice(P.start,P.end+1,"image/jpeg");L.push(k)}t(L)}}}a+=2+s.getUint16(a+2)}})}}const Kpe=async n=>{const e=Wpe(n);if(!e)throw new EW("Gain map XMP metadata not found");const i=await new jpe({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new SW("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},D4=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class AW extends as{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new gb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new $pe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ri,sdr:new ri});return new dB({width:16,height:16,type:ys,colorSpace:Ha,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?D4(s):Promise.resolve(void 0),D4(o)]);l=h[0],a=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=h[0],a=h[1]}const u=new ri(l||new ImageData(2,2),rd,Ri,Ri,oi,WP,ts,wl,1,Ha);u.flipY=c,u.needsUpdate=!0;const f=new ri(a,rd,Ri,Ri,oi,WP,ts,wl,1,Hr);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Xpe extends AW{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let h=!0,p=0,g=0,v=!0,_=0,S=0,A=!0,T=0,b=0;const C=()=>{if(typeof s=="function"){const I=p+_+T,D=g+S+b,G=h&&v&&A;s(new ProgressEvent("progress",{lengthComputable:G,loaded:D,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const L=new rs(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await f()},I=>{h=I.lengthComputable,g=I.loaded,p=I.total,C()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const P=new rs(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");c=I,await f()},I=>{v=I.lengthComputable,S=I.loaded,_=I.total,C()},I=>{this.manager.itemError(t),typeof o=="function"&&o(I)});const k=new rs(this._internalLoadingManager);return k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");u=JSON.parse(I),await f()},I=>{A=I.lengthComputable,b=I.loaded,T=I.total,C()},I=>{this.manager.itemError(i),typeof o=="function"&&o(I)}),a}}class Ype extends AW{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new rs(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const h=await Kpe(l);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof EW||h instanceof SW)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,f,c,u)}catch(h){this.manager.itemError(e),typeof r=="function"&&r(h),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const q_={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},TW="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",iv=n=>Array.isArray(n),pB=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function kb({files:n=pB,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,o=!1;t&&(mB(t),n=q_[t],e=TW),o=iv(n);const{extension:a,isCubemap:l}=gB(n);if(s=vB(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=Ml(p=>p.gl);O.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function p(){Uo.clear(s,o?[n]:n)}c.domElement.addEventListener("webglcontextlost",p,{once:!0})},[n,c.domElement]);const u=Uo(s,o?[n]:n,p=>{(a==="webp"||a==="jpg"||a==="jpeg")&&p.setRenderer(c),p.setPath==null||p.setPath(e),r&&r(p)});let f=o?u[0]:u;if(a==="jpg"||a==="jpeg"||a==="webp"){var h;f=(h=f.renderTarget)==null?void 0:h.texture}return f.mapping=l?fu:_m,"colorSpace"in f?f.colorSpace=i??l?"srgb":"srgb-linear":f.encoding=i??l?Npe:Fpe,f}const qpe={files:pB,path:"",preset:void 0,extensions:void 0};kb.preload=n=>{const e={...qpe,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(mB(r),t=q_[r],i=TW);const{extension:o}=gB(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=vB(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Uo.preload(a,iv(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const Jpe={files:pB,preset:void 0};kb.clear=n=>{const e={...Jpe,...n};let{files:t}=e;const{preset:i}=e;i&&(mB(i),t=q_[i]);const{extension:r}=gB(t),s=vB(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Uo.clear(s,iv(t)?[t]:t)};function mB(n){if(!(n in q_))throw new Error("Preset must be one of: "+Object.keys(q_).join(", "))}function gB(n){var e;const t=iv(n)&&n.length===6,i=iv(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=iv(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function vB(n){return n==="cube"?m8:n==="hdr"?sue:n==="exr"?oue:n==="jpg"||n==="jpeg"?Ype:n==="webp"?Xpe:null}const Qpe=n=>n.current&&n.current.isScene,Zpe=n=>Qpe(n)?n.current:n;function yB(n,e,t,i,r={}){var s,o,a,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const c=Zpe(e||t),u=c.background,f=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:(s=(o=c.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:(a=(l=c.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(c.environment=i),n&&(c.background=i),Kp(c,r),()=>{n!=="only"&&(c.environment=f),n&&(c.background=u),Kp(c,h)}}function xB({scene:n,background:e=!1,map:t,...i}){const r=Ml(s=>s.scene);return O.useLayoutEffect(()=>{if(t)return yB(e,n,r,t,i)}),null}function wW({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=kb(l),u=Ml(f=>f.scene);return O.useLayoutEffect(()=>yB(n,e,u,c,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),O.useEffect(()=>()=>{c.dispose()},[c]),null}function eme({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:p,files:g,path:v,preset:_=void 0,extensions:S}){const A=Ml(k=>k.gl),T=Ml(k=>k.scene),b=O.useRef(null),[C]=O.useState(()=>new L1),L=O.useMemo(()=>{const k=new i2(i);return k.texture.type=ys,k},[i]);O.useEffect(()=>()=>{L.dispose()},[L]),O.useLayoutEffect(()=>{if(r===1){const k=A.autoClear;A.autoClear=!0,b.current.update(A,C),A.autoClear=k}return yB(o,p,T,L.texture,{backgroundBlurriness:a??l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})},[n,C,L.texture,p,T,o,r,A]);let P=1;return Go(()=>{if(r===1/0||P<r){const k=A.autoClear;A.autoClear=!0,b.current.update(A,C),A.autoClear=k,P++}}),O.createElement(O.Fragment,null,Dse(O.createElement(O.Fragment,null,n,O.createElement("cubeCamera",{ref:b,args:[e,t,L]}),g||_?O.createElement(wW,{background:!0,files:g,preset:_,path:v,extensions:S}):s?O.createElement(xB,{background:!0,map:s,extensions:S}):null),C))}function tme(n){var e,t,i,r;const s=kb(n),o=n.map||s;O.useMemo(()=>_b({GroundProjectedEnvImpl:qle}),[]),O.useEffect(()=>()=>{s.dispose()},[s]);const a=O.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return O.createElement(O.Fragment,null,O.createElement(xB,Vi({},n,{map:o})),O.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function nme(n){return n.ground?O.createElement(tme,n):n.map?O.createElement(xB,n):n.children?O.createElement(eme,n):O.createElement(wW,n)}const ime=O.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:h,...p},g)=>{const v=O.useRef(null),_=Ml(W=>W.scene),S=Ml(W=>W.gl),A=O.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[T,b,C,L,P,k,I]=O.useMemo(()=>{const W=new No(l,l),te=new No(l,l);te.texture.generateMipmaps=W.texture.generateMipmaps=!1;const ee=new Df(i,r).rotateX(Math.PI/2),ne=new Ni(ee),Y=new Qw;Y.depthTest=Y.depthWrite=!1,Y.onBeforeCompile=ie=>{ie.uniforms={...ie.uniforms,ucolor:{value:new ht(u)}},ie.fragmentShader=ie.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),ie.fragmentShader=ie.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Q=new fo(Dce),F=new fo(Bce);return F.depthTest=Q.depthTest=!1,[W,ee,Y,ne,Q,F,te]},[l,i,r,n,u]),D=W=>{L.visible=!0,L.material=P,P.uniforms.tDiffuse.value=T.texture,P.uniforms.h.value=W*1/256,S.setRenderTarget(I),S.render(L,A.current),L.material=k,k.uniforms.tDiffuse.value=I.texture,k.uniforms.v.value=W*1/256,S.setRenderTarget(T),S.render(L,A.current),L.visible=!1};let G=0,H,q;return Go(()=>{A.current&&(e===1/0||G<e)&&(G++,H=_.background,q=_.overrideMaterial,v.current.visible=!1,_.background=null,_.overrideMaterial=C,S.setRenderTarget(T),S.render(_,A.current),D(s),c&&D(s*.4),S.setRenderTarget(null),v.current.visible=!0,_.overrideMaterial=q,_.background=H)}),O.useImperativeHandle(g,()=>v.current,[]),O.createElement("group",Vi({"rotation-x":Math.PI/2},p,{ref:v}),O.createElement("mesh",{renderOrder:h,geometry:b,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},O.createElement("meshBasicMaterial",{transparent:!0,map:T.texture,opacity:t,depthWrite:f})),O.createElement("orthographicCamera",{ref:A,args:[-i/2,i/2,r/2,-r/2,o,a]}))}),B4=1920,k4=900,q1=()=>{const[n,e]=O.useState(window.innerWidth/B4),[t,i]=O.useState(window.innerWidth<=k4);return O.useEffect(()=>{const r=()=>{e(window.innerWidth/B4),window.innerWidth<=k4?i(!0):i(!1)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{scaleFactor:n,isMobile:t}};function rme({hideAvatar:n,...e}){const{isMobile:t}=q1(),{nodes:i,materials:r}=Rr("/models/67a7f88926adc938cec34756.glb"),{animations:s}=cd("/animations/Idle_V2.fbx"),{animations:o}=cd("/animations/Walking.fbx"),a=O.useRef();s[0].name="Idle",o[0].name="Walking";const{actions:l}=xW([s[0],o[0]],a),[c,u]=O.useState("Idle");O.useEffect(()=>{if(!l.Idle||!l.Walking)return;const p=l[c],g=l[c==="Idle"?"Walking":"Idle"];return p.reset().play(),p.crossFadeFrom(g,.5,!0),()=>{g==null||g.fadeOut(.5)}},[c,l]);const f=z1(),h=O.useRef(0);return Go(()=>{if(!a.current)return;a.current.traverse(v=>{if(v.isMesh&&v.material){const _=n?0:1;(Array.isArray(v.material)?v.material:[v.material]).forEach(A=>{A.transparent!==!0&&(A.transparent=!0),A.opacity=Gn.lerp(A.opacity,_,.1)})}});const p=f.offset-h.current;let g=0;Math.abs(p)>1e-4?(u("Walking"),p>0?g=t?Math.PI/2:0:g=t?-Math.PI/2:Math.PI):u("Idle"),a.current.rotation.y=Gn.lerp(a.current.rotation.y,g,.08),h.current=f.offset}),ge.jsxs("group",{...e,dispose:null,ref:a,children:[ge.jsx("primitive",{object:i.Hips}),ge.jsx("skinnedMesh",{name:"Wolf3D_Hair",geometry:i.Wolf3D_Hair.geometry,material:r.Wolf3D_Hair,skeleton:i.Wolf3D_Hair.skeleton}),ge.jsx("skinnedMesh",{name:"Wolf3D_Outfit_Top",geometry:i.Wolf3D_Outfit_Top.geometry,material:r.Wolf3D_Outfit_Top,skeleton:i.Wolf3D_Outfit_Top.skeleton}),ge.jsx("skinnedMesh",{name:"Wolf3D_Outfit_Bottom",geometry:i.Wolf3D_Outfit_Bottom.geometry,material:r.Wolf3D_Outfit_Bottom,skeleton:i.Wolf3D_Outfit_Bottom.skeleton}),ge.jsx("skinnedMesh",{name:"Wolf3D_Outfit_Footwear",geometry:i.Wolf3D_Outfit_Footwear.geometry,material:r.Wolf3D_Outfit_Footwear,skeleton:i.Wolf3D_Outfit_Footwear.skeleton}),ge.jsx("skinnedMesh",{name:"Wolf3D_Body",geometry:i.Wolf3D_Body.geometry,material:r.Wolf3D_Body,skeleton:i.Wolf3D_Body.skeleton}),ge.jsx("skinnedMesh",{name:"EyeLeft",geometry:i.EyeLeft.geometry,material:r.Wolf3D_Eye,skeleton:i.EyeLeft.skeleton,morphTargetDictionary:i.EyeLeft.morphTargetDictionary,morphTargetInfluences:i.EyeLeft.morphTargetInfluences}),ge.jsx("skinnedMesh",{name:"EyeRight",geometry:i.EyeRight.geometry,material:r.Wolf3D_Eye,skeleton:i.EyeRight.skeleton,morphTargetDictionary:i.EyeRight.morphTargetDictionary,morphTargetInfluences:i.EyeRight.morphTargetInfluences}),ge.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:i.Wolf3D_Head.geometry,material:r.Wolf3D_Skin,skeleton:i.Wolf3D_Head.skeleton,morphTargetDictionary:i.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:i.Wolf3D_Head.morphTargetInfluences}),ge.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:i.Wolf3D_Teeth.geometry,material:r.Wolf3D_Teeth,skeleton:i.Wolf3D_Teeth.skeleton,morphTargetDictionary:i.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:i.Wolf3D_Teeth.morphTargetInfluences})]})}Rr.preload("/models/67a7f88926adc938cec34756.glb");cd.preload("/animations/Idle.fbx");cd.preload("/animations/Walking.fbx");const Dp=O.forwardRef(({children:n,...e},t)=>ge.jsxs(gue,{ref:t,font:"fonts/Inter_Bold.json",size:.3,...e,children:[n,ge.jsx("meshStandardMaterial",{color:14474460})]}));Dp.displayName="SectionTitle";const aa={title:"Veronica's Portfolio...",sections:["home","skills","experience","projects","contact"],home:{title:"VERONICA",subtitle:"MARROCCO"},skills:[{name:"Firmware & Test Development",details:"Python, C, C++, TCL",icon:"icons/coding.png",level:75},{name:"Circuit Design",details:"Spice Simulations, Schematic Design, PCB Layout",icon:"icons/circuit2.png",level:85},{name:"UX",details:"HTML, CSS, JavaScript, React, Blender, Adobe Illustrator, After Effects",icon:"icons/webdev.png",level:60},{name:"Electrical & Computer Testing",details:"Oscilloscopes, DMM, Network Analyzers, Waveform Generators, Traffic Generators",icon:"icons/oscilloscope2.png",level:80},{name:"Systems Integration",details:"Microcontrollers, Peripherals Interfacing, Embedded C",icon:"icons/controller1.png",level:90}],projects:[{name:"3D Spatial Mapper",description:"",image:"projects/3d-spatial-mapper.png",link:"pdfs/spatial-mapper-slides.pdf",tags:[]},{name:"Monitor & Alarm System for Neck Posture",description:"",image:"projects/monitor-alarm.png",link:"pdfs/neck-monitor.pdf",tags:[]},{name:"ADC module for Neural Recording",description:"",image:"projects/ADC-module.png",link:"pdfs/adc-module-for-neural-recording.pdf",tags:[]},{name:"Python Algorithm for Channel Capacity",description:"",image:"projects/blahut-arimoto.png",link:"pdfs/blahut-arimoto.pdf",tags:[]},{name:"Synthetic Biological Circuit for Lactose Intolerance",description:"",image:"projects/lactose-intolerance.png",link:"pdfs/lactose-intolerance.pdf",tags:[]},{name:"E. Coli Biosensor Design",description:"",image:"projects/ecoli-biosensor.png",link:"pdfs/ecoli-biosensor.pdf",tags:[]},{name:"Wearable Anklet",description:"",image:"projects/wearable-anklet.png",link:"pdfs/ankle-monitor.pdf",tags:[]}]};function sme(n){const{nodes:e,materials:t}=Rr("/models/Star.gltf"),i=O.useRef();return Go(()=>{i.current.rotation.y+=.06}),ge.jsx("group",{...n,dispose:null,ref:i,children:ge.jsx("mesh",{geometry:e.star.geometry,material:t.Pink,rotation:[Math.PI/2,0,0]})})}Rr.preload("/models/Star.gltf");function ome(n){const{nodes:e,materials:t}=Rr("/models/BookCaseWide.glb");return ge.jsx("group",{...n,dispose:null,children:ge.jsxs("group",{rotation:[Math.PI/2,0,0],children:[ge.jsx("mesh",{geometry:e.Cube033.geometry,material:t["BrownDark.049"]}),ge.jsx("mesh",{geometry:e.Cube033_1.geometry,material:t["PurpleDark.003"]}),ge.jsx("mesh",{geometry:e.Cube033_2.geometry,material:t["White.034"]}),ge.jsx("mesh",{geometry:e.Cube033_3.geometry,material:t["Metal.080"]}),ge.jsx("mesh",{geometry:e.Cube033_4.geometry,material:t["BlueDark.003"]}),ge.jsx("mesh",{geometry:e.Cube033_5.geometry,material:t["GreenDark.007"]}),ge.jsx("mesh",{geometry:e.Cube033_6.geometry,material:t["WoodDark.005"]}),ge.jsx("mesh",{geometry:e.Cube033_7.geometry,material:t["StoneDark.001"]}),ge.jsx("mesh",{geometry:e.Cube033_8.geometry,material:t["Black.030"]})]})})}Rr.preload("/models/BookCaseWide.glb");function ame(n){const{nodes:e,materials:t}=Rr("/models/Couch.glb");return ge.jsx("group",{...n,dispose:null,children:ge.jsxs("group",{rotation:[-Math.PI/2,0,0],scale:100,children:[ge.jsx("mesh",{geometry:e.Couch_Small1_1.geometry,material:t.Couch_Pink}),ge.jsx("mesh",{geometry:e.Couch_Small1_2.geometry,material:t.Black})]})})}Rr.preload("/models/Couch.glb");function lme(n){const{nodes:e,materials:t}=Rr("/models/Lamp.glb");return ge.jsxs("group",{...n,dispose:null,children:[ge.jsxs("group",{position:[.326,.78,-.505],rotation:[-1.419,.087,2.088],children:[ge.jsx("mesh",{geometry:e.Cylinder398_1.geometry,material:t.brown}),ge.jsx("mesh",{geometry:e.Cylinder398_2.geometry,material:t.black})]}),ge.jsxs("group",{position:[.44,2.164,-.331],rotation:[0,0,Math.PI/6],children:[ge.jsx("mesh",{geometry:e.Cylinder400_1.geometry,material:t.black}),ge.jsx("mesh",{geometry:e.Cylinder400_2.geometry,material:t.white}),ge.jsx("mesh",{geometry:e.Cylinder400_3.geometry,material:t.L_yellow})]})]})}Rr.preload("/models/Lamp.glb");function cme(n){const{nodes:e,materials:t}=Rr("/models/MacBook Pro.glb"),i=Ipe("textures/Circuitry.mp4");return ge.jsxs("group",{...n,dispose:null,children:[ge.jsxs("mesh",{position:[.02,.85,-.66],scale:1,children:[ge.jsx("planeGeometry",{args:[2.55,1.55]}),ge.jsx("meshBasicMaterial",{map:i})]}),ge.jsx("mesh",{geometry:e.mesh485226736.geometry,material:t.mat16}),ge.jsx("mesh",{geometry:e.mesh485226736_1.geometry,material:t.mat23}),ge.jsx("mesh",{geometry:e.mesh485226736_2.geometry,material:t.mat17}),ge.jsx("mesh",{geometry:e.mesh485226736_3.geometry,material:t.mat15}),ge.jsx("mesh",{geometry:e.mesh256948792.geometry,material:t.mat16}),ge.jsx("mesh",{geometry:e.mesh256948792_1.geometry,material:t.mat23}),ge.jsx("mesh",{geometry:e.mesh256948792_2.geometry,material:t.mat17}),ge.jsx("mesh",{geometry:e.mesh256948792_3.geometry,material:t.mat25})]})}Rr.preload("/models/MacBook Pro.glb");function ume(n){q1();const{nodes:e,materials:t}=Rr("/models/Palm tree Pink.glb");return ge.jsxs("group",{...n,dispose:null,children:[ge.jsx("mesh",{geometry:e["palm_tree_01-Mesh"].geometry,material:t[795548]}),ge.jsx("mesh",{geometry:e["palm_tree_01-Mesh_1"].geometry,material:t["8BC34A"]}),ge.jsx("mesh",{geometry:e["palm_tree_01-Mesh_2"].geometry,material:t.DD9944})]})}Rr.preload("/models/Palm tree.glb");function fme(n){const{nodes:e,materials:t}=Rr("/models/Monitor.glb");return ge.jsx("group",{...n,dispose:null,children:ge.jsx("mesh",{geometry:e.iMac.geometry,material:t.Mat})})}Rr.preload("/models/Monitor.glb");const k0={},O4=(n,e)=>n.unstable_is?n.unstable_is(e):e===n,F4=n=>"init"in n,wR=n=>!!n.write,N4=n=>"v"in n||"e"in n,EA=n=>{if("e"in n)throw n.e;if((k0?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},bW=Symbol(),_B=n=>n[bW],aL=n=>{var e;return SB(n)&&!((e=_B(n))!=null&&e[1])},hme=(n,e)=>{const t=_B(n);if(t)t[1]=!0,t[0].forEach(i=>i(e));else if((k0?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},dme=n=>{if(_B(n))return;const e=[new Set,!1];n[bW]=e;const t=()=>{e[1]=!0};n.then(t,t),n.onCancel=i=>{e[0].add(i)}},SB=n=>typeof(n==null?void 0:n.then)=="function",MW=(n,e,t)=>{t.p.has(n)||(t.p.add(n),e.then(()=>{t.p.delete(n)},()=>{t.p.delete(n)}))},bR=(n,e,t)=>{const i=t(n),r="v"in i,s=i.v,o=aL(i.v)?i.v:null;if(SB(e)){dme(e);for(const a of i.d.keys())MW(n,e,t(a))}i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,o&&hme(o,e))},U4=(n,e,t)=>{var i;const r=new Set;for(const s of((i=t.get(n))==null?void 0:i.t)||[])t.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},pme=()=>{const n=new Set,e=()=>{n.forEach(t=>t())};return e.add=t=>(n.add(t),()=>{n.delete(t)}),e},MR=()=>{const n={},e=new WeakMap,t=i=>{var r,s;(r=e.get(n))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return t.add=(i,r)=>{const s=i||n,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},t},mme=n=>(n.c||(n.c=MR()),n.m||(n.m=MR()),n.u||(n.u=MR()),n.f||(n.f=pme()),n),gme=Symbol(),vme=(n=new WeakMap,e=new WeakMap,t=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(h,...p)=>h.read(...p),l=(h,...p)=>h.write(...p),c=(h,p)=>{var g;return(g=h.unstable_onInit)==null?void 0:g.call(h,p)},u=(h,p)=>{var g;return(g=h.onMount)==null?void 0:g.call(h,p)},...f)=>{const h=f[0]||(P=>{if((k0?"production":void 0)!=="production"&&!P)throw new Error("Atom is undefined or null");let k=n.get(P);return k||(k={d:new Map,p:new Set,n:0},n.set(P,k),c==null||c(P,L)),k}),p=f[1]||(()=>{let P,k;const I=D=>{try{D()}catch(G){P||(P=!0,k=G)}};do{o.f&&I(o.f);const D=new Set,G=D.add.bind(D);i.forEach(H=>{var q;return(q=e.get(H))==null?void 0:q.l.forEach(G)}),i.clear(),s.forEach(G),s.clear(),r.forEach(G),r.clear(),D.forEach(I),i.size&&g()}while(i.size||s.size||r.size);if(P)throw k}),g=f[2]||(()=>{const P=[],k=new WeakSet,I=new WeakSet,D=Array.from(i);for(;D.length;){const G=D[D.length-1],H=h(G);if(I.has(G)){D.pop();continue}if(k.has(G)){if(t.get(G)===H.n)P.push([G,H]);else if((k0?"production":void 0)!=="production"&&t.has(G))throw new Error("[Bug] invalidated atom exists");I.add(G),D.pop();continue}k.add(G);for(const q of U4(G,H,e))k.has(q)||D.push(q)}for(let G=P.length-1;G>=0;--G){const[H,q]=P[G];let W=!1;for(const te of q.d.keys())if(te!==H&&i.has(te)){W=!0;break}W&&(v(H),A(H)),t.delete(H)}}),v=f[3]||(P=>{var k,I;const D=h(P);if(N4(D)&&(e.has(P)&&t.get(P)!==D.n||Array.from(D.d).every(([Y,Q])=>v(Y).n===Q)))return D;D.d.clear();let G=!0;const H=()=>{e.has(P)&&(A(P),g(),p())},q=Y=>{var Q;if(O4(P,Y)){const ie=h(Y);if(!N4(ie))if(F4(Y))bR(Y,Y.init,h);else throw new Error("no atom init");return EA(ie)}const F=v(Y);try{return EA(F)}finally{D.d.set(Y,F.n),aL(D.v)&&MW(P,D.v,F),(Q=e.get(Y))==null||Q.t.add(P),G||H()}};let W,te;const ee={get signal(){return W||(W=new AbortController),W.signal},get setSelf(){return(k0?"production":void 0)!=="production"&&!wR(P)&&console.warn("setSelf function cannot be used with read-only atom"),!te&&wR(P)&&(te=(...Y)=>{if((k0?"production":void 0)!=="production"&&G&&console.warn("setSelf function cannot be called in sync"),!G)try{return S(P,...Y)}finally{g(),p()}}),te}},ne=D.n;try{const Y=a(P,q,ee);return bR(P,Y,h),SB(Y)&&((k=Y.onCancel)==null||k.call(Y,()=>W==null?void 0:W.abort()),Y.then(H,H)),D}catch(Y){return delete D.v,D.e=Y,++D.n,D}finally{G=!1,ne!==D.n&&t.get(P)===ne&&(t.set(P,D.n),i.add(P),(I=o.c)==null||I.call(o,P))}}),_=f[4]||(P=>{const k=[P];for(;k.length;){const I=k.pop(),D=h(I);for(const G of U4(I,D,e)){const H=h(G);t.set(G,H.n),k.push(G)}}}),S=f[5]||((P,...k)=>{let I=!0;const D=H=>EA(v(H)),G=(H,...q)=>{var W;const te=h(H);try{if(O4(P,H)){if(!F4(H))throw new Error("atom not writable");const ee=te.n,ne=q[0];bR(H,ne,h),A(H),ee!==te.n&&(i.add(H),(W=o.c)==null||W.call(o,H),_(H));return}else return S(H,...q)}finally{I||(g(),p())}};try{return l(P,D,G,...k)}finally{I=!1}}),A=f[6]||(P=>{var k;const I=h(P),D=e.get(P);if(D&&!aL(I.v)){for(const[G,H]of I.d)if(!D.d.has(G)){const q=h(G);T(G).t.add(P),D.d.add(G),H!==q.n&&(i.add(G),(k=o.c)==null||k.call(o,G),_(G))}for(const G of D.d||[])if(!I.d.has(G)){D.d.delete(G);const H=b(G);H==null||H.t.delete(P)}}}),T=f[7]||(P=>{var k;const I=h(P);let D=e.get(P);if(!D){v(P);for(const G of I.d.keys())T(G).t.add(P);if(D={l:new Set,d:new Set(I.d.keys()),t:new Set},e.set(P,D),(k=o.m)==null||k.call(o,P),wR(P)){const G=()=>{let H=!0;const q=(...W)=>{try{return S(P,...W)}finally{H||(g(),p())}};try{const W=u(P,q);W&&(D.u=()=>{H=!0;try{W()}finally{H=!1}})}finally{H=!1}};r.add(G)}}return D}),b=f[8]||(P=>{var k;const I=h(P);let D=e.get(P);if(D&&!D.l.size&&!Array.from(D.t).some(G=>{var H;return(H=e.get(G))==null?void 0:H.d.has(P)})){D.u&&s.add(D.u),D=void 0,e.delete(P),(k=o.u)==null||k.call(o,P);for(const G of I.d.keys()){const H=b(G);H==null||H.t.delete(P)}return}return D}),C=[n,e,t,i,r,s,o,a,l,c,u,h,p,g,v,_,S,A,T,b],L={get:P=>EA(v(P)),set:(P,...k)=>{try{return S(P,...k)}finally{g(),p()}},sub:(P,k)=>{const D=T(P).l;return D.add(k),p(),()=>{D.delete(k),b(P),p()}}};return Object.defineProperty(L,gme,{value:C}),L},CW=vme,yme=mme,EB={};let xme=0;function RW(n,e){const t=`atom${++xme}`,i={toString(){return(EB?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return typeof n=="function"?i.read=n:(i.init=n,i.read=_me,i.write=Sme),i}function _me(n){return n(this)}function Sme(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}const Eme=()=>{let n=0;const e=yme({}),t=new WeakMap,i=new WeakMap,r=CW(t,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>n?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=t.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=t.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>t,dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++n;try{for(const[f,h]of a)"init"in f&&u(f,h)}finally{--n}}};r.set(l)}})},Ame=()=>(EB?"production":void 0)!=="production"?Eme():CW();let px;const Tme=()=>(px||(px=Ame(),(EB?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=px),globalThis.__JOTAI_DEFAULT_STORE__!==px&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),px),PW={},wme=O.createContext(void 0),IW=n=>O.useContext(wme)||Tme(),LW=n=>typeof(n==null?void 0:n.then)=="function",bme=n=>{n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e})},Mme=de.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(bme(n),n)}),CR=new WeakMap,Cme=n=>{let e=CR.get(n);return e||(e=new Promise((t,i)=>{let r=n;const s=l=>c=>{r===l&&t(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((PW?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");LW(c)?(CR.set(c,e),r=c,c.then(s(c),o(c)),a(c)):t(c)})};n.then(s(n),o(n)),a(n)}),CR.set(n,e)),e};function Rme(n,e){const t=IW(),[[i,r,s],o]=O.useReducer(c=>{const u=t.get(n);return Object.is(c[0],u)&&c[1]===t&&c[2]===n?c:[u,t,n]},void 0,()=>[t.get(n),t,n]);let a=i;if((r!==t||s!==n)&&(o(),a=t.get(n)),O.useEffect(()=>{const c=t.sub(n,()=>{o()});return o(),c},[t,n,void 0]),O.useDebugValue(a),LW(a)){const c=Cme(a);return Mme(c)}return a}function Pme(n,e){const t=IW();return O.useCallback((...r)=>{if((PW?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return t.set(n,...r)},[t,n])}function AB(n,e){return[Rme(n),Pme(n)]}const DW=O.createContext({});function BW(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const TB=O.createContext(null),ew=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Ime(n=!0){const e=O.useContext(TB);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=O.useId();O.useEffect(()=>{n&&r(s)},[n]);const o=O.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const wB=typeof window<"u",Lme=wB?O.useLayoutEffect:O.useEffect,Ua=n=>n;let kW=Ua;const Dme={useManualTiming:!1},AA=["read","resolveKeyframes","update","preRender","render","postRender"],G4={value:null};function Bme(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(u.schedule(f),n()),l++,f(a)}const u={schedule:(f,h=!1,p=!1)=>{const v=p&&r?t:i;return h&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{i.delete(f),o.delete(f)},process:f=>{if(a=f,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(c),e&&G4.value&&G4.value.frameloop[e].push(l),l=0,t.clear(),r=!1,s&&(s=!1,u.process(f))}};return u}const kme=40;function OW(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=AA.reduce((S,A)=>(S[A]=Bme(s,e?A:void 0),S),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=o,p=()=>{const S=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(S-r.timestamp,kme),1),r.timestamp=S,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),f.process(r),h.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(p))},g=()=>{t=!0,i=!0,r.isProcessing||n(p)};return{schedule:AA.reduce((S,A)=>{const T=o[A];return S[A]=(b,C=!1,L=!1)=>(t||g(),T.schedule(b,C,L)),S},{}),cancel:S=>{for(let A=0;A<AA.length;A++)o[AA[A]].cancel(S)},state:r,steps:o}}const{schedule:Ui,cancel:fd,state:Bs,steps:RR}=OW(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ua,!0),FW=O.createContext({strict:!1}),V4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ev={};for(const n in V4)Ev[n]={isEnabled:e=>V4[n].some(t=>!!e[t])};function Ome(n){for(const e in n)Ev[e]={...Ev[e],...n[e]}}const Fme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tw(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Fme.has(n)}let NW=n=>!tw(n);function UW(n){n&&(NW=e=>e.startsWith("on")?!tw(e):n(e))}try{UW(require("@emotion/is-prop-valid").default)}catch{}function Nme(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(NW(r)||t===!0&&tw(r)||!e&&!tw(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function H4({children:n,isValidProp:e,...t}){e&&UW(e),t={...O.useContext(ew),...t},t.isStatic=BW(()=>t.isStatic);const i=O.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return ge.jsx(ew.Provider,{value:i,children:n})}function Ume(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Ob=O.createContext({});function Fb(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function J_(n){return typeof n=="string"||Array.isArray(n)}const bB=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MB=["initial",...bB];function Nb(n){return Fb(n.animate)||MB.some(e=>J_(n[e]))}function GW(n){return!!(Nb(n)||n.variants)}function Gme(n,e){if(Nb(n)){const{initial:t,animate:i}=n;return{initial:t===!1||J_(t)?t:void 0,animate:J_(i)?i:void 0}}return n.inherit!==!1?e:{}}function Vme(n){const{initial:e,animate:t}=Gme(n,O.useContext(Ob));return O.useMemo(()=>({initial:e,animate:t}),[z4(e),z4(t)])}function z4(n){return Array.isArray(n)?n.join(" "):n}const Hme=Symbol.for("motionComponentSymbol");function O0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zme(n,e,t){return O.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):O0(t)&&(t.current=i))},[e])}const CB=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$me="framerAppearId",VW="data-"+CB($me),{schedule:RB}=OW(queueMicrotask,!1),HW=O.createContext({});function Wme(n,e,t,i,r){var s,o;const{visualElement:a}=O.useContext(Ob),l=O.useContext(FW),c=O.useContext(TB),u=O.useContext(ew).reducedMotion,f=O.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,p=O.useContext(HW);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&jme(f.current,t,r,p);const g=O.useRef(!1);O.useInsertionEffect(()=>{h&&g.current&&h.update(t,c)});const v=t[VW],_=O.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return Lme(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),RB.render(h.render),_.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,v)}),_.current=!1))}),h}function jme(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:zW(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&O0(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function zW(n){if(n)return n.options.allowProjection!==!1?n.projection:zW(n.parent)}function Kme({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&Ome(n);function a(c,u){let f;const h={...O.useContext(ew),...c,layoutId:Xme(c)},{isStatic:p}=h,g=Vme(c),v=i(c,p);if(!p&&wB){Yme();const _=qme(h);f=_.MeasureLayout,g.visualElement=Wme(r,v,h,e,_.ProjectionNode)}return ge.jsxs(Ob.Provider,{value:g,children:[f&&g.visualElement?ge.jsx(f,{visualElement:g.visualElement,...h}):null,t(r,c,zme(v,g.visualElement,u),v,p,g.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=O.forwardRef(a);return l[Hme]=r,l}function Xme({layoutId:n}){const e=O.useContext(DW).id;return e&&n!==void 0?e+"-"+n:n}function Yme(n,e){O.useContext(FW).strict}function qme(n){const{drag:e,layout:t}=Ev;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const $W=n=>e=>typeof e=="string"&&e.startsWith(n),PB=$W("--"),Jme=$W("var(--"),IB=n=>Jme(n)?Qme.test(n.split("/*")[0].trim()):!1,Qme=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Q_={};function Zme(n){for(const e in n)Q_[e]=n[e],PB(e)&&(Q_[e].isCSSVariable=!0)}const zv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Um=new Set(zv);function WW(n,{layout:e,layoutId:t}){return Um.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Q_[n]||n==="opacity")}const ao=n=>!!(n&&n.getVelocity),jW=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Mf=(n,e,t)=>t>e?e:t<n?n:t,$v={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Z_={...$v,transform:n=>Mf(0,1,n)},TA={...$v,default:1},J1=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Lh=J1("deg"),iu=J1("%"),yn=J1("px"),ege=J1("vh"),tge=J1("vw"),$4={...iu,parse:n=>iu.parse(n)/100,transform:n=>iu.transform(n*100)},nge={borderWidth:yn,borderTopWidth:yn,borderRightWidth:yn,borderBottomWidth:yn,borderLeftWidth:yn,borderRadius:yn,radius:yn,borderTopLeftRadius:yn,borderTopRightRadius:yn,borderBottomRightRadius:yn,borderBottomLeftRadius:yn,width:yn,maxWidth:yn,height:yn,maxHeight:yn,top:yn,right:yn,bottom:yn,left:yn,padding:yn,paddingTop:yn,paddingRight:yn,paddingBottom:yn,paddingLeft:yn,margin:yn,marginTop:yn,marginRight:yn,marginBottom:yn,marginLeft:yn,backgroundPositionX:yn,backgroundPositionY:yn},ige={rotate:Lh,rotateX:Lh,rotateY:Lh,rotateZ:Lh,scale:TA,scaleX:TA,scaleY:TA,scaleZ:TA,skew:Lh,skewX:Lh,skewY:Lh,distance:yn,translateX:yn,translateY:yn,translateZ:yn,x:yn,y:yn,z:yn,perspective:yn,transformPerspective:yn,opacity:Z_,originX:$4,originY:$4,originZ:yn},W4={...$v,transform:Math.round},LB={...nge,...ige,zIndex:W4,size:yn,fillOpacity:Z_,strokeOpacity:Z_,numOctaves:W4},rge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sge=zv.length;function oge(n,e,t){let i="",r=!0;for(let s=0;s<sge;s++){const o=zv[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=jW(a,LB[o]);if(!l){r=!1;const u=rge[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function DB(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Um.has(l)){o=!0;continue}else if(PB(l)){r[l]=c;continue}else{const u=jW(c,LB[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=oge(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const BB=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KW(n,e,t){for(const i in e)!ao(e[i])&&!WW(i,t)&&(n[i]=e[i])}function age({transformTemplate:n},e){return O.useMemo(()=>{const t=BB();return DB(t,e,n),Object.assign({},t.vars,t.style)},[e])}function lge(n,e){const t=n.style||{},i={};return KW(i,t,n),Object.assign(i,age(n,e)),i}function cge(n,e){const t={},i=lge(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const uge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kB(n){return typeof n!="string"||n.includes("-")?!1:!!(uge.indexOf(n)>-1||/[A-Z]/u.test(n))}const fge={offset:"stroke-dashoffset",array:"stroke-dasharray"},hge={offset:"strokeDashoffset",array:"strokeDasharray"};function dge(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?fge:hge;n[s.offset]=yn.transform(-i);const o=yn.transform(e),a=yn.transform(t);n[s.array]=`${o} ${a}`}function j4(n,e,t){return typeof n=="string"?n:yn.transform(e+t*n)}function pge(n,e,t){const i=j4(e,n.x,n.width),r=j4(t,n.y,n.height);return`${i} ${r}`}function OB(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(DB(n,c,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:p,dimensions:g}=n;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=pge(g,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),i!==void 0&&(h.scale=i),o!==void 0&&dge(h,o,a,l,!1)}const XW=()=>({...BB(),attrs:{}}),FB=n=>typeof n=="string"&&n.toLowerCase()==="svg";function mge(n,e,t,i){const r=O.useMemo(()=>{const s=XW();return OB(s,e,FB(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};KW(s,n.style,n),r.style={...s,...r.style}}return r}function gge(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(kB(t)?mge:cge)(i,s,o,t),c=Nme(i,typeof t=="string",n),u=t!==O.Fragment?{...c,...l,ref:r}:{},{children:f}=i,h=O.useMemo(()=>ao(f)?f.get():f,[f]);return O.createElement(t,{...u,children:h})}}function K4(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function NB(n,e,t,i){if(typeof e=="function"){const[r,s]=K4(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=K4(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const lL=n=>Array.isArray(n),vge=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),yge=n=>lL(n)?n[n.length-1]||0:n;function dT(n){const e=ao(n)?n.get():n;return vge(e)?e.toValue():e}function xge({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:_ge(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const YW=n=>(e,t)=>{const i=O.useContext(Ob),r=O.useContext(TB),s=()=>xge(n,e,i,r);return t?s():BW(s)};function _ge(n,e,t,i){const r={},s=i(n,{});for(const h in s)r[h]=dT(s[h]);let{initial:o,animate:a}=n;const l=Nb(n),c=GW(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Fb(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const g=NB(n,h[p]);if(g){const{transitionEnd:v,transition:_,...S}=g;for(const A in S){let T=S[A];if(Array.isArray(T)){const b=u?T.length-1:0;T=T[b]}T!==null&&(r[A]=T)}for(const A in v)r[A]=v[A]}}}return r}function UB(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(ao(r[o])||e.style&&ao(e.style[o])||WW(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const Sge={useVisualState:YW({scrapeMotionValuesFromProps:UB,createRenderState:BB})};function qW(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function JW(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const QW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZW(n,e,t,i){JW(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(QW.has(r)?r:CB(r),e.attrs[r])}function ej(n,e,t){const i=UB(n,e,t);for(const r in n)if(ao(n[r])||ao(e[r])){const s=zv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const X4=["x","y","width","height","cx","cy","r"],Ege={useVisualState:YW({scrapeMotionValuesFromProps:ej,createRenderState:XW,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(Um.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<X4.length;a++){const l=X4[a];n[l]!==e[l]&&(o=!0)}o&&Ui.read(()=>{qW(t,i),Ui.render(()=>{OB(i,r,FB(t.tagName),n.transformTemplate),ZW(t,i)})})}})};function Age(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...kB(i)?Ege:Sge,preloadedFeatures:n,useRender:gge(r),createVisualElement:e,Component:i};return Kme(o)}}function e1(n,e,t){const i=n.getProps();return NB(i,e,t!==void 0?t:i.custom,n)}function GB(n,e){return n?n[e]||n.default||n:void 0}const tj=new Set(["width","height","top","left","right","bottom",...zv]);let pT;function Tge(){pT=void 0}const ru={now:()=>(pT===void 0&&ru.set(Bs.isProcessing||Dme.useManualTiming?Bs.timestamp:performance.now()),pT),set:n=>{pT=n,queueMicrotask(Tge)}};function VB(n,e){n.indexOf(e)===-1&&n.push(e)}function HB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let zB=class{constructor(){this.subscriptions=[]}add(e){return VB(this.subscriptions,e),()=>HB(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};function nj(n,e){return e?n*(1e3/e):0}const Y4=30,wge=n=>!isNaN(parseFloat(n));let bge=class{constructor(e,t={}){this.version="12.4.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=ru.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ru.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zB);const i=this.events[e].add(t);return e==="change"?()=>{i(),Ui.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ru.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Y4)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Y4);return nj(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function t1(n,e){return new bge(n,e)}function Mge(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,t1(t))}function Cge(n,e){const t=e1(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=yge(s[o]);Mge(n,o,a)}}function Rge(n){return!!(ao(n)&&n.add)}function cL(n,e){const t=n.getValue("willChange");if(Rge(t))return t.add(e)}function ij(n){return n.props[VW]}function $B(n){let e;return()=>(e===void 0&&(e=n()),e)}const Pge=$B(()=>window.ScrollTimeline!==void 0);let Ige=class{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(Pge()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}},Lge=class extends Ige{then(e,t){return Promise.all(this.animations).then(e).catch(t)}};const vf=n=>n*1e3,yf=n=>n/1e3;function WB(n){return typeof n=="function"}function q4(n,e){n.timeline=e,n.onfinish=null}const jB=n=>Array.isArray(n)&&typeof n[0]=="number",Dge={linearEasing:void 0};function Bge(n,e){const t=$B(n);return()=>{var i;return(i=Dge[e])!==null&&i!==void 0?i:t()}}const nw=Bge(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Av=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},rj=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(Av(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function sj(n){return!!(typeof n=="function"&&nw()||!n||typeof n=="string"&&(n in uL||nw())||jB(n)||Array.isArray(n)&&n.every(sj))}const Mx=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,uL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mx([0,.65,.55,1]),circOut:Mx([.55,0,1,.45]),backIn:Mx([.31,.01,.66,-.59]),backOut:Mx([.33,1.53,.69,.99])};function oj(n,e){if(n)return typeof n=="function"&&nw()?rj(n,e):jB(n)?Mx(n):Array.isArray(n)?n.map(t=>oj(t,e)||uL.easeOut):uL[n]}const aj=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,kge=1e-7,Oge=12;function Fge(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=aj(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>kge&&++a<Oge);return o}function Q1(n,e,t,i){if(n===e&&t===i)return Ua;const r=s=>Fge(s,0,1,n,t);return s=>s===0||s===1?s:aj(r(s),e,i)}const lj=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,cj=n=>e=>1-n(1-e),uj=Q1(.33,1.53,.69,.99),KB=cj(uj),fj=lj(KB),hj=n=>(n*=2)<1?.5*KB(n):.5*(2-Math.pow(2,-10*(n-1))),XB=n=>1-Math.sin(Math.acos(n)),dj=cj(XB),pj=lj(XB),mj=n=>/^0[^.\s]+$/u.test(n);function Nge(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||mj(n):!0}const Zx=n=>Math.round(n*1e5)/1e5,YB=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uge(n){return n==null}const Gge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qB=(n,e)=>t=>!!(typeof t=="string"&&Gge.test(t)&&t.startsWith(n)||e&&!Uge(t)&&Object.prototype.hasOwnProperty.call(t,e)),gj=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(YB);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Vge=n=>Mf(0,255,n),PR={...$v,transform:n=>Math.round(Vge(n))},Jp={test:qB("rgb","red"),parse:gj("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+PR.transform(n)+", "+PR.transform(e)+", "+PR.transform(t)+", "+Zx(Z_.transform(i))+")"};function Hge(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const fL={test:qB("#"),parse:Hge,transform:Jp.transform},F0={test:qB("hsl","hue"),parse:gj("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+iu.transform(Zx(e))+", "+iu.transform(Zx(t))+", "+Zx(Z_.transform(i))+")"},eo={test:n=>Jp.test(n)||fL.test(n)||F0.test(n),parse:n=>Jp.test(n)?Jp.parse(n):F0.test(n)?F0.parse(n):fL.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Jp.transform(n):F0.transform(n)},zge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $ge(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(YB))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(zge))===null||t===void 0?void 0:t.length)||0)>0}const vj="number",yj="color",Wge="var",jge="var(",J4="${}",Kge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function n1(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(Kge,l=>(eo.test(l)?(i.color.push(s),r.push(yj),t.push(eo.parse(l))):l.startsWith(jge)?(i.var.push(s),r.push(Wge),t.push(l)):(i.number.push(s),r.push(vj),t.push(parseFloat(l))),++s,J4)).split(J4);return{values:t,split:a,indexes:i,types:r}}function xj(n){return n1(n).values}function _j(n){const{split:e,types:t}=n1(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===vj?s+=Zx(r[o]):a===yj?s+=eo.transform(r[o]):s+=r[o]}return s}}const Xge=n=>typeof n=="number"?0:n;function Yge(n){const e=xj(n);return _j(n)(e.map(Xge))}const hd={test:$ge,parse:xj,createTransformer:_j,getAnimatableNone:Yge},qge=new Set(["brightness","contrast","saturate","opacity"]);function Jge(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(YB)||[];if(!i)return n;const r=t.replace(i,"");let s=qge.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Qge=/\b([a-z-]*)\(.*?\)/gu,hL={...hd,getAnimatableNone:n=>{const e=n.match(Qge);return e?e.map(Jge).join(" "):n}},Zge={...LB,color:eo,backgroundColor:eo,outlineColor:eo,fill:eo,stroke:eo,borderColor:eo,borderTopColor:eo,borderRightColor:eo,borderBottomColor:eo,borderLeftColor:eo,filter:hL,WebkitFilter:hL},JB=n=>Zge[n];function Sj(n,e){let t=JB(n);return t!==hL&&(t=hd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const e0e=new Set(["auto","none","0"]);function t0e(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!e0e.has(s)&&n1(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=Sj(t,r)}const Q4=n=>n===$v||n===yn,Z4=(n,e)=>parseFloat(n.split(", ")[e]),eG=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Z4(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?Z4(s[1],n):0}},n0e=new Set(["x","y","z"]),i0e=zv.filter(n=>!n0e.has(n));function r0e(n){const e=[];return i0e.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Tv={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:eG(4,13),y:eG(5,14)};Tv.translateX=Tv.x;Tv.translateY=Tv.y;const cm=new Set;let dL=!1,pL=!1;function Ej(){if(pL){const n=Array.from(cm).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=r0e(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}pL=!1,dL=!1,cm.forEach(n=>n.complete()),cm.clear()}function Aj(){cm.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(pL=!0)})}function s0e(){Aj(),Ej()}let QB=class{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cm.add(this),dL||(dL=!0,Ui.read(Aj),Ui.resolveKeyframes(Ej))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}};const Tj=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),o0e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function a0e(n){const e=o0e.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function wj(n,e,t=1){const[i,r]=a0e(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return Tj(o)?parseFloat(o):o}return IB(r)?wj(r,e,t+1):r}const bj=n=>e=>e.test(n),l0e={test:n=>n==="auto",parse:n=>n},Mj=[$v,yn,iu,Lh,tge,ege,l0e],tG=n=>Mj.find(bj(n));let Cj=class extends QB{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),IB(c))){const u=wj(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!tj.has(i)||e.length!==2)return;const[r,s]=e,o=tG(r),a=tG(s);if(o!==a)if(Q4(o)&&Q4(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Nge(e[r])&&i.push(r);i.length&&t0e(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tv[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Tv[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}};const nG=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(hd.test(n)||n==="0")&&!n.startsWith("url("));function c0e(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function u0e(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=nG(r,e),a=nG(s,e);return!o||!a?!1:c0e(n)||(t==="spring"||WB(t))&&i}const f0e=n=>n!==null;function Ub(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(f0e),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const h0e=40;let Rj=class{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ru.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>h0e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&s0e(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ru.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!u0e(e,i,r,s))if(o)this.options.duration=0;else{l&&l(Ub(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}};const mL=2e4;function Pj(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<mL;)e+=t,i=n.next(e);return e>=mL?1/0:e}const rr=(n,e,t)=>n+(e-n)*t;function IR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function d0e({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=IR(l,a,n+1/3),s=IR(l,a,n),o=IR(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function iw(n,e){return t=>t>0?e:n}const LR=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},p0e=[fL,Jp,F0],m0e=n=>p0e.find(e=>e.test(n));function iG(n){const e=m0e(n);if(!e)return!1;let t=e.parse(n);return e===F0&&(t=d0e(t)),t}const rG=(n,e)=>{const t=iG(n),i=iG(e);if(!t||!i)return iw(n,e);const r={...t};return s=>(r.red=LR(t.red,i.red,s),r.green=LR(t.green,i.green,s),r.blue=LR(t.blue,i.blue,s),r.alpha=rr(t.alpha,i.alpha,s),Jp.transform(r))},g0e=(n,e)=>t=>e(n(t)),Z1=(...n)=>n.reduce(g0e),gL=new Set(["none","hidden"]);function v0e(n,e){return gL.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function y0e(n,e){return t=>rr(n,e,t)}function ZB(n){return typeof n=="number"?y0e:typeof n=="string"?IB(n)?iw:eo.test(n)?rG:S0e:Array.isArray(n)?Ij:typeof n=="object"?eo.test(n)?rG:x0e:iw}function Ij(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>ZB(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function x0e(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=ZB(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function _0e(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const S0e=(n,e)=>{const t=hd.createTransformer(e),i=n1(n),r=n1(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?gL.has(n)&&!r.values.length||gL.has(e)&&!i.values.length?v0e(n,e):Z1(Ij(_0e(i,r),r.values),t):iw(n,e)};function Lj(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?rr(n,e,t):ZB(n)(n,e)}const E0e=5;function Dj(n,e,t){const i=Math.max(e-E0e,0);return nj(t-n(i),e-i)}const fr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sG=.001;function A0e({duration:n=fr.duration,bounce:e=fr.bounce,velocity:t=fr.velocity,mass:i=fr.mass}){let r,s,o=1-e;o=Mf(fr.minDamping,fr.maxDamping,o),n=Mf(fr.minDuration,fr.maxDuration,yf(n)),o<1?(r=c=>{const u=c*o,f=u*n,h=u-t,p=vL(c,o),g=Math.exp(-f);return sG-h/p*g},s=c=>{const f=c*o*n,h=f*t+t,p=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-f),v=vL(Math.pow(c,2),o);return(-r(c)+sG>0?-1:1)*((h-p)*g)/v}):(r=c=>{const u=Math.exp(-c*n),f=(c-t)*n+1;return-.001+u*f},s=c=>{const u=Math.exp(-c*n),f=(t-c)*(n*n);return u*f});const a=5/n,l=w0e(r,s,a);if(n=vf(n),isNaN(l))return{stiffness:fr.stiffness,damping:fr.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const T0e=12;function w0e(n,e,t){let i=t;for(let r=1;r<T0e;r++)i=i-n(i)/e(i);return i}function vL(n,e){return n*Math.sqrt(1-e*e)}const b0e=["duration","bounce"],M0e=["stiffness","damping","mass"];function oG(n,e){return e.some(t=>n[t]!==void 0)}function C0e(n){let e={velocity:fr.velocity,stiffness:fr.stiffness,damping:fr.damping,mass:fr.mass,isResolvedFromDuration:!1,...n};if(!oG(n,M0e)&&oG(n,b0e))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Mf(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:fr.mass,stiffness:r,damping:s}}else{const t=A0e(n);e={...e,...t,mass:fr.mass},e.isResolvedFromDuration=!0}return e}function Bj(n=fr.visualDuration,e=fr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:h,isResolvedFromDuration:p}=C0e({...t,velocity:-yf(t.velocity||0)}),g=h||0,v=c/(2*Math.sqrt(l*u)),_=o-s,S=yf(Math.sqrt(l/u)),A=Math.abs(_)<5;i||(i=A?fr.restSpeed.granular:fr.restSpeed.default),r||(r=A?fr.restDelta.granular:fr.restDelta.default);let T;if(v<1){const C=vL(S,v);T=L=>{const P=Math.exp(-v*S*L);return o-P*((g+v*S*_)/C*Math.sin(C*L)+_*Math.cos(C*L))}}else if(v===1)T=C=>o-Math.exp(-S*C)*(_+(g+S*_)*C);else{const C=S*Math.sqrt(v*v-1);T=L=>{const P=Math.exp(-v*S*L),k=Math.min(C*L,300);return o-P*((g+v*S*_)*Math.sinh(k)+C*_*Math.cosh(k))/C}}const b={calculatedDuration:p&&f||null,next:C=>{const L=T(C);if(p)a.done=C>=f;else{let P=0;v<1&&(P=C===0?vf(g):Dj(T,C,L));const k=Math.abs(P)<=i,I=Math.abs(o-L)<=r;a.done=k&&I}return a.value=a.done?o:L,a},toString:()=>{const C=Math.min(Pj(b),mL),L=rj(P=>b.next(C*P).value,C,30);return C+"ms "+L}};return b}function aG({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],h={done:!1,value:f},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let v=t*e;const _=f+v,S=o===void 0?_:o(_);S!==_&&(v=S-f);const A=k=>-v*Math.exp(-k/i),T=k=>S+A(k),b=k=>{const I=A(k),D=T(k);h.done=Math.abs(I)<=c,h.value=h.done?S:D};let C,L;const P=k=>{p(h.value)&&(C=k,L=Bj({keyframes:[h.value,g(h.value)],velocity:Dj(T,k,h.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:k=>{let I=!1;return!L&&C===void 0&&(I=!0,b(k),P(k)),C!==void 0&&k>=C?L.next(k-C):(!I&&b(k),h)}}}const R0e=Q1(.42,0,1,1),P0e=Q1(0,0,.58,1),kj=Q1(.42,0,.58,1),I0e=n=>Array.isArray(n)&&typeof n[0]!="number",L0e={linear:Ua,easeIn:R0e,easeInOut:kj,easeOut:P0e,circIn:XB,circInOut:pj,circOut:dj,backIn:KB,backInOut:fj,backOut:uj,anticipate:hj},lG=n=>{if(jB(n)){kW(n.length===4);const[e,t,i,r]=n;return Q1(e,t,i,r)}else if(typeof n=="string")return L0e[n];return n};function D0e(n,e,t){const i=[],r=t||Lj,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ua:e;a=Z1(l,a)}i.push(a)}return i}function B0e(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(kW(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=D0e(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const h=Av(n[f],n[f+1],u);return a[f](h)};return t?u=>c(Mf(n[0],n[s-1],u)):c}function k0e(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Av(0,e,i);n.push(rr(t,1,r))}}function O0e(n){const e=[0];return k0e(e,n.length-1),e}function F0e(n,e){return n.map(t=>t*e)}function N0e(n,e){return n.map(()=>e||kj).splice(0,n.length-1)}function rw({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=I0e(i)?i.map(lG):lG(i),s={done:!1,value:e[0]},o=F0e(t&&t.length===e.length?t:O0e(e),n),a=B0e(o,e,{ease:Array.isArray(r)?r:N0e(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const U0e=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ui.update(e,!0),stop:()=>fd(e),now:()=>Bs.isProcessing?Bs.timestamp:ru.now()}},G0e={decay:aG,inertia:aG,tween:rw,keyframes:rw,spring:Bj},V0e=n=>n/100;let ek=class extends Rj{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||QB,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=WB(t)?t:G0e[t]||rw;let l,c;a!==rw&&typeof e[0]!="number"&&(l=Z1(V0e,Lj(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Pj(u));const{calculatedDuration:f}=u,h=f+r,p=h*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:g,repeatDelay:v,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-h*(this.speed>=0?1:-1),A=this.speed>=0?S<0:S>u;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let T=this.currentTime,b=s;if(p){const k=Math.min(this.currentTime,u)/f;let I=Math.floor(k),D=k%1;!D&&k>=1&&(D=1),D===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(D=1-D,v&&(D-=v/f)):g==="mirror"&&(b=o)),T=Mf(0,1,D)*f}const C=A?{done:!1,value:l[0]}:b.next(T);a&&(C.value=a(C.value));let{done:L}=C;!A&&c!==null&&(L=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return P&&r!==void 0&&(C.value=Ub(l,this.options,r)),_&&_(C.value),P&&this.finish(),C}get duration(){const{resolved:e}=this;return e?yf(e.calculatedDuration):0}get time(){return yf(this.currentTime)}set time(e){e=vf(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=yf(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=U0e,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}};const H0e=new Set(["opacity","clipPath","filter","transform"]);function z0e(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=oj(a,r);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const $0e=$B(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sw=10,W0e=2e4;function j0e(n){return WB(n.type)||n.type==="spring"||!sj(n.ease)}function K0e(n,e){const t=new ek({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<W0e;)i=t.sample(s),r.push(i.value),s+=sw;return{times:void 0,keyframes:r,duration:s-sw,ease:"linear"}}const Oj={anticipate:hj,backInOut:fj,circInOut:pj};function X0e(n){return n in Oj}let cG=class extends Rj{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new Cj(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&nw()&&X0e(s)&&(s=Oj[s]),j0e(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:g,...v}=this.options,_=K0e(e,v);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,r=_.times,s=_.ease,o="keyframes"}const u=z0e(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(q4(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(Ub(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return yf(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return yf(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=vf(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ua;const{animation:i}=t;q4(i,e)}return Ua}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...p}=this.options,g=new ek({...p,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),v=vf(this.time);c.setWithVelocity(g.sample(v-sw).value,g.sample(v).value,sw)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return $0e()&&i&&H0e.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}};const Y0e={type:"spring",stiffness:500,damping:25,restSpeed:10},q0e=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),J0e={type:"keyframes",duration:.8},Q0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Z0e=(n,{keyframes:e})=>e.length>2?J0e:Um.has(n)?n.startsWith("scale")?q0e(e[1]):Y0e:Q0e;function eve({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const tk=(n,e,t,i={},r,s)=>o=>{const a=GB(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-vf(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};eve(a)||(u={...u,...Z0e(n,u)}),u.duration&&(u.duration=vf(u.duration)),u.repeatDelay&&(u.repeatDelay=vf(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=Ub(u.keyframes,a);if(h!==void 0)return Ui.update(()=>{u.onUpdate(h),u.onComplete()}),new Lge([])}return!s&&cG.supports(u)?new cG(u):new ek(u)};function tve({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function Fj(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const h=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||u&&tve(u,f))continue;const g={delay:t,...GB(o||{},f)};let v=!1;if(window.MotionHandoffAnimation){const S=ij(n);if(S){const A=window.MotionHandoffAnimation(S,f,Ui);A!==null&&(g.startTime=A,v=!0)}}cL(n,f),h.start(tk(f,h,p,n.shouldReduceMotion&&tj.has(f)?{type:!1}:g,n,v));const _=h.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{Ui.update(()=>{a&&Cge(n,a)})}),c}function yL(n,e,t={}){var i;const r=e1(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(Fj(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=s;return nve(n,e,u+c,f,h,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function nve(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(ive).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(yL(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function ive(n,e){return n.sortNodePosition(e)}function rve(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>yL(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=yL(n,e,t);else{const r=typeof e=="function"?e1(n,e,t.custom):e;i=Promise.all(Fj(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function Nj(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const sve=MB.length;function Uj(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Uj(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<sve;t++){const i=MB[t],r=n.props[i];(J_(r)||r===!1)&&(e[i]=r)}return e}const ove=[...bB].reverse(),ave=bB.length;function lve(n){return e=>Promise.all(e.map(({animation:t,options:i})=>rve(n,t,i)))}function cve(n){let e=lve(n),t=uG(),i=!0;const r=l=>(c,u)=>{var f;const h=e1(n,u,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...v}=h;c={...c,...v,...g}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=Uj(n.parent)||{},f=[],h=new Set;let p={},g=1/0;for(let _=0;_<ave;_++){const S=ove[_],A=t[S],T=c[S]!==void 0?c[S]:u[S],b=J_(T),C=S===l?A.isActive:null;C===!1&&(g=_);let L=T===u[S]&&T!==c[S]&&b;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...p},!A.isActive&&C===null||!T&&!A.prevProp||Fb(T)||typeof T=="boolean")continue;const P=uve(A.prevProp,T);let k=P||S===l&&A.isActive&&!L&&b||_>g&&b,I=!1;const D=Array.isArray(T)?T:[T];let G=D.reduce(r(S),{});C===!1&&(G={});const{prevResolvedValues:H={}}=A,q={...H,...G},W=ne=>{k=!0,h.has(ne)&&(I=!0,h.delete(ne)),A.needsAnimating[ne]=!0;const Y=n.getValue(ne);Y&&(Y.liveStyle=!1)};for(const ne in q){const Y=G[ne],Q=H[ne];if(p.hasOwnProperty(ne))continue;let F=!1;lL(Y)&&lL(Q)?F=!Nj(Y,Q):F=Y!==Q,F?Y!=null?W(ne):h.add(ne):Y!==void 0&&h.has(ne)?W(ne):A.protectedKeys[ne]=!0}A.prevProp=T,A.prevResolvedValues=G,A.isActive&&(p={...p,...G}),i&&n.blockInitialAnimation&&(k=!1),k&&(!(L&&P)||I)&&f.push(...D.map(ne=>({animation:ne,options:{type:S}})))}if(h.size){const _={};if(typeof c.initial!="boolean"){const S=e1(n,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(_.transition=S.transition)}h.forEach(S=>{const A=n.getBaseTarget(S),T=n.getValue(S);T&&(T.liveStyle=!0),_[S]=A??null}),f.push({animation:_})}let v=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(v=!1),i=!1,v?e(f):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const h in t)t[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=uG(),i=!0}}}function uve(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Nj(e,n):!1}function Ap(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uG(){return{animate:Ap(!0),whileInView:Ap(),whileHover:Ap(),whileTap:Ap(),whileDrag:Ap(),whileFocus:Ap(),exit:Ap()}}let bd=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},fve=class extends bd{constructor(e){super(e),e.animationState||(e.animationState=cve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}},hve=0,dve=class extends bd{constructor(){super(...arguments),this.id=hve++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}};const pve={animation:{Feature:fve},exit:{Feature:dve}},sc={x:!1,y:!1};function Gj(){return sc.x||sc.y}function mve(n){return n==="x"||n==="y"?sc[n]?null:(sc[n]=!0,()=>{sc[n]=!1}):sc.x||sc.y?null:(sc.x=sc.y=!0,()=>{sc.x=sc.y=!1})}const nk=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function i1(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function eS(n){return{point:{x:n.pageX,y:n.pageY}}}const gve=n=>e=>nk(e)&&n(e,eS(e));function e_(n,e,t,i){return i1(n,e,gve(t),i)}const fG=(n,e)=>Math.abs(n-e);function vve(n,e){const t=fG(n.x,e.x),i=fG(n.y,e.y);return Math.sqrt(t**2+i**2)}let Vj=class{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=BR(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=vve(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:g}=f,{timestamp:v}=Bs;this.history.push({...g,timestamp:v});const{onStart:_,onMove:S}=this.handlers;h||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=DR(h,this.transformPagePoint),Ui.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=BR(f.type==="pointercancel"?this.lastMoveEventInfo:DR(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,_),g&&g(f,_)},!nk(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=eS(e),a=DR(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Bs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,BR(a,this.history)),this.removeListeners=Z1(e_(this.contextWindow,"pointermove",this.handlePointerMove),e_(this.contextWindow,"pointerup",this.handlePointerUp),e_(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fd(this.updatePoint)}};function DR(n,e){return e?{point:e(n.point)}:n}function hG(n,e){return{x:n.x-e.x,y:n.y-e.y}}function BR({point:n},e){return{point:n,delta:hG(n,Hj(e)),offset:hG(n,yve(e)),velocity:xve(e,.1)}}function yve(n){return n[0]}function Hj(n){return n[n.length-1]}function xve(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=Hj(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>vf(e)));)t--;if(!i)return{x:0,y:0};const s=yf(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const zj=1e-4,_ve=1-zj,Sve=1+zj,$j=.01,Eve=0-$j,Ave=0+$j;function Bo(n){return n.max-n.min}function Tve(n,e,t){return Math.abs(n-e)<=t}function dG(n,e,t,i=.5){n.origin=i,n.originPoint=rr(e.min,e.max,n.origin),n.scale=Bo(t)/Bo(e),n.translate=rr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=_ve&&n.scale<=Sve||isNaN(n.scale))&&(n.scale=1),(n.translate>=Eve&&n.translate<=Ave||isNaN(n.translate))&&(n.translate=0)}function t_(n,e,t,i){dG(n.x,e.x,t.x,i?i.originX:void 0),dG(n.y,e.y,t.y,i?i.originY:void 0)}function pG(n,e,t){n.min=t.min+e.min,n.max=n.min+Bo(e)}function wve(n,e,t){pG(n.x,e.x,t.x),pG(n.y,e.y,t.y)}function mG(n,e,t){n.min=e.min-t.min,n.max=n.min+Bo(e)}function n_(n,e,t){mG(n.x,e.x,t.x),mG(n.y,e.y,t.y)}function bve(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?rr(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?rr(t,n,i.max):Math.min(n,t)),n}function gG(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Mve(n,{top:e,left:t,bottom:i,right:r}){return{x:gG(n.x,t,r),y:gG(n.y,e,i)}}function vG(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Cve(n,e){return{x:vG(n.x,e.x),y:vG(n.y,e.y)}}function Rve(n,e){let t=.5;const i=Bo(n),r=Bo(e);return r>i?t=Av(e.min,e.max-i,n.min):i>r&&(t=Av(n.min,n.max-r,e.min)),Mf(0,1,t)}function Pve(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const xL=.35;function Ive(n=xL){return n===!1?n=0:n===!0&&(n=xL),{x:yG(n,"left","right"),y:yG(n,"top","bottom")}}function yG(n,e,t){return{min:xG(n,e),max:xG(n,t)}}function xG(n,e){return typeof n=="number"?n:n[e]||0}const _G=()=>({translate:0,scale:1,origin:0,originPoint:0}),N0=()=>({x:_G(),y:_G()}),SG=()=>({min:0,max:0}),Tr=()=>({x:SG(),y:SG()});function cl(n){return[n("x"),n("y")]}function Wj({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Lve({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Dve(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function kR(n){return n===void 0||n===1}function _L({scale:n,scaleX:e,scaleY:t}){return!kR(n)||!kR(e)||!kR(t)}function Bp(n){return _L(n)||jj(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function jj(n){return EG(n.x)||EG(n.y)}function EG(n){return n&&n!=="0%"}function ow(n,e,t){const i=n-t,r=e*i;return t+r}function AG(n,e,t,i,r){return r!==void 0&&(n=ow(n,r,i)),ow(n,t,i)+e}function SL(n,e=0,t=1,i,r){n.min=AG(n.min,e,t,i,r),n.max=AG(n.max,e,t,i,r)}function Kj(n,{x:e,y:t}){SL(n.x,e.translate,e.scale,e.originPoint),SL(n.y,t.translate,t.scale,t.originPoint)}const TG=.999999999999,wG=1.0000000000001;function Bve(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&G0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Kj(n,o)),i&&Bp(s.latestValues)&&G0(n,s.latestValues))}e.x<wG&&e.x>TG&&(e.x=1),e.y<wG&&e.y>TG&&(e.y=1)}function U0(n,e){n.min=n.min+e,n.max=n.max+e}function bG(n,e,t,i,r=.5){const s=rr(n.min,n.max,r);SL(n,e,t,s,i)}function G0(n,e){bG(n.x,e.x,e.scaleX,e.scale,e.originX),bG(n.y,e.y,e.scaleY,e.scale,e.originY)}function Xj(n,e){return Wj(Dve(n.getBoundingClientRect(),e))}function kve(n,e,t){const i=Xj(n,t),{scroll:r}=e;return r&&(U0(i.x,r.offset.x),U0(i.y,r.offset.y)),i}const Yj=({current:n})=>n?n.ownerDocument.defaultView:null,Ove=new WeakMap;let Fve=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(eS(u).point)},s=(u,f)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mve(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cl(_=>{let S=this.getAxisMotionValue(_).get()||0;if(iu.test(S)){const{projection:A}=this.visualElement;if(A&&A.layout){const T=A.layout.layoutBox[_];T&&(S=Bo(T)*(parseFloat(S)/100))}}this.originPoint[_]=S}),g&&Ui.postRender(()=>g(u,f)),cL(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:_}=f;if(p&&this.currentDirection===null){this.currentDirection=Nve(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),v&&v(u,f)},a=(u,f)=>this.stop(u,f),l=()=>cl(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Vj(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Yj(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ui.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!wA(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=bve(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&O0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Mve(r.layoutBox,t):this.constraints=!1,this.elastic=Ive(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cl(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Pve(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!O0(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=kve(i,r.root,this.visualElement.getTransformPagePoint());let o=Cve(r.layout.layoutBox,s);if(t){const a=t(Lve(o));this.hasMutatedConstraints=!!a,a&&(o=Wj(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=cl(u=>{if(!wA(u,t,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const h=r?200:1e6,p=r?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return cL(this.visualElement,e),i.start(tk(e,i,0,t,this.visualElement,!1))}stopAnimation(){cl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cl(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){cl(t=>{const{drag:i}=this.getProps();if(!wA(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-rr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!O0(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};cl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=Rve({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),cl(o=>{if(!wA(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(rr(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Ove.set(this.visualElement,this);const e=this.visualElement.current,t=e_(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();O0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ui.read(i);const o=i1(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(cl(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=xL,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}};function wA(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Nve(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}let Uve=class extends bd{constructor(e){super(e),this.removeGroupControls=Ua,this.removeListeners=Ua,this.controls=new Fve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ua}unmount(){this.removeGroupControls(),this.removeListeners()}};const MG=n=>(e,t)=>{n&&Ui.postRender(()=>n(e,t))};let Gve=class extends bd{constructor(){super(...arguments),this.removePointerDownListener=Ua}onPointerDown(e){this.session=new Vj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:MG(e),onStart:MG(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Ui.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=e_(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};const mT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CG(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const mx={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(yn.test(n))n=parseFloat(n);else return n;const t=CG(n,e.target.x),i=CG(n,e.target.y);return`${t}% ${i}%`}},Vve={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=hd.parse(n);if(r.length>5)return i;const s=hd.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=rr(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};let Hve=class extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Zme(zve),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ui.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),RB.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}};function qj(n){const[e,t]=Ime(),i=O.useContext(DW);return ge.jsx(Hve,{...n,layoutGroup:i,switchLayoutGroup:O.useContext(HW),isPresent:e,safeToRemove:t})}const zve={borderRadius:{...mx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mx,borderTopRightRadius:mx,borderBottomLeftRadius:mx,borderBottomRightRadius:mx,boxShadow:Vve};function $ve(n,e,t){const i=ao(n)?n:t1(n);return i.start(tk("",i,e,t)),i.animation}function Wve(n){return n instanceof SVGElement&&n.tagName!=="svg"}const jve=(n,e)=>n.depth-e.depth;let Kve=class{constructor(){this.children=[],this.isDirty=!1}add(e){VB(this.children,e),this.isDirty=!0}remove(e){HB(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jve),this.isDirty=!1,this.children.forEach(e)}};function Xve(n,e){const t=ru.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(fd(i),n(s-e))};return Ui.read(i,!0),()=>fd(i)}const Jj=["TopLeft","TopRight","BottomLeft","BottomRight"],Yve=Jj.length,RG=n=>typeof n=="string"?parseFloat(n):n,PG=n=>typeof n=="number"||yn.test(n);function qve(n,e,t,i,r,s){r?(n.opacity=rr(0,t.opacity!==void 0?t.opacity:1,Jve(i)),n.opacityExit=rr(e.opacity!==void 0?e.opacity:1,0,Qve(i))):s&&(n.opacity=rr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<Yve;o++){const a=`border${Jj[o]}Radius`;let l=IG(e,a),c=IG(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||PG(l)===PG(c)?(n[a]=Math.max(rr(RG(l),RG(c),i),0),(iu.test(c)||iu.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=rr(e.rotate||0,t.rotate||0,i))}function IG(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Jve=Qj(0,.5,dj),Qve=Qj(.5,.95,Ua);function Qj(n,e,t){return i=>i<n?0:i>e?1:t(Av(n,e,i))}function LG(n,e){n.min=e.min,n.max=e.max}function ol(n,e){LG(n.x,e.x),LG(n.y,e.y)}function DG(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function BG(n,e,t,i,r){return n-=e,n=ow(n,1/t,i),r!==void 0&&(n=ow(n,1/r,i)),n}function Zve(n,e=0,t=1,i=.5,r,s=n,o=n){if(iu.test(e)&&(e=parseFloat(e),e=rr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rr(s.min,s.max,i);n===s&&(a-=e),n.min=BG(n.min,e,t,a,r),n.max=BG(n.max,e,t,a,r)}function kG(n,e,[t,i,r],s,o){Zve(n,e[t],e[i],e[r],e.scale,s,o)}const eye=["x","scaleX","originX"],tye=["y","scaleY","originY"];function OG(n,e,t,i){kG(n.x,e,eye,t?t.x:void 0,i?i.x:void 0),kG(n.y,e,tye,t?t.y:void 0,i?i.y:void 0)}function FG(n){return n.translate===0&&n.scale===1}function Zj(n){return FG(n.x)&&FG(n.y)}function NG(n,e){return n.min===e.min&&n.max===e.max}function nye(n,e){return NG(n.x,e.x)&&NG(n.y,e.y)}function UG(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function e7(n,e){return UG(n.x,e.x)&&UG(n.y,e.y)}function GG(n){return Bo(n.x)/Bo(n.y)}function VG(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}let iye=class{constructor(){this.members=[]}add(e){VB(this.members,e),e.scheduleRender()}remove(e){if(HB(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function rye(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:p,skewY:g}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),h&&(i+=`rotateY(${h}deg) `),p&&(i+=`skewX(${p}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const OR=["","X","Y","Z"],sye={visibility:"hidden"},HG=1e3;let oye=0;function FR(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function t7(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=ij(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ui,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&t7(i)}function n7({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=oye++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cye),this.nodes.forEach(pye),this.nodes.forEach(mye),this.nodes.forEach(uye)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Kve)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zB),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Wve(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const h=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Xve(h,250),mT.hasAnimatedSinceResize&&(mT.hasAnimatedSinceResize=!1,this.nodes.forEach($G))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||_ye,{onLayoutAnimationStart:_,onLayoutAnimationComplete:S}=u.getProps(),A=!this.targetLayout||!e7(this.targetLayout,g),T=!h&&p;if(this.options.layoutRoot||this.resumeFrom||T||h&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const b={...GB(v,"layout"),onPlay:_,onComplete:S};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||$G(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zG);return}this.isUpdating||this.nodes.forEach(hye),this.isUpdating=!1,this.nodes.forEach(dye),this.nodes.forEach(aye),this.nodes.forEach(lye),this.clearAllSnapshots();const a=ru.now();Bs.delta=Mf(0,1e3/60,a-Bs.timestamp),Bs.timestamp=a,Bs.isProcessing=!0,RR.update.process(Bs),RR.preRender.process(Bs),RR.render.process(Bs),Bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RB.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fye),this.sharedNodes.forEach(vye)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ui.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ui.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bo(this.snapshot.measuredBox.x)&&!Bo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Zj(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Bp(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Sye(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Tr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Eye))){const{scroll:u}=this.root;u&&(U0(l.x,u.offset.x),U0(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Tr();if(ol(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ol(l,o),U0(l.x,f.offset.x),U0(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Tr();ol(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&G0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Bp(u.latestValues)&&G0(l,u.latestValues)}return Bp(this.latestValues)&&G0(l,this.latestValues),l}removeTransform(o){const a=Tr();ol(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Bp(c.latestValues))continue;_L(c.latestValues)&&c.updateSnapshot();const u=Tr(),f=c.measurePageBox();ol(u,f),OG(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Bp(this.latestValues)&&OG(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Bs.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tr(),this.relativeTargetOrigin=Tr(),n_(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ol(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tr(),this.targetWithTransforms=Tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ol(this.target,this.layout.layoutBox),Kj(this.target,this.targetDelta)):ol(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tr(),this.relativeTargetOrigin=Tr(),n_(this.relativeTargetOrigin,this.target,p.target),ol(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_L(this.parent.latestValues)||jj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Bs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ol(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Bve(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Tr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DG(this.prevProjectionDelta.x,this.projectionDelta.x),DG(this.prevProjectionDelta.y,this.projectionDelta.y)),t_(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!VG(this.projectionDelta.x,this.prevProjectionDelta.x)||!VG(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=N0(),this.projectionDelta=N0(),this.projectionDeltaWithTransform=N0()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=N0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Tr(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,_=this.getStack(),S=!_||_.members.length<=1,A=!!(v&&!S&&this.options.crossfade===!0&&!this.path.some(xye));this.animationProgress=0;let T;this.mixTargetDelta=b=>{const C=b/1e3;WG(f.x,o.x,C),WG(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(n_(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yye(this.relativeTarget,this.relativeTargetOrigin,h,C),T&&nye(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Tr()),ol(T,this.relativeTarget)),v&&(this.animationValues=u,qve(u,c,this.latestValues,C,A,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ui.update(()=>{mT.hasAnimatedSinceResize=!0,this.currentAnimation=$ve(0,HG,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&i7(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Tr();const f=Bo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=Bo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}ol(a,l),G0(a,u),t_(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iye),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&FR("z",o,c,this.animationValues);for(let u=0;u<OR.length;u++)FR(`rotate${OR[u]}`,o,c,this.animationValues),FR(`skew${OR[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sye;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=dT(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=dT(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Bp(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=rye(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Q_){if(h[v]===void 0)continue;const{correct:_,applyTo:S,isCSSVariable:A}=Q_[v],T=c.transform==="none"?h[v]:_(h[v],f);if(S){const b=S.length;for(let C=0;C<b;C++)c[S[C]]=T}else A?this.options.visualElement.renderState.vars[v]=T:c[v]=T}return this.options.layoutId&&(c.pointerEvents=f===this?dT(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(zG),this.root.sharedNodes.clear()}}}function aye(n){n.updateLayout()}function lye(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?cl(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=Bo(h);h.min=i[f].min,h.max=h.min+p}):i7(s,t.layoutBox,i)&&cl(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=Bo(i[f]);h.max=h.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+p)});const a=N0();t_(a,i,t.layoutBox);const l=N0();o?t_(l,n.applyTransform(r,!0),t.measuredBox):t_(l,i,t.layoutBox);const c=!Zj(a);let u=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const g=Tr();n_(g,t.layoutBox,h.layoutBox);const v=Tr();n_(v,i,p.layoutBox),e7(g,v)||(u=!0),f.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=g,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function cye(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function uye(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function fye(n){n.clearSnapshot()}function zG(n){n.clearMeasurements()}function hye(n){n.isLayoutDirty=!1}function dye(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function $G(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function pye(n){n.resolveTargetDelta()}function mye(n){n.calcProjection()}function gye(n){n.resetSkewAndRotation()}function vye(n){n.removeLeadSnapshot()}function WG(n,e,t){n.translate=rr(e.translate,0,t),n.scale=rr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function jG(n,e,t,i){n.min=rr(e.min,t.min,i),n.max=rr(e.max,t.max,i)}function yye(n,e,t,i){jG(n.x,e.x,t.x,i),jG(n.y,e.y,t.y,i)}function xye(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _ye={duration:.45,ease:[.4,0,.1,1]},KG=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),XG=KG("applewebkit/")&&!KG("chrome/")?Math.round:Ua;function YG(n){n.min=XG(n.min),n.max=XG(n.max)}function Sye(n){YG(n.x),YG(n.y)}function i7(n,e,t){return n==="position"||n==="preserve-aspect"&&!Tve(GG(e),GG(t),.2)}function Eye(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Aye=n7({attachResizeListener:(n,e)=>i1(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),NR={current:void 0},r7=n7({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!NR.current){const n=new Aye({});n.mount(window),n.setOptions({layoutScroll:!0}),NR.current=n}return NR.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Tye={pan:{Feature:Gve},drag:{Feature:Uve,ProjectionNode:r7,MeasureLayout:qj}};function wye(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function s7(n,e){const t=wye(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function qG(n){return!(n.pointerType==="touch"||Gj())}function bye(n,e,t={}){const[i,r,s]=s7(n,t),o=a=>{if(!qG(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{qG(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}function JG(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Ui.postRender(()=>s(e,eS(e)))}let Mye=class extends bd{mount(){const{current:e}=this.node;e&&(this.unmount=bye(e,(t,i)=>(JG(this.node,i,"Start"),r=>JG(this.node,r,"End"))))}unmount(){}},Cye=class extends bd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Z1(i1(this.node.current,"focus",()=>this.onFocus()),i1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};const o7=(n,e)=>e?n===e?!0:o7(n,e.parentElement):!1,Rye=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pye(n){return Rye.has(n.tagName)||n.tabIndex!==-1}const Cx=new WeakSet;function QG(n){return e=>{e.key==="Enter"&&n(e)}}function UR(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Iye=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=QG(()=>{if(Cx.has(t))return;UR(t,"down");const r=QG(()=>{UR(t,"up")}),s=()=>UR(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function ZG(n){return nk(n)&&!Gj()}function Lye(n,e,t={}){const[i,r,s]=s7(n,t),o=a=>{const l=a.currentTarget;if(!ZG(a)||Cx.has(l))return;Cx.add(l);const c=e(l,a),u=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!ZG(p)||!Cx.has(l))&&(Cx.delete(l),typeof c=="function"&&c(p,{success:g}))},f=p=>{u(p,t.useGlobalTarget||o7(l,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",h,r)};return i.forEach(a=>{!Pye(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>Iye(c,r),r)}),s}function e5(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Ui.postRender(()=>s(e,eS(e)))}let Dye=class extends bd{mount(){const{current:e}=this.node;e&&(this.unmount=Lye(e,(t,i)=>(e5(this.node,i,"Start"),(r,{success:s})=>e5(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}};const EL=new WeakMap,GR=new WeakMap,Bye=n=>{const e=EL.get(n.target);e&&e(n)},kye=n=>{n.forEach(Bye)};function Oye({root:n,...e}){const t=n||document;GR.has(t)||GR.set(t,{});const i=GR.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(kye,{root:n,...e})),i[r]}function Fye(n,e,t){const i=Oye(e);return EL.set(n,t),i.observe(n),()=>{EL.delete(n),i.unobserve(n)}}const Nye={some:0,all:1};let Uye=class extends bd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Nye[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return Fye(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Gye(e,t))&&this.startObserver()}unmount(){}};function Gye({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Vye={inView:{Feature:Uye},tap:{Feature:Dye},focus:{Feature:Cye},hover:{Feature:Mye}},Hye={layout:{ProjectionNode:r7,MeasureLayout:qj}},AL={current:null},a7={current:!1};function zye(){if(a7.current=!0,!!wB)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>AL.current=n.matches;n.addListener(e),e()}else AL.current=!1}const $ye=[...Mj,eo,hd],Wye=n=>$ye.find(bj(n)),jye=new WeakMap;function Kye(n,e,t){for(const i in e){const r=e[i],s=t[i];if(ao(r))n.addValue(i,r);else if(ao(s))n.addValue(i,t1(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,t1(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const t5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Xye=class{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=QB,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ru.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ui.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Nb(t),this.isVariantNode=GW(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&ao(g)&&g.set(l[p],!1)}}mount(e){this.current=e,jye.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),a7.current||zye(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:AL.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fd(this.notifyUpdate),fd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Um.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ui.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ev){const t=Ev[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<t5.length;i++){const r=t5[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Kye(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=t1(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Tj(r)||mj(r))?r=parseFloat(r):!Wye(r)&&hd.test(t)&&(r=Sj(e,t)),this.setBaseTarget(e,ao(r)?r.get():r)),ao(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=NB(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ao(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zB),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}},l7=class extends Xye{constructor(){super(...arguments),this.KeyframeResolver=Cj}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ao(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}};function Yye(n){return window.getComputedStyle(n)}let qye=class extends l7{constructor(){super(...arguments),this.type="html",this.renderInstance=JW}readValueFromInstance(e,t){if(Um.has(t)){const i=JB(t);return i&&i.default||0}else{const i=Yye(e),r=(PB(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Xj(e,t)}build(e,t,i){DB(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return UB(e,t,i)}},Jye=class extends l7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tr,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&qW(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Um.has(t)){const i=JB(t);return i&&i.default||0}return t=QW.has(t)?t:CB(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return ej(e,t,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Ui.postRender(this.updateDimensions)}build(e,t,i){OB(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){ZW(e,t,i,r)}mount(e){this.isSVGTag=FB(e.tagName),super.mount(e)}};const Qye=(n,e)=>kB(n)?new Jye(e):new qye(e,{allowProjection:n!==O.Fragment}),Zye=Age({...pve,...Vye,...Tye,...Hye},Qye),Ih=Ume(Zye);function af(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function c7(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ga={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},wv={duration:.5,overwrite:!1,delay:0},ik,Ns,qi,su=1e8,lo=1/su,TL=Math.PI*2,exe=TL/4,txe=0,u7=Math.sqrt,nxe=Math.cos,ixe=Math.sin,Ss=function(e){return typeof e=="string"},gr=function(e){return typeof e=="function"},Cf=function(e){return typeof e=="number"},rk=function(e){return typeof e>"u"},gu=function(e){return typeof e=="object"},ha=function(e){return e!==!1},sk=function(){return typeof window<"u"},bA=function(e){return gr(e)||Ss(e)},f7=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},uo=Array.isArray,wL=/(?:-?\.?\d|\.)+/gi,h7=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,V0=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,VR=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,d7=/[+-]=-?[.\d]+/,p7=/[^,'"\[\]\s]+/gi,rxe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nr,Hc,bL,ok,za={},aw={},m7,g7=function(e){return(aw=bv(e,za))&&ga},ak=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},r1=function(e,t){return!t&&console.warn(e)},v7=function(e,t){return e&&(za[e]=t)&&aw&&(aw[e]=t)||za},s1=function(){return 0},sxe={suppressEvents:!0,isStart:!0,kill:!1},gT={suppressEvents:!0,kill:!1},oxe={suppressEvents:!0},lk={},ed=[],ML={},y7,Ia={},HR={},n5=30,vT=[],ck="",uk=function(e){var t=e[0],i,r;if(gu(t)||gr(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=vT.length;r--&&!vT[r].targetTest(t););i=vT[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new H7(e[r],i)))||e.splice(r,1);return e},um=function(e){return e._gsap||uk(Al(e))[0]._gsap},x7=function(e,t,i){return(i=e[t])&&gr(i)?e[t]():rk(i)&&e.getAttribute&&e.getAttribute(t)||i},da=function(e,t){return(e=e.split(",")).forEach(t)||e},Mr=function(e){return Math.round(e*1e5)/1e5||0},zr=function(e){return Math.round(e*1e7)/1e7||0},rv=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},axe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},lw=function(){var e=ed.length,t=ed.slice(0),i,r;for(ML={},ed.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},_7=function(e,t,i,r){ed.length&&!Ns&&lw(),e.render(t,i,Ns&&t<0&&(e._initted||e._startAt)),ed.length&&!Ns&&lw()},S7=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(p7).length<2?t:Ss(e)?e.trim():e},E7=function(e){return e},$a=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},lxe=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},bv=function(e,t){for(var i in t)e[i]=t[i];return e},i5=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=gu(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},cw=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},i_=function(e){var t=e.parent||nr,i=e.keyframes?lxe(uo(e.keyframes)):$a;if(ha(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},cxe=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},A7=function(e,t,i,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Gb=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},dd=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},fm=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},uxe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},CL=function(e,t,i,r){return e._startAt&&(Ns?e._startAt.revert(gT):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},fxe=function n(e){return!e||e._ts&&n(e.parent)},r5=function(e){return e._repeat?Mv(e._tTime,e=e.duration()+e._rDelay)*e:0},Mv=function(e,t){var i=Math.floor(e=zr(e/t));return e&&i===e?i-1:i},uw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Vb=function(e){return e._end=zr(e._start+(e._tDur/Math.abs(e._ts||e._rts||lo)||0))},Hb=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=zr(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Vb(e),i._dirty||fm(i,e)),e},T7=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=uw(e.rawTime(),t),(!t._dur||tS(0,t.totalDuration(),i)-t._tTime>lo)&&t.render(i,!0)),fm(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},jc=function(e,t,i,r){return t.parent&&dd(t),t._start=zr((Cf(i)?i:i||e!==nr?ul(e,i,t):e._time)+t._delay),t._end=zr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),A7(e,t,"_first","_last",e._sort?"_start":0),RL(t)||(e._recent=t),r||T7(e,t),e._ts<0&&Hb(e,e._tTime),e},w7=function(e,t){return(za.ScrollTrigger||ak("scrollTrigger",t))&&za.ScrollTrigger.create(t,e)},b7=function(e,t,i,r,s){if(hk(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Ns&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&y7!==Ba.frame)return ed.push(e),e._lazy=[s,r],1},hxe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},RL=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},dxe=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&hxe(e)&&!(!e._initted&&RL(e))||(e._ts<0||e._dp._ts<0)&&!RL(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=tS(0,e._tDur,t),u=Mv(l,a),e._yoyo&&u&1&&(o=1-o),u!==Mv(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ns||r||e._zTime===lo||!t&&e._zTime){if(!e._initted&&b7(e,t,r,i,l))return;for(f=e._zTime,e._zTime=t||(i?lo:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&CL(e,t,i,!0),e._onUpdate&&!i&&Fa(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Fa(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&dd(e,1),!i&&!Ns&&(Fa(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},pxe=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Cv=function(e,t,i,r){var s=e._repeat,o=zr(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:zr(o*(s+1)+e._rDelay*s):o,a>0&&!r&&Hb(e,e._tTime=e._tDur*a),e.parent&&Vb(e),i||fm(e.parent,e),e},s5=function(e){return e instanceof Lo?fm(e):Cv(e,e._dur)},mxe={_start:0,endTime:s1,totalDuration:s1},ul=function n(e,t,i){var r=e.labels,s=e._recent||mxe,o=e.duration()>=su?s.endTime(!1):e._dur,a,l,c;return Ss(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(uo(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},r_=function(e,t,i){var r=Cf(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ha(l.vars.inherit)&&l.parent;o.immediateRender=ha(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Vr(t[0],o,t[s+1])},Md=function(e,t){return e||e===0?t(e):t},tS=function(e,t,i){return i<e?e:i>t?t:i},io=function(e,t){return!Ss(e)||!(t=rxe.exec(e))?"":t[1]},gxe=function(e,t,i){return Md(i,function(r){return tS(e,t,r)})},PL=[].slice,M7=function(e,t){return e&&gu(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&gu(e[0]))&&!e.nodeType&&e!==Hc},vxe=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Ss(r)&&!t||M7(r,1)?(s=i).push.apply(s,Al(r)):i.push(r)})||i},Al=function(e,t,i){return qi&&!t&&qi.selector?qi.selector(e):Ss(e)&&!i&&(bL||!Rv())?PL.call((t||ok).querySelectorAll(e),0):uo(e)?vxe(e,i):M7(e)?PL.call(e,0):e?[e]:[]},IL=function(e){return e=Al(e)[0]||r1("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Al(t,i.querySelectorAll?i:i===e?r1("Invalid scope")||ok.createElement("div"):e)}},C7=function(e){return e.sort(function(){return .5-Math.random()})},R7=function(e){if(gr(e))return e;var t=gu(e)?e:{each:e},i=hm(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,f=r;return Ss(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],f=r[1]),function(h,p,g){var v=(g||t).length,_=o[v],S,A,T,b,C,L,P,k,I;if(!_){if(I=t.grid==="auto"?0:(t.grid||[1,su])[1],!I){for(P=-1e8;P<(P=g[I++].getBoundingClientRect().left)&&I<v;);I<v&&I--}for(_=o[v]=[],S=l?Math.min(I,v)*u-.5:r%I,A=I===su?0:l?v*f/I-.5:r/I|0,P=0,k=su,L=0;L<v;L++)T=L%I-S,b=A-(L/I|0),_[L]=C=c?Math.abs(c==="y"?b:T):u7(T*T+b*b),C>P&&(P=C),C<k&&(k=C);r==="random"&&C7(_),_.max=P-k,_.min=k,_.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(I>v?v-1:c?c==="y"?v/I:I:Math.max(I,v/I))||0)*(r==="edges"?-1:1),_.b=v<0?s-v:s,_.u=io(t.amount||t.each)||0,i=i&&v<0?U7(i):i}return v=(_[h]-_.min)/_.max||0,zr(_.b+(i?i(v):v)*_.v)+_.u}},LL=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=zr(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Cf(i)?0:io(i))}},P7=function(e,t){var i=uo(e),r,s;return!i&&gu(e)&&(r=i=e.radius||su,e.values?(e=Al(e.values),(s=!Cf(e[0]))&&(r*=r)):e=LL(e.increment)),Md(t,i?gr(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=su,u=0,f=e.length,h,p;f--;)s?(h=e[f].x-a,p=e[f].y-l,h=h*h+p*p):h=Math.abs(e[f]-a),h<c&&(c=h,u=f);return u=!r||c<=r?e[u]:o,s||u===o||Cf(o)?u:u+io(o)}:LL(e))},I7=function(e,t,i,r){return Md(uo(e)?!t:i===!0?!!(i=0):!r,function(){return uo(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},yxe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},xxe=function(e,t){return function(i){return e(parseFloat(i))+(t||io(i))}},_xe=function(e,t,i){return D7(e,t,0,1,i)},L7=function(e,t,i){return Md(i,function(r){return e[~~t(r)]})},Sxe=function n(e,t,i){var r=t-e;return uo(e)?L7(e,n(0,e.length),t):Md(i,function(s){return(r+(s-e)%r)%r+e})},Exe=function n(e,t,i){var r=t-e,s=r*2;return uo(e)?L7(e,n(0,e.length-1),t):Md(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},o1=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?p7:wL),i+=e.substr(t,r-t)+I7(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},D7=function(e,t,i,r,s){var o=t-e,a=r-i;return Md(s,function(l){return i+((l-e)/o*a||0)})},Axe=function n(e,t,i,r){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var o=Ss(e),a={},l,c,u,f,h;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(uo(e)&&!uo(t)){for(u=[],f=e.length,h=f-2,c=1;c<f;c++)u.push(n(e[c-1],e[c]));f--,s=function(g){g*=f;var v=Math.min(h,~~g);return u[v](g-v)},i=t}else r||(e=bv(uo(e)?[]:{},e));if(!u){for(l in t)fk.call(a,e,l,"get",t[l]);s=function(g){return mk(g,a)||(o?e.p:e)}}}return Md(i,s)},o5=function(e,t,i){var r=e.labels,s=su,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Fa=function(e,t,i){var r=e.vars,s=r[t],o=qi,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&ed.length&&lw(),a&&(qi=a),u=l?s.apply(c,l):s.call(c),qi=o,u},Rx=function(e){return dd(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ns),e.progress()<1&&Fa(e,"onInterrupt"),e},H0,B7=[],k7=function(e){if(e)if(e=!e.name&&e.default||e,sk()||e.headless){var t=e.name,i=gr(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:s1,render:mk,add:fk,kill:Uxe,modifier:Nxe,rawVars:0},o={targetTest:0,get:0,getSetter:pk,aliases:{},register:0};if(Rv(),e!==r){if(Ia[t])return;$a(r,$a(cw(e,s),o)),bv(r.prototype,bv(s,cw(e,o))),Ia[r.prop=t]=r,e.targetTest&&(vT.push(r),lk[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}v7(t,r),e.register&&e.register(ga,r,pa)}else B7.push(e)},Ci=255,Px={aqua:[0,Ci,Ci],lime:[0,Ci,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ci],navy:[0,0,128],white:[Ci,Ci,Ci],olive:[128,128,0],yellow:[Ci,Ci,0],orange:[Ci,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ci,0,0],pink:[Ci,192,203],cyan:[0,Ci,Ci],transparent:[Ci,Ci,Ci,0]},zR=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Ci+.5|0},O7=function(e,t,i){var r=e?Cf(e)?[e>>16,e>>8&Ci,e&Ci]:0:Px.black,s,o,a,l,c,u,f,h,p,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Px[e])r=Px[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Ci,r&Ci,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Ci,e&Ci]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(wL),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=zR(l+1/3,s,o),r[1]=zR(l,s,o),r[2]=zR(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(h7),i&&r.length<4&&(r[3]=1),r}else r=e.match(wL)||Px.transparent;r=r.map(Number)}return t&&!g&&(s=r[0]/Ci,o=r[1]/Ci,a=r[2]/Ci,f=Math.max(s,o,a),h=Math.min(s,o,a),u=(f+h)/2,f===h?l=c=0:(p=f-h,c=u>.5?p/(2-f-h):p/(f+h),l=f===s?(o-a)/p+(o<a?6:0):f===o?(a-s)/p+2:(s-o)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},F7=function(e){var t=[],i=[],r=-1;return e.split(td).forEach(function(s){var o=s.match(V0)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},a5=function(e,t,i){var r="",s=(e+r).match(td),o=t?"hsla(":"rgba(",a=0,l,c,u,f;if(!s)return e;if(s=s.map(function(h){return(h=O7(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=F7(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(td,"1").split(V0),f=c.length-1;a<f;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(td),f=c.length-1;a<f;a++)r+=c[a]+s[a];return r+c[f]},td=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Px)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Txe=/hsl[a]?\(/,N7=function(e){var t=e.join(" "),i;if(td.lastIndex=0,td.test(t))return i=Txe.test(t),e[1]=a5(e[1],i),e[0]=a5(e[0],i,F7(e[1])),!0},a1,Ba=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,u,f,h,p,g=function v(_){var S=n()-r,A=_===!0,T,b,C,L;if((S>e||S<0)&&(i+=S-t),r+=S,C=r-i,T=C-o,(T>0||A)&&(L=++f.frame,h=C-f.time*1e3,f.time=C=C/1e3,o+=T+(T>=s?4:s-T),b=1),A||(l=c(v)),b)for(p=0;p<a.length;p++)a[p](C,h,L,_)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(_){return h/(1e3/(_||60))},wake:function(){m7&&(!bL&&sk()&&(Hc=bL=window,ok=Hc.document||{},za.gsap=ga,(Hc.gsapVersions||(Hc.gsapVersions=[])).push(ga.version),g7(aw||Hc.GreenSockGlobals||!Hc.gsap&&Hc||{}),B7.forEach(k7)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(_){return setTimeout(_,o-f.time*1e3+1|0)},a1=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),a1=0,c=s1},lagSmoothing:function(_,S){e=_||1/0,t=Math.min(S||33,e)},fps:function(_){s=1e3/(_||240),o=f.time*1e3+s},add:function(_,S,A){var T=S?function(b,C,L,P){_(b,C,L,P),f.remove(T)}:_;return f.remove(_),a[A?"unshift":"push"](T),Rv(),T},remove:function(_,S){~(S=a.indexOf(_))&&a.splice(S,1)&&p>=S&&p--},_listeners:a},f}(),Rv=function(){return!a1&&Ba.wake()},ti={},wxe=/^[\d.\-M][\d.\-,\s]/,bxe=/["']/g,Mxe=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(bxe,"").trim():+c,r=l.substr(a+1).trim();return t},Cxe=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},Rxe=function(e){var t=(e+"").split("("),i=ti[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Mxe(t[1])]:Cxe(e).split(",").map(S7)):ti._CE&&wxe.test(e)?ti._CE("",e):i},U7=function(e){return function(t){return 1-e(1-t)}},G7=function n(e,t){for(var i=e._first,r;i;)i instanceof Lo?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},hm=function(e,t){return e&&(gr(e)?e:ti[e]||Rxe(e))||t},Gm=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return da(e,function(a){ti[a]=za[a]=s,ti[o=a.toLowerCase()]=i;for(var l in s)ti[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=ti[a+"."+l]=s[l]}),s},V7=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},$R=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/TL*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*ixe((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:V7(a);return s=TL/s,l.config=function(c,u){return n(e,c,u)},l},WR=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:V7(i);return r.config=function(s){return n(e,s)},r};da("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Gm(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});ti.Linear.easeNone=ti.none=ti.Linear.easeIn;Gm("Elastic",$R("in"),$R("out"),$R());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Gm("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Gm("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});Gm("Circ",function(n){return-(u7(1-n*n)-1)});Gm("Sine",function(n){return n===1?1:-nxe(n*exe)+1});Gm("Back",WR("in"),WR("out"),WR());ti.SteppedEase=ti.steps=za.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-lo;return function(a){return((r*tS(0,o,a)|0)+s)*i}}};wv.ease=ti["quad.out"];da("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return ck+=n+","+n+"Params,"});var H7=function(e,t){this.id=txe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:x7,this.set=t?t.getSetter:pk},l1=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Cv(this,+t.duration,1,1),this.data=t.data,qi&&(this._ctx=qi,qi.data.push(this)),a1||Ba.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Cv(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Rv(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Hb(this,i),!s._dp||s.parent||T7(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&jc(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===lo||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),_7(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+r5(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+r5(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Mv(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?uw(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(tS(-Math.abs(this._delay),this._tDur,s),r!==!1),Vb(this),uxe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rv(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==lo&&(this._tTime-=lo)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&jc(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(ha(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?uw(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=oxe);var r=Ns;return Ns=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ns=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,s5(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,s5(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(ul(this,i),ha(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,ha(r)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-lo)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=gr(i)?i:E7,a=function(){var c=r.then;r.then=null,gr(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Rx(this)},n}();$a(l1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Lo=function(n){c7(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=ha(i.sortChildren),nr&&jc(i.parent||nr,af(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&w7(af(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return r_(0,arguments,this),this},t.from=function(r,s,o){return r_(1,arguments,this),this},t.fromTo=function(r,s,o,a){return r_(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,i_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Vr(r,s,ul(this,o),1),this},t.call=function(r,s,o){return jc(this,Vr.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Vr(r,o,ul(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,i_(o).immediateRender=ha(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,f){return a.startAt=o,i_(a).immediateRender=ha(a.immediateRender),this.staggerTo(r,s,a,l,c,u,f)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:zr(r),f=this._zTime<0!=r<0&&(this._initted||!c),h,p,g,v,_,S,A,T,b,C,L,P;if(this!==nr&&u>l&&r>=0&&(u=l),u!==this._tTime||o||f){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,b=this._start,T=this._ts,S=!T,f&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(L=this._yoyo,_=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(_*100+r,s,o);if(h=zr(u%_),u===l?(v=this._repeat,h=c):(C=zr(u/_),v=~~C,v&&v===C&&(h=c,v--),h>c&&(h=c)),C=Mv(this._tTime,_),!a&&this._tTime&&C!==v&&this._tTime-C*_-this._dur<=0&&(C=v),L&&v&1&&(h=c-h,P=1),v!==C&&!this._lock){var k=L&&C&1,I=k===(L&&v&1);if(v<C&&(k=!k),a=k?0:u%c?c:u,this._lock=1,this.render(a||(P?0:zr(v*_)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Fa(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,I&&(this._lock=2,a=k?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;G7(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=pxe(this,zr(a),zr(h)),A&&(u-=h-(h=A._start))),this._tTime=u,this._time=h,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&!v&&(Fa(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(p=this._first;p;){if(g=p._next,(p._act||h>=p._start)&&p._ts&&A!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(h-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(h-p._start)*p._ts,s,o),h!==this._time||!this._ts&&!S){A=0,g&&(u+=this._zTime=-1e-8);break}}p=g}else{p=this._last;for(var D=r<0?r:h;p;){if(g=p._prev,(p._act||D<=p._end)&&p._ts&&A!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(D-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(D-p._start)*p._ts,s,o||Ns&&(p._initted||p._startAt)),h!==this._time||!this._ts&&!S){A=0,g&&(u+=this._zTime=D?-1e-8:lo);break}}p=g}}if(A&&!s&&(this.pause(),A.render(h>=a?0:-1e-8)._zTime=h>=a?1:-1,this._ts))return this._start=b,Vb(this),this.render(r,s,o);this._onUpdate&&!s&&Fa(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&dd(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(Fa(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Cf(s)||(s=ul(this,s,r)),!(r instanceof l1)){if(uo(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ss(r))return this.addLabel(r,s);if(gr(r))r=Vr.delayedCall(0,r);else return this}return this!==r?jc(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Vr?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Ss(r)?this.removeLabel(r):gr(r)?this.killTweensOf(r):(r.parent===this&&Gb(this,r),r===this._recent&&(this._recent=this._last),fm(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=zr(Ba.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=ul(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Vr.delayedCall(0,s||s1,o);return a.data="isPause",this._hasPause=1,jc(this,a,ul(this,r))},t.removePause=function(r){var s=this._first;for(r=ul(this,r);s;)s._start===r&&s.data==="isPause"&&dd(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)zh!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Al(r),l=this._first,c=Cf(s),u;l;)l instanceof Vr?axe(l._targets,a)&&(c?(!zh||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=ul(o,r),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,h=l.immediateRender,p,g=Vr.to(o,$a({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||lo,onStart:function(){if(o.pause(),!p){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==_&&Cv(g,_,0,1).render(g._time,!0,!0),p=1}u&&u.apply(g,f||[])}},s));return h?g.render(0):g},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,$a({startAt:{time:ul(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),o5(this,ul(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),o5(this,ul(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+lo)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return fm(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),fm(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=su,c,u,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,jc(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Cv(o,o===nr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(nr._ts&&(_7(nr,uw(r,nr)),y7=Ba.frame),Ba.frame>=n5){n5+=Ga.autoSleep||120;var s=nr._first;if((!s||!s._ts)&&Ga.autoSleep&&Ba._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ba.sleep()}}},e}(l1);$a(Lo.prototype,{_lock:0,_hasPause:0,_forcing:0});var Pxe=function(e,t,i,r,s,o,a){var l=new pa(this._pt,e,t,0,1,X7,null,s),c=0,u=0,f,h,p,g,v,_,S,A;for(l.b=i,l.e=r,i+="",r+="",(S=~r.indexOf("random("))&&(r=o1(r)),o&&(A=[i,r],o(A,e,t),i=A[0],r=A[1]),h=i.match(VR)||[];f=VR.exec(r);)g=f[0],v=r.substring(c,f.index),p?p=(p+1)%5:v.substr(-5)==="rgba("&&(p=1),g!==h[u++]&&(_=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:v||u===1?v:",",s:_,c:g.charAt(1)==="="?rv(_,g)-_:parseFloat(g)-_,m:p&&p<4?Math.round:0},c=VR.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(d7.test(r)||S)&&(l.e=0),this._pt=l,l},fk=function(e,t,i,r,s,o,a,l,c,u){gr(r)&&(r=r(s||0,e,o));var f=e[t],h=i!=="get"?i:gr(f)?c?e[t.indexOf("set")||!gr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,p=gr(f)?c?kxe:j7:dk,g;if(Ss(r)&&(~r.indexOf("random(")&&(r=o1(r)),r.charAt(1)==="="&&(g=rv(h,r)+(io(h)||0),(g||g===0)&&(r=g))),!u||h!==r||DL)return!isNaN(h*r)&&r!==""?(g=new pa(this._pt,e,t,+h||0,r-(h||0),typeof f=="boolean"?Fxe:K7,0,p),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!f&&!(t in e)&&ak(t,r),Pxe.call(this,e,t,h,r,p,l||Ga.stringFilter,c))},Ixe=function(e,t,i,r,s){if(gr(e)&&(e=s_(e,s,t,i,r)),!gu(e)||e.style&&e.nodeType||uo(e)||f7(e))return Ss(e)?s_(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=s_(e[a],s,t,i,r);return o},z7=function(e,t,i,r,s,o){var a,l,c,u;if(Ia[e]&&(a=new Ia[e]).init(s,a.rawVars?t[e]:Ixe(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new pa(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==H0))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},zh,DL,hk=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,f=r.yoyoEase,h=r.keyframes,p=r.autoRevert,g=e._dur,v=e._startAt,_=e._targets,S=e.parent,A=S&&S.data==="nested"?S.vars.targets:_,T=e._overwrite==="auto"&&!ik,b=e.timeline,C,L,P,k,I,D,G,H,q,W,te,ee,ne;if(b&&(!h||!s)&&(s="none"),e._ease=hm(s,wv.ease),e._yEase=f?U7(hm(f===!0?s:f,wv.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!b&&!!r.runBackwards,!b||h&&!r.stagger){if(H=_[0]?um(_[0]).harness:0,ee=H&&r[H.prop],C=cw(r,lk),v&&(v._zTime<0&&v.progress(1),t<0&&u&&a&&!p?v.render(-1,!0):v.revert(u&&g?gT:sxe),v._lazy=0),o){if(dd(e._startAt=Vr.set(_,$a({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!v&&ha(l),startAt:null,delay:0,onUpdate:c&&function(){return Fa(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ns||!a&&!p)&&e._startAt.revert(gT),a&&g&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&g&&!v){if(t&&(a=!1),P=$a({overwrite:!1,data:"isFromStart",lazy:a&&!v&&ha(l),immediateRender:a,stagger:0,parent:S},C),ee&&(P[H.prop]=ee),dd(e._startAt=Vr.set(_,P)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ns?e._startAt.revert(gT):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,lo,lo);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&ha(l)||l&&!g,L=0;L<_.length;L++){if(I=_[L],G=I._gsap||uk(_)[L]._gsap,e._ptLookup[L]=W={},ML[G.id]&&ed.length&&lw(),te=A===_?L:A.indexOf(I),H&&(q=new H).init(I,ee||C,e,te,A)!==!1&&(e._pt=k=new pa(e._pt,I,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(Y){W[Y]=k}),q.priority&&(D=1)),!H||ee)for(P in C)Ia[P]&&(q=z7(P,C,e,te,I,A))?q.priority&&(D=1):W[P]=k=fk.call(e,I,P,"get",C[P],te,A,0,r.stringFilter);e._op&&e._op[L]&&e.kill(I,e._op[L]),T&&e._pt&&(zh=e,nr.killTweensOf(I,W,e.globalTime(t)),ne=!e.parent,zh=0),e._pt&&l&&(ML[G.id]=1)}D&&Y7(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!ne,h&&t<=0&&b.render(su,!0,!0)},Lxe=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,h,p;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,p=e._targets.length;p--;){if(u=h[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return DL=1,e.vars[t]="+=0",hk(e,a),DL=0,l?r1(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)f=c[p],u=f._pt||f,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,f.e&&(f.e=Mr(i)+io(f.e)),f.b&&(f.b=u.s+io(f.b))},Dxe=function(e,t){var i=e[0]?um(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=bv({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Bxe=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(uo(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},s_=function(e,t,i,r,s){return gr(e)?e.call(t,i,r,s):Ss(e)&&~e.indexOf("random(")?o1(e):e},$7=ck+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",W7={};da($7+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return W7[n]=1});var Vr=function(n){c7(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:i_(r))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,h=l.stagger,p=l.overwrite,g=l.keyframes,v=l.defaults,_=l.scrollTrigger,S=l.yoyoEase,A=r.parent||nr,T=(uo(i)||f7(i)?Cf(i[0]):"length"in r)?[i]:Al(i),b,C,L,P,k,I,D,G;if(a._targets=T.length?uk(T):r1("GSAP target "+i+" not found. https://gsap.com",!Ga.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,g||h||bA(c)||bA(u)){if(r=a.vars,b=a.timeline=new Lo({data:"nested",defaults:v||{},targets:A&&A.data==="nested"?A.vars.targets:T}),b.kill(),b.parent=b._dp=af(a),b._start=0,h||bA(c)||bA(u)){if(P=T.length,D=h&&R7(h),gu(h))for(k in h)~$7.indexOf(k)&&(G||(G={}),G[k]=h[k]);for(C=0;C<P;C++)L=cw(r,W7),L.stagger=0,S&&(L.yoyoEase=S),G&&bv(L,G),I=T[C],L.duration=+s_(c,af(a),C,I,T),L.delay=(+s_(u,af(a),C,I,T)||0)-a._delay,!h&&P===1&&L.delay&&(a._delay=u=L.delay,a._start+=u,L.delay=0),b.to(I,L,D?D(C,I,T):0),b._ease=ti.none;b.duration()?c=u=0:a.timeline=0}else if(g){i_($a(b.vars.defaults,{ease:"none"})),b._ease=hm(g.ease||r.ease||"none");var H=0,q,W,te;if(uo(g))g.forEach(function(ee){return b.to(T,ee,">")}),b.duration();else{L={};for(k in g)k==="ease"||k==="easeEach"||Bxe(k,g[k],L,g.easeEach);for(k in L)for(q=L[k].sort(function(ee,ne){return ee.t-ne.t}),H=0,C=0;C<q.length;C++)W=q[C],te={ease:W.e,duration:(W.t-(C?q[C-1].t:0))/100*c},te[k]=W.v,b.to(T,te,H),H+=te.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return p===!0&&!ik&&(zh=af(a),nr.killTweensOf(T),zh=0),jc(A,af(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!c&&!g&&a._start===zr(A._time)&&ha(f)&&fxe(af(a))&&A.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-u)||0)),_&&w7(af(a),_),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,f=r>l-lo&&!u?l:r<lo?0:r,h,p,g,v,_,S,A,T,b;if(!c)dxe(this,r,s,o);else if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(h=f,T=this.timeline,this._repeat){if(v=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(v*100+r,s,o);if(h=zr(f%v),f===l?(g=this._repeat,h=c):(_=zr(f/v),g=~~_,g&&g===_?(h=c,g--):h>c&&(h=c)),S=this._yoyo&&g&1,S&&(b=this._yEase,h=c-h),_=Mv(this._tTime,v),h===a&&!o&&this._initted&&g===_)return this._tTime=f,this;g!==_&&(T&&this._yEase&&G7(T,S),this.vars.repeatRefresh&&!S&&!this._lock&&h!==v&&this._initted&&(this._lock=o=1,this.render(zr(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(b7(this,u?r:h,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==_))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(b||this._ease)(h/c),this._from&&(this.ratio=A=1-A),h&&!a&&!s&&!g&&(Fa(this,"onStart"),this._tTime!==f))return this;for(p=this._pt;p;)p.r(A,p.d),p=p._next;T&&T.render(r<0?r:T._dur*T._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&CL(this,r,s,o),Fa(this,"onUpdate")),this._repeat&&g!==_&&this.vars.onRepeat&&!s&&this.parent&&Fa(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&CL(this,r,!0,!0),(r||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&dd(this,1),!s&&!(u&&!a)&&(f||a||S)&&(Fa(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){a1||Ba.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||hk(this,c),u=this._ease(c/this._dur),Lxe(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(Hb(this,0),this.parent||A7(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Rx(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ns),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,zh&&zh.vars.overwrite!==!0)._first||Rx(this),this.parent&&o!==this.timeline.totalDuration()&&Cv(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Al(r):a,c=this._ptLookup,u=this._pt,f,h,p,g,v,_,S;if((!s||s==="all")&&cxe(a,l))return s==="all"&&(this._pt=0),Rx(this);for(f=this._op=this._op||[],s!=="all"&&(Ss(s)&&(v={},da(s,function(A){return v[A]=1}),s=v),s=Dxe(a,s)),S=a.length;S--;)if(~l.indexOf(a[S])){h=c[S],s==="all"?(f[S]=s,g=h,p={}):(p=f[S]=f[S]||{},g=s);for(v in g)_=h&&h[v],_&&((!("kill"in _.d)||_.d.kill(v)===!0)&&Gb(this,_,"_pt"),delete h[v]),p!=="all"&&(p[v]=1)}return this._initted&&!this._pt&&u&&Rx(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return r_(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return r_(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return nr.killTweensOf(r,s,o)},e}(l1);$a(Vr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});da("staggerTo,staggerFrom,staggerFromTo",function(n){Vr[n]=function(){var e=new Lo,t=PL.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var dk=function(e,t,i){return e[t]=i},j7=function(e,t,i){return e[t](i)},kxe=function(e,t,i,r){return e[t](r.fp,i)},Oxe=function(e,t,i){return e.setAttribute(t,i)},pk=function(e,t){return gr(e[t])?j7:rk(e[t])&&e.setAttribute?Oxe:dk},K7=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Fxe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},X7=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},mk=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Nxe=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},Uxe=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Gb(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Gxe=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},Y7=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},pa=function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||K7,this.d=l||this,this.set=c||dk,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Gxe,this.m=i,this.mt=s,this.tween=r},n}();da(ck+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return lk[n]=1});za.TweenMax=za.TweenLite=Vr;za.TimelineLite=za.TimelineMax=Lo;nr=new Lo({sortChildren:!1,defaults:wv,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ga.stringFilter=N7;var dm=[],yT={},Vxe=[],l5=0,Hxe=0,jR=function(e){return(yT[e]||Vxe).map(function(t){return t()})},BL=function(){var e=Date.now(),t=[];e-l5>2&&(jR("matchMediaInit"),dm.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=Hc.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),jR("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),l5=e,jR("matchMedia"))},q7=function(){function n(t,i){this.selector=i&&IL(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Hxe++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){gr(i)&&(s=r,r=i,i=gr);var o=this,a=function(){var c=qi,u=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=IL(s)),qi=o,f=r.apply(o,arguments),gr(f)&&o._r.push(f),qi=c,o.selector=u,o.isReverted=!1,f};return o.last=a,i===gr?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=qi;qi=null,i(this),qi=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Vr&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof Lo?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Vr)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=dm.length;o--;)dm[o].id===this.id&&dm.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),zxe=function(){function n(t){this.contexts=[],this.scope=t,qi&&qi.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){gu(i)||(i={matches:i});var o=new q7(0,s||this.scope),a=o.conditions={},l,c,u;qi&&!o.selector&&(o.selector=qi.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?u=1:(l=Hc.matchMedia(i[c]),l&&(dm.indexOf(o)<0&&dm.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(BL):l.addEventListener("change",BL)));return u&&r(o,function(f){return o.add(null,f)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),fw={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return k7(r)})},timeline:function(e){return new Lo(e)},getTweensOf:function(e,t){return nr.getTweensOf(e,t)},getProperty:function(e,t,i,r){Ss(e)&&(e=Al(e)[0]);var s=um(e||{}).get,o=i?E7:S7;return i==="native"&&(i=""),e&&(t?o((Ia[t]&&Ia[t].get||s)(e,t,i,r)):function(a,l,c){return o((Ia[a]&&Ia[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Al(e),e.length>1){var r=e.map(function(u){return ga.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}e=e[0]||{};var o=Ia[t],a=um(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var f=new o;H0._pt=0,f.init(e,i?u+i:u,H0,0,[e]),f.render(1,f),H0._pt&&mk(1,H0)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=ga.to(e,$a((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return nr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=hm(e.ease,wv.ease)),i5(wv,e||{})},config:function(e){return i5(Ga,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Ia[a]&&!za[a]&&r1(t+" effect requires "+a+" plugin.")}),HR[t]=function(a,l,c){return i(Al(a),$a(l||{},s),c)},o&&(Lo.prototype[t]=function(a,l,c){return this.add(HR[t](a,gu(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){ti[e]=hm(t)},parseEase:function(e,t){return arguments.length?hm(e,t):ti},getById:function(e){return nr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Lo(e),r,s;for(i.smoothChildTiming=ha(e.smoothChildTiming),nr.remove(i),i._dp=0,i._time=i._tTime=nr._time,r=nr._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Vr&&r.vars.onComplete===r._targets[0]))&&jc(i,r,r._start-r._delay),r=s;return jc(nr,i,0),i},context:function(e,t){return e?new q7(e,t):qi},matchMedia:function(e){return new zxe(e)},matchMediaRefresh:function(){return dm.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||BL()},addEventListener:function(e,t){var i=yT[e]||(yT[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=yT[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:Sxe,wrapYoyo:Exe,distribute:R7,random:I7,snap:P7,normalize:_xe,getUnit:io,clamp:gxe,splitColor:O7,toArray:Al,selector:IL,mapRange:D7,pipe:yxe,unitize:xxe,interpolate:Axe,shuffle:C7},install:g7,effects:HR,ticker:Ba,updateRoot:Lo.updateRoot,plugins:Ia,globalTimeline:nr,core:{PropTween:pa,globals:v7,Tween:Vr,Timeline:Lo,Animation:l1,getCache:um,_removeLinkedListItem:Gb,reverting:function(){return Ns},context:function(e){return e&&qi&&(qi.data.push(e),e._ctx=qi),qi},suppressOverwrites:function(e){return ik=e}}};da("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return fw[n]=Vr[n]});Ba.add(Lo.updateRoot);H0=fw.to({},{duration:0});var $xe=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Wxe=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=$xe(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},KR=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Ss(s)&&(l={},da(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Wxe(a,s)}}}},ga=fw.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Ns?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},KR("roundProps",LL),KR("modifiers"),KR("snap",P7))||fw;Vr.version=Lo.version=ga.version="3.12.7";m7=1;sk()&&Rv();ti.Power0;ti.Power1;ti.Power2;ti.Power3;ti.Power4;ti.Linear;ti.Quad;ti.Cubic;ti.Quart;ti.Quint;ti.Strong;ti.Elastic;ti.Back;ti.SteppedEase;ti.Bounce;ti.Sine;ti.Expo;ti.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var c5,$h,sv,gk,Qp,u5,vk,jxe=function(){return typeof window<"u"},Rf={},kp=180/Math.PI,ov=Math.PI/180,S0=Math.atan2,f5=1e8,yk=/([A-Z])/g,Kxe=/(left|right|width|margin|padding|x)/i,Xxe=/[\s,\(]\S/,qc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},kL=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Yxe=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},qxe=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Jxe=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},J7=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Q7=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Qxe=function(e,t,i){return e.style[t]=i},Zxe=function(e,t,i){return e.style.setProperty(t,i)},e_e=function(e,t,i){return e._gsap[t]=i},t_e=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},n_e=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},i_e=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},sr="transform",ma=sr+"Origin",r_e=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Rf&&s){if(this.tfm=this.tfm||{},e!=="transform")e=qc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=lf(r,a)}):this.tfm[e]=o.x?o[e]:lf(r,e),e===ma&&(this.tfm.zOrigin=o.zOrigin);else return qc.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(sr)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ma,t,"")),e=sr}(s||t)&&this.props.push(e,t,s[e])},Z7=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},s_e=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(yk,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=vk(),(!s||!s.isStart)&&!i[sr]&&(Z7(i),r.zOrigin&&i[ma]&&(i[ma]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},eK=function(e,t){var i={target:e,props:[],revert:s_e,save:r_e};return e._gsap||ga.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},tK,OL=function(e,t){var i=$h.createElementNS?$h.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$h.createElement(e);return i&&i.style?i:$h.createElement(e)},ou=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(yk,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Pv(t)||t,1)||""},h5="O,Moz,ms,Ms,Webkit".split(","),Pv=function(e,t,i){var r=t||Qp,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(h5[o]+e in s););return o<0?null:(o===3?"ms":o>=0?h5[o]:"")+e},FL=function(){jxe()&&window.document&&(c5=window,$h=c5.document,sv=$h.documentElement,Qp=OL("div")||{style:{}},OL("div"),sr=Pv(sr),ma=sr+"Origin",Qp.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",tK=!!Pv("perspective"),vk=ga.core.reverting,gk=1)},d5=function(e){var t=e.ownerSVGElement,i=OL("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),sv.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),sv.removeChild(i),s},p5=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},nK=function(e){var t,i;try{t=e.getBBox()}catch{t=d5(e),i=1}return t&&(t.width||t.height)||i||(t=d5(e)),t&&!t.width&&!t.x&&!t.y?{x:+p5(e,["x","cx","x1"])||0,y:+p5(e,["y","cy","y1"])||0,width:0,height:0}:t},iK=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&nK(e))},Pm=function(e,t){if(t){var i=e.style,r;t in Rf&&t!==ma&&(t=sr),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(yk,"-$1").toLowerCase())):i.removeAttribute(t)}},Wh=function(e,t,i,r,s,o){var a=new pa(e._pt,t,i,0,1,o?Q7:J7);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},m5={deg:1,rad:1,turn:1},o_e={grid:1,flex:1},pd=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Qp.style,l=Kxe.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,h=r==="px",p=r==="%",g,v,_,S;if(r===o||!s||m5[r]||m5[o])return s;if(o!=="px"&&!h&&(s=n(e,t,i,"px")),S=e.getCTM&&iK(e),(p||o==="%")&&(Rf[t]||~t.indexOf("adius")))return g=S?e.getBBox()[l?"width":"height"]:e[u],Mr(p?s/g*f:s/100*g);if(a[l?"width":"height"]=f+(h?o:r),v=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,S&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===$h||!v.appendChild)&&(v=$h.body),_=v._gsap,_&&p&&_.width&&l&&_.time===Ba.time&&!_.uncache)return Mr(s/_.width*f);if(p&&(t==="height"||t==="width")){var A=e.style[t];e.style[t]=f+r,g=e[u],A?e.style[t]=A:Pm(e,t)}else(p||o==="%")&&!o_e[ou(v,"display")]&&(a.position=ou(e,"position")),v===e&&(a.position="static"),v.appendChild(Qp),g=Qp[u],v.removeChild(Qp),a.position="absolute";return l&&p&&(_=um(v),_.time=Ba.time,_.width=v[u]),Mr(h?g*s/f:g&&s?f/g*s:0)},lf=function(e,t,i,r){var s;return gk||FL(),t in qc&&t!=="transform"&&(t=qc[t],~t.indexOf(",")&&(t=t.split(",")[0])),Rf[t]&&t!=="transform"?(s=u1(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:dw(ou(e,ma))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=hw[t]&&hw[t](e,t,i)||ou(e,t)||x7(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?pd(e,t,s,i)+i:s},a_e=function(e,t,i,r){if(!i||i==="none"){var s=Pv(t,e,1),o=s&&ou(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=ou(e,"borderTopColor"))}var a=new pa(this._pt,e.style,t,0,1,X7),l=0,c=0,u,f,h,p,g,v,_,S,A,T,b,C;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(v=e.style[t],e.style[t]=r,r=ou(e,t)||r,v?e.style[t]=v:Pm(e,t)),u=[i,r],N7(u),i=u[0],r=u[1],h=i.match(V0)||[],C=r.match(V0)||[],C.length){for(;f=V0.exec(r);)_=f[0],A=r.substring(l,f.index),g?g=(g+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(g=1),_!==(v=h[c++]||"")&&(p=parseFloat(v)||0,b=v.substr((p+"").length),_.charAt(1)==="="&&(_=rv(p,_)+b),S=parseFloat(_),T=_.substr((S+"").length),l=V0.lastIndex-T.length,T||(T=T||Ga.units[t]||b,l===r.length&&(r+=T,a.e+=T)),b!==T&&(p=pd(e,t,v,T)||0),a._pt={_next:a._pt,p:A||c===1?A:",",s:p,c:S-p,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?Q7:J7;return d7.test(r)&&(a.e=0),this._pt=a,a},g5={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},l_e=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=g5[i]||i,t[1]=g5[r]||r,t.join(" ")},c_e=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Rf[a]&&(l=1,a=a==="transformOrigin"?ma:sr),Pm(i,a);l&&(Pm(i,sr),o&&(o.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",u1(i,1),o.uncache=1,Z7(r)))}},hw={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new pa(e._pt,t,i,0,0,c_e);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},c1=[1,0,0,1,0,0],rK={},sK=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},v5=function(e){var t=ou(e,sr);return sK(t)?c1:t.substr(7).match(h7).map(Mr)},xk=function(e,t){var i=e._gsap||um(e),r=e.style,s=v5(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?c1:s):(s===c1&&!e.offsetParent&&e!==sv&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,sv.appendChild(e)),s=v5(e),l?r.display=l:Pm(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):sv.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},NL=function(e,t,i,r,s,o){var a=e._gsap,l=s||xk(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,h=a.yOffset||0,p=l[0],g=l[1],v=l[2],_=l[3],S=l[4],A=l[5],T=t.split(" "),b=parseFloat(T[0])||0,C=parseFloat(T[1])||0,L,P,k,I;i?l!==c1&&(P=p*_-g*v)&&(k=b*(_/P)+C*(-v/P)+(v*A-_*S)/P,I=b*(-g/P)+C*(p/P)-(p*A-g*S)/P,b=k,C=I):(L=nK(e),b=L.x+(~T[0].indexOf("%")?b/100*L.width:b),C=L.y+(~(T[1]||T[0]).indexOf("%")?C/100*L.height:C)),r||r!==!1&&a.smooth?(S=b-c,A=C-u,a.xOffset=f+(S*p+A*v)-S,a.yOffset=h+(S*g+A*_)-A):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=C,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[ma]="0px 0px",o&&(Wh(o,a,"xOrigin",c,b),Wh(o,a,"yOrigin",u,C),Wh(o,a,"xOffset",f,a.xOffset),Wh(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+C)},u1=function(e,t){var i=e._gsap||new H7(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=ou(e,ma)||"0",u,f,h,p,g,v,_,S,A,T,b,C,L,P,k,I,D,G,H,q,W,te,ee,ne,Y,Q,F,ie,he,pe,ye,Be;return u=f=h=v=_=S=A=T=b=0,p=g=1,i.svg=!!(e.getCTM&&iK(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[sr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[sr]!=="none"?l[sr]:"")),r.scale=r.rotate=r.translate="none"),P=xk(e,i.svg),i.svg&&(i.uncache?(Y=e.getBBox(),c=i.xOrigin-Y.x+"px "+(i.yOrigin-Y.y)+"px",ne=""):ne=!t&&e.getAttribute("data-svg-origin"),NL(e,ne||c,!!ne||i.originIsAbsolute,i.smooth!==!1,P)),C=i.xOrigin||0,L=i.yOrigin||0,P!==c1&&(G=P[0],H=P[1],q=P[2],W=P[3],u=te=P[4],f=ee=P[5],P.length===6?(p=Math.sqrt(G*G+H*H),g=Math.sqrt(W*W+q*q),v=G||H?S0(H,G)*kp:0,A=q||W?S0(q,W)*kp+v:0,A&&(g*=Math.abs(Math.cos(A*ov))),i.svg&&(u-=C-(C*G+L*q),f-=L-(C*H+L*W))):(Be=P[6],pe=P[7],F=P[8],ie=P[9],he=P[10],ye=P[11],u=P[12],f=P[13],h=P[14],k=S0(Be,he),_=k*kp,k&&(I=Math.cos(-k),D=Math.sin(-k),ne=te*I+F*D,Y=ee*I+ie*D,Q=Be*I+he*D,F=te*-D+F*I,ie=ee*-D+ie*I,he=Be*-D+he*I,ye=pe*-D+ye*I,te=ne,ee=Y,Be=Q),k=S0(-q,he),S=k*kp,k&&(I=Math.cos(-k),D=Math.sin(-k),ne=G*I-F*D,Y=H*I-ie*D,Q=q*I-he*D,ye=W*D+ye*I,G=ne,H=Y,q=Q),k=S0(H,G),v=k*kp,k&&(I=Math.cos(k),D=Math.sin(k),ne=G*I+H*D,Y=te*I+ee*D,H=H*I-G*D,ee=ee*I-te*D,G=ne,te=Y),_&&Math.abs(_)+Math.abs(v)>359.9&&(_=v=0,S=180-S),p=Mr(Math.sqrt(G*G+H*H+q*q)),g=Mr(Math.sqrt(ee*ee+Be*Be)),k=S0(te,ee),A=Math.abs(k)>2e-4?k*kp:0,b=ye?1/(ye<0?-ye:ye):0),i.svg&&(ne=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!sK(ou(e,sr)),ne&&e.setAttribute("transform",ne))),Math.abs(A)>90&&Math.abs(A)<270&&(s?(p*=-1,A+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,A+=A<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=Mr(p),i.scaleY=Mr(g),i.rotation=Mr(v)+a,i.rotationX=Mr(_)+a,i.rotationY=Mr(S)+a,i.skewX=A+a,i.skewY=T+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[ma]=dw(c)),i.xOffset=i.yOffset=0,i.force3D=Ga.force3D,i.renderTransform=i.svg?f_e:tK?oK:u_e,i.uncache=0,i},dw=function(e){return(e=e.split(" "))[0]+" "+e[1]},XR=function(e,t,i){var r=io(t);return Mr(parseFloat(t)+parseFloat(pd(e,"x",i+"px",r)))+r},u_e=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,oK(e,t)},Tp="0deg",gx="0px",wp=") ",oK=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,f=i.rotationX,h=i.skewX,p=i.skewY,g=i.scaleX,v=i.scaleY,_=i.transformPerspective,S=i.force3D,A=i.target,T=i.zOrigin,b="",C=S==="auto"&&e&&e!==1||S===!0;if(T&&(f!==Tp||u!==Tp)){var L=parseFloat(u)*ov,P=Math.sin(L),k=Math.cos(L),I;L=parseFloat(f)*ov,I=Math.cos(L),o=XR(A,o,P*I*-T),a=XR(A,a,-Math.sin(L)*-T),l=XR(A,l,k*I*-T+T)}_!==gx&&(b+="perspective("+_+wp),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(C||o!==gx||a!==gx||l!==gx)&&(b+=l!==gx||C?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+wp),c!==Tp&&(b+="rotate("+c+wp),u!==Tp&&(b+="rotateY("+u+wp),f!==Tp&&(b+="rotateX("+f+wp),(h!==Tp||p!==Tp)&&(b+="skew("+h+", "+p+wp),(g!==1||v!==1)&&(b+="scale("+g+", "+v+wp),A.style[sr]=b||"translate(0, 0)"},f_e=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,f=i.scaleX,h=i.scaleY,p=i.target,g=i.xOrigin,v=i.yOrigin,_=i.xOffset,S=i.yOffset,A=i.forceCSS,T=parseFloat(o),b=parseFloat(a),C,L,P,k,I;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=ov,c*=ov,C=Math.cos(l)*f,L=Math.sin(l)*f,P=Math.sin(l-c)*-h,k=Math.cos(l-c)*h,c&&(u*=ov,I=Math.tan(c-u),I=Math.sqrt(1+I*I),P*=I,k*=I,u&&(I=Math.tan(u),I=Math.sqrt(1+I*I),C*=I,L*=I)),C=Mr(C),L=Mr(L),P=Mr(P),k=Mr(k)):(C=f,k=h,L=P=0),(T&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(T=pd(p,"x",o,"px"),b=pd(p,"y",a,"px")),(g||v||_||S)&&(T=Mr(T+g-(g*C+v*P)+_),b=Mr(b+v-(g*L+v*k)+S)),(r||s)&&(I=p.getBBox(),T=Mr(T+r/100*I.width),b=Mr(b+s/100*I.height)),I="matrix("+C+","+L+","+P+","+k+","+T+","+b+")",p.setAttribute("transform",I),A&&(p.style[sr]=I)},h_e=function(e,t,i,r,s){var o=360,a=Ss(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?kp:1),c=l-r,u=r+c+"deg",f,h;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),f==="cw"&&c<0?c=(c+o*f5)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*f5)%o-~~(c/o)*o)),e._pt=h=new pa(e._pt,t,i,r,c,Yxe),h.e=u,h.u="deg",e._props.push(i),h},y5=function(e,t){for(var i in t)e[i]=t[i];return e},d_e=function(e,t,i){var r=y5({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,f,h,p,g;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[sr]=t,a=u1(i,1),Pm(i,sr),i.setAttribute("transform",c)):(c=getComputedStyle(i)[sr],o[sr]=t,a=u1(i,1),o[sr]=c);for(l in Rf)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(p=io(c),g=io(u),f=p!==g?pd(i,l,c,g):parseFloat(c),h=parseFloat(u),e._pt=new pa(e._pt,a,l,f,h-f,kL),e._pt.u=g||0,e._props.push(l));y5(a,r)};da("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});hw[e>1?"border"+n:n]=function(a,l,c,u,f){var h,p;if(arguments.length<4)return h=o.map(function(g){return lf(a,g,c)}),p=h.join(" "),p.split(h[0]).length===5?h[0]:p;h=(u+"").split(" "),p={},o.forEach(function(g,v){return p[g]=h[v]=h[v]||h[(v-1)/2|0]}),a.init(l,p,f)}});var aK={name:"css",register:FL,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,u,f,h,p,g,v,_,S,A,T,b,C,L,P,k;gk||FL(),this.styles=this.styles||eK(e),k=this.styles.props,this.tween=i;for(v in t)if(v!=="autoRound"&&(u=t[v],!(Ia[v]&&z7(v,t,i,r,e,s)))){if(p=typeof u,g=hw[v],p==="function"&&(u=u.call(i,r,e,s),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=o1(u)),g)g(this,e,v,u,i)&&(P=1);else if(v.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(v)+"").trim(),u+="",td.lastIndex=0,td.test(c)||(_=io(c),S=io(u)),S?_!==S&&(c=pd(e,v,c,S)+S):_&&(u+=_),this.add(a,"setProperty",c,u,r,s,0,0,v),o.push(v),k.push(v,0,a[v]);else if(p!=="undefined"){if(l&&v in l?(c=typeof l[v]=="function"?l[v].call(i,r,e,s):l[v],Ss(c)&&~c.indexOf("random(")&&(c=o1(c)),io(c+"")||c==="auto"||(c+=Ga.units[v]||io(lf(e,v))||""),(c+"").charAt(1)==="="&&(c=lf(e,v))):c=lf(e,v),h=parseFloat(c),A=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),A&&(u=u.substr(2)),f=parseFloat(u),v in qc&&(v==="autoAlpha"&&(h===1&&lf(e,"visibility")==="hidden"&&f&&(h=0),k.push("visibility",0,a.visibility),Wh(this,a,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),v!=="scale"&&v!=="transform"&&(v=qc[v],~v.indexOf(",")&&(v=v.split(",")[0]))),T=v in Rf,T){if(this.styles.save(v),b||(C=e._gsap,C.renderTransform&&!t.parseTransform||u1(e,t.parseTransform),L=t.smoothOrigin!==!1&&C.smooth,b=this._pt=new pa(this._pt,a,sr,0,1,C.renderTransform,C,0,-1),b.dep=1),v==="scale")this._pt=new pa(this._pt,C,"scaleY",C.scaleY,(A?rv(C.scaleY,A+f):f)-C.scaleY||0,kL),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){k.push(ma,0,a[ma]),u=l_e(u),C.svg?NL(e,u,0,L,0,this):(S=parseFloat(u.split(" ")[2])||0,S!==C.zOrigin&&Wh(this,C,"zOrigin",C.zOrigin,S),Wh(this,a,v,dw(c),dw(u)));continue}else if(v==="svgOrigin"){NL(e,u,1,L,0,this);continue}else if(v in rK){h_e(this,C,v,h,A?rv(h,A+u):u);continue}else if(v==="smoothOrigin"){Wh(this,C,"smooth",C.smooth,u);continue}else if(v==="force3D"){C[v]=u;continue}else if(v==="transform"){d_e(this,u,e);continue}}else v in a||(v=Pv(v)||v);if(T||(f||f===0)&&(h||h===0)&&!Xxe.test(u)&&v in a)_=(c+"").substr((h+"").length),f||(f=0),S=io(u)||(v in Ga.units?Ga.units[v]:_),_!==S&&(h=pd(e,v,c,S)),this._pt=new pa(this._pt,T?C:a,v,h,(A?rv(h,A+f):f)-h,!T&&(S==="px"||v==="zIndex")&&t.autoRound!==!1?Jxe:kL),this._pt.u=S||0,_!==S&&S!=="%"&&(this._pt.b=c,this._pt.r=qxe);else if(v in a)a_e.call(this,e,v,c,A?A+u:u);else if(v in e)this.add(e,v,c||e[v],A?A+u:u,r,s);else if(v!=="parseTransform"){ak(v,u);continue}T||(v in a?k.push(v,0,a[v]):typeof e[v]=="function"?k.push(v,2,e[v]()):k.push(v,1,c||e[v])),o.push(v)}}P&&Y7(this)},render:function(e,t){if(t.tween._time||!vk())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:lf,aliases:qc,getSetter:function(e,t,i){var r=qc[t];return r&&r.indexOf(",")<0&&(t=r),t in Rf&&t!==ma&&(e._gsap.x||lf(e,"x"))?i&&u5===i?t==="scale"?t_e:e_e:(u5=i||{})&&(t==="scale"?n_e:i_e):e.style&&!rk(e.style[t])?Qxe:~t.indexOf("-")?Zxe:pk(e,t)},core:{_removeProperty:Pm,_getMatrix:xk}};ga.utils.checkPrefix=Pv;ga.core.getStyleSaver=eK;(function(n,e,t,i){var r=da(n+","+e+","+t,function(s){Rf[s]=1});da(e,function(s){Ga.units[s]="deg",rK[s]=1}),qc[r[13]]=n+","+e,da(i,function(s){var o=s.split(":");qc[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");da("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Ga.units[n]="px"});ga.registerPlugin(aK);var _k=ga.registerPlugin(aK)||ga;_k.core.Tween;function p_e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function m_e(n,e,t){return e&&p_e(n.prototype,e),n}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Os,xT,ka,jh,Kh,av,lK,Op,o_,cK,pf,ic,uK,fK=function(){return Os||typeof window<"u"&&(Os=window.gsap)&&Os.registerPlugin&&Os},hK=1,z0=[],$n=[],au=[],a_=Date.now,UL=function(e,t){return t},g_e=function(){var e=o_.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,$n),r.push.apply(r,au),$n=i,au=r,UL=function(o,a){return t[o](a)}},nd=function(e,t){return~au.indexOf(e)&&au[au.indexOf(e)+1][t]},l_=function(e){return!!~cK.indexOf(e)},wo=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Ao=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},MA="scrollLeft",CA="scrollTop",GL=function(){return pf&&pf.isPressed||$n.cache++},pw=function(e,t){var i=function r(s){if(s||s===0){hK&&(ka.history.scrollRestoration="manual");var o=pf&&pf.isPressed;s=r.v=Math.round(s)||(pf&&pf.iOS?1:0),e(s),r.cacheID=$n.cache,o&&UL("ss",s)}else(t||$n.cache!==r.cacheID||UL("ref"))&&(r.cacheID=$n.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Do={s:MA,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:pw(function(n){return arguments.length?ka.scrollTo(n,es.sc()):ka.pageXOffset||jh[MA]||Kh[MA]||av[MA]||0})},es={s:CA,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Do,sc:pw(function(n){return arguments.length?ka.scrollTo(Do.sc(),n):ka.pageYOffset||jh[CA]||Kh[CA]||av[CA]||0})},oa=function(e,t){return(t&&t._ctx&&t._ctx.selector||Os.utils.toArray)(e)[0]||(typeof e=="string"&&Os.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},md=function(e,t){var i=t.s,r=t.sc;l_(e)&&(e=jh.scrollingElement||Kh);var s=$n.indexOf(e),o=r===es.sc?1:2;!~s&&(s=$n.push(e)-1),$n[s+o]||wo(e,"scroll",GL);var a=$n[s+o],l=a||($n[s+o]=pw(nd(e,i),!0)||(l_(e)?r:pw(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,a||(l.smooth=Os.getProperty(e,"scrollBehavior")==="smooth"),l},VL=function(e,t,i){var r=e,s=e,o=a_(),a=o,l=t||50,c=Math.max(500,l*3),u=function(g,v){var _=a_();v||_-o>l?(s=r,r=g,a=o,o=_):i?r+=g:r=s+(g-s)/(_-a)*(o-a)},f=function(){s=r=i?0:r,a=o=0},h=function(g){var v=a,_=s,S=a_();return(g||g===0)&&g!==r&&u(g),o===a||S-a>c?0:(r+(i?_:-_))/((i?S:o)-v)*1e3};return{update:u,reset:f,getVelocity:h}},vx=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},x5=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},dK=function(){o_=Os.core.globals().ScrollTrigger,o_&&o_.core&&g_e()},pK=function(e){return Os=e||fK(),!xT&&Os&&typeof document<"u"&&document.body&&(ka=window,jh=document,Kh=jh.documentElement,av=jh.body,cK=[ka,jh,Kh,av],Os.utils.clamp,uK=Os.core.context||function(){},Op="onpointerenter"in av?"pointer":"mouse",lK=Cr.isTouch=ka.matchMedia&&ka.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ka||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ic=Cr.eventTypes=("ontouchstart"in Kh?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Kh?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return hK=0},500),dK(),xT=1),xT};Do.op=es;$n.cache=0;var Cr=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){xT||pK(Os)||console.warn("Please gsap.registerPlugin(Observer)"),o_||dK();var r=i.tolerance,s=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,c=i.debounce,u=i.preventDefault,f=i.onStop,h=i.onStopDelay,p=i.ignore,g=i.wheelSpeed,v=i.event,_=i.onDragStart,S=i.onDragEnd,A=i.onDrag,T=i.onPress,b=i.onRelease,C=i.onRight,L=i.onLeft,P=i.onUp,k=i.onDown,I=i.onChangeX,D=i.onChangeY,G=i.onChange,H=i.onToggleX,q=i.onToggleY,W=i.onHover,te=i.onHoverEnd,ee=i.onMove,ne=i.ignoreCheck,Y=i.isNormalizer,Q=i.onGestureStart,F=i.onGestureEnd,ie=i.onWheel,he=i.onEnable,pe=i.onDisable,ye=i.onClick,Be=i.scrollSpeed,Me=i.capture,Le=i.allowClicks,je=i.lockAxis,lt=i.onLockAxis;this.target=a=oa(a)||Kh,this.vars=i,p&&(p=Os.utils.toArray(p)),r=r||1e-9,s=s||0,g=g||1,Be=Be||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(ka.getComputedStyle(av).lineHeight)||22);var bt,gt,ue,Ne,ke,Ze,We,_e=this,ft=0,dt=0,Rt=i.passive||!u&&i.passive!==!1,Dt=md(a,Do),gn=md(a,es),Z=Dt(),j=gn(),Ee=~o.indexOf("touch")&&!~o.indexOf("pointer")&&ic[0]==="pointerdown",Xe=l_(a),He=a.ownerDocument||jh,Je=[0,0,0],St=[0,0,0],nt=0,vt=function(){return nt=a_()},Pt=function(kt,Ut){return(_e.event=kt)&&p&&~p.indexOf(kt.target)||Ut&&Ee&&kt.pointerType!=="touch"||ne&&ne(kt,Ut)},cn=function(){_e._vx.reset(),_e._vy.reset(),gt.pause(),f&&f(_e)},Ke=function(){var kt=_e.deltaX=x5(Je),Ut=_e.deltaY=x5(St),at=Math.abs(kt)>=r,Jt=Math.abs(Ut)>=r;G&&(at||Jt)&&G(_e,kt,Ut,Je,St),at&&(C&&_e.deltaX>0&&C(_e),L&&_e.deltaX<0&&L(_e),I&&I(_e),H&&_e.deltaX<0!=ft<0&&H(_e),ft=_e.deltaX,Je[0]=Je[1]=Je[2]=0),Jt&&(k&&_e.deltaY>0&&k(_e),P&&_e.deltaY<0&&P(_e),D&&D(_e),q&&_e.deltaY<0!=dt<0&&q(_e),dt=_e.deltaY,St[0]=St[1]=St[2]=0),(Ne||ue)&&(ee&&ee(_e),ue&&(_&&ue===1&&_(_e),A&&A(_e),ue=0),Ne=!1),Ze&&!(Ze=!1)&&lt&&lt(_e),ke&&(ie(_e),ke=!1),bt=0},wn=function(kt,Ut,at){Je[at]+=kt,St[at]+=Ut,_e._vx.update(kt),_e._vy.update(Ut),c?bt||(bt=requestAnimationFrame(Ke)):Ke()},$t=function(kt,Ut){je&&!We&&(_e.axis=We=Math.abs(kt)>Math.abs(Ut)?"x":"y",Ze=!0),We!=="y"&&(Je[2]+=kt,_e._vx.update(kt,!0)),We!=="x"&&(St[2]+=Ut,_e._vy.update(Ut,!0)),c?bt||(bt=requestAnimationFrame(Ke)):Ke()},Mt=function(kt){if(!Pt(kt,1)){kt=vx(kt,u);var Ut=kt.clientX,at=kt.clientY,Jt=Ut-_e.x,Kt=at-_e.y,rn=_e.isDragging;_e.x=Ut,_e.y=at,(rn||(Jt||Kt)&&(Math.abs(_e.startX-Ut)>=s||Math.abs(_e.startY-at)>=s))&&(ue=rn?2:1,rn||(_e.isDragging=!0),$t(Jt,Kt))}},At=_e.onPress=function(Ft){Pt(Ft,1)||Ft&&Ft.button||(_e.axis=We=null,gt.pause(),_e.isPressed=!0,Ft=vx(Ft),ft=dt=0,_e.startX=_e.x=Ft.clientX,_e.startY=_e.y=Ft.clientY,_e._vx.reset(),_e._vy.reset(),wo(Y?a:He,ic[1],Mt,Rt,!0),_e.deltaX=_e.deltaY=0,T&&T(_e))},et=_e.onRelease=function(Ft){if(!Pt(Ft,1)){Ao(Y?a:He,ic[1],Mt,!0);var kt=!isNaN(_e.y-_e.startY),Ut=_e.isDragging,at=Ut&&(Math.abs(_e.x-_e.startX)>3||Math.abs(_e.y-_e.startY)>3),Jt=vx(Ft);!at&&kt&&(_e._vx.reset(),_e._vy.reset(),u&&Le&&Os.delayedCall(.08,function(){if(a_()-nt>300&&!Ft.defaultPrevented){if(Ft.target.click)Ft.target.click();else if(He.createEvent){var Kt=He.createEvent("MouseEvents");Kt.initMouseEvent("click",!0,!0,ka,1,Jt.screenX,Jt.screenY,Jt.clientX,Jt.clientY,!1,!1,!1,!1,0,null),Ft.target.dispatchEvent(Kt)}}})),_e.isDragging=_e.isGesturing=_e.isPressed=!1,f&&Ut&&!Y&&gt.restart(!0),ue&&Ke(),S&&Ut&&S(_e),b&&b(_e,at)}},qe=function(kt){return kt.touches&&kt.touches.length>1&&(_e.isGesturing=!0)&&Q(kt,_e.isDragging)},ve=function(){return(_e.isGesturing=!1)||F(_e)},yt=function(kt){if(!Pt(kt)){var Ut=Dt(),at=gn();wn((Ut-Z)*Be,(at-j)*Be,1),Z=Ut,j=at,f&&gt.restart(!0)}},rt=function(kt){if(!Pt(kt)){kt=vx(kt,u),ie&&(ke=!0);var Ut=(kt.deltaMode===1?l:kt.deltaMode===2?ka.innerHeight:1)*g;wn(kt.deltaX*Ut,kt.deltaY*Ut,0),f&&!Y&&gt.restart(!0)}},ze=function(kt){if(!Pt(kt)){var Ut=kt.clientX,at=kt.clientY,Jt=Ut-_e.x,Kt=at-_e.y;_e.x=Ut,_e.y=at,Ne=!0,f&&gt.restart(!0),(Jt||Kt)&&$t(Jt,Kt)}},ut=function(kt){_e.event=kt,W(_e)},qt=function(kt){_e.event=kt,te(_e)},En=function(kt){return Pt(kt)||vx(kt,u)&&ye(_e)};gt=_e._dc=Os.delayedCall(h||.25,cn).pause(),_e.deltaX=_e.deltaY=0,_e._vx=VL(0,50,!0),_e._vy=VL(0,50,!0),_e.scrollX=Dt,_e.scrollY=gn,_e.isDragging=_e.isGesturing=_e.isPressed=!1,uK(this),_e.enable=function(Ft){return _e.isEnabled||(wo(Xe?He:a,"scroll",GL),o.indexOf("scroll")>=0&&wo(Xe?He:a,"scroll",yt,Rt,Me),o.indexOf("wheel")>=0&&wo(a,"wheel",rt,Rt,Me),(o.indexOf("touch")>=0&&lK||o.indexOf("pointer")>=0)&&(wo(a,ic[0],At,Rt,Me),wo(He,ic[2],et),wo(He,ic[3],et),Le&&wo(a,"click",vt,!0,!0),ye&&wo(a,"click",En),Q&&wo(He,"gesturestart",qe),F&&wo(He,"gestureend",ve),W&&wo(a,Op+"enter",ut),te&&wo(a,Op+"leave",qt),ee&&wo(a,Op+"move",ze)),_e.isEnabled=!0,_e.isDragging=_e.isGesturing=_e.isPressed=Ne=ue=!1,_e._vx.reset(),_e._vy.reset(),Z=Dt(),j=gn(),Ft&&Ft.type&&At(Ft),he&&he(_e)),_e},_e.disable=function(){_e.isEnabled&&(z0.filter(function(Ft){return Ft!==_e&&l_(Ft.target)}).length||Ao(Xe?He:a,"scroll",GL),_e.isPressed&&(_e._vx.reset(),_e._vy.reset(),Ao(Y?a:He,ic[1],Mt,!0)),Ao(Xe?He:a,"scroll",yt,Me),Ao(a,"wheel",rt,Me),Ao(a,ic[0],At,Me),Ao(He,ic[2],et),Ao(He,ic[3],et),Ao(a,"click",vt,!0),Ao(a,"click",En),Ao(He,"gesturestart",qe),Ao(He,"gestureend",ve),Ao(a,Op+"enter",ut),Ao(a,Op+"leave",qt),Ao(a,Op+"move",ze),_e.isEnabled=_e.isPressed=_e.isDragging=!1,pe&&pe(_e))},_e.kill=_e.revert=function(){_e.disable();var Ft=z0.indexOf(_e);Ft>=0&&z0.splice(Ft,1),pf===_e&&(pf=0)},z0.push(_e),Y&&l_(a)&&(pf=_e),_e.enable(v)},m_e(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();Cr.version="3.12.7";Cr.create=function(n){return new Cr(n)};Cr.register=pK;Cr.getAll=function(){return z0.slice()};Cr.getById=function(n){return z0.filter(function(e){return e.vars.id===n})[0]};fK()&&Os.registerPlugin(Cr);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Yt,C0,zn,Oi,La,hi,Sk,mw,f1,c_,Ix,RA,Zs,zb,HL,Co,_5,S5,R0,mK,YR,gK,Mo,zL,vK,yK,Dh,$L,Ek,lv,Ak,gw,WL,qR,PA=1,no=Date.now,JR=no(),bl=0,Lx=0,E5=function(e,t,i){var r=Pa(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},A5=function(e,t){return t&&(!Pa(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},v_e=function n(){return Lx&&requestAnimationFrame(n)},T5=function(){return zb=1},w5=function(){return zb=0},zc=function(e){return e},Dx=function(e){return Math.round(e*1e5)/1e5||0},xK=function(){return typeof window<"u"},_K=function(){return Yt||xK()&&(Yt=window.gsap)&&Yt.registerPlugin&&Yt},Im=function(e){return!!~Sk.indexOf(e)},SK=function(e){return(e==="Height"?Ak:zn["inner"+e])||La["client"+e]||hi["client"+e]},EK=function(e){return nd(e,"getBoundingClientRect")||(Im(e)?function(){return TT.width=zn.innerWidth,TT.height=Ak,TT}:function(){return hf(e)})},y_e=function(e,t,i){var r=i.d,s=i.d2,o=i.a;return(o=nd(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?SK(s):e["client"+s])||0}},x_e=function(e,t){return!t||~au.indexOf(e)?EK(e):function(){return TT}},Jc=function(e,t){var i=t.s,r=t.d2,s=t.d,o=t.a;return Math.max(0,(i="scroll"+r)&&(o=nd(e,i))?o()-EK(e)()[s]:Im(e)?(La[i]||hi[i])-SK(r):e[i]-e["offset"+r])},IA=function(e,t){for(var i=0;i<R0.length;i+=3)(!t||~t.indexOf(R0[i+1]))&&e(R0[i],R0[i+1],R0[i+2])},Pa=function(e){return typeof e=="string"},ro=function(e){return typeof e=="function"},Bx=function(e){return typeof e=="number"},Fp=function(e){return typeof e=="object"},yx=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},QR=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},E0=Math.abs,AK="left",TK="top",Tk="right",wk="bottom",pm="width",mm="height",u_="Right",f_="Left",h_="Top",d_="Bottom",Gr="padding",vl="margin",Iv="Width",bk="Height",Jr="px",yl=function(e){return zn.getComputedStyle(e)},__e=function(e){var t=yl(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},b5=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},hf=function(e,t){var i=t&&yl(e)[HL]!=="matrix(1, 0, 0, 1, 0, 0)"&&Yt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},vw=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},wK=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},S_e=function(e){return function(t){return Yt.utils.snap(wK(e),t)}},Mk=function(e){var t=Yt.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,o){o===void 0&&(o=.001);var a;if(!s)return t(r);if(s>0){for(r-=o,a=0;a<i.length;a++)if(i[a]>=r)return i[a];return i[a-1]}else for(a=i.length,r+=o;a--;)if(i[a]<=r)return i[a];return i[0]}:function(r,s,o){o===void 0&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},E_e=function(e){return function(t,i){return Mk(wK(e))(t,i.direction)}},LA=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},ms=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},ps=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},DA=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},M5={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},BA={toggleActions:"play",anticipatePin:0},yw={top:0,left:0,center:.5,bottom:1,right:1},_T=function(e,t){if(Pa(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in yw?yw[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},kA=function(e,t,i,r,s,o,a,l){var c=s.startColor,u=s.endColor,f=s.fontSize,h=s.indent,p=s.fontWeight,g=Oi.createElement("div"),v=Im(i)||nd(i,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,S=v?hi:i,A=e.indexOf("start")!==-1,T=A?c:u,b="border-color:"+T+";font-size:"+f+";color:"+T+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((_||l)&&v?"fixed;":"absolute;"),(_||l||!v)&&(b+=(r===es?Tk:wk)+":"+(o+parseFloat(h))+"px;"),a&&(b+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=A,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=b,g.innerText=t||t===0?e+"-"+t:e,S.children[0]?S.insertBefore(g,S.children[0]):S.appendChild(g),g._offset=g["offset"+r.op.d2],ST(g,0,r,A),g},ST=function(e,t,i,r){var s={display:"block"},o=i[r?"os2":"p2"],a=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+o+Iv]=1,s["border"+a+Iv]=0,s[i.p]=t+"px",Yt.set(e,s)},Vn=[],jL={},h1,C5=function(){return no()-bl>34&&(h1||(h1=requestAnimationFrame(xf)))},A0=function(){(!Mo||!Mo.isPressed||Mo.startX>hi.clientWidth)&&($n.cache++,Mo?h1||(h1=requestAnimationFrame(xf)):xf(),bl||Dm("scrollStart"),bl=no())},ZR=function(){yK=zn.innerWidth,vK=zn.innerHeight},kx=function(e){$n.cache++,(e===!0||!Zs&&!gK&&!Oi.fullscreenElement&&!Oi.webkitFullscreenElement&&(!zL||yK!==zn.innerWidth||Math.abs(zn.innerHeight-vK)>zn.innerHeight*.25))&&mw.restart(!0)},Lm={},A_e=[],bK=function n(){return ps(jn,"scrollEnd",n)||Zp(!0)},Dm=function(e){return Lm[e]&&Lm[e].map(function(t){return t()})||A_e},Ra=[],MK=function(e){for(var t=0;t<Ra.length;t+=5)(!e||Ra[t+4]&&Ra[t+4].query===e)&&(Ra[t].style.cssText=Ra[t+1],Ra[t].getBBox&&Ra[t].setAttribute("transform",Ra[t+2]||""),Ra[t+3].uncache=1)},Ck=function(e,t){var i;for(Co=0;Co<Vn.length;Co++)i=Vn[Co],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));gw=!0,t&&MK(t),t||Dm("revert")},CK=function(e,t){$n.cache++,(t||!Ro)&&$n.forEach(function(i){return ro(i)&&i.cacheID++&&(i.rec=0)}),Pa(e)&&(zn.history.scrollRestoration=Ek=e)},Ro,gm=0,R5,T_e=function(){if(R5!==gm){var e=R5=gm;requestAnimationFrame(function(){return e===gm&&Zp(!0)})}},RK=function(){hi.appendChild(lv),Ak=!Mo&&lv.offsetHeight||zn.innerHeight,hi.removeChild(lv)},P5=function(e){return f1(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Zp=function(e,t){if(La=Oi.documentElement,hi=Oi.body,Sk=[zn,Oi,La,hi],bl&&!e&&!gw){ms(jn,"scrollEnd",bK);return}RK(),Ro=jn.isRefreshing=!0,$n.forEach(function(r){return ro(r)&&++r.cacheID&&(r.rec=r())});var i=Dm("refreshInit");mK&&jn.sort(),t||Ck(),$n.forEach(function(r){ro(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),Vn.slice(0).forEach(function(r){return r.refresh()}),gw=!1,Vn.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",o=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-o),r.refresh()}}),WL=1,P5(!0),Vn.forEach(function(r){var s=Jc(r.scroller,r._dir),o=r.vars.end==="max"||r._endClamp&&r.end>s,a=r._startClamp&&r.start>=s;(o||a)&&r.setPositions(a?s-1:r.start,o?Math.max(a?s:r.start+1,s):r.end,!0)}),P5(!1),WL=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),$n.forEach(function(r){ro(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),CK(Ek,1),mw.pause(),gm++,Ro=2,xf(2),Vn.forEach(function(r){return ro(r.vars.onRefresh)&&r.vars.onRefresh(r)}),Ro=jn.isRefreshing=!1,Dm("refresh")},KL=0,ET=1,p_,xf=function(e){if(e===2||!Ro&&!gw){jn.isUpdating=!0,p_&&p_.update(0);var t=Vn.length,i=no(),r=i-JR>=50,s=t&&Vn[0].scroll();if(ET=KL>s?-1:1,Ro||(KL=s),r&&(bl&&!zb&&i-bl>200&&(bl=0,Dm("scrollEnd")),Ix=JR,JR=i),ET<0){for(Co=t;Co-- >0;)Vn[Co]&&Vn[Co].update(0,r);ET=1}else for(Co=0;Co<t;Co++)Vn[Co]&&Vn[Co].update(0,r);jn.isUpdating=!1}h1=0},XL=[AK,TK,wk,Tk,vl+d_,vl+u_,vl+h_,vl+f_,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],AT=XL.concat([pm,mm,"boxSizing","max"+Iv,"max"+bk,"position",vl,Gr,Gr+h_,Gr+u_,Gr+d_,Gr+f_]),w_e=function(e,t,i){cv(i);var r=e._gsap;if(r.spacerIsNative)cv(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},eP=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=XL.length,o=t.style,a=e.style,l;s--;)l=XL[s],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[wk]=a[Tk]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[pm]=vw(e,Do)+Jr,o[mm]=vw(e,es)+Jr,o[Gr]=a[vl]=a[TK]=a[AK]="0",cv(r),a[pm]=a["max"+Iv]=i[pm],a[mm]=a["max"+bk]=i[mm],a[Gr]=i[Gr],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},b_e=/([A-Z])/g,cv=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,o;for((e.t._gsap||Yt.core.getCache(e.t)).uncache=1;r<i;r+=2)o=e[r+1],s=e[r],o?t[s]=o:t[s]&&t.removeProperty(s.replace(b_e,"-$1").toLowerCase())}},OA=function(e){for(var t=AT.length,i=e.style,r=[],s=0;s<t;s++)r.push(AT[s],i[AT[s]]);return r.t=e,r},M_e=function(e,t,i){for(var r=[],s=e.length,o=i?8:0,a;o<s;o+=2)a=e[o],r.push(a,a in t?t[a]:e[o+1]);return r.t=e.t,r},TT={left:0,top:0},I5=function(e,t,i,r,s,o,a,l,c,u,f,h,p,g){ro(e)&&(e=e(l)),Pa(e)&&e.substr(0,3)==="max"&&(e=h+(e.charAt(4)==="="?_T("0"+e.substr(3),i):0));var v=p?p.time():0,_,S,A;if(p&&p.seek(0),isNaN(e)||(e=+e),Bx(e))p&&(e=Yt.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,h,e)),a&&ST(a,i,r,!0);else{ro(t)&&(t=t(l));var T=(e||"0").split(" "),b,C,L,P;A=oa(t,l)||hi,b=hf(A)||{},(!b||!b.left&&!b.top)&&yl(A).display==="none"&&(P=A.style.display,A.style.display="block",b=hf(A),P?A.style.display=P:A.style.removeProperty("display")),C=_T(T[0],b[r.d]),L=_T(T[1]||"0",i),e=b[r.p]-c[r.p]-u+C+s-L,a&&ST(a,L,r,i-L<20||a._isStart&&L>20),i-=i-L}if(g&&(l[g]=e||-.001,e<0&&(e=0)),o){var k=e+i,I=o._isStart;_="scroll"+r.d2,ST(o,k,r,I&&k>20||!I&&(f?Math.max(hi[_],La[_]):o.parentNode[_])<=k+1),f&&(c=hf(a),f&&(o.style[r.op.p]=c[r.op.p]-r.op.m-o._offset+Jr))}return p&&A&&(_=hf(A),p.seek(h),S=hf(A),p._caScrollDist=_[r.p]-S[r.p],e=e/p._caScrollDist*h),p&&p.seek(v),p?e:Math.round(e)},C_e=/(webkit|moz|length|cssText|inset)/i,L5=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,o,a;if(t===hi){e._stOrig=s.cssText,a=yl(e);for(o in a)!+o&&!C_e.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=i,s.left=r}else s.cssText=e._stOrig;Yt.core.getCache(e).uncache=1,t.appendChild(e)}},PK=function(e,t,i){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,i&&i()),s=r,r=Math.round(o),r}},FA=function(e,t,i){var r={};r[t.p]="+="+i,Yt.set(e,r)},D5=function(e,t){var i=md(e,t),r="_scroll"+t.p2,s=function o(a,l,c,u,f){var h=o.tween,p=l.onComplete,g={};c=c||i();var v=PK(i,c,function(){h.kill(),o.tween=0});return f=u&&f||0,u=u||a-c,h&&h.kill(),l[r]=a,l.inherit=!1,l.modifiers=g,g[r]=function(){return v(c+u*h.ratio+f*h.ratio*h.ratio)},l.onUpdate=function(){$n.cache++,o.tween&&xf()},l.onComplete=function(){o.tween=0,p&&p.call(h)},h=o.tween=Yt.to(e,l),h};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ms(e,"wheel",i.wheelHandler),jn.isTouch&&ms(e,"touchmove",i.wheelHandler),s},jn=function(){function n(t,i){C0||n.register(Yt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),$L(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Lx){this.update=this.refresh=this.kill=zc;return}i=b5(Pa(i)||Bx(i)||i.nodeType?{trigger:i}:i,BA);var s=i,o=s.onUpdate,a=s.toggleClass,l=s.id,c=s.onToggle,u=s.onRefresh,f=s.scrub,h=s.trigger,p=s.pin,g=s.pinSpacing,v=s.invalidateOnRefresh,_=s.anticipatePin,S=s.onScrubComplete,A=s.onSnapComplete,T=s.once,b=s.snap,C=s.pinReparent,L=s.pinSpacer,P=s.containerAnimation,k=s.fastScrollEnd,I=s.preventOverlaps,D=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Do:es,G=!f&&f!==0,H=oa(i.scroller||zn),q=Yt.core.getCache(H),W=Im(H),te=("pinType"in i?i.pinType:nd(H,"pinType")||W&&"fixed")==="fixed",ee=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],ne=G&&i.toggleActions.split(" "),Y="markers"in i?i.markers:BA.markers,Q=W?0:parseFloat(yl(H)["border"+D.p2+Iv])||0,F=this,ie=i.onRefreshInit&&function(){return i.onRefreshInit(F)},he=y_e(H,W,D),pe=x_e(H,W),ye=0,Be=0,Me=0,Le=md(H,D),je,lt,bt,gt,ue,Ne,ke,Ze,We,_e,ft,dt,Rt,Dt,gn,Z,j,Ee,Xe,He,Je,St,nt,vt,Pt,cn,Ke,wn,$t,Mt,At,et,qe,ve,yt,rt,ze,ut,qt;if(F._startClamp=F._endClamp=!1,F._dir=D,_*=45,F.scroller=H,F.scroll=P?P.time.bind(P):Le,gt=Le(),F.vars=i,r=r||i.animation,"refreshPriority"in i&&(mK=1,i.refreshPriority===-9999&&(p_=F)),q.tweenScroll=q.tweenScroll||{top:D5(H,es),left:D5(H,Do)},F.tweenTo=je=q.tweenScroll[D.p],F.scrubDuration=function(at){qe=Bx(at)&&at,qe?et?et.duration(at):et=Yt.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:qe,paused:!0,onComplete:function(){return S&&S(F)}}):(et&&et.progress(1).kill(),et=0)},r&&(r.vars.lazy=!1,r._initted&&!F.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),F.animation=r.pause(),r.scrollTrigger=F,F.scrubDuration(f),Mt=0,l||(l=r.vars.id)),b&&((!Fp(b)||b.push)&&(b={snapTo:b}),"scrollBehavior"in hi.style&&Yt.set(W?[hi,La]:H,{scrollBehavior:"auto"}),$n.forEach(function(at){return ro(at)&&at.target===(W?Oi.scrollingElement||La:H)&&(at.smooth=!1)}),bt=ro(b.snapTo)?b.snapTo:b.snapTo==="labels"?S_e(r):b.snapTo==="labelsDirectional"?E_e(r):b.directional!==!1?function(at,Jt){return Mk(b.snapTo)(at,no()-Be<500?0:Jt.direction)}:Yt.utils.snap(b.snapTo),ve=b.duration||{min:.1,max:2},ve=Fp(ve)?c_(ve.min,ve.max):c_(ve,ve),yt=Yt.delayedCall(b.delay||qe/2||.1,function(){var at=Le(),Jt=no()-Be<500,Kt=je.tween;if((Jt||Math.abs(F.getVelocity())<10)&&!Kt&&!zb&&ye!==at){var rn=(at-Ne)/Dt,Qn=r&&!G?r.totalProgress():rn,on=Jt?0:(Qn-At)/(no()-Ix)*1e3||0,Gt=Yt.utils.clamp(-rn,1-rn,E0(on/2)*on/.185),Ii=rn+(b.inertia===!1?0:Gt),ci,$,J=b,me=J.onStart,z=J.onInterrupt,se=J.onComplete;if(ci=bt(Ii,F),Bx(ci)||(ci=Ii),$=Math.max(0,Math.round(Ne+ci*Dt)),at<=ke&&at>=Ne&&$!==at){if(Kt&&!Kt._initted&&Kt.data<=E0($-at))return;b.inertia===!1&&(Gt=ci-rn),je($,{duration:ve(E0(Math.max(E0(Ii-Qn),E0(ci-Qn))*.185/on/.05||0)),ease:b.ease||"power3",data:E0($-at),onInterrupt:function(){return yt.restart(!0)&&z&&z(F)},onComplete:function(){F.update(),ye=Le(),r&&!G&&(et?et.resetTo("totalProgress",ci,r._tTime/r._tDur):r.progress(ci)),Mt=At=r&&!G?r.totalProgress():F.progress,A&&A(F),se&&se(F)}},at,Gt*Dt,$-at-Gt*Dt),me&&me(F,je.tween)}}else F.isActive&&ye!==at&&yt.restart(!0)}).pause()),l&&(jL[l]=F),h=F.trigger=oa(h||p!==!0&&p),qt=h&&h._gsap&&h._gsap.stRevert,qt&&(qt=qt(F)),p=p===!0?h:oa(p),Pa(a)&&(a={targets:h,className:a}),p&&(g===!1||g===vl||(g=!g&&p.parentNode&&p.parentNode.style&&yl(p.parentNode).display==="flex"?!1:Gr),F.pin=p,lt=Yt.core.getCache(p),lt.spacer?gn=lt.pinState:(L&&(L=oa(L),L&&!L.nodeType&&(L=L.current||L.nativeElement),lt.spacerIsNative=!!L,L&&(lt.spacerState=OA(L))),lt.spacer=Ee=L||Oi.createElement("div"),Ee.classList.add("pin-spacer"),l&&Ee.classList.add("pin-spacer-"+l),lt.pinState=gn=OA(p)),i.force3D!==!1&&Yt.set(p,{force3D:!0}),F.spacer=Ee=lt.spacer,$t=yl(p),vt=$t[g+D.os2],He=Yt.getProperty(p),Je=Yt.quickSetter(p,D.a,Jr),eP(p,Ee,$t),j=OA(p)),Y){dt=Fp(Y)?b5(Y,M5):M5,_e=kA("scroller-start",l,H,D,dt,0),ft=kA("scroller-end",l,H,D,dt,0,_e),Xe=_e["offset"+D.op.d2];var En=oa(nd(H,"content")||H);Ze=this.markerStart=kA("start",l,En,D,dt,Xe,0,P),We=this.markerEnd=kA("end",l,En,D,dt,Xe,0,P),P&&(ut=Yt.quickSetter([Ze,We],D.a,Jr)),!te&&!(au.length&&nd(H,"fixedMarkers")===!0)&&(__e(W?hi:H),Yt.set([_e,ft],{force3D:!0}),cn=Yt.quickSetter(_e,D.a,Jr),wn=Yt.quickSetter(ft,D.a,Jr))}if(P){var Ft=P.vars.onUpdate,kt=P.vars.onUpdateParams;P.eventCallback("onUpdate",function(){F.update(0,0,1),Ft&&Ft.apply(P,kt||[])})}if(F.previous=function(){return Vn[Vn.indexOf(F)-1]},F.next=function(){return Vn[Vn.indexOf(F)+1]},F.revert=function(at,Jt){if(!Jt)return F.kill(!0);var Kt=at!==!1||!F.enabled,rn=Zs;Kt!==F.isReverted&&(Kt&&(rt=Math.max(Le(),F.scroll.rec||0),Me=F.progress,ze=r&&r.progress()),Ze&&[Ze,We,_e,ft].forEach(function(Qn){return Qn.style.display=Kt?"none":"block"}),Kt&&(Zs=F,F.update(Kt)),p&&(!C||!F.isActive)&&(Kt?w_e(p,Ee,gn):eP(p,Ee,yl(p),Pt)),Kt||F.update(Kt),Zs=rn,F.isReverted=Kt)},F.refresh=function(at,Jt,Kt,rn){if(!((Zs||!F.enabled)&&!Jt)){if(p&&at&&bl){ms(n,"scrollEnd",bK);return}!Ro&&ie&&ie(F),Zs=F,je.tween&&!Kt&&(je.tween.kill(),je.tween=0),et&&et.pause(),v&&r&&r.revert({kill:!1}).invalidate(),F.isReverted||F.revert(!0,!0),F._subPinOffset=!1;var Qn=he(),on=pe(),Gt=P?P.duration():Jc(H,D),Ii=Dt<=.01,ci=0,$=rn||0,J=Fp(Kt)?Kt.end:i.end,me=i.endTrigger||h,z=Fp(Kt)?Kt.start:i.start||(i.start===0||!h?0:p?"0 0":"0 100%"),se=F.pinnedContainer=i.pinnedContainer&&oa(i.pinnedContainer,F),oe=h&&Math.max(0,Vn.indexOf(F))||0,fe=oe,le,be,Oe,Ve,we,pt,Ye,it,Bt,Qt,zt,sn,Et;for(Y&&Fp(Kt)&&(sn=Yt.getProperty(_e,D.p),Et=Yt.getProperty(ft,D.p));fe-- >0;)pt=Vn[fe],pt.end||pt.refresh(0,1)||(Zs=F),Ye=pt.pin,Ye&&(Ye===h||Ye===p||Ye===se)&&!pt.isReverted&&(Qt||(Qt=[]),Qt.unshift(pt),pt.revert(!0,!0)),pt!==Vn[fe]&&(oe--,fe--);for(ro(z)&&(z=z(F)),z=E5(z,"start",F),Ne=I5(z,h,Qn,D,Le(),Ze,_e,F,on,Q,te,Gt,P,F._startClamp&&"_startClamp")||(p?-.001:0),ro(J)&&(J=J(F)),Pa(J)&&!J.indexOf("+=")&&(~J.indexOf(" ")?J=(Pa(z)?z.split(" ")[0]:"")+J:(ci=_T(J.substr(2),Qn),J=Pa(z)?z:(P?Yt.utils.mapRange(0,P.duration(),P.scrollTrigger.start,P.scrollTrigger.end,Ne):Ne)+ci,me=h)),J=E5(J,"end",F),ke=Math.max(Ne,I5(J||(me?"100% 0":Gt),me,Qn,D,Le()+ci,We,ft,F,on,Q,te,Gt,P,F._endClamp&&"_endClamp"))||-.001,ci=0,fe=oe;fe--;)pt=Vn[fe],Ye=pt.pin,Ye&&pt.start-pt._pinPush<=Ne&&!P&&pt.end>0&&(le=pt.end-(F._startClamp?Math.max(0,pt.start):pt.start),(Ye===h&&pt.start-pt._pinPush<Ne||Ye===se)&&isNaN(z)&&(ci+=le*(1-pt.progress)),Ye===p&&($+=le));if(Ne+=ci,ke+=ci,F._startClamp&&(F._startClamp+=ci),F._endClamp&&!Ro&&(F._endClamp=ke||-.001,ke=Math.min(ke,Jc(H,D))),Dt=ke-Ne||(Ne-=.01)&&.001,Ii&&(Me=Yt.utils.clamp(0,1,Yt.utils.normalize(Ne,ke,rt))),F._pinPush=$,Ze&&ci&&(le={},le[D.a]="+="+ci,se&&(le[D.p]="-="+Le()),Yt.set([Ze,We],le)),p&&!(WL&&F.end>=Jc(H,D)))le=yl(p),Ve=D===es,Oe=Le(),St=parseFloat(He(D.a))+$,!Gt&&ke>1&&(zt=(W?Oi.scrollingElement||La:H).style,zt={style:zt,value:zt["overflow"+D.a.toUpperCase()]},W&&yl(hi)["overflow"+D.a.toUpperCase()]!=="scroll"&&(zt.style["overflow"+D.a.toUpperCase()]="scroll")),eP(p,Ee,le),j=OA(p),be=hf(p,!0),it=te&&md(H,Ve?Do:es)(),g?(Pt=[g+D.os2,Dt+$+Jr],Pt.t=Ee,fe=g===Gr?vw(p,D)+Dt+$:0,fe&&(Pt.push(D.d,fe+Jr),Ee.style.flexBasis!=="auto"&&(Ee.style.flexBasis=fe+Jr)),cv(Pt),se&&Vn.forEach(function(xt){xt.pin===se&&xt.vars.pinSpacing!==!1&&(xt._subPinOffset=!0)}),te&&Le(rt)):(fe=vw(p,D),fe&&Ee.style.flexBasis!=="auto"&&(Ee.style.flexBasis=fe+Jr)),te&&(we={top:be.top+(Ve?Oe-Ne:it)+Jr,left:be.left+(Ve?it:Oe-Ne)+Jr,boxSizing:"border-box",position:"fixed"},we[pm]=we["max"+Iv]=Math.ceil(be.width)+Jr,we[mm]=we["max"+bk]=Math.ceil(be.height)+Jr,we[vl]=we[vl+h_]=we[vl+u_]=we[vl+d_]=we[vl+f_]="0",we[Gr]=le[Gr],we[Gr+h_]=le[Gr+h_],we[Gr+u_]=le[Gr+u_],we[Gr+d_]=le[Gr+d_],we[Gr+f_]=le[Gr+f_],Z=M_e(gn,we,C),Ro&&Le(0)),r?(Bt=r._initted,YR(1),r.render(r.duration(),!0,!0),nt=He(D.a)-St+Dt+$,Ke=Math.abs(Dt-nt)>1,te&&Ke&&Z.splice(Z.length-2,2),r.render(0,!0,!0),Bt||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),YR(0)):nt=Dt,zt&&(zt.value?zt.style["overflow"+D.a.toUpperCase()]=zt.value:zt.style.removeProperty("overflow-"+D.a));else if(h&&Le()&&!P)for(be=h.parentNode;be&&be!==hi;)be._pinOffset&&(Ne-=be._pinOffset,ke-=be._pinOffset),be=be.parentNode;Qt&&Qt.forEach(function(xt){return xt.revert(!1,!0)}),F.start=Ne,F.end=ke,gt=ue=Ro?rt:Le(),!P&&!Ro&&(gt<rt&&Le(rt),F.scroll.rec=0),F.revert(!1,!0),Be=no(),yt&&(ye=-1,yt.restart(!0)),Zs=0,r&&G&&(r._initted||ze)&&r.progress()!==ze&&r.progress(ze||0,!0).render(r.time(),!0,!0),(Ii||Me!==F.progress||P||v||r&&!r._initted)&&(r&&!G&&r.totalProgress(P&&Ne<-.001&&!Me?Yt.utils.normalize(Ne,ke,0):Me,!0),F.progress=Ii||(gt-Ne)/Dt===Me?0:Me),p&&g&&(Ee._pinOffset=Math.round(F.progress*nt)),et&&et.invalidate(),isNaN(sn)||(sn-=Yt.getProperty(_e,D.p),Et-=Yt.getProperty(ft,D.p),FA(_e,D,sn),FA(Ze,D,sn-(rn||0)),FA(ft,D,Et),FA(We,D,Et-(rn||0))),Ii&&!Ro&&F.update(),u&&!Ro&&!Rt&&(Rt=!0,u(F),Rt=!1)}},F.getVelocity=function(){return(Le()-ue)/(no()-Ix)*1e3||0},F.endAnimation=function(){yx(F.callbackAnimation),r&&(et?et.progress(1):r.paused()?G||yx(r,F.direction<0,1):yx(r,r.reversed()))},F.labelToScroll=function(at){return r&&r.labels&&(Ne||F.refresh()||Ne)+r.labels[at]/r.duration()*Dt||0},F.getTrailing=function(at){var Jt=Vn.indexOf(F),Kt=F.direction>0?Vn.slice(0,Jt).reverse():Vn.slice(Jt+1);return(Pa(at)?Kt.filter(function(rn){return rn.vars.preventOverlaps===at}):Kt).filter(function(rn){return F.direction>0?rn.end<=Ne:rn.start>=ke})},F.update=function(at,Jt,Kt){if(!(P&&!Kt&&!at)){var rn=Ro===!0?rt:F.scroll(),Qn=at?0:(rn-Ne)/Dt,on=Qn<0?0:Qn>1?1:Qn||0,Gt=F.progress,Ii,ci,$,J,me,z,se,oe;if(Jt&&(ue=gt,gt=P?Le():rn,b&&(At=Mt,Mt=r&&!G?r.totalProgress():on)),_&&p&&!Zs&&!PA&&bl&&(!on&&Ne<rn+(rn-ue)/(no()-Ix)*_?on=1e-4:on===1&&ke>rn+(rn-ue)/(no()-Ix)*_&&(on=.9999)),on!==Gt&&F.enabled){if(Ii=F.isActive=!!on&&on<1,ci=!!Gt&&Gt<1,z=Ii!==ci,me=z||!!on!=!!Gt,F.direction=on>Gt?1:-1,F.progress=on,me&&!Zs&&($=on&&!Gt?0:on===1?1:Gt===1?2:3,G&&(J=!z&&ne[$+1]!=="none"&&ne[$+1]||ne[$],oe=r&&(J==="complete"||J==="reset"||J in r))),I&&(z||oe)&&(oe||f||!r)&&(ro(I)?I(F):F.getTrailing(I).forEach(function(Oe){return Oe.endAnimation()})),G||(et&&!Zs&&!PA?(et._dp._time-et._start!==et._time&&et.render(et._dp._time-et._start),et.resetTo?et.resetTo("totalProgress",on,r._tTime/r._tDur):(et.vars.totalProgress=on,et.invalidate().restart())):r&&r.totalProgress(on,!!(Zs&&(Be||at)))),p){if(at&&g&&(Ee.style[g+D.os2]=vt),!te)Je(Dx(St+nt*on));else if(me){if(se=!at&&on>Gt&&ke+1>rn&&rn+1>=Jc(H,D),C)if(!at&&(Ii||se)){var fe=hf(p,!0),le=rn-Ne;L5(p,hi,fe.top+(D===es?le:0)+Jr,fe.left+(D===es?0:le)+Jr)}else L5(p,Ee);cv(Ii||se?Z:j),Ke&&on<1&&Ii||Je(St+(on===1&&!se?nt:0))}}b&&!je.tween&&!Zs&&!PA&&yt.restart(!0),a&&(z||T&&on&&(on<1||!qR))&&f1(a.targets).forEach(function(Oe){return Oe.classList[Ii||T?"add":"remove"](a.className)}),o&&!G&&!at&&o(F),me&&!Zs?(G&&(oe&&(J==="complete"?r.pause().totalProgress(1):J==="reset"?r.restart(!0).pause():J==="restart"?r.restart(!0):r[J]()),o&&o(F)),(z||!qR)&&(c&&z&&QR(F,c),ee[$]&&QR(F,ee[$]),T&&(on===1?F.kill(!1,1):ee[$]=0),z||($=on===1?1:3,ee[$]&&QR(F,ee[$]))),k&&!Ii&&Math.abs(F.getVelocity())>(Bx(k)?k:2500)&&(yx(F.callbackAnimation),et?et.progress(1):yx(r,J==="reverse"?1:!on,1))):G&&o&&!Zs&&o(F)}if(wn){var be=P?rn/P.duration()*(P._caScrollDist||0):rn;cn(be+(_e._isFlipped?1:0)),wn(be)}ut&&ut(-rn/P.duration()*(P._caScrollDist||0))}},F.enable=function(at,Jt){F.enabled||(F.enabled=!0,ms(H,"resize",kx),W||ms(H,"scroll",A0),ie&&ms(n,"refreshInit",ie),at!==!1&&(F.progress=Me=0,gt=ue=ye=Le()),Jt!==!1&&F.refresh())},F.getTween=function(at){return at&&je?je.tween:et},F.setPositions=function(at,Jt,Kt,rn){if(P){var Qn=P.scrollTrigger,on=P.duration(),Gt=Qn.end-Qn.start;at=Qn.start+Gt*at/on,Jt=Qn.start+Gt*Jt/on}F.refresh(!1,!1,{start:A5(at,Kt&&!!F._startClamp),end:A5(Jt,Kt&&!!F._endClamp)},rn),F.update()},F.adjustPinSpacing=function(at){if(Pt&&at){var Jt=Pt.indexOf(D.d)+1;Pt[Jt]=parseFloat(Pt[Jt])+at+Jr,Pt[1]=parseFloat(Pt[1])+at+Jr,cv(Pt)}},F.disable=function(at,Jt){if(F.enabled&&(at!==!1&&F.revert(!0,!0),F.enabled=F.isActive=!1,Jt||et&&et.pause(),rt=0,lt&&(lt.uncache=1),ie&&ps(n,"refreshInit",ie),yt&&(yt.pause(),je.tween&&je.tween.kill()&&(je.tween=0)),!W)){for(var Kt=Vn.length;Kt--;)if(Vn[Kt].scroller===H&&Vn[Kt]!==F)return;ps(H,"resize",kx),W||ps(H,"scroll",A0)}},F.kill=function(at,Jt){F.disable(at,Jt),et&&!Jt&&et.kill(),l&&delete jL[l];var Kt=Vn.indexOf(F);Kt>=0&&Vn.splice(Kt,1),Kt===Co&&ET>0&&Co--,Kt=0,Vn.forEach(function(rn){return rn.scroller===F.scroller&&(Kt=1)}),Kt||Ro||(F.scroll.rec=0),r&&(r.scrollTrigger=null,at&&r.revert({kill:!1}),Jt||r.kill()),Ze&&[Ze,We,_e,ft].forEach(function(rn){return rn.parentNode&&rn.parentNode.removeChild(rn)}),p_===F&&(p_=0),p&&(lt&&(lt.uncache=1),Kt=0,Vn.forEach(function(rn){return rn.pin===p&&Kt++}),Kt||(lt.spacer=0)),i.onKill&&i.onKill(F)},Vn.push(F),F.enable(!1,!1),qt&&qt(F),r&&r.add&&!Dt){var Ut=F.update;F.update=function(){F.update=Ut,$n.cache++,Ne||ke||F.refresh()},Yt.delayedCall(.01,F.update),Dt=.01,Ne=ke=0}else F.refresh();p&&T_e()},n.register=function(i){return C0||(Yt=i||_K(),xK()&&window.document&&n.enable(),C0=Lx),C0},n.defaults=function(i){if(i)for(var r in i)BA[r]=i[r];return BA},n.disable=function(i,r){Lx=0,Vn.forEach(function(o){return o[r?"kill":"disable"](i)}),ps(zn,"wheel",A0),ps(Oi,"scroll",A0),clearInterval(RA),ps(Oi,"touchcancel",zc),ps(hi,"touchstart",zc),LA(ps,Oi,"pointerdown,touchstart,mousedown",T5),LA(ps,Oi,"pointerup,touchend,mouseup",w5),mw.kill(),IA(ps);for(var s=0;s<$n.length;s+=3)DA(ps,$n[s],$n[s+1]),DA(ps,$n[s],$n[s+2])},n.enable=function(){if(zn=window,Oi=document,La=Oi.documentElement,hi=Oi.body,Yt&&(f1=Yt.utils.toArray,c_=Yt.utils.clamp,$L=Yt.core.context||zc,YR=Yt.core.suppressOverwrites||zc,Ek=zn.history.scrollRestoration||"auto",KL=zn.pageYOffset||0,Yt.core.globals("ScrollTrigger",n),hi)){Lx=1,lv=document.createElement("div"),lv.style.height="100vh",lv.style.position="absolute",RK(),v_e(),Cr.register(Yt),n.isTouch=Cr.isTouch,Dh=Cr.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),zL=Cr.isTouch===1,ms(zn,"wheel",A0),Sk=[zn,Oi,La,hi],Yt.matchMedia?(n.matchMedia=function(c){var u=Yt.matchMedia(),f;for(f in c)u.add(f,c[f]);return u},Yt.addEventListener("matchMediaInit",function(){return Ck()}),Yt.addEventListener("matchMediaRevert",function(){return MK()}),Yt.addEventListener("matchMedia",function(){Zp(0,1),Dm("matchMedia")}),Yt.matchMedia().add("(orientation: portrait)",function(){return ZR(),ZR})):console.warn("Requires GSAP 3.11.0 or later"),ZR(),ms(Oi,"scroll",A0);var i=hi.hasAttribute("style"),r=hi.style,s=r.borderTopStyle,o=Yt.core.Animation.prototype,a,l;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=hf(hi),es.m=Math.round(a.top+es.sc())||0,Do.m=Math.round(a.left+Do.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(hi.setAttribute("style",""),hi.removeAttribute("style")),RA=setInterval(C5,250),Yt.delayedCall(.5,function(){return PA=0}),ms(Oi,"touchcancel",zc),ms(hi,"touchstart",zc),LA(ms,Oi,"pointerdown,touchstart,mousedown",T5),LA(ms,Oi,"pointerup,touchend,mouseup",w5),HL=Yt.utils.checkPrefix("transform"),AT.push(HL),C0=no(),mw=Yt.delayedCall(.2,Zp).pause(),R0=[Oi,"visibilitychange",function(){var c=zn.innerWidth,u=zn.innerHeight;Oi.hidden?(_5=c,S5=u):(_5!==c||S5!==u)&&kx()},Oi,"DOMContentLoaded",Zp,zn,"load",Zp,zn,"resize",kx],IA(ms),Vn.forEach(function(c){return c.enable(0,1)}),l=0;l<$n.length;l+=3)DA(ps,$n[l],$n[l+1]),DA(ps,$n[l],$n[l+2])}},n.config=function(i){"limitCallbacks"in i&&(qR=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(RA)||(RA=r)&&setInterval(C5,r),"ignoreMobileResize"in i&&(zL=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(IA(ps)||IA(ms,i.autoRefreshEvents||"none"),gK=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=oa(i),o=$n.indexOf(s),a=Im(s);~o&&$n.splice(o,a?6:2),r&&(a?au.unshift(zn,r,hi,r,La,r):au.unshift(s,r))},n.clearMatchMedia=function(i){Vn.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var o=(Pa(i)?oa(i):i).getBoundingClientRect(),a=o[s?pm:mm]*r||0;return s?o.right-a>0&&o.left+a<zn.innerWidth:o.bottom-a>0&&o.top+a<zn.innerHeight},n.positionInViewport=function(i,r,s){Pa(i)&&(i=oa(i));var o=i.getBoundingClientRect(),a=o[s?pm:mm],l=r==null?a/2:r in yw?yw[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/zn.innerWidth:(o.top+l)/zn.innerHeight},n.killAll=function(i){if(Vn.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Lm.killAll||[];Lm={},r.forEach(function(s){return s()})}},n}();jn.version="3.12.7";jn.saveStyles=function(n){return n?f1(n).forEach(function(e){if(e&&e.style){var t=Ra.indexOf(e);t>=0&&Ra.splice(t,5),Ra.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Yt.core.getCache(e),$L())}}):Ra};jn.revert=function(n,e){return Ck(!n,e)};jn.create=function(n,e){return new jn(n,e)};jn.refresh=function(n){return n?kx(!0):(C0||jn.register())&&Zp(!0)};jn.update=function(n){return++$n.cache&&xf(n===!0?2:0)};jn.clearScrollMemory=CK;jn.maxScroll=function(n,e){return Jc(n,e?Do:es)};jn.getScrollFunc=function(n,e){return md(oa(n),e?Do:es)};jn.getById=function(n){return jL[n]};jn.getAll=function(){return Vn.filter(function(n){return n.vars.id!=="ScrollSmoother"})};jn.isScrolling=function(){return!!bl};jn.snapDirectional=Mk;jn.addEventListener=function(n,e){var t=Lm[n]||(Lm[n]=[]);~t.indexOf(e)||t.push(e)};jn.removeEventListener=function(n,e){var t=Lm[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};jn.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,o=function(c,u){var f=[],h=[],p=Yt.delayedCall(r,function(){u(f,h),f=[],h=[]}).pause();return function(g){f.length||p.restart(!0),f.push(g.trigger),h.push(g),s<=f.length&&p.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&ro(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return ro(s)&&(s=s(),ms(jn,"refresh",function(){return s=e.batchMax()})),f1(n).forEach(function(l){var c={};for(a in i)c[a]=i[a];c.trigger=l,t.push(jn.create(c))}),t};var B5=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},tP=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(Cr.isTouch?" pinch-zoom":""):"none",e===La&&n(hi,t)},NA={auto:1,scroll:1},R_e=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||Yt.core.getCache(s),a=no(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==hi&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(NA[(l=yl(s)).overflowY]||NA[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==i&&!Im(s)&&(NA[(l=yl(s)).overflowY]||NA[l.overflowX]),o._isScrollT=a}(o._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},IK=function(e,t,i,r){return Cr.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&R_e,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&ms(Oi,Cr.eventTypes[0],O5,!1,!0)},onDisable:function(){return ps(Oi,Cr.eventTypes[0],O5,!0)}})},P_e=/(input|label|select|textarea)/i,k5,O5=function(e){var t=P_e.test(e.target.tagName);(t||k5)&&(e._gsapAllow=!0,k5=t)},I_e=function(e){Fp(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,c=oa(e.target)||La,u=Yt.core.globals().ScrollSmoother,f=u&&u.get(),h=Dh&&(e.content&&oa(e.content)||f&&e.content!==!1&&!f.smooth()&&f.content()),p=md(c,es),g=md(c,Do),v=1,_=(Cr.isTouch&&zn.visualViewport?zn.visualViewport.scale*zn.visualViewport.width:zn.outerWidth)/zn.innerWidth,S=0,A=ro(r)?function(){return r(a)}:function(){return r||2.8},T,b,C=IK(c,e.type,!0,s),L=function(){return b=!1},P=zc,k=zc,I=function(){l=Jc(c,es),k=c_(Dh?1:0,l),i&&(P=c_(0,Jc(c,Do))),T=gm},D=function(){h._gsap.y=Dx(parseFloat(h._gsap.y)+p.offset)+"px",h.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(h._gsap.y)+", 0, 1)",p.offset=p.cacheID=0},G=function(){if(b){requestAnimationFrame(L);var Y=Dx(a.deltaY/2),Q=k(p.v-Y);if(h&&Q!==p.v+p.offset){p.offset=Q-p.v;var F=Dx((parseFloat(h&&h._gsap.y)||0)-p.offset);h.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+F+", 0, 1)",h._gsap.y=F+"px",p.cacheID=$n.cache,xf()}return!0}p.offset&&D(),b=!0},H,q,W,te,ee=function(){I(),H.isActive()&&H.vars.scrollY>l&&(p()>l?H.progress(1)&&p(l):H.resetTo("scrollY",l))};return h&&Yt.set(h,{y:"+=0"}),e.ignoreCheck=function(ne){return Dh&&ne.type==="touchmove"&&G()||v>1.05&&ne.type!=="touchstart"||a.isGesturing||ne.touches&&ne.touches.length>1},e.onPress=function(){b=!1;var ne=v;v=Dx((zn.visualViewport&&zn.visualViewport.scale||1)/_),H.pause(),ne!==v&&tP(c,v>1.01?!0:i?!1:"x"),q=g(),W=p(),I(),T=gm},e.onRelease=e.onGestureStart=function(ne,Y){if(p.offset&&D(),!Y)te.restart(!0);else{$n.cache++;var Q=A(),F,ie;i&&(F=g(),ie=F+Q*.05*-ne.velocityX/.227,Q*=B5(g,F,ie,Jc(c,Do)),H.vars.scrollX=P(ie)),F=p(),ie=F+Q*.05*-ne.velocityY/.227,Q*=B5(p,F,ie,Jc(c,es)),H.vars.scrollY=k(ie),H.invalidate().duration(Q).play(.01),(Dh&&H.vars.scrollY>=l||F>=l-1)&&Yt.to({},{onUpdate:ee,duration:Q})}o&&o(ne)},e.onWheel=function(){H._ts&&H.pause(),no()-S>1e3&&(T=0,S=no())},e.onChange=function(ne,Y,Q,F,ie){if(gm!==T&&I(),Y&&i&&g(P(F[2]===Y?q+(ne.startX-ne.x):g()+Y-F[1])),Q){p.offset&&D();var he=ie[2]===Q,pe=he?W+ne.startY-ne.y:p()+Q-ie[1],ye=k(pe);he&&pe!==ye&&(W+=ye-pe),p(ye)}(Q||Y)&&xf()},e.onEnable=function(){tP(c,i?!1:"x"),jn.addEventListener("refresh",ee),ms(zn,"resize",ee),p.smooth&&(p.target.style.scrollBehavior="auto",p.smooth=g.smooth=!1),C.enable()},e.onDisable=function(){tP(c,!0),ps(zn,"resize",ee),jn.removeEventListener("refresh",ee),C.kill()},e.lockAxis=e.lockAxis!==!1,a=new Cr(e),a.iOS=Dh,Dh&&!p()&&p(1),Dh&&Yt.ticker.add(zc),te=a._dc,H=Yt.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:PK(p,p(),function(){return H.pause()})},onUpdate:xf,onComplete:te.vars.onComplete}),a};jn.sort=function(n){if(ro(n))return Vn.sort(n);var e=zn.pageYOffset||0;return jn.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+zn.innerHeight}),Vn.sort(n||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};jn.observe=function(n){return new Cr(n)};jn.normalizeScroll=function(n){if(typeof n>"u")return Mo;if(n===!0&&Mo)return Mo.enable();if(n===!1){Mo&&Mo.kill(),Mo=n;return}var e=n instanceof Cr?n:I_e(n);return Mo&&Mo.target===e.target&&Mo.kill(),Im(e.target)&&(Mo=e),e};jn.core={_getVelocityProp:VL,_inputObserver:IK,_scrollers:$n,_proxies:au,bridge:{ss:function(){bl||Dm("scrollStart"),bl=no()},ref:function(){return Zs}}};_K()&&Yt.registerPlugin(jn);var LK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},F5=de.createContext&&de.createContext(LK),L_e=["attr","size","title"];function D_e(n,e){if(n==null)return{};var t=B_e(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function B_e(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function xw(){return xw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xw.apply(this,arguments)}function N5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _w(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(t),!0).forEach(function(i){k_e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k_e(n,e,t){return e=O_e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O_e(n){var e=F_e(n,"string");return typeof e=="symbol"?e:e+""}function F_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DK(n){return n&&n.map((e,t)=>de.createElement(e.tag,_w({key:t},e.attr),DK(e.child)))}function $b(n){return e=>de.createElement(N_e,xw({attr:_w({},n.attr)},e),DK(n.child))}function N_e(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=D_e(n,L_e),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),de.createElement("svg",xw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:_w(_w({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&de.createElement("title",null,s),n.children)};return F5!==void 0?de.createElement(F5.Consumer,null,t=>e(t)):e(LK)}function U_e(n){return $b({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function G_e(n){return $b({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function V_e(n){return $b({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function H_e(n){return $b({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}_k.registerPlugin(jn);const BK=RW(aa.projects[0]),z_e=()=>{const{isMobile:n}=q1(),[e,t]=O.useState(!1),i=z1(),[r,s]=AB(BK);return Go(()=>{t(i.offset>0)}),ge.jsx("div",{className:"interface",children:ge.jsxs("div",{className:"sections",children:[ge.jsx("section",{className:"section section--bottom",children:ge.jsx("div",{className:"element-container",children:ge.jsx(Ih.div,{className:"scroll-down",initial:"visible",animate:{opacity:e?0:1},children:ge.jsx(Ih.div,{className:"scroll-down__wheel",initial:{translateY:0},animate:{translateY:4},transition:{duration:.4,repeatDelay:.5,repeatType:"reverse",repeat:1/0}})})})}),ge.jsx("section",{className:"section section--right mobile--section--left mobile--section--bottom",children:ge.jsx(Ih.div,{className:"skills_div",whileInView:"visible",variants:{visible:{opacity:1}},initial:{opacity:0},viewport:{margin:n?"-70% 0px 0px 0px":void 0},children:aa.skills.map((o,a)=>ge.jsxs(Ih.div,{className:"skill",initial:{opacity:0},variants:{visible:{opacity:1}},transition:{duration:2,delay:n?0:a*.6},children:[ge.jsxs("div",{className:"skill_label",children:[ge.jsx("img",{className:"skill_label_image",src:o.icon,alt:o.name}),ge.jsx("h2",{className:"skill_label_name",children:o.name})]}),ge.jsx("p",{className:"skill_label_details",children:o.details}),ge.jsx("div",{className:"skill_level",children:ge.jsx(Ih.div,{className:"skill_level_bar",initial:{width:0},variants:{visible:{width:`${o.level}%`}},transition:{duration:1,delay:a*.62}})})]},o.name))})}),ge.jsx("section",{className:"section section--left mobile--section--bottom"}),ge.jsx("section",{className:"section section--left mobile--section--bottom",children:ge.jsx(Ih.div,{className:"projects_div",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1}},viewport:{margin:n?"-70% 0px 0px 0px":void 0},children:aa.projects.map((o,a)=>ge.jsx(Ih.div,{className:"project",initial:{opacity:0},onMouseEnter:()=>s(o),variants:{visible:{opacity:1}},transition:{duration:1,delay:n?0:a*.62},children:ge.jsxs("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",children:[ge.jsx("img",{className:"project_image",src:o.image,alt:o.name}),ge.jsx("div",{className:"project_details",children:ge.jsx("h2",{className:"project_details_name",children:o.name})})]})},o.name))})}),ge.jsxs("section",{className:"section section--right mobile--section--bottom",children:[ge.jsxs(Ih.div,{className:"contact",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1}},children:[ge.jsx("div",{className:"resume_button_wrapper",children:ge.jsx("a",{href:"pdfs/resume_jan_2025.pdf",target:"_blank",rel:"noopener noreferrer",className:"resume_button",children:"View My Resume!"})}),ge.jsx("div",{className:"contact_div",children:ge.jsxs("ul",{className:"contact_ul",children:[ge.jsxs("li",{className:"contact_li",children:[ge.jsx(V_e,{className:"contact_icon",size:24}),ge.jsx("span",{className:"break-all",children:"vlmarrocco@gmail.com"})]}),ge.jsxs("li",{className:"contact_li",children:[ge.jsx(H_e,{className:"contact_icon",size:24}),ge.jsx("span",{children:"+1 (905) 243-2030"})]}),ge.jsxs("li",{className:"contact_li",children:[ge.jsx(G_e,{className:"contact_icon",size:24}),ge.jsx("a",{href:"https://www.linkedin.com/in/vlmarrocco/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"linkedin.com/in/vlmarrocco"})]}),ge.jsxs("li",{className:"contact_li",children:[ge.jsx(U_e,{className:"contact_icon",size:24}),ge.jsx("a",{href:"https://github.com/vxron",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"github.com/vxron"})]})]})})]}),n?null:ge.jsxs("div",{className:"contact_footer",children:[ge.jsxs("p",{children:["This site was coded from scratch using HTML/CSS/JS, and React Three Fiber."," "]}),ge.jsx("a",{href:"https://github.com/vxron/portfolio-website",target:"_blank",rel:"noopener noreferrer",className:"footer_link",children:"View on GitHub "})]})]})]})})},$_e=({...n})=>{const[e]=AB(BK),t=Nm(e.image);return ge.jsx("group",{...n,children:ge.jsxs("mesh",{children:[ge.jsx("planeGeometry",{args:[1.14,.66]}),ge.jsx("meshBasicMaterial",{map:t})]})})};aa.projects.forEach(n=>{Nm.preload(n.image)});const d1=["TESLA","tesla-pg","nokia","nokia-pg","TA","ta-pg","mdafinal","mda-pg","research","research-pg","uhn","uhn-pg"],kK=d1.length,W_e=RW(0),em=[{front:"title-pg",back:d1[0]}];for(let n=1;n<kK-1;n+=2)em.push({front:d1[n],back:d1[n+1]??"title-pg"});em.push({front:d1[kK-1],back:"title-pg"});const j_e=Math.PI/180;function K_e(n){return n*j_e}const Wb=1.28,X_e=1.71,YL=.003,Rk=30,wT=Wb/Rk,Y_e=.05,q_e=.18,J_e=.03,nS=new Ed(Wb,X_e,YL,Rk,2);nS.translate(Wb/2,0,0);const U5=nS.attributes.position,G5=new re,OK=[],FK=[];for(let n=0;n<U5.count;n++){G5.fromBufferAttribute(U5,n);const e=G5.x,t=Math.max(0,Math.floor(e/wT));let i=e%wT/wT;OK.push(t,t+1,0,0),FK.push(1-i,i,0,0)}nS.setAttribute("skinIndex",new C1(OK,4));nS.setAttribute("skinWeight",new Ht(FK,4));const nP=new ht("white"),Q_e=[new Oa({color:nP}),new Oa({color:"#111"}),new Oa({color:nP}),new Oa({color:nP})];Nm.preload("/exp_images/title-pg.png");const Z_e=({number:n,front:e,back:t,page:i,opened:r,bookClosed:s,...o})=>{const[a,l]=Nm([`/exp_images/${e}.png`,`/exp_images/${t}.png`]),c=O.useRef(),u=O.useRef(),f=O.useMemo(()=>{const h=[];for(let L=0;L<=Rk;L++){let P=new Am;h.push(P),L===0?P.position.x=0:P.position.x=wT,L>0&&h[L-1].add(P)}const p=new km(h),g=n===0,v=n===em.length-1,_=new Oa({map:a,roughness:.1,metalness:.15,emissive:new ht("white"),emissiveIntensity:.15,toneMapped:!1}),S=new Oa({map:l,roughness:.1,metalness:.1,emissive:new ht("white"),emissiveIntensity:.1,toneMapped:!1}),A=new Oa({map:a,roughness:.8,metalness:.3,emissive:new ht("white"),emissiveIntensity:.05,toneMapped:!1}),T=new Oa({map:l,roughness:1,metalness:0,emissive:new ht("white"),emissiveIntensity:.05,toneMapped:!1}),b=[...Q_e,g||v?_:A,g||v?S:T],C=new B1(nS,b);return C.receiveShadow=!0,C.castShadow=!0,C.frustumCulled=!1,C.add(p.bones[0]),C.bind(p),C},[]);return Go(()=>{if(!u.current)return;let h=r?-Math.PI/2:Math.PI/2;s||(h+=K_e(n*.8));const p=u.current.skeleton.bones;for(let g=0;g<p.length;g++){const v=g===0?c.current:p[g],_=g<8?Math.sin(g*.2+.2):0,S=g>=8?Math.cos(g*.3+.09):0;let A=q_e*_*h-J_e*S*h;s&&(g===0?A=h:A=0),v.rotation.y=Gn.lerp(v.rotation.y,A,Y_e)}}),ge.jsx("group",{...o,ref:c,children:ge.jsx("primitive",{object:f,ref:u,"position-z":-n*YL+i*YL})})},e1e=({setBookOpen:n,...e})=>{const[t,i]=AB(W_e),[r,s]=O.useState(!1),[o,a]=O.useState(!1),l=O.useRef();Hse(r);const{position:c,scale:u}=Mle({position:o?[0,0,0]:[-1.8,0,0],scale:o?[1.3,1.3,1.3]:[1,1,1],config:{tension:200,friction:20}}),f=(p,g,v="next")=>{if(!o){a(!0),n(!0);return}v==="next"?p<em.length?g(p+1):(g(0),a(!1),n(!1)):v==="prev"&&p>0&&(p<em.length?g(p-1):(g(0),a(!1),n(!1)))},h=p=>{var v;p.stopPropagation(),((v=p.object)==null?void 0:v.name)!=="flipbook"&&(i(0),a(!1),n(!1))};return ge.jsxs("group",{...e,children:[ge.jsxs("mesh",{ref:l,onPointerDown:h,castShadow:!1,receiveShadow:!1,position:[0,0,-1],raycast:(...p)=>{l.current&&Ni.prototype.raycast.call(l.current,...p)},children:[ge.jsx("planeGeometry",{args:[100,100]}),ge.jsx("meshBasicMaterial",{visible:!1,transparent:!0,opacity:0,depthWrite:!1})]}),ge.jsxs(Lle.group,{name:"flipbook",position:c,scale:u,"rotation-y":-Math.PI/2,onPointerDown:p=>{p.stopPropagation(),p.point.x>Wb/2?f(t,i,"next"):f(t,i,"prev")},onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),children:[[...em].map((p,g)=>ge.jsx(Z_e,{page:t,number:g,opened:t>g,bookClosed:t===0||t===em.length,...p},g)),ge.jsx(ime,{position:[0,-1.1,1],opacity:.18,scale:[32,16,32],blur:3.5,far:10,resolution:1024,frames:1})]})]})},NK=O.forwardRef((n,e)=>{const t=O.useRef(),i=O.useRef(),r=Rr("/models/TinkerBellSmall.glb"),s=cd("/animations/TinkerBell.fbx"),{actions:o}=xW([s.animations[0]],t);return O.useEffect(()=>{var l,c;const a=(l=s.animations[0])==null?void 0:l.name;o&&a&&((c=o[a])==null||c.reset().fadeIn(.5).play())},[o,s]),O.useImperativeHandle(e,()=>i.current),ge.jsxs("group",{ref:t,...n,children:[ge.jsx("primitive",{object:r.scene}),ge.jsx("primitive",{object:r.scene.getObjectByName("LeftShoe"),ref:i})]})});Rr.preload("/models/TinkerBellSmall.glb");cd.preload("/animations/TinkerBell.fbx");NK.displayName="Tinkerbell";const UK=O.forwardRef((n,e)=>{const t=O.useRef(),i=O.useRef();O.useImperativeHandle(e,()=>({tinker:t.current}));const{isMobile:r}=q1(),s=O.useRef(1),o=O.useRef(1),a=O.useRef(1),l=O.useRef(0),c=O.useRef(0),u=O.useRef(0),f=O.useRef(!1),h=O.useRef(new so),p=O.useRef(new so),g=.4,v=O.useRef(null);return Go(({clock:_})=>{const S=r?.6:.1,A=r?2.8:1.7,T=r?7:1.1,b=r?1:2,C=r?2:1,L=r?2:.1,P=0,k=r?0:1,I=r?0:-1.85,D=r?.45:.5,G=_.getElapsedTime()*D,H=Math.sin(G*b+1.2)*T+I,q=Math.sin(G*C+.4)*A+k,W=Math.sin(G*L-.7)*S+P;if(t.current){t.current.position.x=H,t.current.position.y=q,t.current.position.z=W;const te=H>l.current?1:-1,ee=q>c.current?1:-1,ne=W>u.current?1:-1,Y=te!==s.current,Q=ee!==o.current,F=ne!==a.current;if((Y||Q||F)&&!f.current)switch(s.current=te,o.current=ee,a.current=ne,f.current=!0,v.current=G,h.current.copy(t.current.rotation),`${te}${ee}${ne}`){case"111":p.current.set(Math.PI/15,.3*Math.PI,-Math.PI/16);break;case"1-11":p.current.set(-Math.PI/12,0,-Math.PI/20);break;case"-111":p.current.set(Math.PI/12,.9*Math.PI,Math.PI/16);break;case"-1-11":p.current.set(-Math.PI/12,Math.PI,Math.PI/20);break;case"11-1":p.current.set(Math.PI/16,0,Math.PI/20);break;case"1-1-1":p.current.set(-Math.PI/16,0,Math.PI/16);break;case"-11-1":p.current.set(Math.PI/20,.9*Math.PI,-Math.PI/20);break;case"-1-1-1":p.current.set(-Math.PI/20,.9*Math.PI,-Math.PI/16);break;default:p.current.set(0,0,0)}if(f.current){const ie=(G-v.current)/g;ie>=1?(f.current=!1,t.current.rotation.copy(p.current)):(t.current.rotation.x=Gn.lerp(h.current.x,p.current.x,ie),t.current.rotation.y=Gn.lerp(h.current.y,p.current.y,ie),t.current.rotation.z=Gn.lerp(h.current.z,p.current.z,ie))}l.current=H,c.current=q,u.current=W}}),ge.jsx("group",{ref:t,...n,children:ge.jsx("group",{name:"trailAnchor",children:ge.jsx(NK,{ref:i,scale:r?.002:.001})})})});UK.displayName="TinkerbellController";const qL=j8((n,e)=>({emitters:{},registerEmitter:(t,i)=>{if(e().emitters[t]){console.warn(`Emitter ${t} already exists`);return}n(r=>(r.emitters[t]=i,r))},unregisterEmitter:t=>{n(i=>(delete i.emitters[t],i))},emit:(t,...i)=>{const r=e().emitters[t];if(!r){console.warn(`Emitter ${t} not found`);return}r(...i)}})),V5=new re,H5=new so,z5=new Pi,$5=new re(1,1,1),W5=new Lt,bp=new ht,t1e=({name:n,settings:e={},alphaMap:t,geometry:i,...r})=>{const s=qL(b=>b.registerEmitter),o=qL(b=>b.unregisterEmitter),{nbParticles:a=1e3,intensity:l=1.2,renderMode:c="mesh",fadeSize:u=[0,0],fadeAlpha:f=[0,1]}=e,h=O.useRef(),p=O.useMemo(()=>new Df(.5,.5),[]),[g]=O.useState({instanceColor:new Float32Array(a*3),instanceColorEnd:new Float32Array(a*3),instanceDirection:new Float32Array(a*3),instanceLifetime:new Float32Array(a*2),instanceSpeed:new Float32Array(a*1),instanceRotationSpeed:new Float32Array(a*3)}),v=O.useRef(0),_=O.useRef(0),S=O.useRef(!1),A=(b,C)=>{const L=h.current.geometry.getAttribute("instanceColor"),P=h.current.geometry.getAttribute("instanceColorEnd"),k=h.current.geometry.getAttribute("instanceDirection"),I=h.current.geometry.getAttribute("instanceLifetime"),D=h.current.geometry.getAttribute("instanceSpeed"),G=h.current.geometry.getAttribute("instanceRotationSpeed");for(let H=0;H<b;H++){v.current>=a&&(v.current=0);const{scale:q,rotation:W,rotationSpeed:te,position:ee,direction:ne,lifetime:Y,colorStart:Q,colorEnd:F,speed:ie}=C();V5.set(...ee),H5.set(...W),z5.setFromEuler(H5),$5.set(...q),W5.compose(V5,z5,$5),h.current.setMatrixAt(v.current,W5),bp.setStyle(Q),L.set([bp.r,bp.g,bp.b],v.current*3),P.set([bp.r,bp.g,bp.b],v.current*3),G.set(te,v.current*3),I.set(Y,v.current*2),D.set(ie,v.current),k.set(ne,v.current*3),v.current++,v.current=v.current%a}S.current=!0};O.useEffect(()=>(s(n,A),()=>{o(n)}),[]),Go(({clock:b})=>{var L,P,k;if(!h.current)return;h.current.material.uniforms.uIntensity.value=l,h.current.material.uniforms.uFadeSize.value=u,h.current.material.uniforms.uFadeAlpha.value=f;const C=h.current.material;Array.isArray(C)&&((P=(L=C[0])==null?void 0:L.uniforms)!=null&&P.uTime)?C[0].uniforms.uTime.value=b.elapsedTime:(k=C==null?void 0:C.uniforms)!=null&&k.uTime&&(C.uniforms.uTime.value=b.elapsedTime)});const T=()=>{if(!S.current||!h.current)return;[h.current.instanceMatrix,h.current.geometry.getAttribute("instanceColor"),h.current.geometry.getAttribute("instanceColorEnd"),h.current.geometry.getAttribute("instanceDirection"),h.current.geometry.getAttribute("instanceLifetime"),h.current.geometry.getAttribute("instanceSpeed"),h.current.geometry.getAttribute("instanceRotationSpeed")].forEach(C=>{C.clearUpdateRanges(),_.current>v.current?(C.addUpdateRange(0,v.current*C.itemSize),C.addUpdateRange(_.current*C.itemSize,a*C.itemSize-_.current*C.itemSize)):C.addUpdateRange(_.current*C.itemSize,v.current*C.itemSize-_.current*C.itemSize),C.needsUpdate=!0}),_.current=v.current,S.current=!1};return ge.jsx("group",{...r,children:ge.jsxs("instancedMesh",{args:[p,null,a],ref:h,onBeforeRender:T,children:[i,ge.jsx("particlesMaterial",{transparent:!0,depthWrite:!1,alphaMap:t,defines:{BILLBOARD_MODE:c==="billboard",MESH_MODE:c==="mesh"}}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceColor",args:[g.instanceColor],itemSize:3,count:a,usage:Rp}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceColorEnd",args:[g.instanceColorEnd],itemSize:3,count:a,usage:Rp}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceDirection",args:[g.instanceDirection],itemSize:3,count:a,usage:Rp}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceLifetime",args:[g.instanceLifetime],itemSize:2,count:a,usage:Rp}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceSpeed",args:[g.instanceSpeed],itemSize:1,count:a,usage:Rp}),ge.jsx("instancedBufferAttribute",{attach:"geometry-attributes-instanceRotationSpeed",args:[g.instanceRotationSpeed],itemSize:3,count:a,usage:Rp})]})})},n1e=vue({uTime:0,uIntensity:1,uFadeSize:[.1,.9],uFadeAlpha:[0,1],alphaMap:null},`
mat4 rotationX(float angle) {
  float s = sin(angle);
  float c = cos(angle);
  return mat4(
      1,  0,  0,  0,
      0,  c, -s,  0,
      0,  s,  c,  0,
      0,  0,  0,  1
  );
}

mat4 rotationY(float angle) {
  float s = sin(angle);
  float c = cos(angle);
  return mat4(
       c,  0,  s,  0,
       0,  1,  0,  0,
      -s,  0,  c,  0,
       0,  0,  0,  1
  );
}

mat4 rotationZ(float angle) {
  float s = sin(angle);
  float c = cos(angle);
  return mat4(
      c, -s,  0,  0,
      s,  c,  0,  0,
      0,  0,  1,  0,
      0,  0,  0,  1
  );
}

uniform float uTime;
uniform vec2 uFadeSize;

varying vec2 vUv;
varying vec3 vColor;
varying vec3 vColorEnd;
varying float vProgress; // between 0 and 1 
varying float vAge;
varying float vDuration;

attribute float instanceSpeed;
attribute vec3 instanceRotationSpeed;
attribute vec3 instanceDirection;
attribute vec3 instanceColor;
attribute vec3 instanceColorEnd;
attribute vec2 instanceLifetime; // x: startTime, y: duration

// ensure particles always face camera
vec3 billboard(vec2 v, mat4 view) {
  vec3 up = vec3(view[0][1], view[1][1], view[2][1]);
  vec3 right = vec3(view[0][0], view[1][0], view[2][0]);
  vec3 p = right * v.x + up * v.y;
  return p;
}

void main() {
  float startTime = instanceLifetime.x; 
  float duration = instanceLifetime.y;
  float age = uTime - startTime;
  vProgress = age / duration;
  vAge = age;
  vDuration = duration;
  // stop processing unborn/dead particles asap (position 9999 hella far from camera hehe)
  if (vProgress < 0.0 || vProgress > 1.0) {
    gl_Position = vec4(vec3(9999.0), 1.0);
    return;
  }

  // calculate scale for fade in/out
  float scale = smoothstep(0.0, uFadeSize.x, vProgress) * smoothstep(1.01, uFadeSize.y, vProgress);

  vec3 normalizedDirection = length(instanceDirection) > 0.0 ? normalize(instanceDirection) : vec3(0.0); // normalize to avoid particles moving faster when dir is not a unit vec
  vec3 offset = normalizedDirection * age * instanceSpeed; // calc particle offset based on age and speed

  vec3 rotationSpeed = instanceRotationSpeed * age;
  mat4 rotX = rotationX(rotationSpeed.x);
  mat4 rotY = rotationY(rotationSpeed.y);
  mat4 rotZ = rotationZ(rotationSpeed.z);
  mat4 rotationMatrix = rotZ * rotY * rotX;

  vec4 startPosition = modelMatrix * instanceMatrix * rotationMatrix * vec4(position, 1.0);
  vec3 instancePosition = startPosition.xyz;

  vec3 finalPosition = instancePosition + offset; // get final pos by applying offset
  vec4 mvPosition = modelViewMatrix * vec4(finalPosition, 1.0); 
#ifdef MESH_MODE
  /* Mesh Mode */
    vec4 startPosition = modelMatrix * instanceMatrix * rotationMatrix * vec4(position * scale, 1.0);

    vec3 instancePosition = startPosition.xyz;

    vec3 finalPosition = instancePosition + offset;
    mvPosition = modelViewMatrix * vec4(finalPosition, 1.0);
#endif

#ifdef BILLBOARD_MODE
  /* Billboard Mode */
    vec4 localPos = vec4(position, 1.0);
    localPos.xyz = billboard(position.xy, viewMatrix) * scale; // transform to make particles always face camera

    vec4 worldPos = modelMatrix * instanceMatrix * rotationMatrix * localPos;
    worldPos.xyz += offset; // Apply offset (particle pos) in world space
    mvPosition = modelViewMatrix * worldPos;
#endif
  
  gl_Position = projectionMatrix * mvPosition; // transform world pos to camera space
  
  vUv = uv;
  vColor = instanceColor;
  vColorEnd = instanceColorEnd;
}
`,`
varying vec2 vUv;
varying vec3 vColor;
varying vec3 vColorEnd;
varying float vProgress;
varying float vAge;
varying float vDuration;
uniform float uIntensity;
uniform vec2 uFadeAlpha;
uniform sampler2D alphaMap;

void main() {
  if (vProgress < 0.0 || vProgress > 1.0) {
    discard; // discard used to prevent unborn and dead particles from being rendered
  }
  vec3 finalColor = mix(vColor, vColorEnd, vProgress);

  // calculate fade in / fade out
  float alpha = smoothstep(0.0, uFadeAlpha.x, vProgress) * smoothstep(1.01, uFadeAlpha.y, vProgress);

  finalColor *= uIntensity;

// use alphamap if we have custom texture for particles
#ifdef USE_ALPHAMAP
    vec2 uv = vUv;
    vec4 tex = texture2D(alphaMap, uv);
    gl_FragColor = vec4(finalColor, tex.a * alpha);
#else
    gl_FragColor = vec4(finalColor, alpha);
#endif
}`);_b({ParticlesMaterial:n1e});var iS=Pz();const i1e=Ov(iS);function r1e(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function GK(...n){return e=>n.forEach(t=>r1e(t,e))}function Wv(...n){return O.useCallback(GK(...n),n)}const VK=O.forwardRef((n,e)=>{const{children:t,...i}=n,r=O.Children.toArray(t),s=r.find(s1e);if(s){const o=s.props.children,a=r.map(l=>l===s?O.Children.count(o)>1?O.Children.only(null):O.isValidElement(o)?o.props.children:null:l);return O.createElement(JL,Vi({},i,{ref:e}),O.isValidElement(o)?O.cloneElement(o,void 0,a):null)}return O.createElement(JL,Vi({},i,{ref:e}),t)});VK.displayName="Slot";const JL=O.forwardRef((n,e)=>{const{children:t,...i}=n;return O.isValidElement(t)?O.cloneElement(t,{...o1e(i,t.props),ref:GK(e,t.ref)}):O.Children.count(t)>1?O.Children.only(null):null});JL.displayName="SlotClone";const HK=({children:n})=>O.createElement(O.Fragment,null,n);function s1e(n){return O.isValidElement(n)&&n.type===HK}function o1e(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const a1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gd=a1e.reduce((n,e)=>{const t=O.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?VK:e;return O.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),O.createElement(a,Vi({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function l1e(n,e){n&&iS.flushSync(()=>n.dispatchEvent(e))}const c1e=O.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?i1e.createPortal(O.createElement(gd.div,Vi({},r,{ref:e})),i):null}),u1e=c1e;var j5=Object.prototype.hasOwnProperty;function p1(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&p1(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(j5.call(n,t)&&++i&&!j5.call(e,t)||!(t in e)||!p1(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function jb(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var Kb=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};Kb.prototype._test=function(e){var t=this.fn;try{uv(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return uv(this.modifiers.slice(),t,this)(e)}catch{return!1}};Kb.prototype._check=function(e){try{uv(this.modifiers.slice(),this.fn,this)(e)}catch{if(uv(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!uv(this.modifiers.slice(),this.fn,this)(e))throw null};Kb.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){$K(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function zK(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function uv(n,e,t){if(n.length){var i=n.shift(),r=uv(n,e,t);return i.perform(r,t)}else return zK(e)}function $K(n,e,t){if(n.length){var i=n.shift(),r=$K(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(zK(e,"async")(s))}}var f1e=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},Pk=function(n){function e(t,i,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),vu=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};vu.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new Kb(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};vu.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new f1e(t,e.simple,e.async)),this};vu.prototype._clone=function(){return new vu(this.chain.slice(),this.nextRuleModifiers.slice())};vu.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};vu.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new Pk(i,e,r))}}),t};vu.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new Pk(t,e,i)}})};vu.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){WK(e,t.chain.slice(),i,r)})};function WK(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){WK(n,e,t,i)},function(s){i(new Pk(r,n,s))})}else t(n)}var K5=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function h1e(n,e){return e===void 0&&(e=!1),{simple:function(t){return K5(t,e)||n.check(t)===void 0},async:function(t){return K5(t,e)||n.testAsync(t)}}}function fa(){return typeof Proxy<"u"?jK(new vu):QL(new vu)}var m1={};fa.extend=function(n){Object.assign(m1,n)};fa.clearCustomRules=function(){m1={}};function jK(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=jK(n._clone());if(i in Sw)return r._applyModifier(Sw[i],i);if(i in m1)return r._applyRule(m1[i],i);if(i in ZL)return r._applyRule(ZL[i],i)}})}function QL(n){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=QL(s._clone()),u=c._applyRule(r[o],o).apply(void 0,a);return u}}),s},t=e(ZL,n),i=e(m1,t);return Object.keys(Sw).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=QL(i._clone());return s._applyModifier(Sw[r],r)}})}),i}var Sw={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return UA(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(UA(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&UA(e).every(n)}},async:function(n){return function(e){return Promise.all(UA(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return X5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return X5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function X5(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function UA(n){return typeof n=="string"?n.split(""):n}var ZL={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||d1e;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return T0("string")},boolean:function(){return T0("boolean")},undefined:function(){return T0("undefined")},null:function(){return T0("null")},array:function(){return T0("array")},object:function(){return T0("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return p1e(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:h1e};function T0(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function d1e(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function p1e(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Ai="colors",To="sizes",Xt="space",m1e={gap:Xt,gridGap:Xt,columnGap:Xt,gridColumnGap:Xt,rowGap:Xt,gridRowGap:Xt,inset:Xt,insetBlock:Xt,insetBlockEnd:Xt,insetBlockStart:Xt,insetInline:Xt,insetInlineEnd:Xt,insetInlineStart:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,marginBlock:Xt,marginBlockEnd:Xt,marginBlockStart:Xt,marginInline:Xt,marginInlineEnd:Xt,marginInlineStart:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,paddingBlock:Xt,paddingBlockEnd:Xt,paddingBlockStart:Xt,paddingInline:Xt,paddingInlineEnd:Xt,paddingInlineStart:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,scrollMargin:Xt,scrollMarginTop:Xt,scrollMarginRight:Xt,scrollMarginBottom:Xt,scrollMarginLeft:Xt,scrollMarginX:Xt,scrollMarginY:Xt,scrollMarginBlock:Xt,scrollMarginBlockEnd:Xt,scrollMarginBlockStart:Xt,scrollMarginInline:Xt,scrollMarginInlineEnd:Xt,scrollMarginInlineStart:Xt,scrollPadding:Xt,scrollPaddingTop:Xt,scrollPaddingRight:Xt,scrollPaddingBottom:Xt,scrollPaddingLeft:Xt,scrollPaddingX:Xt,scrollPaddingY:Xt,scrollPaddingBlock:Xt,scrollPaddingBlockEnd:Xt,scrollPaddingBlockStart:Xt,scrollPaddingInline:Xt,scrollPaddingInlineEnd:Xt,scrollPaddingInlineStart:Xt,fontSize:"fontSizes",background:Ai,backgroundColor:Ai,backgroundImage:Ai,borderImage:Ai,border:Ai,borderBlock:Ai,borderBlockEnd:Ai,borderBlockStart:Ai,borderBottom:Ai,borderBottomColor:Ai,borderColor:Ai,borderInline:Ai,borderInlineEnd:Ai,borderInlineStart:Ai,borderLeft:Ai,borderLeftColor:Ai,borderRight:Ai,borderRightColor:Ai,borderTop:Ai,borderTopColor:Ai,caretColor:Ai,color:Ai,columnRuleColor:Ai,fill:Ai,outline:Ai,outlineColor:Ai,stroke:Ai,textDecorationColor:Ai,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:To,minBlockSize:To,maxBlockSize:To,inlineSize:To,minInlineSize:To,maxInlineSize:To,width:To,minWidth:To,maxWidth:To,height:To,minHeight:To,maxHeight:To,flexBasis:To,gridTemplateColumns:To,gridTemplateRows:To,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},g1e=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,jv=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,g1e))(e);return r in n?n[r]:n[r]=t(e,...i)}},vm=Symbol.for("sxs.internal"),Ik=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),Y5=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:v1e}=Object.prototype,eD=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),y1e=/\s+(?![^()]*\))/,w0=n=>e=>n(...typeof e=="string"?String(e).split(y1e):[e]),q5={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:w0((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:w0((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:w0((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:w0((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:w0((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:w0((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},iP=/([\d.]+)([^]*)/,x1e=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,_1e=(n,e)=>n in S1e&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${eD(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${eD(n)}:${i}fit-content`)+s):String(e),S1e={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Pf=n=>n?n+"-":"",KK=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?Pf(e)+(a.includes("$")?"":Pf(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),E1e=/\s*,\s*(?![^()]*\))/,A1e=Object.prototype.toString,$0=(n,e,t,i,r)=>{let s,o,a;const l=(c,u,f)=>{let h,p;const g=v=>{for(h in v){const A=h.charCodeAt(0)===64,T=A&&Array.isArray(v[h])?v[h]:[v[h]];for(p of T){const b=/[A-Z]/.test(S=h)?S:S.replace(/-[^]/g,L=>L[1].toUpperCase()),C=typeof p=="object"&&p&&p.toString===A1e&&(!i.utils[b]||!u.length);if(b in i.utils&&!C){const L=i.utils[b];if(L!==o){o=L,g(L(p)),o=null;continue}}else if(b in q5){const L=q5[b];if(L!==a){a=L,g(L(p)),a=null;continue}}if(A&&(_=h.slice(1)in i.media?"@media "+i.media[h.slice(1)]:h,h=_.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(L,P,k,I,D,G)=>{const H=iP.test(P),q=.0625*(H?-1:1),[W,te]=H?[I,P]:[P,I];return"("+(k[0]==="="?"":k[0]===">"===H?"max-":"min-")+W+":"+(k[0]!=="="&&k.length===1?te.replace(iP,(ee,ne,Y)=>Number(ne)+q*(k===">"?1:-1)+Y):te)+(D?") and ("+(D[0]===">"?"min-":"max-")+W+":"+(D.length===1?G.replace(iP,(ee,ne,Y)=>Number(ne)+q*(D===">"?-1:1)+Y):G):"")+")"})),C){const L=A?f.concat(h):[...f],P=A?[...u]:x1e(u,h.split(E1e));s!==void 0&&r(J5(...s)),s=void 0,l(p,P,L)}else s===void 0&&(s=[[],u,f]),h=A||h.charCodeAt(0)!==36?h:`--${Pf(i.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=C?p:typeof p=="number"?p&&b in T1e?String(p)+"px":String(p):KK(_1e(b,p??""),i.prefix,i.themeMap[b]),s[0].push(`${A?`${h} `:`${eD(h)}:`}${p}`)}}var _,S};g(c),s!==void 0&&r(J5(...s)),s=void 0};l(n,e,t)},J5=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,T1e={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Q5=n=>String.fromCharCode(n+(n>25?39:97)),ym=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=Q5(t%52)+i;return Q5(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Ox=["themed","global","styled","onevar","resonevar","allvar","inline"],w1e=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},b1e=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const r=Object(n).styleSheets||[];for(const a of r)if(w1e(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),g=Ox[p[0]];g&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[g]={group:f,index:l,cache:new Set(p)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=Ox.length-1;a>=0;--a){const l=Ox[a];if(!o[l]){const c=Ox[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}M1e(o[l])}};return i(),e},M1e=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},xx=Symbol(),C1e=jv(),Z5=(n,e)=>C1e(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[vm]){i.type==null&&(i.type=r[vm].type);for(const s of r[vm].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(R1e(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),P1e(n,i,e)}),R1e=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${Pf(r.prefix)}c-${ym(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const h in t)l[h]=String(t[h]);if(typeof n=="object"&&n)for(const h in n){u=l,f=h,v1e.call(u,f)||(l[h]="undefined");const p=n[h];for(const g in p){const v={[h]:String(g)};String(g)==="undefined"&&c.push(h);const _=p[g],S=[v,_,!Y5(_)];o.push(S)}}var u,f;if(typeof e=="object"&&e)for(const h of e){let{css:p,...g}=h;p=typeof p=="object"&&p||{};for(const _ in g)g[_]=String(g[_]);const v=[g,p,!Y5(p)];a.push(v)}return[s,i,o,a,l,c]},P1e=(n,e,t)=>{const[i,r,s,o]=I1e(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let p=0;p<h[xx].length;p++){const[g,v]=h[xx][p];f.rules[g].apply(v)}return h[xx]=[],null}return h[xx]=[],h.rules={},Ox.forEach(p=>h.rules[p]={apply:g=>h[xx].push([p,g])}),h})(t):null,l=(a||t).rules,c=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||L1e;const{css:h,...p}=f,g={};for(const S in s)if(delete p[S],S in f){let A=f[S];typeof A=="object"&&A?g[S]={"@initial":s[S],...A}:(A=String(A),g[S]=A!=="undefined"||o.has(S)?A:s[S])}else g[S]=s[S];const v=new Set([...r]);for(const[S,A,T,b]of e.composers){t.rules.styled.cache.has(S)||(t.rules.styled.cache.add(S),$0(A,[`.${S}`],[],n,P=>{l.styled.apply(P)}));const C=eV(T,g,n.media),L=eV(b,g,n.media,!0);for(const P of C)if(P!==void 0)for(const[k,I,D]of P){const G=`${S}-${ym(I)}-${k}`;v.add(G);const H=(D?t.rules.resonevar:t.rules.onevar).cache,q=D?l.resonevar:l.onevar;H.has(G)||(H.add(G),$0(I,[`.${G}`],[],n,W=>{q.apply(W)}))}for(const P of L)if(P!==void 0)for(const[k,I]of P){const D=`${S}-${ym(I)}-${k}`;v.add(D),t.rules.allvar.cache.has(D)||(t.rules.allvar.cache.add(D),$0(I,[`.${D}`],[],n,G=>{l.allvar.apply(G)}))}}if(typeof h=="object"&&h){const S=`${i}-i${ym(h)}-css`;v.add(S),t.rules.inline.cache.has(S)||(t.rules.inline.cache.add(S),$0(h,[`.${S}`],[],n,A=>{l.inline.apply(A)}))}for(const S of String(f.className||"").trim().split(/\s+/))S&&v.add(S);const _=p.className=[...v].join(" ");return{type:e.type,className:_,selector:c,props:p,toString:()=>_,deferredInjector:a}};return Ik(u,{className:i,selector:c,[vm]:e,toString:()=>(t.rules.styled.cache.has(i)||u(),i)})},I1e=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const c=o[l];(i[l]===void 0||c!=="undefined"||a.includes(c))&&(i[l]=c)}}return[e,t,i,new Set(r)]},eV=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let h=e[l];if(h!==f){if(typeof h!="object"||!h)continue e;{let p,g,v=0;for(const _ in h){if(f===String(h[_])){if(_!=="@initial"){const S=_.slice(1);(g=g||[]).push(S in t?t[S]:_.replace(/^@media ?/,"")),u=!0}c+=v,p=!0}++v}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!p)continue e}}}(r[c]=r[c]||[]).push([i?"cv":`${l}-${s[l]}`,o,u])}return r},L1e={},D1e=jv(),B1e=(n,e)=>D1e(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=ym(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}$0(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return Ik(i,{toString:i})}),k1e=jv(),O1e=(n,e)=>k1e(n,()=>t=>{const i=`${Pf(n.prefix)}k-${ym(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];$0(t,[],[],n,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return Ik(r,{get name(){return r()},toString:r})}),F1e=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Pf(this.prefix)+Pf(this.scale)+this.token}toString(){return this.computedValue}},N1e=jv(),U1e=(n,e)=>N1e(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Pf(n.prefix)}t-${ym(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const c in i[l]){const u=`--${Pf(n.prefix)}${l}-${c}`,f=KK(String(i[l][c]),n.prefix,l);s[l][c]=new F1e(c,f,l,n.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),G1e=jv(),V1e=jv(),H1e=n=>{const e=(t=>{let i=!1;const r=G1e(t,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...m1e},utils:typeof s.utils=="object"&&s.utils||{}},f=b1e(l),h={css:Z5(u,f),globalCss:B1e(u,f),keyframes:O1e(u,f),createTheme:U1e(u,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(c)),h});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>V1e(t,()=>{const r=Z5(t,i);return(...s)=>{const o=r(...s),a=o[vm].type,l=de.forwardRef((c,u)=>{const f=c&&c.as||a,{props:h,deferredInjector:p}=o(c);return delete h.as,h.ref=u,p?de.createElement(de.Fragment,null,de.createElement(f,h),de.createElement(p,null)):de.createElement(f,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[vm]=o[vm],l}}))(e),e};function cf(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function XK(n,e=[]){let t=[];function i(s,o){const a=O.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:h,children:p,...g}=f,v=(h==null?void 0:h[n][l])||a,_=O.useMemo(()=>g,Object.values(g));return O.createElement(v.Provider,{value:_},p)}function u(f,h){const p=(h==null?void 0:h[n][l])||a,g=O.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const r=()=>{const s=t.map(o=>O.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return O.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,z1e(r,...e)]}function z1e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Kv(n){const e=O.useRef(n);return O.useEffect(()=>{e.current=n}),O.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function $1e(n,e=globalThis==null?void 0:globalThis.document){const t=Kv(n);O.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const tD="dismissableLayer.update",W1e="dismissableLayer.pointerDownOutside",j1e="dismissableLayer.focusOutside";let tV;const K1e=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X1e=O.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=O.useContext(K1e),[f,h]=O.useState(null),p=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,g]=O.useState({}),v=Wv(e,k=>h(k)),_=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(S),T=f?_.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,C=T>=A,L=Y1e(k=>{const I=k.target,D=[...u.branches].some(G=>G.contains(I));!C||D||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},p),P=q1e(k=>{const I=k.target;[...u.branches].some(G=>G.contains(I))||(o==null||o(k),a==null||a(k),k.defaultPrevented||l==null||l())},p);return $1e(k=>{T===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),O.useEffect(()=>{if(f)return i&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tV=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),nV(),()=>{i&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tV)}},[f,p,i,u]),O.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),nV())},[f,u]),O.useEffect(()=>{const k=()=>g({});return document.addEventListener(tD,k),()=>document.removeEventListener(tD,k)},[]),O.createElement(gd.div,Vi({},c,{ref:v,style:{pointerEvents:b?C?"auto":"none":void 0,...n.style},onFocusCapture:cf(n.onFocusCapture,P.onFocusCapture),onBlurCapture:cf(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:cf(n.onPointerDownCapture,L.onPointerDownCapture)}))});function Y1e(n,e=globalThis==null?void 0:globalThis.document){const t=Kv(n),i=O.useRef(!1),r=O.useRef(()=>{});return O.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let u=function(){YK(W1e,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function q1e(n,e=globalThis==null?void 0:globalThis.document){const t=Kv(n),i=O.useRef(!1);return O.useEffect(()=>{const r=s=>{s.target&&!i.current&&YK(j1e,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function nV(){const n=new CustomEvent(tD);document.dispatchEvent(n)}function YK(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?l1e(r,s):r.dispatchEvent(s)}const Xh=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},J1e=_J.useId||(()=>{});let Q1e=0;function Z1e(n){const[e,t]=O.useState(J1e());return Xh(()=>{t(i=>i??String(Q1e++))},[n]),e?`radix-${e}`:""}function Vm(n){return n.split("-")[0]}function rS(n){return n.split("-")[1]}function Xv(n){return["top","bottom"].includes(Vm(n))?"x":"y"}function Lk(n){return n==="y"?"height":"width"}function iV(n,e,t){let{reference:i,floating:r}=n;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=Xv(e),l=Lk(a),c=i[l]/2-r[l]/2,u=a==="x";let f;switch(Vm(e)){case"top":f={x:s,y:i.y-r.height};break;case"bottom":f={x:s,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:o};break;case"left":f={x:i.x-r.width,y:o};break;default:f={x:i.x,y:i.y}}switch(rS(e)){case"start":f[a]-=c*(t&&u?-1:1);break;case"end":f[a]+=c*(t&&u?-1:1)}return f}const eSe=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:c,y:u}=iV(l,i,a),f=i,h={},p=0;for(let g=0;g<s.length;g++){const{name:v,fn:_}=s[g],{x:S,y:A,data:T,reset:b}=await _({x:c,y:u,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:l,platform:o,elements:{reference:n,floating:e}});c=S??c,u=A??u,h={...h,[v]:{...h[v],...T}},b&&p<=50&&(p++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(l=b.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):b.rects),{x:c,y:u}=iV(l,f,a)),g=-1)}return{x:c,y:u,placement:f,strategy:r,middlewareData:h}};function qK(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function Ew(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function g1(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=e,g=qK(p),v=a[h?f==="floating"?"reference":"floating":f],_=Ew(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=Ew(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:i,y:r}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[f]);return{top:_.top-S.top+g.top,bottom:S.bottom-_.bottom+g.bottom,left:_.left-S.left+g.left,right:S.right-_.right+g.right}}const tSe=Math.min,Np=Math.max;function nD(n,e,t){return Np(n,tSe(e,t))}const rV=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n??{},{x:r,y:s,placement:o,rects:a,platform:l}=e;if(t==null)return{};const c=qK(i),u={x:r,y:s},f=Xv(o),h=rS(o),p=Lk(f),g=await l.getDimensions(t),v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",S=a.reference[p]+a.reference[f]-u[f]-a.floating[p],A=u[f]-a.reference[f],T=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let b=T?f==="y"?T.clientHeight||0:T.clientWidth||0:0;b===0&&(b=a.floating[p]);const C=S/2-A/2,L=c[v],P=b-g[p]-c[_],k=b/2-g[p]/2+C,I=nD(L,k,P),D=(h==="start"?c[v]:c[_])>0&&k!==I&&a.reference[p]<=a.floating[p];return{[f]:u[f]-(D?k<L?L-k:P-k:0),data:{[f]:I,centerOffset:k-I}}}}),nSe={left:"right",right:"left",bottom:"top",top:"bottom"};function Aw(n){return n.replace(/left|right|bottom|top/g,e=>nSe[e])}function iSe(n,e,t){t===void 0&&(t=!1);const i=rS(n),r=Xv(n),s=Lk(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Aw(o)),{main:o,cross:Aw(o)}}const rSe={start:"end",end:"start"};function sV(n){return n.replace(/start|end/g,e=>rSe[e])}const JK=["top","right","bottom","left"];JK.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const sSe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",flipAlignment:p=!0,...g}=n,v=Vm(i),_=f||(v===o||!p?[Aw(o)]:function(k){const I=Aw(k);return[sV(k),I,sV(I)]}(o)),S=[o,..._],A=await g1(e,g),T=[];let b=((t=r.flip)==null?void 0:t.overflows)||[];if(c&&T.push(A[v]),u){const{main:k,cross:I}=iSe(i,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));T.push(A[k],A[I])}if(b=[...b,{placement:i,overflows:T}],!T.every(k=>k<=0)){var C,L;const k=((C=(L=r.flip)==null?void 0:L.index)!=null?C:0)+1,I=S[k];if(I)return{data:{index:k,overflows:b},reset:{placement:I}};let D="bottom";switch(h){case"bestFit":{var P;const G=(P=b.map(H=>[H,H.overflows.filter(q=>q>0).reduce((q,W)=>q+W,0)]).sort((H,q)=>H[1]-q[1])[0])==null?void 0:P[0].placement;G&&(D=G);break}case"initialPlacement":D=o}if(i!==D)return{reset:{placement:D}}}return{}}}};function oV(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function aV(n){return JK.some(e=>n[e]>=0)}const oSe=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(i){const{rects:r}=i;switch(e){case"referenceHidden":{const s=oV(await g1(i,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:aV(s)}}}case"escaped":{const s=oV(await g1(i,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:s,escaped:aV(s)}}}default:return{}}}}},aSe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await async function(s,o){const{placement:a,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),f=Vm(a),h=rS(a),p=Xv(a)==="x",g=["left","top"].includes(f)?-1:1,v=u&&p?-1:1,_=typeof o=="function"?o(s):o;let{mainAxis:S,crossAxis:A,alignmentAxis:T}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return h&&typeof T=="number"&&(A=h==="end"?-1*T:T),p?{x:A*v,y:S*g}:{x:S*g,y:A*v}}(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function QK(n){return n==="x"?"y":"x"}const lSe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:S,y:A}=_;return{x:S,y:A}}},...l}=n,c={x:t,y:i},u=await g1(e,l),f=Xv(Vm(r)),h=QK(f);let p=c[f],g=c[h];if(s){const _=f==="y"?"bottom":"right";p=nD(p+u[f==="y"?"top":"left"],p,p-u[_])}if(o){const _=h==="y"?"bottom":"right";g=nD(g+u[h==="y"?"top":"left"],g,g-u[_])}const v=a.fn({...e,[f]:p,[h]:g});return{...v,data:{x:v.x-t,y:v.y-i}}}}},cSe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=n,u={x:t,y:i},f=Xv(r),h=QK(f);let p=u[f],g=u[h];const v=typeof a=="function"?a({...s,placement:r}):a,_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=f==="y"?"height":"width",L=s.reference[f]-s.floating[C]+_.mainAxis,P=s.reference[f]+s.reference[C]-_.mainAxis;p<L?p=L:p>P&&(p=P)}if(c){var S,A,T,b;const C=f==="y"?"width":"height",L=["top","left"].includes(Vm(r)),P=s.reference[h]-s.floating[C]+(L&&(S=(A=o.offset)==null?void 0:A[h])!=null?S:0)+(L?0:_.crossAxis),k=s.reference[h]+s.reference[C]+(L?0:(T=(b=o.offset)==null?void 0:b[h])!=null?T:0)-(L?_.crossAxis:0);g<P?g=P:g>k&&(g=k)}return{[f]:p,[h]:g}}}},uSe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:o,...a}=n,l=await g1(e,a),c=Vm(t),u=rS(t);let f,h;c==="top"||c==="bottom"?(f=c,h=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(h=c,f=u==="end"?"top":"bottom");const p=Np(l.left,0),g=Np(l.right,0),v=Np(l.top,0),_=Np(l.bottom,0),S={availableHeight:i.floating.height-(["left","right"].includes(t)?2*(v!==0||_!==0?v+_:Np(l.top,l.bottom)):l[f]),availableWidth:i.floating.width-(["top","bottom"].includes(t)?2*(p!==0||g!==0?p+g:Np(l.left,l.right)):l[h])},A=await r.getDimensions(s.floating);o==null||o({...e,...S});const T=await r.getDimensions(s.floating);return A.width!==T.width||A.height!==T.height?{reset:{rects:!0}}:{}}}};function ZK(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function Bf(n){if(n==null)return window;if(!ZK(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function sS(n){return Bf(n).getComputedStyle(n)}function _f(n){return ZK(n)?"":n?(n.nodeName||"").toLowerCase():""}function eX(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function yu(n){return n instanceof Bf(n).HTMLElement}function vd(n){return n instanceof Bf(n).Element}function Dk(n){return typeof ShadowRoot>"u"?!1:n instanceof Bf(n).ShadowRoot||n instanceof ShadowRoot}function Xb(n){const{overflow:e,overflowX:t,overflowY:i}=sS(n);return/auto|scroll|overlay|hidden/.test(e+i+t)}function fSe(n){return["table","td","th"].includes(_f(n))}function lV(n){const e=/firefox/i.test(eX()),t=sS(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function tX(){return!/^((?!chrome|android).)*safari/i.test(eX())}const cV=Math.min,m_=Math.max,Tw=Math.round;function Sf(n,e,t){var i,r,s,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect();let l=1,c=1;e&&yu(n)&&(l=n.offsetWidth>0&&Tw(a.width)/n.offsetWidth||1,c=n.offsetHeight>0&&Tw(a.height)/n.offsetHeight||1);const u=vd(n)?Bf(n):window,f=!tX()&&t,h=(a.left+(f&&(i=(r=u.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/l,p=(a.top+(f&&(s=(o=u.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/c,g=a.width/l,v=a.height/c;return{width:g,height:v,top:p,right:h+g,bottom:p+v,left:h,x:h,y:p}}function id(n){return(e=n,(e instanceof Bf(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function Yb(n){return vd(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function nX(n){return Sf(id(n)).left+Yb(n).scrollLeft}function hSe(n,e,t){const i=yu(e),r=id(e),s=Sf(n,i&&function(l){const c=Sf(l);return Tw(c.width)!==l.offsetWidth||Tw(c.height)!==l.offsetHeight}(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&t!=="fixed")if((_f(e)!=="body"||Xb(r))&&(o=Yb(e)),yu(e)){const l=Sf(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else r&&(a.x=nX(r));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function iX(n){return _f(n)==="html"?n:n.assignedSlot||n.parentNode||(Dk(n)?n.host:null)||id(n)}function uV(n){return yu(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function iD(n){const e=Bf(n);let t=uV(n);for(;t&&fSe(t)&&getComputedStyle(t).position==="static";)t=uV(t);return t&&(_f(t)==="html"||_f(t)==="body"&&getComputedStyle(t).position==="static"&&!lV(t))?e:t||function(i){let r=iX(i);for(Dk(r)&&(r=r.host);yu(r)&&!["html","body"].includes(_f(r));){if(lV(r))return r;r=r.parentNode}return null}(n)||e}function fV(n){if(yu(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Sf(n);return{width:e.width,height:e.height}}function rX(n){const e=iX(n);return["html","body","#document"].includes(_f(e))?n.ownerDocument.body:yu(e)&&Xb(e)?e:rX(e)}function ww(n,e){var t;e===void 0&&(e=[]);const i=rX(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Bf(i),o=r?[s].concat(s.visualViewport||[],Xb(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(ww(o))}function hV(n,e,t){return e==="viewport"?Ew(function(i,r){const s=Bf(i),o=id(i),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,u=0,f=0;if(a){l=a.width,c=a.height;const h=tX();(h||!h&&r==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}return{width:l,height:c,x:u,y:f}}(n,t)):vd(e)?function(i,r){const s=Sf(i,!1,r==="fixed"),o=s.top+i.clientTop,a=s.left+i.clientLeft;return{top:o,left:a,x:a,y:o,right:a+i.clientWidth,bottom:o+i.clientHeight,width:i.clientWidth,height:i.clientHeight}}(e,t):Ew(function(i){var r;const s=id(i),o=Yb(i),a=(r=i.ownerDocument)==null?void 0:r.body,l=m_(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=m_(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-o.scrollLeft+nX(i);const f=-o.scrollTop;return sS(a||s).direction==="rtl"&&(u+=m_(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:f}}(id(n)))}function dSe(n){const e=ww(n),t=["absolute","fixed"].includes(sS(n).position)&&yu(n)?iD(n):n;return vd(t)?e.filter(i=>vd(i)&&function(r,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(r.contains(s))return!0;if(o&&Dk(o)){let a=s;do{if(a&&r===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(i,t)&&_f(i)!=="body"):[]}const pSe={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?dSe(e):[].concat(t),i],o=s[0],a=s.reduce((l,c)=>{const u=hV(e,c,r);return l.top=m_(u.top,l.top),l.right=cV(u.right,l.right),l.bottom=cV(u.bottom,l.bottom),l.left=m_(u.left,l.left),l},hV(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=yu(t),s=id(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&i!=="fixed")&&((_f(t)!=="body"||Xb(s))&&(o=Yb(t)),yu(t))){const l=Sf(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:vd,getDimensions:fV,getOffsetParent:iD,getDocumentElement:id,getElementRects:n=>{let{reference:e,floating:t,strategy:i}=n;return{reference:hSe(e,iD(t),i),floating:{...fV(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>sS(n).direction==="rtl"};function mSe(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=i,l=r&&!a,c=s&&!a,u=l||c?[...vd(n)?ww(n):[],...ww(e)]:[];u.forEach(g=>{l&&g.addEventListener("scroll",t,{passive:!0}),c&&g.addEventListener("resize",t)});let f,h=null;if(o){let g=!0;h=new ResizeObserver(()=>{g||t(),g=!1}),vd(n)&&!a&&h.observe(n),h.observe(e)}let p=a?Sf(n):null;return a&&function g(){const v=Sf(n);!p||v.x===p.x&&v.y===p.y&&v.width===p.width&&v.height===p.height||t(),p=v,f=requestAnimationFrame(g)}(),t(),()=>{var g;u.forEach(v=>{l&&v.removeEventListener("scroll",t),c&&v.removeEventListener("resize",t)}),(g=h)==null||g.disconnect(),h=null,a&&cancelAnimationFrame(f)}}const gSe=(n,e,t)=>eSe(n,e,{platform:pSe,...t});var rD=typeof document<"u"?O.useLayoutEffect:O.useEffect;function sD(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!sD(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!sD(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function vSe(n){const e=O.useRef(n);return rD(()=>{e.current=n}),e}function ySe(n){let{middleware:e,placement:t="bottom",strategy:i="absolute",whileElementsMounted:r}=n===void 0?{}:n;const s=O.useRef(null),o=O.useRef(null),a=vSe(r),l=O.useRef(null),[c,u]=O.useState({x:null,y:null,strategy:i,placement:t,middlewareData:{}}),[f,h]=O.useState(e);sD(f==null?void 0:f.map(T=>{let{options:b}=T;return b}),e==null?void 0:e.map(T=>{let{options:b}=T;return b}))||h(e);const p=O.useCallback(()=>{!s.current||!o.current||gSe(s.current,o.current,{middleware:f,placement:t,strategy:i}).then(T=>{g.current&&iS.flushSync(()=>{u(T)})})},[f,t,i]);rD(()=>{g.current&&p()},[p]);const g=O.useRef(!1);rD(()=>(g.current=!0,()=>{g.current=!1}),[]);const v=O.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const T=a.current(s.current,o.current,p);l.current=T}else p()},[p,a]),_=O.useCallback(T=>{s.current=T,v()},[v]),S=O.useCallback(T=>{o.current=T,v()},[v]),A=O.useMemo(()=>({reference:s,floating:o}),[]);return O.useMemo(()=>({...c,update:p,refs:A,reference:_,floating:S}),[c,p,A,_,S])}const xSe=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?rV({element:e.current,padding:t}).fn(r):{}:e?rV({element:e,padding:t}).fn(r):{}}}},_Se=O.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return O.createElement(gd.svg,Vi({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:O.createElement("polygon",{points:"0,0 30,0 15,10"}))}),SSe=_Se;function ESe(n){const[e,t]=O.useState(void 0);return Xh(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const sX="Popper",[Bk,oX]=XK(sX),[ASe,aX]=Bk(sX),TSe=n=>{const{__scopePopper:e,children:t}=n,[i,r]=O.useState(null);return O.createElement(ASe,{scope:e,anchor:i,onAnchorChange:r},t)},wSe="PopperAnchor",bSe=O.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=aX(wSe,t),o=O.useRef(null),a=Wv(e,o);return O.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:O.createElement(gd.div,Vi({},r,{ref:a}))}),bw="PopperContent",[MSe,CSe]=Bk(bw),[RSe,PSe]=Bk(bw,{hasParent:!1,positionUpdateFns:new Set}),ISe=O.forwardRef((n,e)=>{var t,i,r,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:h=0,align:p="center",alignOffset:g=0,arrowPadding:v=0,collisionBoundary:_=[],collisionPadding:S=0,sticky:A="partial",hideWhenDetached:T=!1,avoidCollisions:b=!0,onPlaced:C,...L}=n,P=aX(bw,u),[k,I]=O.useState(null),D=Wv(e,gn=>I(gn)),[G,H]=O.useState(null),q=ESe(G),W=(t=q==null?void 0:q.width)!==null&&t!==void 0?t:0,te=(i=q==null?void 0:q.height)!==null&&i!==void 0?i:0,ee=f+(p!=="center"?"-"+p:""),ne=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},Y=Array.isArray(_)?_:[_],Q=Y.length>0,F={padding:ne,boundary:Y.filter(OSe),altBoundary:Q},{reference:ie,floating:he,strategy:pe,x:ye,y:Be,placement:Me,middlewareData:Le,update:je}=ySe({strategy:"fixed",placement:ee,whileElementsMounted:mSe,middleware:[FSe(),aSe({mainAxis:h+te,alignmentAxis:g}),b?lSe({mainAxis:!0,crossAxis:!1,limiter:A==="partial"?cSe():void 0,...F}):void 0,G?xSe({element:G,padding:v}):void 0,b?sSe({...F}):void 0,uSe({...F,apply:({elements:gn,availableWidth:Z,availableHeight:j})=>{gn.floating.style.setProperty("--radix-popper-available-width",`${Z}px`),gn.floating.style.setProperty("--radix-popper-available-height",`${j}px`)}}),NSe({arrowWidth:W,arrowHeight:te}),T?oSe({strategy:"referenceHidden"}):void 0].filter(kSe)});Xh(()=>{ie(P.anchor)},[ie,P.anchor]);const lt=ye!==null&&Be!==null,[bt,gt]=lX(Me),ue=Kv(C);Xh(()=>{lt&&(ue==null||ue())},[lt,ue]);const Ne=(r=Le.arrow)===null||r===void 0?void 0:r.x,ke=(s=Le.arrow)===null||s===void 0?void 0:s.y,Ze=((o=Le.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[We,_e]=O.useState();Xh(()=>{k&&_e(window.getComputedStyle(k).zIndex)},[k]);const{hasParent:ft,positionUpdateFns:dt}=PSe(bw,u),Rt=!ft;O.useLayoutEffect(()=>{if(!Rt)return dt.add(je),()=>{dt.delete(je)}},[Rt,dt,je]),Xh(()=>{Rt&&lt&&Array.from(dt).reverse().forEach(gn=>requestAnimationFrame(gn))},[Rt,lt,dt]);const Dt={"data-side":bt,"data-align":gt,...L,ref:D,style:{...L.style,animation:lt?void 0:"none",opacity:(a=Le.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return O.createElement("div",{ref:he,"data-radix-popper-content-wrapper":"",style:{position:pe,left:0,top:0,transform:lt?`translate3d(${Math.round(ye)}px, ${Math.round(Be)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:We,"--radix-popper-transform-origin":[(l=Le.transformOrigin)===null||l===void 0?void 0:l.x,(c=Le.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:n.dir},O.createElement(MSe,{scope:u,placedSide:bt,onArrowChange:H,arrowX:Ne,arrowY:ke,shouldHideArrow:Ze},Rt?O.createElement(RSe,{scope:u,hasParent:!0,positionUpdateFns:dt},O.createElement(gd.div,Dt)):O.createElement(gd.div,Dt)))}),LSe="PopperArrow",DSe={top:"bottom",right:"left",bottom:"top",left:"right"},BSe=O.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=CSe(LSe,i),o=DSe[s.placedSide];return O.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},O.createElement(SSe,Vi({},r,{ref:t,style:{...r.style,display:"block"}})))});function kSe(n){return n!==void 0}function OSe(n){return n!==null}const FSe=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:i,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${i}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),NSe=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=f?0:n.arrowWidth,p=f?0:n.arrowHeight,[g,v]=lX(a),_={start:"0%",center:"50%",end:"100%"}[v],S=((i=(r=c.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+h/2,A=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+p/2;let T="",b="";return g==="bottom"?(T=f?_:`${S}px`,b=`${-p}px`):g==="top"?(T=f?_:`${S}px`,b=`${l.floating.height+p}px`):g==="right"?(T=`${-p}px`,b=f?_:`${A}px`):g==="left"&&(T=`${l.floating.width+p}px`,b=f?_:`${A}px`),{data:{x:T,y:b}}}});function lX(n){const[e,t="center"]=n.split("-");return[e,t]}const USe=TSe,GSe=bSe,VSe=ISe,HSe=BSe;function zSe(n,e){return O.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const cX=n=>{const{present:e,children:t}=n,i=$Se(e),r=typeof t=="function"?t({present:i.isPresent}):O.Children.only(t),s=Wv(i.ref,r.ref);return typeof t=="function"||i.isPresent?O.cloneElement(r,{ref:s}):null};cX.displayName="Presence";function $Se(n){const[e,t]=O.useState(),i=O.useRef({}),r=O.useRef(n),s=O.useRef("none"),o=n?"mounted":"unmounted",[a,l]=zSe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const c=GA(i.current);s.current=a==="mounted"?c:"none"},[a]),Xh(()=>{const c=i.current,u=r.current;if(u!==n){const h=s.current,p=GA(c);n?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),Xh(()=>{if(e){const c=f=>{const p=GA(i.current).includes(f.animationName);f.target===e&&p&&iS.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=GA(i.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:O.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function GA(n){return(n==null?void 0:n.animationName)||"none"}function WSe({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=jSe({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:i,a=Kv(t),l=O.useCallback(c=>{if(s){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else r(c)},[s,n,r,a]);return[o,l]}function jSe({defaultProp:n,onChange:e}){const t=O.useState(n),[i]=t,r=O.useRef(i),s=Kv(e);return O.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const KSe=O.forwardRef((n,e)=>O.createElement(gd.span,Vi({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),XSe=KSe,[qb,ULe]=XK("Tooltip",[oX]),Jb=oX(),YSe="TooltipProvider",oD="tooltip.open",[GLe,kk]=qb(YSe),Ok="Tooltip",[qSe,Qb]=qb(Ok),JSe=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=kk(Ok,n.__scopeTooltip),c=Jb(e),[u,f]=O.useState(null),h=Z1e(),p=O.useRef(0),g=o??l.disableHoverableContent,v=a??l.delayDuration,_=O.useRef(!1),[S=!1,A]=WSe({prop:i,defaultProp:r,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(oD))):l.onClose(),s==null||s(P)}}),T=O.useMemo(()=>S?_.current?"delayed-open":"instant-open":"closed",[S]),b=O.useCallback(()=>{window.clearTimeout(p.current),_.current=!1,A(!0)},[A]),C=O.useCallback(()=>{window.clearTimeout(p.current),A(!1)},[A]),L=O.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{_.current=!0,A(!0)},v)},[v,A]);return O.useEffect(()=>()=>window.clearTimeout(p.current),[]),O.createElement(USe,c,O.createElement(qSe,{scope:e,contentId:h,open:S,stateAttribute:T,trigger:u,onTriggerChange:f,onTriggerEnter:O.useCallback(()=>{l.isOpenDelayed?L():b()},[l.isOpenDelayed,L,b]),onTriggerLeave:O.useCallback(()=>{g?C():window.clearTimeout(p.current)},[C,g]),onOpen:b,onClose:C,disableHoverableContent:g},t))},dV="TooltipTrigger",QSe=O.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=Qb(dV,t),s=kk(dV,t),o=Jb(t),a=O.useRef(null),l=Wv(e,a,r.onTriggerChange),c=O.useRef(!1),u=O.useRef(!1),f=O.useCallback(()=>c.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),O.createElement(GSe,Vi({asChild:!0},o),O.createElement(gd.button,Vi({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:l,onPointerMove:cf(n.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:cf(n.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:cf(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:cf(n.onFocus,()=>{c.current||r.onOpen()}),onBlur:cf(n.onBlur,r.onClose),onClick:cf(n.onClick,r.onClose)})))}),ZSe="TooltipPortal",[VLe,eEe]=qb(ZSe,{forceMount:void 0}),v1="TooltipContent",tEe=O.forwardRef((n,e)=>{const t=eEe(v1,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,o=Qb(v1,n.__scopeTooltip);return O.createElement(cX,{present:i||o.open},o.disableHoverableContent?O.createElement(uX,Vi({side:r},s,{ref:e})):O.createElement(nEe,Vi({side:r},s,{ref:e})))}),nEe=O.forwardRef((n,e)=>{const t=Qb(v1,n.__scopeTooltip),i=kk(v1,n.__scopeTooltip),r=O.useRef(null),s=Wv(e,r),[o,a]=O.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:f}=i,h=O.useCallback(()=>{a(null),f(!1)},[f]),p=O.useCallback((g,v)=>{const _=g.currentTarget,S={x:g.clientX,y:g.clientY},A=aEe(S,_.getBoundingClientRect()),T=A==="right"||A==="bottom"?-5:5,C=A==="right"||A==="left"?{x:g.clientX+T,y:g.clientY}:{x:g.clientX,y:g.clientY+T},L=lEe(v.getBoundingClientRect()),P=uEe([C,...L]);a(P),f(!0)},[f]);return O.useEffect(()=>()=>h(),[h]),O.useEffect(()=>{if(l&&u){const g=_=>p(_,u),v=_=>p(_,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,p,h]),O.useEffect(()=>{if(o){const g=v=>{const _=v.target,S={x:v.clientX,y:v.clientY},A=(l==null?void 0:l.contains(_))||(u==null?void 0:u.contains(_)),T=!cEe(S,o);A?h():T&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,h]),O.createElement(uX,Vi({},n,{ref:s}))}),[iEe,rEe]=qb(Ok,{isInside:!1}),uX=O.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=Qb(v1,t),c=Jb(t),{onClose:u}=l;return O.useEffect(()=>(document.addEventListener(oD,u),()=>document.removeEventListener(oD,u)),[u]),O.useEffect(()=>{if(l.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),O.createElement(X1e,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},O.createElement(VSe,Vi({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),O.createElement(HK,null,i),O.createElement(iEe,{scope:t,isInside:!0},O.createElement(XSe,{id:l.contentId,role:"tooltip"},r||i))))}),sEe="TooltipArrow",oEe=O.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=Jb(t);return rEe(sEe,t).isInside?null:O.createElement(HSe,Vi({},r,i,{ref:e}))});function aEe(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:return null}}function lEe(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function cEe(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>i!=u>i&&t<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r}function uEe(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),fEe(e)}function fEe(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const hEe=JSe,dEe=QSe,pEe=tEe,mEe=oEe;function gEe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Ti(n,e){if(n==null)return{};var t=gEe(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let tr;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(tr||(tr={}));const vEe={[tr.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[tr.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[tr.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[tr.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[tr.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[tr.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[tr.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[tr.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[tr.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[tr.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[tr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function fX(n,e,...t){const[i,...r]=vEe[e](...t);console[n]("LEVA: "+i,...r)}const df=fX.bind(null,"warn"),yEe=fX.bind(null,"log"),xEe=["value"],_Ee=["schema"],SEe=["value"],hX=[],Bm={};function pV(n){let{value:e}=n,t=Ti(n,xEe);for(let i of hX){const r=i(e,t);if(r)return r}}function kf(n,e){let{schema:t}=e,i=Ti(e,_Ee);if(n in Bm){df(tr.ALREADY_REGISTERED_TYPE,n);return}hX.push((r,s)=>t(r,s)&&n),Bm[n]=i}function rP(n,e,t,i){const{normalize:r}=Bm[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Ti(e,SEe);return{value:s,settings:o}}function EEe(n,e,t,i,r,s){const{sanitize:o}=Bm[n];return o?o(e,t,i,r,s):e}function mV(n,e,t){const{format:i}=Bm[n];return i?i(e,t):e}function AEe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(i){AEe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const yd=(n,e,t)=>n>t?t:n<e?e:n,TEe=n=>{if(n===""||typeof n=="number")return n;try{const e=Bh(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},wEe=Math.log(10);function vV(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/wEe)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const Mw=(n,e,t)=>t===e?0:(yd(n,e,t)-e)/(t-e),Cw=(n,e,t)=>n*(t-e)+e,bEe=()=>"_"+Math.random().toString(36).substr(2,9),yV=/\(([0-9+\-*/^ .]+)\)/,xV=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,_V=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,SV=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,EV=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,AV=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Bh(n){if(isNaN(Number(n)))if(yV.test(n)){const e=n.replace(yV,(t,i)=>String(Bh(i)));return Bh(e)}else if(xV.test(n)){const e=n.replace(xV,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Bh(e)}else if(_V.test(n)){const e=n.replace(_V,(t,i,r)=>String(Number(i)*Number(r)));return Bh(e)}else if(SV.test(n)){const e=n.replace(SV,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Bh(e)}else if(EV.test(n)){const e=n.replace(EV,(t,i,r)=>String(Number(i)+Number(r)));return Bh(e)}else if(AV.test(n)){const e=n.replace(AV,(t,i,r)=>String(Number(i)-Number(r)));return Bh(e)}else return Number(n);return Number(n)}function MEe(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function CEe(n,e){const t=Sn({},n);return e.forEach(i=>i in n&&delete t[i]),t}function REe(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function dX(n){return Object.prototype.toString.call(n)==="[object Object]"}const PEe=n=>dX(n)&&Object.keys(n).length===0;let hc;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(hc||(hc={}));let pc;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(pc||(pc={}));const IEe=["type","__customInput"],LEe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],DEe=["type"];function pX(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:Sn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:C,__customInput:L}=n,P=Ti(n,IEe);return pX(L,e,P,C)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:h,onEditStart:p,onEditEnd:g,transient:v}=n,_=Ti(n,LEe),S=Sn({render:o,key:e,label:a??e,hint:f,transient:v??!!h,onEditStart:p,onEditEnd:g,disabled:u,optional:l,order:c},t);let{type:A}=_,T=Ti(_,DEe);if(A=i??A,A in hc)return{type:A,input:T,options:S};let b;return i&&dX(T)&&"value"in T?b=T.value:b=PEe(T)?void 0:T,{type:A,input:b,options:Sn(Sn({},S),{},{onChange:h,optional:(r=S.optional)!==null&&r!==void 0?r:!1,disabled:(s=S.disabled)!==null&&s!==void 0?s:!1})}}function BEe(n,e,t,i){const r=pX(n,e),{type:s,input:o,options:a}=r;if(s)return s in hc?r:{type:s,input:rP(s,o,t,i),options:a};let l=pV(o);return l?{type:l,input:rP(l,o,t,i),options:a}:(l=pV({value:o}),l?{type:l,input:rP(l,{value:o},t,i),options:a}:!1)}function TV(n,e,t,i,r){const{value:s,type:o,settings:a}=n;n.value=mX({type:o,value:s,settings:a},e,t,i),n.fromPanel=r}const kEe=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function mX({type:n,value:e,settings:t},i,r,s){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let a;try{a=EEe(n,o,t,e,r,s)}catch(l){throw new kEe(`The value \`${i}\` did not result in a correct value.`,e,l)}return p1(a,e)?e:a}const gX=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),s&&o()}},vX=n=>n.shiftKey?5:n.altKey?1/5:1,OEe=["value"],FEe=["min","max"],NEe=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},yX=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=yd(r,e,t);return i?s+i:s},UEe=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},xX=n=>{let{value:e}=n,t=Ti(n,OEe);const{min:i=-1/0,max:r=1/0}=t,s=Ti(t,FEe);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=yd(o,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const c=l?vV(l)*10:vV(o);l=l||c/10;const u=Math.round(yd(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Sn({initialValue:o,step:l,pad:u,min:i,max:r,suffix:a},s)}},_X=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var SX=Object.freeze({__proto__:null,schema:NEe,sanitize:yX,format:UEe,normalize:xX,sanitizeStep:_X});function vr(){return vr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vr.apply(this,arguments)}const EX=O.createContext({});function ho(){return O.useContext(EX)}const Fk=O.createContext(null),AX=O.createContext(null),TX=O.createContext(null);function oS(){return O.useContext(AX)}function GEe(){return O.useContext(TX)}const wX=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function VA(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const _x={$inputStyle:()=>n=>VA(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>VA(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>VA(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>VA(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:pn,css:HLe,createTheme:VEe,globalCss:HEe,keyframes:zLe}=H1e({prefix:"leva",theme:wX(),utils:Sn(Sn({},_x),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":_x.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":_x.$focusStyle()(n)}),$hover:n=>({"&:hover":_x.$hoverStyle()(n)}),$active:n=>({"&:active":_x.$activeStyle()(n)})})}),zEe=HEe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function $Ee(n){const e=wX();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=VEe(e);return{theme:e,className:t.className}}function Ef(n,e){const{theme:t}=O.useContext(Fk);if(!(n in t)||!(e in t[n]))return df(tr.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const bX=pn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),MX=pn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${bX}`]:{paddingLeft:0}}),WEe=pn(MX,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),jEe=pn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),KEe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],XEe=["onUpdate"];function Nk(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=Ti(n,KEe);const{id:f,emitOnEditStart:h,emitOnEditEnd:p,disabled:g}=ho(),v=a||f,_=O.useRef(null),S=c>0,A=S?"textarea":"input",T=O.useCallback(L=>P=>{const k=P.currentTarget.value;L(k)},[]);de.useEffect(()=>{const L=_.current,P=T(k=>{i(k),p()});return L==null||L.addEventListener("blur",P),()=>L==null?void 0:L.removeEventListener("blur",P)},[T,i,p]);const b=O.useCallback(L=>{L.key==="Enter"&&T(i)(L)},[T,i]),C=Object.assign({as:A},S?{rows:c}:{},u);return de.createElement(jEe,{textArea:S},e&&typeof e=="string"?de.createElement(MX,null,e):e,de.createElement(bX,vr({levaType:o,ref:_,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:T(r),onFocus:()=>h(),onKeyPress:b,onKeyDown:s,disabled:g},C)))}function YEe(n){let{onUpdate:e}=n,t=Ti(n,XEe);const i=O.useCallback(s=>e(TEe(s)),[e]),r=O.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return de.createElement(Nk,vr({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const Rw=pn("div",{}),aD=pn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),qEe=pn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${aD}::after`]:{opacity:.6},[`${Rw}:hover > & + ${aD}::after`]:{opacity:.6},[`${Rw}:hover > & > svg`]:{opacity:1}}),CX=pn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Rw}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),RX=pn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${CX} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),PX=pn(RX,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),JEe=pn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),QEe=pn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),lD=pn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),ZEe=pn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${lD}`]:{pointerEvents:"auto"}}}}}),IX=pn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),eAe=pn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),tAe=pn(mEe,{fill:"$toolTipBackground"});function Uk({children:n}){const{className:e}=O.useContext(Fk);return de.createElement(u1e,{className:e},n)}const nAe=["align"];function iAe(){const{id:n,disable:e,disabled:t}=ho();return de.createElement(de.Fragment,null,de.createElement(QEe,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),de.createElement("label",{htmlFor:n+"__disable"}))}function rAe(n){const{id:e,optional:t,hint:i}=ho(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return de.createElement(de.Fragment,null,t&&de.createElement(iAe,null),i!==void 0?de.createElement(hEe,null,de.createElement(dEe,{asChild:!0},de.createElement(lD,vr({},r,n))),de.createElement(pEe,{side:"top",sideOffset:2},de.createElement(eAe,null,i,de.createElement(tAe,null)))):de.createElement(lD,vr({},r,s,n)))}function vc(n){let{align:e}=n,t=Ti(n,nAe);const{value:i,label:r,key:s,disabled:o}=ho(),{hideCopyButton:a}=GEe(),l=!a&&s!==void 0,[c,u]=O.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),u(!0)}catch{df(tr.CLIPBOARD_ERROR,{[s]:i})}};return de.createElement(JEe,{align:e,onPointerLeave:()=>u(!1)},de.createElement(rAe,t),l&&!o&&de.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},c?de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),de.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):de.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),de.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const sAe=["toggled"],oAe=pn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Gk(n){let{toggled:e}=n,t=Ti(n,sAe);return de.createElement(oAe,vr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),de.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const aAe=["input"];function Il(n){let{input:e}=n,t=Ti(n,aAe);return e?de.createElement(PX,t):de.createElement(RX,t)}function LX({value:n,type:e,settings:t,setValue:i}){const[r,s]=O.useState(mV(e,n,t)),o=O.useRef(n),a=O.useRef(t);a.current=t;const l=O.useCallback(u=>s(mV(e,u,a.current)),[e]),c=O.useCallback(u=>{try{i(u)}catch(f){const{type:h,previousValue:p}=f;if(h!=="LEVA_ERROR")throw f;l(p)}},[l,i]);return O.useEffect(()=>{p1(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:r,onChange:s,onUpdate:c}}function aS(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=ho();return Uoe(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function lAe(n){const e=O.useRef(null),t=O.useRef(null),i=O.useRef(!1);return O.useEffect(()=>{const r=gX(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),O.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function DX(){const n=O.useRef(null),e=O.useRef({x:0,y:0}),t=O.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const cAe=["__refCount"],sP=(n,e)=>{if(!n[e])return null;const t=n[e];return Ti(t,cAe)};function uAe(n){const e=oS(),[t,i]=O.useState(sP(e.getData(),n)),r=O.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=O.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=O.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=O.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=O.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return O.useEffect(()=>{i(sP(e.getData(),n));const c=e.useStore.subscribe(u=>sP(u.data,n),i,{equalityFn:jb});return()=>c()},[e,n]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const fAe=pn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),BX=pn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),cD=pn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),kX=pn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),OX=pn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function hAe({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const o=O.useRef(null),a=O.useRef(null),l=O.useRef(0),c=Ef("sizes","scrubberWidth"),u=aS(({event:h,first:p,xy:[g],movement:[v],memo:_})=>{if(p){const{width:A,left:T}=o.current.getBoundingClientRect();l.current=A-parseFloat(c),_=(h==null?void 0:h.target)===a.current?n:Cw((g-T)/A,e,t)}const S=_+Cw(v/l.current,0,t-e);return i(_X(S,{step:r,initialValue:s})),_}),f=Mw(n,e,t);return de.createElement(kX,vr({ref:o},u()),de.createElement(BX,null,de.createElement(OX,{style:{left:0,right:`${(1-f)*100}%`}})),de.createElement(cD,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const dAe=de.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=O.useState(!1),o=aS(({active:a,delta:[l],event:c,memo:u=0,first:f,last:h,target:p})=>(f&&p.requestPointerLock(),h&&document.exitPointerLock(),s(a),u+=l/2,Math.abs(u)>=1&&(e(g=>parseFloat(g)+Math.floor(u)*t*vX(c)),u=0),u));return de.createElement(WEe,vr({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function FX({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&de.createElement(dAe,{label:n,step:s.step,onUpdate:i,innerLabelTrim:o});return de.createElement(YEe,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:a})}function pAe(){const n=ho(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return de.createElement(Il,{input:!0},de.createElement(vc,null,e),de.createElement(fAe,{hasRange:l},l&&de.createElement(hAe,vr({value:parseFloat(t),onDrag:i},r)),de.createElement(FX,vr({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:mAe}=SX,gAe=Ti(SX,["sanitizeStep"]);var vAe=Sn({component:pAe},gAe);const yAe=(n,e)=>fa().schema({options:fa().passesAnyOf(fa().object(),fa().array())}).test(e),xAe=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},_Ae=(n,{values:e})=>e.indexOf(n),SAe=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var EAe=Object.freeze({__proto__:null,schema:yAe,sanitize:xAe,format:_Ae,normalize:SAe});const AAe=pn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),uD=pn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),TAe=pn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${uD}:focus + &`]:{$focusStyle:""},[`${uD}:hover + &`]:{$hoverStyle:""}});function wAe({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:o,values:a}=r,l=O.useRef();return e===a[n]&&(l.current=o[n]),de.createElement(AAe,null,de.createElement(uD,{id:i,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>de.createElement("option",{key:c,value:u},c))),de.createElement(TAe,null,l.current),de.createElement(Gk,{toggled:!0}))}function bAe(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:o}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(wAe,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:s}))}var MAe=Sn({component:bAe},EAe);const CAe=n=>fa().string().test(n),RAe=n=>{if(typeof n!="string")throw Error("Invalid string");return n},PAe=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var IAe=Object.freeze({__proto__:null,schema:CAe,sanitize:RAe,normalize:PAe});const LAe=["displayValue","onUpdate","onChange","editable"],DAe=pn("div",{whiteSpace:"pre-wrap"});function BAe(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=Ti(n,LAe);return r?de.createElement(Nk,vr({value:e,onUpdate:t,onChange:i},s)):de.createElement(DAe,null,e)}function kAe(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(BAe,vr({displayValue:t,onUpdate:i,onChange:r},e)))}var OAe=Sn({component:kAe},IAe);const FAe=n=>fa().boolean().test(n),NAe=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var UAe=Object.freeze({__proto__:null,schema:FAe,sanitize:NAe});const GAe=pn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function VAe({value:n,onUpdate:e,id:t,disabled:i}){return de.createElement(GAe,null,de.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),de.createElement("label",{htmlFor:t},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},de.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function HAe(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(VAe,{value:e,onUpdate:t,id:r,disabled:i}))}var zAe=Sn({component:HAe},UAe);const $Ae=["locked"];function WAe({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const o=O.useRef(n[t]);o.current=n[t];const a=O.useCallback(c=>r({[t]:mX({type:"NUMBER",value:o.current,settings:i},c)}),[r,i,t]),l=LX({type:"NUMBER",value:n[t],settings:i,setValue:a});return de.createElement(FX,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:s})}const jAe=pn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function KAe(n){let{locked:e}=n,t=Ti(n,$Ae);return de.createElement("svg",vr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?de.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):de.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Vk({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=ho(),{lock:o,locked:a}=t;return de.createElement(jAe,{withLock:o},o&&de.createElement(KAe,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>de.createElement(WAe,{id:c===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const NX=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=xX(Sn({value:o},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=i,t[s].pad=r)}return t},XAe=["lock"],YAe=["value"];function qAe(n){const e=fa().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function JAe(n){return Array.isArray(n)?"array":"object"}function g_(n,e,t){return JAe(n)===e?n:e==="array"?Object.values(n):REe(n,t)}const QAe=(n,e,t)=>{const i=g_(n,"object",e.keys);for(let o in i)i[o]=yX(i[o],e[o]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const o=g_(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=i[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=Sn(Sn({},o),i)}return g_(s,e.format,e.keys)},ZAe=(n,e)=>g_(n,"object",e.keys),eTe=n=>!!n&&("step"in n||"min"in n||"max"in n);function tTe(n,e,t=[]){const{lock:i=!1}=e,r=Ti(e,XAe),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=g_(n,"object",o),l=eTe(r)?o.reduce((u,f)=>Object.assign(u,{[f]:r}),{}):r,c=NX(a,l);return{value:s==="array"?n:a,settings:Sn(Sn({},c),{},{format:s,keys:o,lock:i,locked:!1})}}function UX(n){return{schema:qAe(n.length),normalize:e=>{let{value:t}=e,i=Ti(e,YAe);return tTe(t,i,n)},format:(e,t)=>ZAe(e,t),sanitize:(e,t,i)=>QAe(e,t,i)}}var nTe={grad:.9,turn:360,rad:360/(2*Math.PI)},tf=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},gs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Tl=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},GX=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},wV=function(n){return{r:Tl(n.r,0,255),g:Tl(n.g,0,255),b:Tl(n.b,0,255),a:Tl(n.a)}},oP=function(n){return{r:gs(n.r),g:gs(n.g),b:gs(n.b),a:gs(n.a,3)}},iTe=/^#([0-9a-f]{3,8})$/i,HA=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},VX=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},HX=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:r}},bV=function(n){return{h:GX(n.h),s:Tl(n.s,0,100),l:Tl(n.l,0,100),a:Tl(n.a)}},MV=function(n){return{h:gs(n.h),s:gs(n.s),l:gs(n.l),a:gs(n.a,3)}},CV=function(n){return HX((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},v_=function(n){return{h:(e=VX(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},rTe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sTe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oTe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aTe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fD={string:[[function(n){var e=iTe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?gs(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?gs(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=oTe.exec(n)||aTe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:wV({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=rTe.exec(n)||sTe.exec(n);if(!e)return null;var t,i,r=bV({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(nTe[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return CV(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return tf(e)&&tf(t)&&tf(i)?wV({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!tf(e)||!tf(t)||!tf(i))return null;var o=bV({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return CV(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!tf(e)||!tf(t)||!tf(i))return null;var o=function(a){return{h:GX(a.h),s:Tl(a.s,0,100),v:Tl(a.v,0,100),a:Tl(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return HX(o)},"hsv"]]},RV=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},zX=function(n){return typeof n=="string"?RV(n.trim(),fD.string):typeof n=="object"&&n!==null?RV(n,fD.object):[null,void 0]},lTe=function(n){return zX(n)[1]},aP=function(n,e){var t=v_(n);return{h:t.h,s:Tl(t.s+100*e,0,100),l:t.l,a:t.a}},lP=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},PV=function(n,e){var t=v_(n);return{h:t.h,s:t.s,l:Tl(t.l+100*e,0,100),a:t.a}},hD=function(){function n(e){this.parsed=zX(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return gs(lP(this.rgba),2)},n.prototype.isDark=function(){return lP(this.rgba)<.5},n.prototype.isLight=function(){return lP(this.rgba)>=.5},n.prototype.toHex=function(){return e=oP(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?HA(gs(255*s)):"","#"+HA(t)+HA(i)+HA(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return oP(this.rgba)},n.prototype.toRgbString=function(){return e=oP(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return MV(v_(this.rgba))},n.prototype.toHslString=function(){return e=MV(v_(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=VX(this.rgba),{h:gs(e.h),s:gs(e.s),v:gs(e.v),a:gs(e.a,3)};var e},n.prototype.invert=function(){return Po({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Po(aP(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Po(aP(this.rgba,-e))},n.prototype.grayscale=function(){return Po(aP(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Po(PV(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Po(PV(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Po({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):gs(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=v_(this.rgba);return typeof e=="number"?Po({h:e,s:t.s,l:t.l,a:t.a}):gs(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Po(e).toHex()},n}(),Po=function(n){return n instanceof hD?n:new hD(n)},IV=[],cTe=function(n){n.forEach(function(e){IV.indexOf(e)<0&&(e(hD,fD),IV.push(e))})};function uTe(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,h="black";if(!s.length)for(var p in t)s[p]=new n(t[p]).toRgb();for(var g in t){var v=(a=u,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<f&&(f=v,h=g)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Yv(){return(Yv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function Hk(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function dD(n){var e=O.useRef(n),t=O.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Lv=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},y_=function(n){return"touches"in n},pD=function(n){return n&&n.ownerDocument.defaultView||self},LV=function(n,e,t){var i=n.getBoundingClientRect(),r=y_(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:Lv((r.pageX-(i.left+pD(n).pageXOffset))/i.width),top:Lv((r.pageY-(i.top+pD(n).pageYOffset))/i.height)}},DV=function(n){!y_(n)&&n.preventDefault()},zk=de.memo(function(n){var e=n.onMove,t=n.onKey,i=Hk(n,["onMove","onKey"]),r=O.useRef(null),s=dD(e),o=dD(t),a=O.useRef(null),l=O.useRef(!1),c=O.useMemo(function(){var p=function(_){DV(_),(y_(_)?_.touches.length>0:_.buttons>0)&&r.current?s(LV(r.current,_,a.current)):v(!1)},g=function(){return v(!1)};function v(_){var S=l.current,A=pD(r.current),T=_?A.addEventListener:A.removeEventListener;T(S?"touchmove":"mousemove",p),T(S?"touchend":"mouseup",g)}return[function(_){var S=_.nativeEvent,A=r.current;if(A&&(DV(S),!function(b,C){return C&&!y_(b)}(S,l.current)&&A)){if(y_(S)){l.current=!0;var T=S.changedTouches||[];T.length&&(a.current=T[0].identifier)}A.focus(),s(LV(A,S,a.current)),v(!0)}},function(_){var S=_.which||_.keyCode;S<37||S>40||(_.preventDefault(),o({left:S===39?.05:S===37?-.05:0,top:S===40?.05:S===38?-.05:0}))},v]},[o,s]),u=c[0],f=c[1],h=c[2];return O.useEffect(function(){return h},[h]),de.createElement("div",Yv({},i,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:f,tabIndex:0,role:"slider"}))}),lS=function(n){return n.filter(Boolean).join(" ")},$k=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=lS(["react-colorful__pointer",n.className]);return de.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},de.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ko=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},$X=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:ko(n.h),s:ko(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:ko(r/2),a:ko(i,2)}},mD=function(n){var e=$X(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},cP=function(n){var e=$X(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},WX=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:ko(255*[i,a,o,o,l,i][c]),g:ko(255*[l,i,i,a,o,o][c]),b:ko(255*[o,o,l,i,i,a][c]),a:ko(r,2)}},jX=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:ko(60*(a<0?a+6:a)),s:ko(s?o/s*100:0),v:ko(s/255*100),a:r}},KX=de.memo(function(n){var e=n.hue,t=n.onChange,i=lS(["react-colorful__hue",n.className]);return de.createElement("div",{className:i},de.createElement(zk,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Lv(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":ko(e),"aria-valuemax":"360","aria-valuemin":"0"},de.createElement($k,{className:"react-colorful__hue-pointer",left:e/360,color:mD({h:e,s:100,v:100,a:1})})))}),XX=de.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:mD({h:e.h,s:100,v:100,a:1})};return de.createElement("div",{className:"react-colorful__saturation",style:i},de.createElement(zk,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Lv(e.s+100*r.left,0,100),v:Lv(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ko(e.s)+"%, Brightness "+ko(e.v)+"%"},de.createElement($k,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:mD(e)})))}),Wk=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function YX(n,e,t){var i=dD(t),r=O.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=O.useRef({color:e,hsva:s});O.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),O.useEffect(function(){var c;Wk(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},i(c))},[s,n,i]);var l=O.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var fTe=typeof window<"u"?O.useLayoutEffect:O.useEffect,hTe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},BV=new Map,qX=function(n){fTe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!BV.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,BV.set(e,t);var i=hTe();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},dTe=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=Hk(n,["className","colorModel","color","onChange"]),a=O.useRef(null);qX(a);var l=YX(t,r,s),c=l[0],u=l[1],f=lS(["react-colorful",e]);return de.createElement("div",Yv({},o,{ref:a,className:f}),de.createElement(XX,{hsva:c,onChange:u}),de.createElement(KX,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},pTe=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+cP(Object.assign({},t,{a:0}))+", "+cP(Object.assign({},t,{a:1}))+")"},s=lS(["react-colorful__alpha",e]),o=ko(100*t.a);return de.createElement("div",{className:s},de.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),de.createElement(zk,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:Lv(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},de.createElement($k,{className:"react-colorful__alpha-pointer",left:t.a,color:cP(t)})))},mTe=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=Hk(n,["className","colorModel","color","onChange"]),a=O.useRef(null);qX(a);var l=YX(t,r,s),c=l[0],u=l[1],f=lS(["react-colorful",e]);return de.createElement("div",Yv({},o,{ref:a,className:f}),de.createElement(XX,{hsva:c,onChange:u}),de.createElement(KX,{hue:c.h,onChange:u}),de.createElement(pTe,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},gTe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:jX,fromHsva:WX,equal:Wk},vTe=function(n){return de.createElement(mTe,Yv({},n,{colorModel:gTe}))},yTe={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return jX({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=WX(n)).r,g:e.g,b:e.b};var e},equal:Wk},xTe=function(n){return de.createElement(dTe,Yv({},n,{colorModel:yTe}))};function qv(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function Jv(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _Te(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function STe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(_Te(arguments[e]));return n}var ETe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function cS(n,e){var t=ATe(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function ATe(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=ETe.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var TTe=[".DS_Store","Thumbs.db"];function wTe(n){return qv(this,void 0,void 0,function(){return Jv(this,function(e){return Pw(n)&&bTe(n)?[2,PTe(n.dataTransfer,n.type)]:MTe(n)?[2,CTe(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,RTe(n)]:[2,[]]})})}function bTe(n){return Pw(n.dataTransfer)}function MTe(n){return Pw(n)&&Pw(n.target)}function Pw(n){return typeof n=="object"&&n!==null}function CTe(n){return gD(n.target.files).map(function(e){return cS(e)})}function RTe(n){return qv(this,void 0,void 0,function(){var e;return Jv(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return cS(i)})]}})})}function PTe(n,e){return qv(this,void 0,void 0,function(){var t,i;return Jv(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=gD(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(ITe))]):[3,2];case 1:return i=r.sent(),[2,kV(JX(i))];case 2:return[2,kV(gD(n.files).map(function(s){return cS(s)}))]}})})}function kV(n){return n.filter(function(e){return TTe.indexOf(e.name)===-1})}function gD(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function ITe(n){if(typeof n.webkitGetAsEntry!="function")return OV(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?QX(e):OV(n)}function JX(n){return n.reduce(function(e,t){return STe(e,Array.isArray(t)?JX(t):[t])},[])}function OV(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=cS(e);return Promise.resolve(t)}function LTe(n){return qv(this,void 0,void 0,function(){return Jv(this,function(e){return[2,n.isDirectory?QX(n):DTe(n)]})})}function QX(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var o=this;e.readEntries(function(a){return qv(o,void 0,void 0,function(){var l,c,u;return Jv(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=f.sent(),t(l),[3,4];case 3:return c=f.sent(),i(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(LTe)),r.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){i(a)})}s()})}function DTe(n){return qv(this,void 0,void 0,function(){return Jv(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=cS(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var zA={},FV;function BTe(){return FV||(FV=1,zA.__esModule=!0,zA.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0}),zA}var kTe=BTe();const OTe=Ov(kTe);function NV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function UV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(t),!0).forEach(function(i){ZX(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ZX(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GV(n,e){return GTe(n)||UTe(n,e)||NTe(n,e)||FTe()}function FTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NTe(n,e){if(n){if(typeof n=="string")return VV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VV(n,e)}}function VV(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function UTe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function GTe(n){if(Array.isArray(n))return n}var VTe="file-invalid-type",HTe="file-too-large",zTe="file-too-small",$Te="too-many-files",WTe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:VTe,message:"File type must be ".concat(t)}},HV=function(e){return{code:HTe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},zV=function(e){return{code:zTe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},jTe={code:$Te,message:"Too many files"};function eY(n,e){var t=n.type==="application/x-moz-file"||OTe(n,e);return[t,t?null:WTe(e)]}function tY(n,e,t){if(Sx(n.size))if(Sx(e)&&Sx(t)){if(n.size>t)return[!1,HV(t)];if(n.size<e)return[!1,zV(e)]}else{if(Sx(e)&&n.size<e)return[!1,zV(e)];if(Sx(t)&&n.size>t)return[!1,HV(t)]}return[!0,null]}function Sx(n){return n!=null}function KTe(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=eY(a,t),c=GV(l,1),u=c[0],f=tY(a,i,r),h=GV(f,1),p=h[0];return u&&p})}function Iw(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function $A(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function $V(n){n.preventDefault()}function XTe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function YTe(n){return n.indexOf("Edge/")!==-1}function qTe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return XTe(n)||YTe(n)}function Fc(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!Iw(i)&&a&&a.apply(void 0,[i].concat(s)),Iw(i)})}}function JTe(){return"showOpenFilePicker"in window}function QTe(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return UV(UV({},e),{},ZX({},t,[]))},{}):{}}]}function ZTe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function ewe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var twe=["children"],nwe=["open"],iwe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],rwe=["refKey","onChange","onClick"];function swe(n){return lwe(n)||awe(n)||nY(n)||owe()}function owe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function awe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lwe(n){if(Array.isArray(n))return vD(n)}function uP(n,e){return fwe(n)||uwe(n,e)||nY(n,e)||cwe()}function cwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nY(n,e){if(n){if(typeof n=="string")return vD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vD(n,e)}}function vD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function uwe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function fwe(n){if(Array.isArray(n))return n}function WV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function er(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WV(Object(t),!0).forEach(function(i){yD(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WV(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lw(n,e){if(n==null)return{};var t=hwe(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function hwe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var jk=O.forwardRef(function(n,e){var t=n.children,i=Lw(n,twe),r=rY(i),s=r.open,o=Lw(r,nwe);return O.useImperativeHandle(e,function(){return{open:s}},[s]),de.createElement(O.Fragment,null,t(er(er({},o),{},{open:s})))});jk.displayName="Dropzone";var iY={disabled:!1,getFilesFromEvent:wTe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};jk.defaultProps=iY;jk.propTypes={children:Bi.func,accept:Bi.oneOfType([Bi.string,Bi.arrayOf(Bi.string)]),multiple:Bi.bool,preventDropOnDocument:Bi.bool,noClick:Bi.bool,noKeyboard:Bi.bool,noDrag:Bi.bool,noDragEventsBubbling:Bi.bool,minSize:Bi.number,maxSize:Bi.number,maxFiles:Bi.number,disabled:Bi.bool,getFilesFromEvent:Bi.func,onFileDialogCancel:Bi.func,onFileDialogOpen:Bi.func,useFsAccessApi:Bi.bool,onDragEnter:Bi.func,onDragLeave:Bi.func,onDragOver:Bi.func,onDrop:Bi.func,onDropAccepted:Bi.func,onDropRejected:Bi.func,validator:Bi.func};var xD={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function rY(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=er(er({},iY),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,h=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,v=e.onFileDialogCancel,_=e.onFileDialogOpen,S=e.useFsAccessApi,A=e.preventDropOnDocument,T=e.noClick,b=e.noKeyboard,C=e.noDrag,L=e.noDragEventsBubbling,P=e.validator,k=O.useMemo(function(){return typeof _=="function"?_:jV},[_]),I=O.useMemo(function(){return typeof v=="function"?v:jV},[v]),D=O.useRef(null),G=O.useRef(null),H=O.useReducer(dwe,xD),q=uP(H,2),W=q[0],te=q[1],ee=W.isFocused,ne=W.isFileDialogActive,Y=W.draggedFiles,Q=O.useRef(typeof window<"u"&&window.isSecureContext&&S&&JTe()),F=function(){!Q.current&&ne&&setTimeout(function(){if(G.current){var j=G.current.files;j.length||(te({type:"closeDialog"}),I())}},300)};O.useEffect(function(){return window.addEventListener("focus",F,!1),function(){window.removeEventListener("focus",F,!1)}},[G,ne,I,Q]);var ie=O.useRef([]),he=function(j){D.current&&D.current.contains(j.target)||(j.preventDefault(),ie.current=[])};O.useEffect(function(){return A&&(document.addEventListener("dragover",$V,!1),document.addEventListener("drop",he,!1)),function(){A&&(document.removeEventListener("dragover",$V),document.removeEventListener("drop",he))}},[D,A]);var pe=O.useCallback(function(Z){Z.preventDefault(),Z.persist(),We(Z),ie.current=[].concat(swe(ie.current),[Z.target]),$A(Z)&&Promise.resolve(r(Z)).then(function(j){Iw(Z)&&!L||(te({draggedFiles:j,isDragActive:!0,type:"setDraggedFiles"}),c&&c(Z))})},[r,c,L]),ye=O.useCallback(function(Z){Z.preventDefault(),Z.persist(),We(Z);var j=$A(Z);if(j&&Z.dataTransfer)try{Z.dataTransfer.dropEffect="copy"}catch{}return j&&f&&f(Z),!1},[f,L]),Be=O.useCallback(function(Z){Z.preventDefault(),Z.persist(),We(Z);var j=ie.current.filter(function(Xe){return D.current&&D.current.contains(Xe)}),Ee=j.indexOf(Z.target);Ee!==-1&&j.splice(Ee,1),ie.current=j,!(j.length>0)&&(te({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),$A(Z)&&u&&u(Z))},[D,u,L]),Me=O.useCallback(function(Z,j){var Ee=[],Xe=[];Z.forEach(function(He){var Je=eY(He,t),St=uP(Je,2),nt=St[0],vt=St[1],Pt=tY(He,o,s),cn=uP(Pt,2),Ke=cn[0],wn=cn[1],$t=P?P(He):null;if(nt&&Ke&&!$t)Ee.push(He);else{var Mt=[vt,wn];$t&&(Mt=Mt.concat($t)),Xe.push({file:He,errors:Mt.filter(function(At){return At})})}}),(!a&&Ee.length>1||a&&l>=1&&Ee.length>l)&&(Ee.forEach(function(He){Xe.push({file:He,errors:[jTe]})}),Ee.splice(0)),te({acceptedFiles:Ee,fileRejections:Xe,type:"setFiles"}),h&&h(Ee,Xe,j),Xe.length>0&&g&&g(Xe,j),Ee.length>0&&p&&p(Ee,j)},[te,a,t,o,s,l,h,p,g,P]),Le=O.useCallback(function(Z){Z.preventDefault(),Z.persist(),We(Z),ie.current=[],$A(Z)&&Promise.resolve(r(Z)).then(function(j){Iw(Z)&&!L||Me(j,Z)}),te({type:"reset"})},[r,Me,L]),je=O.useCallback(function(){if(Q.current){te({type:"openDialog"}),k();var Z={multiple:a,types:QTe(t)};window.showOpenFilePicker(Z).then(function(j){return r(j)}).then(function(j){Me(j,null),te({type:"closeDialog"})}).catch(function(j){ZTe(j)?(I(j),te({type:"closeDialog"})):ewe(j)&&(Q.current=!1,G.current&&(G.current.value=null,G.current.click()))});return}G.current&&(te({type:"openDialog"}),k(),G.current.value=null,G.current.click())},[te,k,I,S,Me,t,a]),lt=O.useCallback(function(Z){!D.current||!D.current.isEqualNode(Z.target)||(Z.key===" "||Z.key==="Enter"||Z.keyCode===32||Z.keyCode===13)&&(Z.preventDefault(),je())},[D,je]),bt=O.useCallback(function(){te({type:"focus"})},[]),gt=O.useCallback(function(){te({type:"blur"})},[]),ue=O.useCallback(function(){T||(qTe()?setTimeout(je,0):je())},[T,je]),Ne=function(j){return i?null:j},ke=function(j){return b?null:Ne(j)},Ze=function(j){return C?null:Ne(j)},We=function(j){L&&j.stopPropagation()},_e=O.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=Z.refKey,Ee=j===void 0?"ref":j,Xe=Z.role,He=Z.onKeyDown,Je=Z.onFocus,St=Z.onBlur,nt=Z.onClick,vt=Z.onDragEnter,Pt=Z.onDragOver,cn=Z.onDragLeave,Ke=Z.onDrop,wn=Lw(Z,iwe);return er(er(yD({onKeyDown:ke(Fc(He,lt)),onFocus:ke(Fc(Je,bt)),onBlur:ke(Fc(St,gt)),onClick:Ne(Fc(nt,ue)),onDragEnter:Ze(Fc(vt,pe)),onDragOver:Ze(Fc(Pt,ye)),onDragLeave:Ze(Fc(cn,Be)),onDrop:Ze(Fc(Ke,Le)),role:typeof Xe=="string"&&Xe!==""?Xe:"button"},Ee,D),!i&&!b?{tabIndex:0}:{}),wn)}},[D,lt,bt,gt,ue,pe,ye,Be,Le,b,C,i]),ft=O.useCallback(function(Z){Z.stopPropagation()},[]),dt=O.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=Z.refKey,Ee=j===void 0?"ref":j,Xe=Z.onChange,He=Z.onClick,Je=Lw(Z,rwe),St=yD({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Ne(Fc(Xe,Le)),onClick:Ne(Fc(He,ft)),tabIndex:-1},Ee,G);return er(er({},St),Je)}},[G,t,a,Le,i]),Rt=Y.length,Dt=Rt>0&&KTe({files:Y,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),gn=Rt>0&&!Dt;return er(er({},W),{},{isDragAccept:Dt,isDragReject:gn,isFocused:ee&&!i,getRootProps:_e,getInputProps:dt,rootRef:D,inputRef:G,open:Ne(je)})}function dwe(n,e){switch(e.type){case"focus":return er(er({},n),{},{isFocused:!0});case"blur":return er(er({},n),{},{isFocused:!1});case"openDialog":return er(er({},xD),{},{isFileDialogActive:!0});case"closeDialog":return er(er({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return er(er({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return er(er({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return er({},xD);default:return n}}function jV(){}function pwe(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const g=u(e);if(!f(h,g)){const v=h;c(h=g,v)}}return t.add(p),()=>t.delete(p)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const mwe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),KV=mwe?O.useEffect:O.useLayoutEffect;function gwe(n){const e=typeof n=="function"?pwe(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=O.useReducer(_=>_+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(i),c=O.useRef(r),u=O.useRef(!1),f=O.useRef();f.current===void 0&&(f.current=i(o));let h,p=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(h=i(o),p=!r(f.current,h)),KV(()=>{p&&(f.current=h),a.current=o,l.current=i,c.current=r,u.current=!1});const g=O.useRef(o);KV(()=>{const _=()=>{try{const A=e.getState(),T=l.current(A);c.current(f.current,T)||(a.current=A,f.current=T,s())}catch{u.current=!0,s()}},S=e.subscribe(_);return e.getState()!==g.current&&_(),S},[]);const v=p?h:f.current;return O.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const vwe=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=h=>{const p=o(h);if(!u(f,p)){const g=f;a(f=p,g)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var fP,XV;function ywe(){return XV||(XV=1,fP=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),fP}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var hP,YV;function sY(){if(YV)return hP;YV=1;var n=ywe();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return hP=function(i){var r,s;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},hP}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var dP,qV;function Kk(){if(qV)return dP;qV=1;var n=sY();return dP=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},dP}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var pP,JV;function xwe(){return JV||(JV=1,pP=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),pP}var mP,QV;function _we(){if(QV)return mP;QV=1;var n=Kk(),e=xwe();function t(o,a){for(var l=arguments.length,c=0;++c<l;){var u=arguments[c];r(u)&&e(u,i,o)}return o}function i(o,a){if(s(a)){var l=this[a];r(o)&&r(l)?t(l,o):this[a]=o}}function r(o){return n(o)&&!Array.isArray(o)}function s(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return mP=t,mP}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var gP,ZV;function Swe(){if(ZV)return gP;ZV=1,gP=function(t,i,r,s,o){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),s&&(i+="."+e(s)),o&&(i+="."+e(o)),i in t)return t[i];for(var a=i.split("."),l=a.length,c=-1;t&&++c<l;){for(var u=a[c];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+a[++c];t=t[u]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return gP}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var vP,eH;function Ewe(){return eH||(eH=1,vP=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(i[c]=o[c])}return i}),vP}var yP,tH;function Awe(){if(tH)return yP;tH=1;var n=Kk(),e=Ewe();yP=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");s(a)||(a={});for(var l=1;l<arguments.length;l++){var c=arguments[l];i(c)&&(c=r(c)),s(c)&&(t(a,c),e(a,c))}return a};function t(a,l){for(var c in l)o(l,c)&&(a[c]=l[c])}function i(a){return a&&typeof a=="string"}function r(a){var l={};for(var c in a)l[c]=a[c];return l}function s(a){return a&&typeof a=="object"||n(a)}function o(a,l){return Object.prototype.hasOwnProperty.call(a,l)}return yP}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var xP,nH;function Twe(){if(nH)return xP;nH=1;var n=Awe();xP=function(r,s,o){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(o=s,s=null),typeof s=="string"&&(s={sep:s});var a=n({sep:"."},s),l=a.quotes||['"',"'","`"],c;a.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(c=a.brackets);var u=[],f=[],h=[""],p=a.sep,g=r.length,v=-1,_;function S(){if(c&&f.length)return c[f[f.length-1]]}for(;++v<g;){var A=r[v],T=r[v+1],b={val:A,idx:v,arr:h,str:r};if(u.push(b),A==="\\"){b.val=i(a,r,v)===!0?A+T:T,b.escaped=!0,typeof o=="function"&&o(b),h[h.length-1]+=b.val,v++;continue}if(c&&c[A]){f.push(A);var C=S(),L=v+1;if(r.indexOf(C,L+1)!==-1)for(;f.length&&L<g;){var P=r[++L];if(P==="\\"){P++;continue}if(l.indexOf(P)!==-1){L=e(r,P,L+1);continue}if(C=S(),f.length&&r.indexOf(C,L+1)===-1)break;if(c[P]){f.push(P);continue}C===P&&f.pop()}if(_=L,_===-1){h[h.length-1]+=A;continue}A=r.slice(v,_+1),b.val=A,b.idx=v=_}if(l.indexOf(A)!==-1){if(_=e(r,A,v+1),_===-1){h[h.length-1]+=A;continue}t(A,a)===!0?A=r.slice(v,_+1):A=r.slice(v+1,_),b.val=A,b.idx=v=_}if(typeof o=="function"&&(o(b,u),A=b.val,v=b.idx),b.val===p&&b.split!==!1){h.push("");continue}h[h.length-1]+=b.val}return h};function e(r,s,o,a){var l=r.indexOf(s,o);return r.charAt(l-1)==="\\"?e(r,s,l+1):l}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function i(r,s,o){return typeof r.keepEscaping=="function"?r.keepEscaping(s,o):r.keepEscaping===!0||s[o+1]==="\\"}return xP}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var _P,iH;function wwe(){return iH||(iH=1,_P=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),_P}var SP,rH;function bwe(){if(rH)return SP;rH=1;var n=wwe();SP=function(r){n(r)||(r={});for(var s=arguments.length,o=1;o<s;o++){var a=arguments[o];n(a)&&e(r,a)}return r};function e(i,r){for(var s in r)t(r,s)&&(i[s]=r[s])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return SP}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var EP,sH;function Mwe(){return sH||(sH=1,EP=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),EP}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var AP,oH;function Cwe(){if(oH)return AP;oH=1;var n=Twe(),e=bwe(),t=sY(),i=Mwe();AP=function(s,o,a){if(!i(s)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return s;for(var l=n(o,{sep:".",brackets:!0}).filter(r),c=l.length,u=-1,f=s;++u<c;){var h=l[u];if(u!==c-1){i(f[h])||(f[h]={}),f=f[h];continue}t(f[h])&&t(a)?f[h]=e({},f[h],a):f[h]=a}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return AP}var TP,aH;function Rwe(){if(aH)return TP;aH=1;var n=Kk(),e=_we(),t=Swe(),i=Cwe();return TP=function(s,o,a){if(!n(s))throw new TypeError("expected an object");if(typeof o!="string"||a==null)return e.apply(null,arguments);if(typeof a=="string")return i(s,o,a),s;var l=t(s,o);return n(a)&&n(l)&&(a=e({},l,a)),i(s,o,a),s},TP}var Pwe=Rwe();const Iwe=Ov(Pwe),Xk=(...n)=>n.filter(Boolean).join(".");function Lwe(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Dwe(n,e){return Object.entries(MEe(n,e)).reduce((t,[,{value:i,disabled:r,key:s}])=>(t[s]=r?void 0:i,t),{})}function Bwe(n,e){const t=O.useRef();return p1(n,t.current)||(t.current=n),t.current}function oY(n,e){return O.useMemo(n,Bwe(e))}function kwe(n){const e=O.useRef(null),t=O.useRef(null),i=O.useRef(!0);return O.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),O.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const Owe=n=>{const[e,t]=O.useState(n.getVisiblePaths());return O.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:jb});return()=>i()},[n]),e};function Fwe(n,e,t){return n.useStore(r=>{const s=Sn(Sn({},t),r.data);return Dwe(s,e)},jb)}function aY(n=3){const e=O.useRef(null),t=O.useRef(null),[i,r]=O.useState(!1),s=O.useCallback(()=>r(!0),[]),o=O.useCallback(()=>r(!1),[]);return O.useLayoutEffect(()=>{if(i){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:o}}cTe([uTe]);const Nwe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};fa.extend({color:()=>n=>Po(n).isValid()});const Uwe=n=>fa().color().test(n);function lY(n,{format:e,hasAlpha:t,isString:i}){const r=Nwe[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?CEe(s,["a"]):s}const cY=(n,e)=>{const t=Po(n);if(!t.isValid())throw Error("Invalid color");return lY(t,e)},Gwe=(n,e)=>lY(Po(n),Sn(Sn({},e),{},{isString:!0,format:"hex"})),Vwe=({value:n})=>{const e=lTe(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:cY(n,r),settings:r}};var Hwe=Object.freeze({__proto__:null,schema:Uwe,sanitize:cY,format:Gwe,normalize:Vwe});const zwe=pn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),$we=pn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Wwe=pn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function lH(n,e){return e!=="rgb"?Po(n).toRgb():n}function jwe({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=ho(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:h}=aY(),p=O.useRef(0),[g,v]=O.useState(()=>lH(n,o)),_=a?vTe:xTe,S=()=>{v(lH(n,o)),f(),r()},A=()=>{h(),s(),window.clearTimeout(p.current)},T=()=>{p.current=window.setTimeout(A,500)};return O.useEffect(()=>()=>window.clearTimeout(p.current),[]),de.createElement(de.Fragment,null,de.createElement(zwe,{ref:l,active:u,onClick:()=>S(),style:{color:e}}),u&&de.createElement(Uk,null,de.createElement(IX,{onPointerUp:A}),de.createElement(Wwe,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:b=>b.buttons===0&&T()},de.createElement(_,{color:g,onChange:i}))))}function Kwe(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,t),de.createElement($we,null,de.createElement(jwe,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),de.createElement(Nk,{value:e,onChange:i,onUpdate:r})))}var Xwe=Sn({component:Kwe},Hwe);function Ywe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(Vk,{value:e,settings:i,onUpdate:t}))}var qwe=Sn({component:Ywe},UX(["x","y","z"]));const Jwe=pn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Qwe=pn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Zwe({value:n,settings:e,onUpdate:t}){const i=O.useRef(),r=O.useRef(0),s=O.useRef(0),o=O.useRef(1),[a,l]=O.useState(!1),[c,u]=O.useState(!1),[f,h]=DX(),p=O.useRef(null),g=O.useRef(null);O.useLayoutEffect(()=>{if(a){const{top:H,left:q,width:W,height:te}=p.current.getBoundingClientRect();g.current.style.left=q+W/2+"px",g.current.style.top=H+te/2+"px"}},[a]);const{keys:[v,_],joystick:S}=e,A=S==="invertY"?1:-1,{[v]:{step:T},[_]:{step:b}}=e,C=Ef("sizes","joystickWidth"),L=Ef("sizes","joystickHeight"),P=parseFloat(C)*.8/2,k=parseFloat(L)*.8/2,I=O.useCallback(()=>{i.current||(u(!0),r.current&&h({x:r.current*P}),s.current&&h({y:s.current*-k}),i.current=window.setInterval(()=>{t(H=>{const q=T*r.current*o.current,W=A*b*s.current*o.current;return Array.isArray(H)?{[v]:H[0]+q,[_]:H[1]+W}:{[v]:H[v]+q,[_]:H[_]+W}})},16))},[P,k,t,h,T,b,v,_,A]),D=O.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,u(!1)},[]);O.useEffect(()=>{function H(q){o.current=vX(q)}return window.addEventListener("keydown",H),window.addEventListener("keyup",H),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",H),window.removeEventListener("keyup",H)}},[]);const G=aS(({first:H,active:q,delta:[W,te],movement:[ee,ne]})=>{H&&l(!0);const Y=yd(ee,-P,P),Q=yd(ne,-k,k);r.current=Math.abs(ee)>Math.abs(Y)?Math.sign(ee-Y):0,s.current=Math.abs(ne)>Math.abs(Q)?Math.sign(Q-ne):0;let F=n[v],ie=n[_];q?(r.current||(F+=W*T*o.current,h({x:Y})),s.current||(ie-=A*te*b*o.current,h({y:Q})),r.current||s.current?I():D(),t({[v]:F,[_]:ie})):(l(!1),r.current=0,s.current=0,h({x:0,y:0}),D())});return de.createElement(Jwe,vr({ref:p},G()),a&&de.createElement(Uk,null,de.createElement(Qwe,{ref:g,isOutOfBounds:c},de.createElement("div",null),de.createElement("span",{ref:f}))))}const ebe=pn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function tbe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=ho();return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(ebe,{withJoystick:!!i.joystick},i.joystick&&de.createElement(Zwe,{value:e,settings:i,onUpdate:t}),de.createElement(Vk,{value:e,settings:i,onUpdate:t})))}const nbe=["joystick"],uY=UX(["x","y"]),ibe=n=>{let{joystick:e=!0}=n,t=Ti(n,nbe);const{value:i,settings:r}=uY.normalize(t);return{value:i,settings:Sn(Sn({},r),{},{joystick:e})}};var rbe=Sn(Sn({component:tbe},uY),{},{normalize:ibe});const sbe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},obe=(n,e)=>typeof e=="object"&&"image"in e,abe=({image:n})=>({value:n});var lbe=Object.freeze({__proto__:null,sanitize:sbe,schema:obe,normalize:abe});const cbe=pn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),ube=pn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),fbe=pn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),hbe=pn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),dbe=pn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),pbe=pn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function mbe(){const{label:n,value:e,onUpdate:t,disabled:i}=ho(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=aY(),c=O.useCallback(g=>{g.length&&t(g[0])},[t]),u=O.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:h,isDragAccept:p}=rY({maxFiles:1,accept:"image/*",onDrop:c,disabled:i});return de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(cbe,null,de.createElement(fbe,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&de.createElement(Uk,null,de.createElement(IX,{onPointerUp:l,style:{cursor:"pointer"}}),de.createElement(hbe,{ref:s,style:{backgroundImage:`url(${e})`}})),de.createElement(ube,f({isDragAccept:p}),de.createElement("input",h()),de.createElement(dbe,null,p?"drop image":"click or drop")),de.createElement(pbe,{onClick:u,disabled:!e})))}var gbe=Sn({component:mbe},lbe);const cH=fa().number(),vbe=(n,e)=>fa().array().length(2).every.number().test(n)&&fa().schema({min:cH,max:cH}).test(e),Dw=n=>({min:n[0],max:n[1]}),fY=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?Dw(n):n,s={min:i[0],max:i[1]},{min:o,max:a}=Sn(Sn({},s),r);return[yd(Number(o),e,Math.max(e,a)),yd(Number(a),Math.min(t,o),t)]},ybe=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=NX(Dw(n),{min:i,max:i}),s=[e,t],o=Sn(Sn({},r),{},{bounds:s});return{value:fY(Dw(n),o,n),settings:o}};var xbe=Object.freeze({__proto__:null,schema:vbe,format:Dw,sanitize:fY,normalize:ybe});const _be=["value","bounds","onDrag"],Sbe=["bounds"],Ebe=pn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Abe(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=Ti(n,_be);const o=O.useRef(null),a=O.useRef(null),l=O.useRef(null),c=O.useRef(0),u=Ef("sizes","scrubberWidth"),f=aS(({event:g,first:v,xy:[_],movement:[S],memo:A={}})=>{if(v){const{width:b,left:C}=o.current.getBoundingClientRect();c.current=b-parseFloat(u);const L=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;A.pos=Cw((_-C)/b,t,i);const P=Math.abs(A.pos-e.min)-Math.abs(A.pos-e.max);A.key=P<0||P===0&&A.pos<=e.min?"min":"max",L&&(A.pos=e[A.key])}const T=A.pos+Cw(S/c.current,0,i-t);return r({[A.key]:mAe(T,s[A.key])}),A}),h=`calc(${Mw(e.min,t,i)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-Mw(e.max,t,i)} * (100% - ${u} - 8px) + 4px)`;return de.createElement(kX,vr({ref:o},f()),de.createElement(BX,null,de.createElement(OX,{style:{left:h,right:p}})),de.createElement(cD,{position:"left",ref:a,style:{left:h}}),de.createElement(cD,{position:"right",ref:l,style:{right:p}}))}function Tbe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=ho(),r=Ti(i,Sbe);return de.createElement(de.Fragment,null,de.createElement(Il,{input:!0},de.createElement(vc,null,n),de.createElement(Ebe,null,de.createElement(Abe,vr({value:e},i,{onDrag:t})),de.createElement(Vk,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var wbe=Sn({component:Tbe},xbe);const bbe=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},Mbe=["type","value"],Cbe=["onChange","transient","onEditStart","onEditEnd"],Rbe=function(){const e=gwe(vwe(()=>({data:{}}))),t=bbe();this.storeId=bEe(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(i).forEach(([u,f])=>{f.render&&a.some(h=>h.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in hc&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let h=c[u];if(h){const{type:p,value:g}=f,v=Ti(f,Mbe);p!==h.type?df(tr.INPUT_TYPE_OVERRIDE,p):((h.__refCount===0||a)&&Object.assign(h,v),h.__refCount++)}else c[u]=Sn(Sn({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return TV(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Sn(Sn({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{TV(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{df(tr.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Sn(Sn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Sn(Sn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return df(tr.EMPTY_KEY);let h=Xk(a,u);if(f.type===hc.FOLDER){const p=s(f.schema,h,l);Object.assign(c,p),h in i||(i[h]=f.settings)}else if(u in l)df(tr.DUPLICATE_KEYS,u,h,l[u].path);else{const p=BEe(f,u,h,c);if(p){const{type:g,options:v,input:_}=p,{onChange:S,transient:A,onEditStart:T,onEditEnd:b}=v,C=Ti(v,Cbe);c[h]=Sn(Sn(Sn({type:g},C),_),{},{fromPanel:!0}),l[u]={path:h,onChange:S,transient:A,onEditStart:T,onEditEnd:b}}else df(tr.UNKNOWN_INPUT,h,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},hY=new Rbe,Pbe={collapsed:!1};function Fx(n,e){return{type:hc.FOLDER,schema:n,settings:Sn(Sn({},Pbe),e)}}const uH=n=>"__levaInput"in n,Ibe=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,o]=Lwe(r);(!i||s.toLowerCase().indexOf(i)>-1)&&Iwe(t,o,{[s]:{__levaInput:!0,path:r}})}),t},Lbe=["type","label","path","valueKey","value","settings","setValue","disabled"];function Dbe(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=n,c=Ti(n,Lbe);const{displayValue:u,onChange:f,onUpdate:h}=LX({type:e,value:s,settings:o,setValue:a}),p=Bm[e].component;return p?de.createElement(EX.Provider,{value:Sn({key:r,path:i,id:""+i,label:t,displayValue:u,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:l},c)},de.createElement(ZEe,{disabled:l},de.createElement(p,null))):(df(tr.NO_COMPONENT_FOR_TYPE,e,i),null)}const Bbe=pn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function kbe({onClick:n,settings:e,label:t}){const i=oS();return de.createElement(Il,null,de.createElement(Bbe,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const Obe=pn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Fbe=pn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Nbe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function Ube(n){const{label:e,opts:t}=Nbe(n),i=oS();return de.createElement(Il,{input:!!e},e&&de.createElement(vc,null,e),de.createElement(Obe,null,Object.entries(t).map(([r,s])=>de.createElement(Fbe,{key:r,onClick:()=>s(i.get)},r))))}const Gbe=pn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),dY=100;function Vbe(n,e){n.push(e),n.length>dY&&n.shift()}const Hbe=O.forwardRef(function({initialValue:n},e){const t=Ef("colors","highlight3"),i=Ef("colors","elevation2"),r=Ef("colors","highlight1"),[s,o]=O.useMemo(()=>[Po(r).alpha(.4).toRgbString(),Po(r).alpha(.1).toRgbString()],[r]),a=O.useRef([n]),l=O.useRef(n),c=O.useRef(n),u=O.useRef(),f=O.useCallback((g,v)=>{if(!g)return;const{width:_,height:S}=g,A=new Path2D,T=_/dY,b=S*.05;for(let P=0;P<a.current.length;P++){const k=Mw(a.current[P],l.current,c.current),I=T*P,D=S-k*(S-b*2)-b;A.lineTo(I,D)}v.clearRect(0,0,_,S);const C=new Path2D(A);C.lineTo(T*(a.current.length+1),S),C.lineTo(0,S),C.lineTo(0,0);const L=v.createLinearGradient(0,0,0,S);L.addColorStop(0,s),L.addColorStop(1,o),v.fillStyle=L,v.fill(C),v.strokeStyle=i,v.lineJoin="round",v.lineWidth=14,v.stroke(A),v.strokeStyle=t,v.lineWidth=2,v.stroke(A)},[t,i,s,o]),[h,p]=lAe(f);return O.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),Vbe(a.current,g),u.current=requestAnimationFrame(()=>f(h.current,p.current))}}),[h,p,f]),O.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),de.createElement(Gbe,{ref:h})}),fH=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),zbe=O.forwardRef(function({initialValue:n},e){const[t,i]=O.useState(fH(n));return O.useImperativeHandle(e,()=>({frame:r=>i(fH(r))}),[]),de.createElement("div",null,t)});function hH(n){return typeof n=="function"?n():n.current}function $be({label:n,objectOrFn:e,settings:t}){const i=O.useRef(),r=O.useRef(hH(e));return O.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(hH(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),de.createElement(Il,{input:!0},de.createElement(vc,{align:"top"},n),t.graph?de.createElement(Hbe,{ref:i,initialValue:r.current}):de.createElement(zbe,{ref:i,initialValue:r.current}))}const Wbe=["type","label","key"],jbe={[hc.BUTTON]:kbe,[hc.BUTTON_GROUP]:Ube,[hc.MONITOR]:$be},Kbe=de.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=uAe(n);if(!e)return null;const{type:l,label:c,key:u}=e,f=Ti(e,Wbe);if(l in hc){const h=jbe[l];return de.createElement(h,vr({label:c,path:n},f))}return l in Bm?de.createElement(Dbe,vr({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:a},f)):(yEe(tr.UNSUPPORTED_INPUT,l,n),null)});function Xbe({toggle:n,toggled:e,name:t}){return de.createElement(qEe,{onClick:()=>n()},de.createElement(Gk,{toggled:e}),de.createElement("div",null,t))}const Ybe=({name:n,path:e,tree:t})=>{const i=oS(),r=Xk(e,n),{collapsed:s,color:o}=i.getFolderSettings(r),[a,l]=O.useState(!s),c=O.useRef(null),u=Ef("colors","folderWidgetColor"),f=Ef("colors","folderTextColor");return O.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),de.createElement(Rw,{ref:c},de.createElement(Xbe,{name:n,toggled:a,toggle:()=>l(h=>!h)}),de.createElement(pY,{parent:r,tree:t,toggled:a}))},pY=de.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=kwe(s),l=oS(),c=([f,h])=>{var p;return(uH(h)?(p=l.getInput(h.path))===null||p===void 0?void 0:p.order:l.getFolderSettings(Xk(i,f)).order)||0},u=Object.entries(r).sort((f,h)=>c(f)-c(h));return de.createElement(aD,{ref:o,isRoot:n,fill:e,flat:t},de.createElement(CX,{ref:a,isRoot:n,toggled:s},u.map(([f,h])=>uH(h)?de.createElement(Kbe,{key:h.path,valueKey:h.valueKey,path:h.path}):de.createElement(Ybe,{key:f,name:f,path:i,tree:h}))))}),qbe=pn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${PX}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),mY=40,Bw=pn("i",{$flexCenter:"",width:mY,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Jbe=pn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Qbe=pn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Bw}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Zbe=pn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),eMe=pn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:mY}}}}),tMe=de.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=O.useState(""),s=O.useMemo(()=>gX(n,250),[n]),o=()=>{n(""),r("")},a=l=>{const c=l.currentTarget.value;e(!0),r(c)};return O.useEffect(()=>{s(i)},[i,s]),de.createElement(de.Fragment,null,de.createElement(Zbe,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),de.createElement(Bw,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function nMe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=O.useState(!1),h=O.useRef(null);O.useEffect(()=>{var g,v;u?(g=h.current)===null||g===void 0||g.focus():(v=h.current)===null||v===void 0||v.blur()},[u]);const p=aS(({offset:[g,v],first:_,last:S})=>{e({x:g,y:v}),_&&t({x:g,y:v}),S&&i({x:g,y:v})},{filterTaps:!0,from:({offset:[g,v]})=>[(c==null?void 0:c.x)||g,(c==null?void 0:c.y)||v]});return O.useEffect(()=>{const g=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(_=>!_)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),de.createElement(de.Fragment,null,de.createElement(Jbe,{mode:a?"drag":void 0},de.createElement(Bw,{active:!s,onClick:()=>r()},de.createElement(Gk,{toggled:s,width:12,height:8})),de.createElement(eMe,vr({},a?p():{},{drag:a,filterEnabled:l}),o===void 0&&a?de.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},de.createElement("circle",{cx:"2",cy:"2",r:"2"}),de.createElement("circle",{cx:"14",cy:"2",r:"2"}),de.createElement("circle",{cx:"26",cy:"2",r:"2"}),de.createElement("circle",{cx:"2",cy:"12",r:"2"}),de.createElement("circle",{cx:"14",cy:"12",r:"2"}),de.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&de.createElement(Bw,{active:u,onClick:()=>f(g=>!g)},de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},de.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),de.createElement(Qbe,{toggled:u},de.createElement(tMe,{ref:h,setFilter:n,toggle:r})))}const iMe=["store","hidden","theme","collapsed"];function rMe(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,s=Ti(n,iMe);const o=oY(()=>$Ee(i),[i]),[a,l]=O.useState(!r),c=typeof r=="object"?!r.collapsed:a,u=O.useMemo(()=>typeof r=="object"?f=>{typeof f=="function"?r.onChange(!f(!r.collapsed)):r.onChange(!f)}:l,[r]);return!e||t?null:de.createElement(Fk.Provider,{value:o},de.createElement(sMe,vr({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const sMe=de.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const h=Owe(n),[p,g]=O.useState(""),v=O.useMemo(()=>Ibe(h,p),[h,p]),[_,S]=DX(),A=r||h.length>0,T=typeof o=="object"&&o.title||void 0,b=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,C=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,L=typeof o=="object"&&o.position||void 0,P=typeof o=="object"&&o.onDrag||void 0,k=typeof o=="object"&&o.onDragStart||void 0,I=typeof o=="object"&&o.onDragEnd||void 0;return de.useEffect(()=>{S({x:L==null?void 0:L.x,y:L==null?void 0:L.y})},[L,S]),zEe(),de.createElement(TX.Provider,{value:{hideCopyButton:a}},de.createElement(qbe,{ref:_,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!o,style:{display:A?"block":"none"}},o&&de.createElement(nMe,{onDrag:D=>{S(D),P==null||P(D)},onDragStart:D=>k==null?void 0:k(D),onDragEnd:D=>I==null?void 0:I(D),setFilter:g,toggle:D=>c(G=>D??!G),toggled:l,title:T,drag:b,filterEnabled:C,from:L}),A&&de.createElement(AX.Provider,{value:n},de.createElement(pY,{isRoot:!0,fill:t,flat:i,tree:v,toggled:l}))))}),oMe=["isRoot"];let kw=!1,tm=null;function aMe(n){let{isRoot:e=!1}=n,t=Ti(n,oMe);return O.useEffect(()=>(kw=!0,!e&&tm&&(tm.remove(),tm=null),()=>{e||(kw=!1)}),[e]),de.createElement(rMe,vr({store:hY},t))}function lMe(n){O.useEffect(()=>{n&&!kw&&(tm||(tm=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(tm),OD.createRoot(tm).render(de.createElement(aMe,{isRoot:!0})))),kw=!0)},[n])}function cMe(n,e,t,i,r){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)&&(c=t)):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function uMe(n,e,t,i,r){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=cMe(n,e,t),u=typeof o=="function",f=O.useRef(!1),h=O.useRef(!0),p=oY(()=>{f.current=!0;const G=typeof o=="function"?o():o;return s?{[s]:Fx(G,a)}:G},c),g=!(l!=null&&l.store);lMe(g);const[v]=O.useState(()=>(l==null?void 0:l.store)||hY),[_,S]=O.useMemo(()=>v.getDataFromSchema(p),[v,p]),[A,T,b,C,L]=O.useMemo(()=>{const G=[],H=[],q={},W={},te={};return Object.values(S).forEach(({path:ee,onChange:ne,onEditStart:Y,onEditEnd:Q,transient:F})=>{G.push(ee),ne?(q[ee]=ne,F||H.push(ee)):H.push(ee),Y&&(W[ee]=Y),Q&&(te[ee]=Q)}),[G,H,q,W,te]},[S]),P=O.useMemo(()=>v.orderPaths(A),[A,v]),k=Fwe(v,T,_),I=O.useCallback(G=>{const H=Object.entries(G).reduce((q,[W,te])=>Object.assign(q,{[S[W].path]:te}),{});v.set(H,!1)},[v,S]),D=O.useCallback(G=>v.get(S[G].path),[v,S]);return O.useEffect(()=>{const G=!h.current&&f.current;return v.addData(_,G),h.current=!1,f.current=!1,()=>v.disposePaths(P)},[v,P,_]),O.useEffect(()=>{const G=[];return Object.entries(b).forEach(([H,q])=>{q(v.get(H),H,Sn({initial:!0,get:v.get},v.getInput(H)));const W=v.useStore.subscribe(te=>{const ee=te.data[H];return[ee.disabled?void 0:ee.value,ee]},([te,ee])=>q(te,H,Sn({initial:!1,get:v.get},ee)),{equalityFn:jb});G.push(W)}),()=>G.forEach(H=>H())},[v,b]),O.useEffect(()=>{const G=[];return Object.entries(C).forEach(([H,q])=>G.push(v.subscribeToEditStart(H,q))),Object.entries(L).forEach(([H,q])=>G.push(v.subscribeToEditEnd(H,q))),()=>G.forEach(H=>H())},[C,L,v]),u?[k,I,D]:k}kf(pc.SELECT,MAe);kf(pc.IMAGE,gbe);kf(pc.NUMBER,vAe);kf(pc.COLOR,Xwe);kf(pc.STRING,OAe);kf(pc.BOOLEAN,zAe);kf(pc.INTERVAL,wbe);kf(pc.VECTOR3D,qwe);kf(pc.VECTOR2D,rbe);const fMe=({settings:n,onChange:e,onRestart:t})=>{const[{...i},r]=uMe(()=>({" Emitter":Fx({duration:4,delay:0,nbParticles:2e3,spawnMode:{options:["time","burst"],value:"time"},loop:!1,startPositionMin:{value:[-1,-1,-1],min:-10,max:10,step:.1,label:"startPositionMin"},startPositionMax:{value:[1,1,1],min:-10,max:10,step:.1,label:"startPositionMax"},startRotationMin:{value:[0,0,0],min:-Math.PI*2,max:Math.PI*2,step:.1,label:"startRotationMin"},startRotationMax:{value:[0,0,0],min:-Math.PI*2,max:Math.PI*2,step:.1,label:"startRotationMax"}})," Particles":Fx({particlesLifetime:{value:[.1,1],min:0,max:10,step:.1,label:"lifetime"}})," Forces":Fx({speed:{value:[5,20],min:-100,max:100},directionMin:{value:[-1,-1,-1],min:-1,max:1,step:.1},directionMax:{value:[1,1,1],min:-1,max:1,step:.1},rotationSpeedMin:{value:[0,0,0],min:0,max:10,step:.1},rotationSpeedMax:{value:[0,0,0],min:0,max:10,step:.1}}),Appearance:Fx({nbColors:{options:[1,2,3]},colorStart:"#ffffff",colorEnd:"#ffffff",colorStart2:{value:"#ff0000",render:a=>a("Appearance.nbColors")>1},colorEnd2:{value:"#ffffff",render:a=>a("Appearance.nbColors")>1},colorStart3:{value:"#ff0000",render:a=>a("Appearance.nbColors")>2},colorEnd3:{value:"#ff0000",render:a=>a("Appearance.nbColors")>2},size:{value:[.01,1],min:0,max:5,step:.01,label:"size"}})})),s={...i,colorStart:[i.colorStart],colorEnd:[i.colorEnd]};delete s.nbColors,delete s.colorStart2,delete s.colorEnd2,delete s.colorStart3,delete s.colorEnd3,i.nbColors>1&&s.colorStart.push(i.colorStart2),i.nbColors>1&&s.colorEnd.push(i.colorEnd2),i.nbColors>2&&s.colorStart.push(i.colorStart3),i.nbColors>2&&s.colorEnd.push(i.colorEnd3);const o=O.useRef(s);o.current=s,O.useEffect(()=>{var a,l;if(n){const c={...n};for(let u=0;u<2;u++)((a=n.colorStart)==null?void 0:a.length)>u&&(c[u===0?"colorStart":`colorStart${u+1}`]=n.colorStart[u],c.nbColors=u+1),((l=n.colorEnd)==null?void 0:l.length)>u&&(c[u===0?"colorEnd":`colorEnd${u+1}`]=n.colorEnd[u]);r({duration:c.duration,delay:c.delay,nbParticles:c.nbParticles,spawnMode:c.spawnMode,loop:c.loop,startPositionMin:c.startPositionMin,startPositionMax:c.startPositionMax,startRotationMin:c.startRotationMin,startRotationMax:c.startRotationMax,particlesLifetime:c.particlesLifetime,speed:c.speed,directionMin:c.directionMin,directionMax:c.directionMax,rotationSpeedMin:c.rotationSpeedMin,rotationSpeedMax:c.rotationSpeedMax,nbColors:c.nbColors,colorStart:c.colorStart,colorEnd:c.colorEnd,colorStart2:c.colorStart2,colorEnd2:c.colorEnd2,colorStart3:c.colorStart3,colorEnd3:c.colorEnd3,size:c.size})}},[n]),O.useEffect(()=>{e(s)},[e,s])},WA=new re,wP=new Pi,hMe=new so,dMe=new so,pMe=new re,dH=O.forwardRef(({debug:n=!1,emitter:e,settings:t={},...i},r)=>{const[{duration:s=1,nbParticles:o=1e3,spawnMode:a="time",loop:l=!1,delay:c=0,colorStart:u=["blue","skyblue"],colorEnd:f=[],particlesLifetime:h=[.5,6],speed:p=[5,20],size:g=[.1,1],startPositionMin:v=[-1,-1,-1],startPositionMax:_=[1,1,1],startRotationMin:S=[0,0,0],startRotationMax:A=[0,0,0],rotationSpeedMin:T=[0,0,0],rotationSpeedMax:b=[0,0,0],directionMin:C=[0,0,0],directionMax:L=[0,0,0]},P]=O.useState(t),k=O.useCallback(()=>{G.current=0,H.current=0},[]),I=qL(W=>W.emit),D=O.useRef();O.useImperativeHandle(r,()=>D.current);const G=O.useRef(0),H=O.useRef(0);Go(({clock:W},te)=>{const ee=W.elapsedTime;if(G.current<o||l){if(!D)return;const Y=(a==="burst"?o:Math.max(0,Math.floor((H.current-c)/s*o)))-G.current;Y>0&&H.current>=c&&(I(e,Y,()=>{D.current.updateWorldMatrix(!0),D.current.matrixWorld.decompose(WA,wP,pMe),hMe.setFromQuaternion(wP),dMe.setFromQuaternion(wP);const F=Gn.randFloat(g[0],g[1]),ie=u[Gn.randInt(0,u.length-1)];return{position:[WA.x+Gn.randFloat(v[0],_[0]),WA.y+Gn.randFloat(v[1],_[1]),WA.z+Gn.randFloat(v[2],_[2])],direction:[Gn.randFloat(C[0],L[0]),Gn.randFloat(C[1],L[1]),Gn.randFloat(C[2],L[2])],scale:[F,F,F],rotation:[Gn.randFloat(S[0],A[0]),Gn.randFloat(S[1],A[1]),Gn.randFloat(S[2],A[2])],rotationSpeed:[Gn.randFloat(T[0],b[0]),Gn.randFloat(T[1],b[1]),Gn.randFloat(T[2],b[2])],lifetime:[ee,Gn.randFloat(h[0],h[1])],colorStart:ie,colorEnd:f!=null&&f.length?f[Gn.randInt(0,f.length-1)]:ie,speed:[Gn.randFloat(p[0],p[1])]}}),G.current+=Y)}H.current+=te});const q=O.useMemo(()=>n?ge.jsx(fMe,{settings:t,onChange:P,onRestart:k}):null,[n]);return ge.jsxs(ge.Fragment,{children:[q,ge.jsx("object3D",{...i,ref:D})]})});_k.registerPlugin(jn);const mMe=.05,gMe=()=>{const{isMobile:n,scaleFactor:e}=q1(),[t,i]=O.useState(aa.sections[0]),[r,s]=O.useState(!1),o=O.useRef(),a=z1(),l=n?10:20,c=O.useRef(),u=O.useRef(),f=O.useRef(),h=O.useRef(),p=Nm("textures/Particles/symbol_02.png"),g=O.useRef(Object.fromEntries(aa.sections.map(v=>[v,v==t?1:0])));return Go(({clock:v})=>{const _=v.elapsedTime;h.current.position.x=n?Math.sin(_*6)*2.5:Math.sin(_*6)*1.5,h.current.position.y=n?Math.cos(_*3)*2.6:Math.cos(_*3)*1.7,h.current.position.z=Math.sin(_*4)*1.5,f.current.position.x=n?Math.cos(_*6)*2.5:Math.cos(_*6)*1.5,f.current.position.y=n?Math.sin(_*3)*2.5:Math.sin(_*3)*1.6,f.current.position.z=Math.cos(_*4)*1.5,n?(o.current.position.x=-a.offset*l*(a.pages-1),o.current.position.z=0):(o.current.position.z=-a.offset*l*(a.pages-1),o.current.position.x=0),i(aa.sections[Math.round(a.offset*(a.pages-1))]),g.current=Object.fromEntries(aa.sections.map(A=>[A,A===t?1:0]));var S="home";o.current&&o.current.traverse(A=>{if(A.parent==o.current&&(S=A.name),A.isMesh&&A.material){const T=g.current[S]||0;A.material.opacity=Gn.lerp(A.material.opacity,T,mMe),A.material.transparent=!0}})}),O.useEffect(()=>{const v=()=>{const _=aa.sections.indexOf(window.location.hash.replace("#",""));_>=0&&a.el.scrollTo(0,_/(aa.sections.length-1)*(a.el.scrollHeight-a.el.clientHeight))};return window.addEventListener("hashchange",v),()=>window.removeEventListener("hashChange",v)},[]),ge.jsxs(ge.Fragment,{children:[ge.jsx(nme,{preset:"sunset"}),ge.jsx(rme,{hideAvatar:t==="projects"&&!n||t==="experience"&&r,"position-z":n?-1.8:0,scale:n?1.1:1,"position-x":-.05}),ge.jsxs("group",{ref:o,animate:t,children:[ge.jsxs("group",{name:"home",children:[ge.jsx(sme,{"position-x":-.009,"position-z":n?-2:0,"position-y":n?2.15:1.97,scale:.3}),ge.jsx(TR,{floatIntensity:n?1:2,speed:2,children:ge.jsx(cme,{"position-x":n?-.9:-1,"position-y":n?.7:.1,"position-z":n?-2:0,scale:.3,"rotation-y":Math.PI/4})}),ge.jsx(ume,{scale:.024,"rotation-y":n?Gn.degToRad(195):Gn.degToRad(140),position:n?[1,-.6,-5]:[4.8*e,-.5,-4.1]}),ge.jsxs("group",{scale:n?.3:1,"position-y":n?-.4:0,children:[ge.jsx(TR,{floatIntensity:.4,rotationIntensity:.2,speed:2,floatingRange:[-.05,.05],children:ge.jsx(R4,{disableY:!0,disableZ:!0,children:ge.jsx(Dp,{size:.8,"position-x":1.1,"position-y":n?1:1.4,"position-z":-3,bevelEnabled:!0,bevelThickness:.3,"rotation-x":n?-Math.PI/20:0,children:aa.home.title})})}),ge.jsx(R4,{disableY:!0,disableZ:!0,children:ge.jsx(Dp,{ref:c,size:1.1,"position-z":-3,"position-y":n?-.5:0,bevelEnabled:!0,bevelThickness:.3,"rotation-y":n?Math.PI/20:Math.PI/13,children:aa.home.subtitle})})]})]}),ge.jsx("group",{"position-x":n?l:0,"position-z":n?-4:l,name:"skills",children:ge.jsxs("group",{"position-x":n?0:-2,children:[ge.jsx(Dp,{"position-x":.4,"rotation-y":n?Math.PI/6:-Math.PI/6,children:"SKILLS"}),ge.jsx(ome,{"position-z":-2}),ge.jsx(ame,{scale:.4,"position-z":0,"position-x":-.2,"rotation-y":Math.PI/3}),ge.jsx(lme,{"position-z":.6,"position-x":-.4,"position-y":-.8,"rotation-y":-Math.PI})]})}),ge.jsxs("group",{"position-x":n?2*l:0,"position-z":n?-3:2*l,name:"experience",children:[!r&&ge.jsx(Dp,{"position-x":n?-1:.4,"position-z":n?2.5:0,scale:n?.75:1,"rotation-y":n?-Math.PI/10:0,children:"EXPERIENCE"}),ge.jsx("group",{position:[0,1,.5],children:ge.jsx(TR,{"rotation-x":-Math.PI/7,floatIntensity:.5,speed:2,rotationIntensity:1,children:ge.jsx(e1e,{setBookOpen:s})})})]}),ge.jsx("group",{"position-x":n?3*l:0,"position-z":n?-4:3*l,name:"projects",children:ge.jsxs("group",{"position-x":n?.25:1,children:[ge.jsx(Dp,{"position-x":n?-2.4:-.5,"position-z":0,"rotation-y":n?Math.PI/5:-Math.PI/6,children:"PROJECTS"}),ge.jsxs("group",{"position-x":.5,"position-z":0,"rotation-y":-Math.PI/6,scale:.8,children:[ge.jsx($_e,{"rotation-x":-.18,"position-z":-.895,"position-y":1.74}),ge.jsx(fme,{scale:.02,"position-y":1,"rotation-y":-Math.PI/2,"position-z":-1}),ge.jsx(Gpe,{"scale-x":2,"position-y":.5,"position-z":-1,children:ge.jsx("meshStandardMaterial",{color:"white"})})]})]})}),ge.jsxs("group",{"position-x":n?3.75*l:0,"position-z":n?-4:4*l,"rotation-y":Math.PI/5,name:"contact",children:[ge.jsx(Dp,{"position-x":.4,children:"CONTACT"}),n?null:ge.jsx(UK,{ref:u,"position-z":-12,"position-y":n?1:4.5,"position-x":n?10:-18,"rotation-y":Math.PI/15,"rotation-x":Math.PI/9,"rotation-z":-Math.PI/25}),ge.jsx(t1e,{position:n?[6,-2,0]:[0,0,-3],name:"sparks",alphaMap:p,settings:{nbParticles:1e5,renderMode:"billboard",intensity:1.2,fadeSize:[0,0],fadeAlpha:[0,1]}}),ge.jsx(dH,{ref:h,emitter:"sparks",settings:{nbParticles:5e3,colorStart:["pink","#ff99cc"],colorEnd:"#DA70D6",size:n?[.05,.5]:[.02,.22],startPositionMin:n?[8,6,0]:[1,3,0],startPositionMax:n?[8,6,0]:[1,3,0],directionMin:[-.5,0,-.5],directionMax:[.5,1,.5],speed:[.9,3],loop:!0,lifetime:n?[.8,2.6]:[.8,2.2]}}),ge.jsx(dH,{ref:f,emitter:"sparks",settings:{nbParticles:8e3,colorStart:["#eb16af","#ffa9ed"],startPositionMin:n?[7,4,0]:[1.2,1.5,0],startPositionMax:n?[7,4,0]:[1,1.4,0],directionMin:[-.5,0,-.5],directionMax:[.5,1,.5],particlesLifetime:[.1,2.7],speed:[.9,3],size:n?[.05,.5]:[.05,.22],loop:!0,lifetime:n?[.8,2.6]:[.8,2.2]}})]})]})]})},vMe=()=>ge.jsx("div",{className:"menu",children:ge.jsxs("div",{className:"menu_buttons",children:[ge.jsx("a",{className:"menu_button",href:"#home",children:"Home"}),ge.jsx("a",{className:"menu_button",href:"#skills",children:"Skills"}),ge.jsx("a",{className:"menu_button",href:"#experience",children:"Experience"}),ge.jsx("a",{className:"menu_button",href:"#projects",children:"Projects"}),ge.jsx("a",{className:"menu_button",href:"#contact",children:"Contact"})]})}),yMe=({onFinish:n})=>{const{progress:e,active:t}=jse();return O.useEffect(()=>{t||n==null||n()},[t,n]),ge.jsx("div",{className:`loading-screen ${t?"":"loading-screen--hidden"}`,children:ge.jsxs("div",{className:"loading-screen__container",children:[ge.jsx("h1",{className:"loading-screen__title",children:aa.title}),ge.jsx("div",{className:"progress__container",children:ge.jsx("div",{className:"progress__bar",style:{width:`${e}%`}})})]})})},gY=O.createContext({});function xMe(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const Yk=O.createContext(null),vY=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function _Me(n=!0){const e=O.useContext(Yk);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=O.useId();O.useEffect(()=>{if(n)return r(s)},[n]);const o=O.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const qk=typeof window<"u",SMe=qk?O.useLayoutEffect:O.useEffect,Va=n=>n;let yY=Va;function Jk(n){let e;return()=>(e===void 0&&(e=n()),e)}const Dv=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Af=n=>n*1e3,Tf=n=>n/1e3,EMe={useManualTiming:!1},jA=["read","resolveKeyframes","update","preRender","render","postRender"],pH={value:null};function AMe(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(u.schedule(f),n()),l++,f(a)}const u={schedule:(f,h=!1,p=!1)=>{const v=p&&r?t:i;return h&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{i.delete(f),o.delete(f)},process:f=>{if(a=f,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(c),e&&pH.value&&pH.value.frameloop[e].push(l),l=0,t.clear(),r=!1,s&&(s=!1,u.process(f))}};return u}const TMe=40;function xY(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=jA.reduce((S,A)=>(S[A]=AMe(s,e?A:void 0),S),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=o,p=()=>{const S=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(S-r.timestamp,TMe),1),r.timestamp=S,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),f.process(r),h.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(p))},g=()=>{t=!0,i=!0,r.isProcessing||n(p)};return{schedule:jA.reduce((S,A)=>{const T=o[A];return S[A]=(b,C=!1,L=!1)=>(t||g(),T.schedule(b,C,L)),S},{}),cancel:S=>{for(let A=0;A<jA.length;A++)o[jA[A]].cancel(S)},state:r,steps:o}}const{schedule:Gi,cancel:xd,state:ks,steps:bP}=xY(typeof requestAnimationFrame<"u"?requestAnimationFrame:Va,!0),_Y=O.createContext({strict:!1}),mH={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bv={};for(const n in mH)Bv[n]={isEnabled:e=>mH[n].some(t=>!!e[t])};function wMe(n){for(const e in n)Bv[e]={...Bv[e],...n[e]}}const bMe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ow(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||bMe.has(n)}let SY=n=>!Ow(n);function MMe(n){n&&(SY=e=>e.startsWith("on")?!Ow(e):n(e))}try{MMe(require("@emotion/is-prop-valid").default)}catch{}function CMe(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(SY(r)||t===!0&&Ow(r)||!e&&!Ow(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function RMe(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Zb=O.createContext({});function eM(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function y1(n){return typeof n=="string"||Array.isArray(n)}const Qk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zk=["initial",...Qk];function tM(n){return eM(n.animate)||Zk.some(e=>y1(n[e]))}function EY(n){return!!(tM(n)||n.variants)}function PMe(n,e){if(tM(n)){const{initial:t,animate:i}=n;return{initial:t===!1||y1(t)?t:void 0,animate:y1(i)?i:void 0}}return n.inherit!==!1?e:{}}function IMe(n){const{initial:e,animate:t}=PMe(n,O.useContext(Zb));return O.useMemo(()=>({initial:e,animate:t}),[gH(e),gH(t)])}function gH(n){return Array.isArray(n)?n.join(" "):n}const LMe=Symbol.for("motionComponentSymbol");function W0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function DMe(n,e,t){return O.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):W0(t)&&(t.current=i))},[e])}const eO=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BMe="framerAppearId",AY="data-"+eO(BMe),{schedule:tO}=xY(queueMicrotask,!1),TY=O.createContext({});function kMe(n,e,t,i,r){var s,o;const{visualElement:a}=O.useContext(Zb),l=O.useContext(_Y),c=O.useContext(Yk),u=O.useContext(vY).reducedMotion,f=O.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,p=O.useContext(TY);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&OMe(f.current,t,r,p);const g=O.useRef(!1);O.useInsertionEffect(()=>{h&&g.current&&h.update(t,c)});const v=t[AY],_=O.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return SMe(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),tO.render(h.render),_.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,v)}),_.current=!1))}),h}function OMe(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:wY(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&W0(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function wY(n){if(n)return n.options.allowProjection!==!1?n.projection:wY(n.parent)}function FMe({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&wMe(n);function a(c,u){let f;const h={...O.useContext(vY),...c,layoutId:NMe(c)},{isStatic:p}=h,g=IMe(c),v=i(c,p);if(!p&&qk){UMe();const _=GMe(h);f=_.MeasureLayout,g.visualElement=kMe(r,v,h,e,_.ProjectionNode)}return ge.jsxs(Zb.Provider,{value:g,children:[f&&g.visualElement?ge.jsx(f,{visualElement:g.visualElement,...h}):null,t(r,c,DMe(v,g.visualElement,u),v,p,g.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=O.forwardRef(a);return l[LMe]=r,l}function NMe({layoutId:n}){const e=O.useContext(gY).id;return e&&n!==void 0?e+"-"+n:n}function UMe(n,e){O.useContext(_Y).strict}function GMe(n){const{drag:e,layout:t}=Bv;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const bY=n=>e=>typeof e=="string"&&e.startsWith(n),nO=bY("--"),VMe=bY("var(--"),iO=n=>VMe(n)?HMe.test(n.split("/*")[0].trim()):!1,HMe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,x1={};function zMe(n){for(const e in n)x1[e]=n[e],nO(e)&&(x1[e].isCSSVariable=!0)}const Qv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hm=new Set(Qv);function MY(n,{layout:e,layoutId:t}){return Hm.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!x1[n]||n==="opacity")}const co=n=>!!(n&&n.getVelocity),CY=(n,e)=>e&&typeof n=="number"?e.transform(n):n,If=(n,e,t)=>t>e?e:t<n?n:t,Zv={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},_1={...Zv,transform:n=>If(0,1,n)},KA={...Zv,default:1},uS=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),kh=uS("deg"),lu=uS("%"),xn=uS("px"),$Me=uS("vh"),WMe=uS("vw"),vH={...lu,parse:n=>lu.parse(n)/100,transform:n=>lu.transform(n*100)},jMe={borderWidth:xn,borderTopWidth:xn,borderRightWidth:xn,borderBottomWidth:xn,borderLeftWidth:xn,borderRadius:xn,radius:xn,borderTopLeftRadius:xn,borderTopRightRadius:xn,borderBottomRightRadius:xn,borderBottomLeftRadius:xn,width:xn,maxWidth:xn,height:xn,maxHeight:xn,top:xn,right:xn,bottom:xn,left:xn,padding:xn,paddingTop:xn,paddingRight:xn,paddingBottom:xn,paddingLeft:xn,margin:xn,marginTop:xn,marginRight:xn,marginBottom:xn,marginLeft:xn,backgroundPositionX:xn,backgroundPositionY:xn},KMe={rotate:kh,rotateX:kh,rotateY:kh,rotateZ:kh,scale:KA,scaleX:KA,scaleY:KA,scaleZ:KA,skew:kh,skewX:kh,skewY:kh,distance:xn,translateX:xn,translateY:xn,translateZ:xn,x:xn,y:xn,z:xn,perspective:xn,transformPerspective:xn,opacity:_1,originX:vH,originY:vH,originZ:xn},yH={...Zv,transform:Math.round},rO={...jMe,...KMe,zIndex:yH,size:xn,fillOpacity:_1,strokeOpacity:_1,numOctaves:yH},XMe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YMe=Qv.length;function qMe(n,e,t){let i="",r=!0;for(let s=0;s<YMe;s++){const o=Qv[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=CY(a,rO[o]);if(!l){r=!1;const u=XMe[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function sO(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Hm.has(l)){o=!0;continue}else if(nO(l)){r[l]=c;continue}else{const u=CY(c,rO[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=qMe(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const oO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RY(n,e,t){for(const i in e)!co(e[i])&&!MY(i,t)&&(n[i]=e[i])}function JMe({transformTemplate:n},e){return O.useMemo(()=>{const t=oO();return sO(t,e,n),Object.assign({},t.vars,t.style)},[e])}function QMe(n,e){const t=n.style||{},i={};return RY(i,t,n),Object.assign(i,JMe(n,e)),i}function ZMe(n,e){const t={},i=QMe(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const eCe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aO(n){return typeof n!="string"||n.includes("-")?!1:!!(eCe.indexOf(n)>-1||/[A-Z]/u.test(n))}const tCe={offset:"stroke-dashoffset",array:"stroke-dasharray"},nCe={offset:"strokeDashoffset",array:"strokeDasharray"};function iCe(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?tCe:nCe;n[s.offset]=xn.transform(-i);const o=xn.transform(e),a=xn.transform(t);n[s.array]=`${o} ${a}`}function xH(n,e,t){return typeof n=="string"?n:xn.transform(e+t*n)}function rCe(n,e,t){const i=xH(e,n.x,n.width),r=xH(t,n.y,n.height);return`${i} ${r}`}function lO(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(sO(n,c,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:p,dimensions:g}=n;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=rCe(g,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),i!==void 0&&(h.scale=i),o!==void 0&&iCe(h,o,a,l,!1)}const PY=()=>({...oO(),attrs:{}}),cO=n=>typeof n=="string"&&n.toLowerCase()==="svg";function sCe(n,e,t,i){const r=O.useMemo(()=>{const s=PY();return lO(s,e,cO(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};RY(s,n.style,n),r.style={...s,...r.style}}return r}function oCe(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(aO(t)?sCe:ZMe)(i,s,o,t),c=CMe(i,typeof t=="string",n),u=t!==O.Fragment?{...c,...l,ref:r}:{},{children:f}=i,h=O.useMemo(()=>co(f)?f.get():f,[f]);return O.createElement(t,{...u,children:h})}}function _H(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function uO(n,e,t,i){if(typeof e=="function"){const[r,s]=_H(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=_H(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const _D=n=>Array.isArray(n),aCe=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),lCe=n=>_D(n)?n[n.length-1]||0:n;function bT(n){const e=co(n)?n.get():n;return aCe(e)?e.toValue():e}function cCe({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:uCe(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const IY=n=>(e,t)=>{const i=O.useContext(Zb),r=O.useContext(Yk),s=()=>cCe(n,e,i,r);return t?s():xMe(s)};function uCe(n,e,t,i){const r={},s=i(n,{});for(const h in s)r[h]=bT(s[h]);let{initial:o,animate:a}=n;const l=tM(n),c=EY(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!eM(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const g=uO(n,h[p]);if(g){const{transitionEnd:v,transition:_,...S}=g;for(const A in S){let T=S[A];if(Array.isArray(T)){const b=u?T.length-1:0;T=T[b]}T!==null&&(r[A]=T)}for(const A in v)r[A]=v[A]}}}return r}function fO(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(co(r[o])||e.style&&co(e.style[o])||MY(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const fCe={useVisualState:IY({scrapeMotionValuesFromProps:fO,createRenderState:oO})};function LY(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function DY(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const BY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kY(n,e,t,i){DY(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(BY.has(r)?r:eO(r),e.attrs[r])}function OY(n,e,t){const i=fO(n,e,t);for(const r in n)if(co(n[r])||co(e[r])){const s=Qv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const SH=["x","y","width","height","cx","cy","r"],hCe={useVisualState:IY({scrapeMotionValuesFromProps:OY,createRenderState:PY,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(Hm.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<SH.length;a++){const l=SH[a];n[l]!==e[l]&&(o=!0)}o&&Gi.read(()=>{LY(t,i),Gi.render(()=>{lO(i,r,cO(t.tagName),n.transformTemplate),kY(t,i)})})}})};function dCe(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...aO(i)?hCe:fCe,preloadedFeatures:n,useRender:oCe(r),createVisualElement:e,Component:i};return FMe(o)}}function S1(n,e,t){const i=n.getProps();return uO(i,e,t!==void 0?t:i.custom,n)}const pCe=Jk(()=>window.ScrollTimeline!==void 0);class mCe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(pCe()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gCe extends mCe{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function hO(n,e){return n?n[e]||n.default||n:void 0}const SD=2e4;function FY(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<SD;)e+=t,i=n.next(e);return e>=SD?1/0:e}function dO(n){return typeof n=="function"}function EH(n,e){n.timeline=e,n.onfinish=null}const pO=n=>Array.isArray(n)&&typeof n[0]=="number",vCe={linearEasing:void 0};function yCe(n,e){const t=Jk(n);return()=>{var i;return(i=vCe[e])!==null&&i!==void 0?i:t()}}const Fw=yCe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),NY=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(Dv(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function UY(n){return!!(typeof n=="function"&&Fw()||!n||typeof n=="string"&&(n in ED||Fw())||pO(n)||Array.isArray(n)&&n.every(UY))}const Nx=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,ED={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nx([0,.65,.55,1]),circOut:Nx([.55,0,1,.45]),backIn:Nx([.31,.01,.66,-.59]),backOut:Nx([.33,1.53,.69,.99])};function GY(n,e){if(n)return typeof n=="function"&&Fw()?NY(n,e):pO(n)?Nx(n):Array.isArray(n)?n.map(t=>GY(t,e)||ED.easeOut):ED[n]}const oc={x:!1,y:!1};function VY(){return oc.x||oc.y}function xCe(n,e,t){var i;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function HY(n,e){const t=xCe(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function AH(n){return!(n.pointerType==="touch"||VY())}function _Ce(n,e,t={}){const[i,r,s]=HY(n,t),o=a=>{if(!AH(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=f=>{AH(f)&&(c(f),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}function Nw(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const zY=(n,e)=>e?n===e?!0:zY(n,e.parentElement):!1,mO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,SCe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ECe(n){return SCe.has(n.tagName)||n.tabIndex!==-1}const Ux=new WeakSet;function TH(n){return e=>{e.key==="Enter"&&n(e)}}function MP(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ACe=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=TH(()=>{if(Ux.has(t))return;MP(t,"down");const r=TH(()=>{MP(t,"up")}),s=()=>MP(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function wH(n){return mO(n)&&!VY()}function TCe(n,e,t={}){const[i,r,s]=HY(n,t),o=a=>{const l=a.currentTarget;if(!l||!wH(a)||Ux.has(l))return;Ux.add(l),Nw(a,"set");const c=e(l,a),u=(p,g)=>{l.removeEventListener("pointerup",f),l.removeEventListener("pointercancel",h),Nw(p,"release"),!(!wH(p)||!Ux.has(l))&&(Ux.delete(l),typeof c=="function"&&c(p,{success:g}))},f=p=>{(p.isTrusted?wCe(p,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?u(p,!1):u(p,!(l instanceof Element)||zY(l,p.target))},h=p=>{u(p,!1)};l.addEventListener("pointerup",f,r),l.addEventListener("pointercancel",h,r),l.addEventListener("lostpointercapture",h,r)};return i.forEach(a=>{a=t.useGlobalTarget?window:a;let l=!1;a instanceof HTMLElement&&(l=!0,!ECe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0)),a.addEventListener("pointerdown",o,r),l&&a.addEventListener("focus",c=>ACe(c,r),r)}),s}function wCe(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}function bCe(n){return n==="x"||n==="y"?oc[n]?null:(oc[n]=!0,()=>{oc[n]=!1}):oc.x||oc.y?null:(oc.x=oc.y=!0,()=>{oc.x=oc.y=!1})}const $Y=new Set(["width","height","top","left","right","bottom",...Qv]);let MT;function MCe(){MT=void 0}const cu={now:()=>(MT===void 0&&cu.set(ks.isProcessing||EMe.useManualTiming?ks.timestamp:performance.now()),MT),set:n=>{MT=n,queueMicrotask(MCe)}};function gO(n,e){n.indexOf(e)===-1&&n.push(e)}function vO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class yO{constructor(){this.subscriptions=[]}add(e){return gO(this.subscriptions,e),()=>vO(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function WY(n,e){return e?n*(1e3/e):0}const bH=30,CCe=n=>!isNaN(parseFloat(n));class RCe{constructor(e,t={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=cu.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=cu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=CCe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new yO);const i=this.events[e].add(t);return e==="change"?()=>{i(),Gi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bH)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,bH);return WY(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function E1(n,e){return new RCe(n,e)}function PCe(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,E1(t))}function ICe(n,e){const t=S1(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=lCe(s[o]);PCe(n,o,a)}}function LCe(n){return!!(co(n)&&n.add)}function AD(n,e){const t=n.getValue("willChange");if(LCe(t))return t.add(e)}function jY(n){return n.props[AY]}const KY=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,DCe=1e-7,BCe=12;function kCe(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=KY(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>DCe&&++a<BCe);return o}function fS(n,e,t,i){if(n===e&&t===i)return Va;const r=s=>kCe(s,0,1,n,t);return s=>s===0||s===1?s:KY(r(s),e,i)}const XY=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,YY=n=>e=>1-n(1-e),qY=fS(.33,1.53,.69,.99),xO=YY(qY),JY=XY(xO),QY=n=>(n*=2)<1?.5*xO(n):.5*(2-Math.pow(2,-10*(n-1))),_O=n=>1-Math.sin(Math.acos(n)),ZY=YY(_O),eq=XY(_O),tq=n=>/^0[^.\s]+$/u.test(n);function OCe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||tq(n):!0}const x_=n=>Math.round(n*1e5)/1e5,SO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FCe(n){return n==null}const NCe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,EO=(n,e)=>t=>!!(typeof t=="string"&&NCe.test(t)&&t.startsWith(n)||e&&!FCe(t)&&Object.prototype.hasOwnProperty.call(t,e)),nq=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(SO);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},UCe=n=>If(0,255,n),CP={...Zv,transform:n=>Math.round(UCe(n))},nm={test:EO("rgb","red"),parse:nq("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+CP.transform(n)+", "+CP.transform(e)+", "+CP.transform(t)+", "+x_(_1.transform(i))+")"};function GCe(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const TD={test:EO("#"),parse:GCe,transform:nm.transform},j0={test:EO("hsl","hue"),parse:nq("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+lu.transform(x_(e))+", "+lu.transform(x_(t))+", "+x_(_1.transform(i))+")"},to={test:n=>nm.test(n)||TD.test(n)||j0.test(n),parse:n=>nm.test(n)?nm.parse(n):j0.test(n)?j0.parse(n):TD.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?nm.transform(n):j0.transform(n)},VCe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HCe(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(SO))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(VCe))===null||t===void 0?void 0:t.length)||0)>0}const iq="number",rq="color",zCe="var",$Ce="var(",MH="${}",WCe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function A1(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(WCe,l=>(to.test(l)?(i.color.push(s),r.push(rq),t.push(to.parse(l))):l.startsWith($Ce)?(i.var.push(s),r.push(zCe),t.push(l)):(i.number.push(s),r.push(iq),t.push(parseFloat(l))),++s,MH)).split(MH);return{values:t,split:a,indexes:i,types:r}}function sq(n){return A1(n).values}function oq(n){const{split:e,types:t}=A1(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===iq?s+=x_(r[o]):a===rq?s+=to.transform(r[o]):s+=r[o]}return s}}const jCe=n=>typeof n=="number"?0:n;function KCe(n){const e=sq(n);return oq(n)(e.map(jCe))}const _d={test:HCe,parse:sq,createTransformer:oq,getAnimatableNone:KCe},XCe=new Set(["brightness","contrast","saturate","opacity"]);function YCe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(SO)||[];if(!i)return n;const r=t.replace(i,"");let s=XCe.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const qCe=/\b([a-z-]*)\(.*?\)/gu,wD={..._d,getAnimatableNone:n=>{const e=n.match(qCe);return e?e.map(YCe).join(" "):n}},JCe={...rO,color:to,backgroundColor:to,outlineColor:to,fill:to,stroke:to,borderColor:to,borderTopColor:to,borderRightColor:to,borderBottomColor:to,borderLeftColor:to,filter:wD,WebkitFilter:wD},AO=n=>JCe[n];function aq(n,e){let t=AO(n);return t!==wD&&(t=_d),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const QCe=new Set(["auto","none","0"]);function ZCe(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!QCe.has(s)&&A1(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=aq(t,r)}const CH=n=>n===Zv||n===xn,RH=(n,e)=>parseFloat(n.split(", ")[e]),PH=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return RH(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?RH(s[1],n):0}},eRe=new Set(["x","y","z"]),tRe=Qv.filter(n=>!eRe.has(n));function nRe(n){const e=[];return tRe.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const kv={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:PH(4,13),y:PH(5,14)};kv.translateX=kv.x;kv.translateY=kv.y;const xm=new Set;let bD=!1,MD=!1;function lq(){if(MD){const n=Array.from(xm).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=nRe(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}MD=!1,bD=!1,xm.forEach(n=>n.complete()),xm.clear()}function cq(){xm.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(MD=!0)})}function iRe(){cq(),lq()}class TO{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(xm.add(this),bD||(bD=!0,Gi.read(cq),Gi.resolveKeyframes(lq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),xm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,xm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const uq=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),rRe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sRe(n){const e=rRe.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function fq(n,e,t=1){const[i,r]=sRe(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return uq(o)?parseFloat(o):o}return iO(r)?fq(r,e,t+1):r}const hq=n=>e=>e.test(n),oRe={test:n=>n==="auto",parse:n=>n},dq=[Zv,xn,lu,kh,WMe,$Me,oRe],IH=n=>dq.find(hq(n));class pq extends TO{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),iO(c))){const u=fq(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$Y.has(i)||e.length!==2)return;const[r,s]=e,o=IH(r),a=IH(s);if(o!==a)if(CH(o)&&CH(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)OCe(e[r])&&i.push(r);i.length&&ZCe(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kv[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=kv[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const LH=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(_d.test(n)||n==="0")&&!n.startsWith("url("));function aRe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function lRe(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=LH(r,e),a=LH(s,e);return!o||!a?!1:aRe(n)||(t==="spring"||dO(t))&&i}const cRe=n=>n!==null;function nM(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(cRe),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const uRe=40;class mq{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cu.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uRe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&iRe(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=cu.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!lRe(e,i,r,s))if(o)this.options.duration=0;else{l&&l(nM(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const or=(n,e,t)=>n+(e-n)*t;function RP(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function fRe({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=RP(l,a,n+1/3),s=RP(l,a,n),o=RP(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Uw(n,e){return t=>t>0?e:n}const PP=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},hRe=[TD,nm,j0],dRe=n=>hRe.find(e=>e.test(n));function DH(n){const e=dRe(n);if(!e)return!1;let t=e.parse(n);return e===j0&&(t=fRe(t)),t}const BH=(n,e)=>{const t=DH(n),i=DH(e);if(!t||!i)return Uw(n,e);const r={...t};return s=>(r.red=PP(t.red,i.red,s),r.green=PP(t.green,i.green,s),r.blue=PP(t.blue,i.blue,s),r.alpha=or(t.alpha,i.alpha,s),nm.transform(r))},pRe=(n,e)=>t=>e(n(t)),hS=(...n)=>n.reduce(pRe),CD=new Set(["none","hidden"]);function mRe(n,e){return CD.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function gRe(n,e){return t=>or(n,e,t)}function wO(n){return typeof n=="number"?gRe:typeof n=="string"?iO(n)?Uw:to.test(n)?BH:xRe:Array.isArray(n)?gq:typeof n=="object"?to.test(n)?BH:vRe:Uw}function gq(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>wO(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function vRe(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=wO(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function yRe(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const xRe=(n,e)=>{const t=_d.createTransformer(e),i=A1(n),r=A1(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?CD.has(n)&&!r.values.length||CD.has(e)&&!i.values.length?mRe(n,e):hS(gq(yRe(i,r),r.values),t):Uw(n,e)};function vq(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?or(n,e,t):wO(n)(n,e)}const _Re=5;function yq(n,e,t){const i=Math.max(e-_Re,0);return WY(t-n(i),e-i)}const hr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kH=.001;function SRe({duration:n=hr.duration,bounce:e=hr.bounce,velocity:t=hr.velocity,mass:i=hr.mass}){let r,s,o=1-e;o=If(hr.minDamping,hr.maxDamping,o),n=If(hr.minDuration,hr.maxDuration,Tf(n)),o<1?(r=c=>{const u=c*o,f=u*n,h=u-t,p=RD(c,o),g=Math.exp(-f);return kH-h/p*g},s=c=>{const f=c*o*n,h=f*t+t,p=Math.pow(o,2)*Math.pow(c,2)*n,g=Math.exp(-f),v=RD(Math.pow(c,2),o);return(-r(c)+kH>0?-1:1)*((h-p)*g)/v}):(r=c=>{const u=Math.exp(-c*n),f=(c-t)*n+1;return-.001+u*f},s=c=>{const u=Math.exp(-c*n),f=(t-c)*(n*n);return u*f});const a=5/n,l=ARe(r,s,a);if(n=Af(n),isNaN(l))return{stiffness:hr.stiffness,damping:hr.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const ERe=12;function ARe(n,e,t){let i=t;for(let r=1;r<ERe;r++)i=i-n(i)/e(i);return i}function RD(n,e){return n*Math.sqrt(1-e*e)}const TRe=["duration","bounce"],wRe=["stiffness","damping","mass"];function OH(n,e){return e.some(t=>n[t]!==void 0)}function bRe(n){let e={velocity:hr.velocity,stiffness:hr.stiffness,damping:hr.damping,mass:hr.mass,isResolvedFromDuration:!1,...n};if(!OH(n,wRe)&&OH(n,TRe))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*If(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:hr.mass,stiffness:r,damping:s}}else{const t=SRe(n);e={...e,...t,mass:hr.mass},e.isResolvedFromDuration=!0}return e}function xq(n=hr.visualDuration,e=hr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:h,isResolvedFromDuration:p}=bRe({...t,velocity:-Tf(t.velocity||0)}),g=h||0,v=c/(2*Math.sqrt(l*u)),_=o-s,S=Tf(Math.sqrt(l/u)),A=Math.abs(_)<5;i||(i=A?hr.restSpeed.granular:hr.restSpeed.default),r||(r=A?hr.restDelta.granular:hr.restDelta.default);let T;if(v<1){const C=RD(S,v);T=L=>{const P=Math.exp(-v*S*L);return o-P*((g+v*S*_)/C*Math.sin(C*L)+_*Math.cos(C*L))}}else if(v===1)T=C=>o-Math.exp(-S*C)*(_+(g+S*_)*C);else{const C=S*Math.sqrt(v*v-1);T=L=>{const P=Math.exp(-v*S*L),k=Math.min(C*L,300);return o-P*((g+v*S*_)*Math.sinh(k)+C*_*Math.cosh(k))/C}}const b={calculatedDuration:p&&f||null,next:C=>{const L=T(C);if(p)a.done=C>=f;else{let P=0;v<1&&(P=C===0?Af(g):yq(T,C,L));const k=Math.abs(P)<=i,I=Math.abs(o-L)<=r;a.done=k&&I}return a.value=a.done?o:L,a},toString:()=>{const C=Math.min(FY(b),SD),L=NY(P=>b.next(C*P).value,C,30);return C+"ms "+L}};return b}function FH({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],h={done:!1,value:f},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let v=t*e;const _=f+v,S=o===void 0?_:o(_);S!==_&&(v=S-f);const A=k=>-v*Math.exp(-k/i),T=k=>S+A(k),b=k=>{const I=A(k),D=T(k);h.done=Math.abs(I)<=c,h.value=h.done?S:D};let C,L;const P=k=>{p(h.value)&&(C=k,L=xq({keyframes:[h.value,g(h.value)],velocity:yq(T,k,h.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:k=>{let I=!1;return!L&&C===void 0&&(I=!0,b(k),P(k)),C!==void 0&&k>=C?L.next(k-C):(!I&&b(k),h)}}}const MRe=fS(.42,0,1,1),CRe=fS(0,0,.58,1),_q=fS(.42,0,.58,1),RRe=n=>Array.isArray(n)&&typeof n[0]!="number",PRe={linear:Va,easeIn:MRe,easeInOut:_q,easeOut:CRe,circIn:_O,circInOut:eq,circOut:ZY,backIn:xO,backInOut:JY,backOut:qY,anticipate:QY},NH=n=>{if(pO(n)){yY(n.length===4);const[e,t,i,r]=n;return fS(e,t,i,r)}else if(typeof n=="string")return PRe[n];return n};function IRe(n,e,t){const i=[],r=t||vq,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Va:e;a=hS(l,a)}i.push(a)}return i}function LRe(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(yY(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=IRe(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const h=Dv(n[f],n[f+1],u);return a[f](h)};return t?u=>c(If(n[0],n[s-1],u)):c}function DRe(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Dv(0,e,i);n.push(or(t,1,r))}}function BRe(n){const e=[0];return DRe(e,n.length-1),e}function kRe(n,e){return n.map(t=>t*e)}function ORe(n,e){return n.map(()=>e||_q).splice(0,n.length-1)}function Gw({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=RRe(i)?i.map(NH):NH(i),s={done:!1,value:e[0]},o=kRe(t&&t.length===e.length?t:BRe(e),n),a=LRe(o,e,{ease:Array.isArray(r)?r:ORe(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const FRe=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Gi.update(e,!0),stop:()=>xd(e),now:()=>ks.isProcessing?ks.timestamp:cu.now()}},NRe={decay:FH,inertia:FH,tween:Gw,keyframes:Gw,spring:xq},URe=n=>n/100;class bO extends mq{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||TO,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=dO(t)?t:NRe[t]||Gw;let l,c;a!==Gw&&typeof e[0]!="number"&&(l=hS(URe,vq(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=FY(u));const{calculatedDuration:f}=u,h=f+r,p=h*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:g,repeatDelay:v,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-h*(this.speed>=0?1:-1),A=this.speed>=0?S<0:S>u;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let T=this.currentTime,b=s;if(p){const k=Math.min(this.currentTime,u)/f;let I=Math.floor(k),D=k%1;!D&&k>=1&&(D=1),D===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(D=1-D,v&&(D-=v/f)):g==="mirror"&&(b=o)),T=If(0,1,D)*f}const C=A?{done:!1,value:l[0]}:b.next(T);a&&(C.value=a(C.value));let{done:L}=C;!A&&c!==null&&(L=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return P&&r!==void 0&&(C.value=nM(l,this.options,r)),_&&_(C.value),P&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Tf(e.calculatedDuration):0}get time(){return Tf(this.currentTime)}set time(e){e=Af(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Tf(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=FRe,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const GRe=new Set(["opacity","clipPath","filter","transform"]);function VRe(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=GY(a,r);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const HRe=Jk(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vw=10,zRe=2e4;function $Re(n){return dO(n.type)||n.type==="spring"||!UY(n.ease)}function WRe(n,e){const t=new bO({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<zRe;)i=t.sample(s),r.push(i.value),s+=Vw;return{times:void 0,keyframes:r,duration:s-Vw,ease:"linear"}}const Sq={anticipate:QY,backInOut:JY,circInOut:eq};function jRe(n){return n in Sq}class UH extends mq{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new pq(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Fw()&&jRe(s)&&(s=Sq[s]),$Re(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:g,...v}=this.options,_=WRe(e,v);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,r=_.times,s=_.ease,o="keyframes"}const u=VRe(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(EH(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(nM(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Tf(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Tf(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Af(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Va;const{animation:i}=t;EH(i,e)}return Va}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...p}=this.options,g=new bO({...p,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),v=Af(this.time);c.setWithVelocity(g.sample(v-Vw).value,g.sample(v).value,Vw)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return HRe()&&i&&GRe.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const KRe={type:"spring",stiffness:500,damping:25,restSpeed:10},XRe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),YRe={type:"keyframes",duration:.8},qRe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JRe=(n,{keyframes:e})=>e.length>2?YRe:Hm.has(n)?n.startsWith("scale")?XRe(e[1]):KRe:qRe;function QRe({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const MO=(n,e,t,i={},r,s)=>o=>{const a=hO(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Af(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};QRe(a)||(u={...u,...JRe(n,u)}),u.duration&&(u.duration=Af(u.duration)),u.repeatDelay&&(u.repeatDelay=Af(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=nM(u.keyframes,a);if(h!==void 0)return Gi.update(()=>{u.onUpdate(h),u.onComplete()}),new gCe([])}return!s&&UH.supports(u)?new UH(u):new bO(u)};function ZRe({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function Eq(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const h=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||u&&ZRe(u,f))continue;const g={delay:t,...hO(o||{},f)};let v=!1;if(window.MotionHandoffAnimation){const S=jY(n);if(S){const A=window.MotionHandoffAnimation(S,f,Gi);A!==null&&(g.startTime=A,v=!0)}}AD(n,f),h.start(MO(f,h,p,n.shouldReduceMotion&&$Y.has(f)?{type:!1}:g,n,v));const _=h.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{Gi.update(()=>{a&&ICe(n,a)})}),c}function PD(n,e,t={}){var i;const r=S1(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(Eq(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=s;return ePe(n,e,u+c,f,h,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function ePe(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(tPe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(PD(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function tPe(n,e){return n.sortNodePosition(e)}function nPe(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>PD(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=PD(n,e,t);else{const r=typeof e=="function"?S1(n,e,t.custom):e;i=Promise.all(Eq(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function Aq(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const iPe=Zk.length;function Tq(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Tq(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<iPe;t++){const i=Zk[t],r=n.props[i];(y1(r)||r===!1)&&(e[i]=r)}return e}const rPe=[...Qk].reverse(),sPe=Qk.length;function oPe(n){return e=>Promise.all(e.map(({animation:t,options:i})=>nPe(n,t,i)))}function aPe(n){let e=oPe(n),t=GH(),i=!0;const r=l=>(c,u)=>{var f;const h=S1(n,u,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...v}=h;c={...c,...v,...g}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=Tq(n.parent)||{},f=[],h=new Set;let p={},g=1/0;for(let _=0;_<sPe;_++){const S=rPe[_],A=t[S],T=c[S]!==void 0?c[S]:u[S],b=y1(T),C=S===l?A.isActive:null;C===!1&&(g=_);let L=T===u[S]&&T!==c[S]&&b;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...p},!A.isActive&&C===null||!T&&!A.prevProp||eM(T)||typeof T=="boolean")continue;const P=lPe(A.prevProp,T);let k=P||S===l&&A.isActive&&!L&&b||_>g&&b,I=!1;const D=Array.isArray(T)?T:[T];let G=D.reduce(r(S),{});C===!1&&(G={});const{prevResolvedValues:H={}}=A,q={...H,...G},W=ne=>{k=!0,h.has(ne)&&(I=!0,h.delete(ne)),A.needsAnimating[ne]=!0;const Y=n.getValue(ne);Y&&(Y.liveStyle=!1)};for(const ne in q){const Y=G[ne],Q=H[ne];if(p.hasOwnProperty(ne))continue;let F=!1;_D(Y)&&_D(Q)?F=!Aq(Y,Q):F=Y!==Q,F?Y!=null?W(ne):h.add(ne):Y!==void 0&&h.has(ne)?W(ne):A.protectedKeys[ne]=!0}A.prevProp=T,A.prevResolvedValues=G,A.isActive&&(p={...p,...G}),i&&n.blockInitialAnimation&&(k=!1),k&&(!(L&&P)||I)&&f.push(...D.map(ne=>({animation:ne,options:{type:S}})))}if(h.size){const _={};if(typeof c.initial!="boolean"){const S=S1(n,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(_.transition=S.transition)}h.forEach(S=>{const A=n.getBaseTarget(S),T=n.getValue(S);T&&(T.liveStyle=!0),_[S]=A??null}),f.push({animation:_})}let v=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(v=!1),i=!1,v?e(f):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const h in t)t[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=GH(),i=!0}}}function lPe(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Aq(e,n):!1}function Mp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GH(){return{animate:Mp(!0),whileInView:Mp(),whileHover:Mp(),whileTap:Mp(),whileDrag:Mp(),whileFocus:Mp(),exit:Mp()}}class Cd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cPe extends Cd{constructor(e){super(e),e.animationState||(e.animationState=aPe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();eM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let uPe=0;class fPe extends Cd{constructor(){super(...arguments),this.id=uPe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const hPe={animation:{Feature:cPe},exit:{Feature:fPe}};function T1(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function dS(n){return{point:{x:n.pageX,y:n.pageY}}}const dPe=n=>e=>mO(e)&&n(e,dS(e));function K0(n,e,t,i){return T1(n,e,dPe(t),i)}function wq({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function pPe({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function mPe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const bq=1e-4,gPe=1-bq,vPe=1+bq,Mq=.01,yPe=0-Mq,xPe=0+Mq;function Oo(n){return n.max-n.min}function _Pe(n,e,t){return Math.abs(n-e)<=t}function VH(n,e,t,i=.5){n.origin=i,n.originPoint=or(e.min,e.max,n.origin),n.scale=Oo(t)/Oo(e),n.translate=or(t.min,t.max,n.origin)-n.originPoint,(n.scale>=gPe&&n.scale<=vPe||isNaN(n.scale))&&(n.scale=1),(n.translate>=yPe&&n.translate<=xPe||isNaN(n.translate))&&(n.translate=0)}function __(n,e,t,i){VH(n.x,e.x,t.x,i?i.originX:void 0),VH(n.y,e.y,t.y,i?i.originY:void 0)}function HH(n,e,t){n.min=t.min+e.min,n.max=n.min+Oo(e)}function SPe(n,e,t){HH(n.x,e.x,t.x),HH(n.y,e.y,t.y)}function zH(n,e,t){n.min=e.min-t.min,n.max=n.min+Oo(e)}function S_(n,e,t){zH(n.x,e.x,t.x),zH(n.y,e.y,t.y)}const $H=()=>({translate:0,scale:1,origin:0,originPoint:0}),X0=()=>({x:$H(),y:$H()}),WH=()=>({min:0,max:0}),wr=()=>({x:WH(),y:WH()});function fl(n){return[n("x"),n("y")]}function IP(n){return n===void 0||n===1}function ID({scale:n,scaleX:e,scaleY:t}){return!IP(n)||!IP(e)||!IP(t)}function Up(n){return ID(n)||Cq(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Cq(n){return jH(n.x)||jH(n.y)}function jH(n){return n&&n!=="0%"}function Hw(n,e,t){const i=n-t,r=e*i;return t+r}function KH(n,e,t,i,r){return r!==void 0&&(n=Hw(n,r,i)),Hw(n,t,i)+e}function LD(n,e=0,t=1,i,r){n.min=KH(n.min,e,t,i,r),n.max=KH(n.max,e,t,i,r)}function Rq(n,{x:e,y:t}){LD(n.x,e.translate,e.scale,e.originPoint),LD(n.y,t.translate,t.scale,t.originPoint)}const XH=.999999999999,YH=1.0000000000001;function EPe(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&q0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Rq(n,o)),i&&Up(s.latestValues)&&q0(n,s.latestValues))}e.x<YH&&e.x>XH&&(e.x=1),e.y<YH&&e.y>XH&&(e.y=1)}function Y0(n,e){n.min=n.min+e,n.max=n.max+e}function qH(n,e,t,i,r=.5){const s=or(n.min,n.max,r);LD(n,e,t,s,i)}function q0(n,e){qH(n.x,e.x,e.scaleX,e.scale,e.originX),qH(n.y,e.y,e.scaleY,e.scale,e.originY)}function Pq(n,e){return wq(mPe(n.getBoundingClientRect(),e))}function APe(n,e,t){const i=Pq(n,t),{scroll:r}=e;return r&&(Y0(i.x,r.offset.x),Y0(i.y,r.offset.y)),i}const JH=(n,e)=>Math.abs(n-e);function TPe(n,e){const t=JH(n.x,e.x),i=JH(n.y,e.y);return Math.sqrt(t**2+i**2)}class Iq{constructor(e,t,{transformPagePoint:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=DP(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=TPe(u.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=u,{timestamp:g}=ks;this.history.push({...p,timestamp:g});const{onStart:v,onMove:_}=this.handlers;f||(v&&v(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{if(u.target instanceof Element&&u.target.hasPointerCapture&&u.pointerId!==void 0)try{if(!u.target.hasPointerCapture(u.pointerId))return}catch{}this.lastMoveEvent=u,this.lastMoveEventInfo=LP(f,this.transformPagePoint),Gi.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{Nw(u,"release"),this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=DP(u.type==="pointercancel"||u.type==="lostpointercapture"?this.lastMoveEventInfo:LP(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,v),p&&p(u,v)},!mO(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i;const s=dS(e),o=LP(s,this.transformPagePoint),{point:a}=o,{timestamp:l}=ks;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,DP(o,this.history)),Nw(e,"set"),this.removeListeners=hS(K0(e.currentTarget,"pointermove",this.handlePointerMove),K0(e.currentTarget,"pointerup",this.handlePointerUp),K0(e.currentTarget,"pointercancel",this.handlePointerUp),K0(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xd(this.updatePoint)}}function LP(n,e){return e?{point:e(n.point)}:n}function QH(n,e){return{x:n.x-e.x,y:n.y-e.y}}function DP({point:n},e){return{point:n,delta:QH(n,Lq(e)),offset:QH(n,wPe(e)),velocity:bPe(e,.1)}}function wPe(n){return n[0]}function Lq(n){return n[n.length-1]}function bPe(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=Lq(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Af(e)));)t--;if(!i)return{x:0,y:0};const s=Tf(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function MPe(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?or(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?or(t,n,i.max):Math.min(n,t)),n}function ZH(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function CPe(n,{top:e,left:t,bottom:i,right:r}){return{x:ZH(n.x,t,r),y:ZH(n.y,e,i)}}function ez(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function RPe(n,e){return{x:ez(n.x,e.x),y:ez(n.y,e.y)}}function PPe(n,e){let t=.5;const i=Oo(n),r=Oo(e);return r>i?t=Dv(e.min,e.max-i,n.min):i>r&&(t=Dv(n.min,n.max-r,e.min)),If(0,1,t)}function IPe(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const DD=.35;function LPe(n=DD){return n===!1?n=0:n===!0&&(n=DD),{x:tz(n,"left","right"),y:tz(n,"top","bottom")}}function tz(n,e,t){return{min:nz(n,e),max:nz(n,t)}}function nz(n,e){return typeof n=="number"?n:n[e]||0}const DPe=new WeakMap;class BPe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(dS(u).point)},s=(u,f)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bCe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fl(_=>{let S=this.getAxisMotionValue(_).get()||0;if(lu.test(S)){const{projection:A}=this.visualElement;if(A&&A.layout){const T=A.layout.layoutBox[_];T&&(S=Oo(T)*(parseFloat(S)/100))}}this.originPoint[_]=S}),g&&Gi.postRender(()=>g(u,f)),AD(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:_}=f;if(p&&this.currentDirection===null){this.currentDirection=kPe(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),v&&v(u,f)},a=(u,f)=>this.stop(u,f),l=()=>fl(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Iq(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Gi.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!XA(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=MPe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&W0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=CPe(r.layoutBox,t):this.constraints=!1,this.elastic=LPe(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fl(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=IPe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!W0(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=APe(i,r.root,this.visualElement.getTransformPagePoint());let o=RPe(r.layout.layoutBox,s);if(t){const a=t(pPe(o));this.hasMutatedConstraints=!!a,a&&(o=wq(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=fl(u=>{if(!XA(u,t,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const h=r?200:1e6,p=r?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return AD(this.visualElement,e),i.start(MO(e,i,0,t,this.visualElement,!1))}stopAnimation(){fl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fl(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){fl(t=>{const{drag:i}=this.getProps();if(!XA(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-or(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!W0(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=PPe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),fl(o=>{if(!XA(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(or(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;DPe.set(this.visualElement,this);const e=this.visualElement.current,t=K0(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();W0(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Gi.read(i);const o=T1(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(fl(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=DD,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function XA(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function kPe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class OPe extends Cd{constructor(e){super(e),this.removeGroupControls=Va,this.removeListeners=Va,this.controls=new BPe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Va}unmount(){this.removeGroupControls(),this.removeListeners()}}const iz=n=>(e,t)=>{n&&Gi.postRender(()=>n(e,t))};class FPe extends Cd{constructor(){super(...arguments),this.removePointerDownListener=Va}onPointerDown(e){this.session=new Iq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:iz(e),onStart:iz(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Gi.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=K0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const CT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rz(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ex={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(xn.test(n))n=parseFloat(n);else return n;const t=rz(n,e.target.x),i=rz(n,e.target.y);return`${t}% ${i}%`}},NPe={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=_d.parse(n);if(r.length>5)return i;const s=_d.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=or(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class UPe extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;zMe(GPe),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),CT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Gi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Dq(n){const[e,t]=_Me(),i=O.useContext(gY);return ge.jsx(UPe,{...n,layoutGroup:i,switchLayoutGroup:O.useContext(TY),isPresent:e,safeToRemove:t})}const GPe={borderRadius:{...Ex,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ex,borderTopRightRadius:Ex,borderBottomLeftRadius:Ex,borderBottomRightRadius:Ex,boxShadow:NPe};function VPe(n,e,t){const i=co(n)?n:E1(n);return i.start(MO("",i,e,t)),i.animation}function HPe(n){return n instanceof SVGElement&&n.tagName!=="svg"}const zPe=(n,e)=>n.depth-e.depth;class $Pe{constructor(){this.children=[],this.isDirty=!1}add(e){gO(this.children,e),this.isDirty=!0}remove(e){vO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zPe),this.isDirty=!1,this.children.forEach(e)}}function WPe(n,e){const t=cu.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(xd(i),n(s-e))};return Gi.read(i,!0),()=>xd(i)}const Bq=["TopLeft","TopRight","BottomLeft","BottomRight"],jPe=Bq.length,sz=n=>typeof n=="string"?parseFloat(n):n,oz=n=>typeof n=="number"||xn.test(n);function KPe(n,e,t,i,r,s){r?(n.opacity=or(0,t.opacity!==void 0?t.opacity:1,XPe(i)),n.opacityExit=or(e.opacity!==void 0?e.opacity:1,0,YPe(i))):s&&(n.opacity=or(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<jPe;o++){const a=`border${Bq[o]}Radius`;let l=az(e,a),c=az(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||oz(l)===oz(c)?(n[a]=Math.max(or(sz(l),sz(c),i),0),(lu.test(c)||lu.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=or(e.rotate||0,t.rotate||0,i))}function az(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const XPe=kq(0,.5,ZY),YPe=kq(.5,.95,Va);function kq(n,e,t){return i=>i<n?0:i>e?1:t(Dv(n,e,i))}function lz(n,e){n.min=e.min,n.max=e.max}function al(n,e){lz(n.x,e.x),lz(n.y,e.y)}function cz(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function uz(n,e,t,i,r){return n-=e,n=Hw(n,1/t,i),r!==void 0&&(n=Hw(n,1/r,i)),n}function qPe(n,e=0,t=1,i=.5,r,s=n,o=n){if(lu.test(e)&&(e=parseFloat(e),e=or(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=or(s.min,s.max,i);n===s&&(a-=e),n.min=uz(n.min,e,t,a,r),n.max=uz(n.max,e,t,a,r)}function fz(n,e,[t,i,r],s,o){qPe(n,e[t],e[i],e[r],e.scale,s,o)}const JPe=["x","scaleX","originX"],QPe=["y","scaleY","originY"];function hz(n,e,t,i){fz(n.x,e,JPe,t?t.x:void 0,i?i.x:void 0),fz(n.y,e,QPe,t?t.y:void 0,i?i.y:void 0)}function dz(n){return n.translate===0&&n.scale===1}function Oq(n){return dz(n.x)&&dz(n.y)}function pz(n,e){return n.min===e.min&&n.max===e.max}function ZPe(n,e){return pz(n.x,e.x)&&pz(n.y,e.y)}function mz(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Fq(n,e){return mz(n.x,e.x)&&mz(n.y,e.y)}function gz(n){return Oo(n.x)/Oo(n.y)}function vz(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class eIe{constructor(){this.members=[]}add(e){gO(this.members,e),e.scheduleRender()}remove(e){if(vO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tIe(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:p,skewY:g}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),h&&(i+=`rotateY(${h}deg) `),p&&(i+=`skewX(${p}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const BP=["","X","Y","Z"],nIe={visibility:"hidden"},yz=1e3;let iIe=0;function kP(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function Nq(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=jY(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Gi,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&Nq(i)}function Uq({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=iIe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(oIe),this.nodes.forEach(fIe),this.nodes.forEach(hIe),this.nodes.forEach(aIe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $Pe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new yO),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=HPe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const h=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=WPe(h,250),CT.hasAnimatedSinceResize&&(CT.hasAnimatedSinceResize=!1,this.nodes.forEach(_z))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||vIe,{onLayoutAnimationStart:_,onLayoutAnimationComplete:S}=u.getProps(),A=!this.targetLayout||!Fq(this.targetLayout,g),T=!h&&p;if(this.options.layoutRoot||this.resumeFrom||T||h&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const b={...hO(v,"layout"),onPlay:_,onComplete:S};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||_z(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,xd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dIe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Nq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xz);return}this.isUpdating||this.nodes.forEach(cIe),this.isUpdating=!1,this.nodes.forEach(uIe),this.nodes.forEach(rIe),this.nodes.forEach(sIe),this.clearAllSnapshots();const a=cu.now();ks.delta=If(0,1e3/60,a-ks.timestamp),ks.timestamp=a,ks.isProcessing=!0,bP.update.process(ks),bP.preRender.process(ks),bP.render.process(ks),ks.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lIe),this.sharedNodes.forEach(pIe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Oo(this.snapshot.measuredBox.x)&&!Oo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Oq(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Up(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),yIe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return wr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(xIe))){const{scroll:u}=this.root;u&&(Y0(l.x,u.offset.x),Y0(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=wr();if(al(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&al(l,o),Y0(l.x,f.offset.x),Y0(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=wr();al(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&q0(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Up(u.latestValues)&&q0(l,u.latestValues)}return Up(this.latestValues)&&q0(l,this.latestValues),l}removeTransform(o){const a=wr();al(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Up(c.latestValues))continue;ID(c.latestValues)&&c.updateSnapshot();const u=wr(),f=c.measurePageBox();al(u,f),hz(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Up(this.latestValues)&&hz(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ks.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=ks.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wr(),this.relativeTargetOrigin=wr(),S_(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wr(),this.targetWithTransforms=wr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SPe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):al(this.target,this.layout.layoutBox),Rq(this.target,this.targetDelta)):al(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wr(),this.relativeTargetOrigin=wr(),S_(this.relativeTargetOrigin,this.target,p.target),al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ID(this.parent.latestValues)||Cq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ks.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;al(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;EPe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cz(this.prevProjectionDelta.x,this.projectionDelta.x),cz(this.prevProjectionDelta.y,this.projectionDelta.y)),__(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!vz(this.projectionDelta.x,this.prevProjectionDelta.x)||!vz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=X0(),this.projectionDelta=X0(),this.projectionDeltaWithTransform=X0()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=X0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=wr(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,_=this.getStack(),S=!_||_.members.length<=1,A=!!(v&&!S&&this.options.crossfade===!0&&!this.path.some(gIe));this.animationProgress=0;let T;this.mixTargetDelta=b=>{const C=b/1e3;Sz(f.x,o.x,C),Sz(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(S_(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mIe(this.relativeTarget,this.relativeTargetOrigin,h,C),T&&ZPe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=wr()),al(T,this.relativeTarget)),v&&(this.animationValues=u,KPe(u,c,this.latestValues,C,A,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(xd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gi.update(()=>{CT.hasAnimatedSinceResize=!0,this.currentAnimation=VPe(0,yz,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Gq(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wr();const f=Oo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=Oo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}al(a,l),q0(a,u),__(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new eIe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&kP("z",o,c,this.animationValues);for(let u=0;u<BP.length;u++)kP(`rotate${BP[u]}`,o,c,this.animationValues),kP(`skew${BP[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nIe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=bT(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=bT(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Up(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=tIe(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in x1){if(h[v]===void 0)continue;const{correct:_,applyTo:S,isCSSVariable:A}=x1[v],T=c.transform==="none"?h[v]:_(h[v],f);if(S){const b=S.length;for(let C=0;C<b;C++)c[S[C]]=T}else A?this.options.visualElement.renderState.vars[v]=T:c[v]=T}return this.options.layoutId&&(c.pointerEvents=f===this?bT(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(xz),this.root.sharedNodes.clear()}}}function rIe(n){n.updateLayout()}function sIe(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?fl(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=Oo(h);h.min=i[f].min,h.max=h.min+p}):Gq(s,t.layoutBox,i)&&fl(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=Oo(i[f]);h.max=h.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+p)});const a=X0();__(a,i,t.layoutBox);const l=X0();o?__(l,n.applyTransform(r,!0),t.measuredBox):__(l,i,t.layoutBox);const c=!Oq(a);let u=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const g=wr();S_(g,t.layoutBox,h.layoutBox);const v=wr();S_(v,i,p.layoutBox),Fq(g,v)||(u=!0),f.options.layoutRoot&&(n.relativeTarget=v,n.relativeTargetOrigin=g,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function oIe(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function aIe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function lIe(n){n.clearSnapshot()}function xz(n){n.clearMeasurements()}function cIe(n){n.isLayoutDirty=!1}function uIe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function _z(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function fIe(n){n.resolveTargetDelta()}function hIe(n){n.calcProjection()}function dIe(n){n.resetSkewAndRotation()}function pIe(n){n.removeLeadSnapshot()}function Sz(n,e,t){n.translate=or(e.translate,0,t),n.scale=or(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Ez(n,e,t,i){n.min=or(e.min,t.min,i),n.max=or(e.max,t.max,i)}function mIe(n,e,t,i){Ez(n.x,e.x,t.x,i),Ez(n.y,e.y,t.y,i)}function gIe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const vIe={duration:.45,ease:[.4,0,.1,1]},Az=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Tz=Az("applewebkit/")&&!Az("chrome/")?Math.round:Va;function wz(n){n.min=Tz(n.min),n.max=Tz(n.max)}function yIe(n){wz(n.x),wz(n.y)}function Gq(n,e,t){return n==="position"||n==="preserve-aspect"&&!_Pe(gz(e),gz(t),.2)}function xIe(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const _Ie=Uq({attachResizeListener:(n,e)=>T1(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OP={current:void 0},Vq=Uq({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!OP.current){const n=new _Ie({});n.mount(window),n.setOptions({layoutScroll:!0}),OP.current=n}return OP.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),SIe={pan:{Feature:FPe},drag:{Feature:OPe,ProjectionNode:Vq,MeasureLayout:Dq}};function bz(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Gi.postRender(()=>s(e,dS(e)))}class EIe extends Cd{mount(){const{current:e}=this.node;e&&(this.unmount=_Ce(e,(t,i)=>(bz(this.node,i,"Start"),r=>bz(this.node,r,"End"))))}unmount(){}}class AIe extends Cd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hS(T1(this.node.current,"focus",()=>this.onFocus()),T1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mz(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Gi.postRender(()=>s(e,dS(e)))}class TIe extends Cd{mount(){const{current:e}=this.node;e&&(this.unmount=TCe(e,(t,i)=>(Mz(this.node,i,"Start"),(r,{success:s})=>Mz(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const BD=new WeakMap,FP=new WeakMap,wIe=n=>{const e=BD.get(n.target);e&&e(n)},bIe=n=>{n.forEach(wIe)};function MIe({root:n,...e}){const t=n||document;FP.has(t)||FP.set(t,{});const i=FP.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(bIe,{root:n,...e})),i[r]}function CIe(n,e,t){const i=MIe(e);return BD.set(n,t),i.observe(n),()=>{BD.delete(n),i.unobserve(n)}}const RIe={some:0,all:1};class PIe extends Cd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:RIe[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return CIe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(IIe(e,t))&&this.startObserver()}unmount(){}}function IIe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const LIe={inView:{Feature:PIe},tap:{Feature:TIe},focus:{Feature:AIe},hover:{Feature:EIe}},DIe={layout:{ProjectionNode:Vq,MeasureLayout:Dq}},kD={current:null},Hq={current:!1};function BIe(){if(Hq.current=!0,!!qk)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>kD.current=n.matches;n.addListener(e),e()}else kD.current=!1}const kIe=[...dq,to,_d],OIe=n=>kIe.find(hq(n)),FIe=new WeakMap;function NIe(n,e,t){for(const i in e){const r=e[i],s=t[i];if(co(r))n.addValue(i,r);else if(co(s))n.addValue(i,E1(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,E1(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Cz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UIe{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=TO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=cu.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Gi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=tM(t),this.isVariantNode=EY(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&co(g)&&g.set(l[p],!1)}}mount(e){this.current=e,FIe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),Hq.current||BIe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kD.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xd(this.notifyUpdate),xd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Hm.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Gi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bv){const t=Bv[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Cz.length;i++){const r=Cz[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=NIe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=E1(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(uq(r)||tq(r))?r=parseFloat(r):!OIe(r)&&_d.test(t)&&(r=aq(e,t)),this.setBaseTarget(e,co(r)?r.get():r)),co(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=uO(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!co(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new yO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class zq extends UIe{constructor(){super(...arguments),this.KeyframeResolver=pq}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;co(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function GIe(n){return window.getComputedStyle(n)}class VIe extends zq{constructor(){super(...arguments),this.type="html",this.renderInstance=DY}readValueFromInstance(e,t){if(Hm.has(t)){const i=AO(t);return i&&i.default||0}else{const i=GIe(e),r=(nO(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Pq(e,t)}build(e,t,i){sO(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return fO(e,t,i)}}class HIe extends zq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wr,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&LY(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Hm.has(t)){const i=AO(t);return i&&i.default||0}return t=BY.has(t)?t:eO(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return OY(e,t,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Gi.postRender(this.updateDimensions)}build(e,t,i){lO(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){kY(e,t,i,r)}mount(e){this.isSVGTag=cO(e.tagName),super.mount(e)}}const zIe=(n,e)=>aO(n)?new HIe(e):new VIe(e,{allowProjection:n!==O.Fragment}),$Ie=dCe({...hPe,...LIe,...SIe,...DIe},zIe),WIe=RMe($Ie);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jIe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KIe=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Rz=n=>{const e=KIe(n);return e.charAt(0).toUpperCase()+e.slice(1)},$q=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),XIe=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YIe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qIe=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>O.createElement("svg",{ref:l,...YIe,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:$q("lucide",r),...!s&&!XIe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>O.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=(n,e)=>{const t=O.forwardRef(({className:i,...r},s)=>O.createElement(qIe,{ref:s,iconNode:e,className:$q(`lucide-${jIe(Rz(n))}`,`lucide-${n}`,i),...r}));return t.displayName=Rz(n),t};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JIe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],QIe=Wq("volume-2",JIe);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZIe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],eLe=Wq("volume-x",ZIe),tLe=({onClose:n,toggle:e})=>{const t=document.getElementById("my-modal");return t?iS.createPortal(ge.jsx("div",{className:"music_popup_overlay",children:ge.jsxs("div",{className:"music_popup_div",children:[ge.jsx("p",{className:"music_popup_p",children:"Do you want to play the background music?"}),ge.jsxs("div",{className:"music_popup_button_div",children:[ge.jsx("button",{onClick:e,className:"music_popup_button right_margin",children:"Yes"}),ge.jsx("button",{onClick:n,className:"music_popup_button",children:"No"})]})]})}),t):null},nLe=()=>{const n=O.useRef(null),e=O.useRef(null),[t,i]=O.useState(!1),[r,s]=O.useState(!1),[o,a]=O.useState(1),l=()=>{const h=o===1?n.current:e.current,p=o===1?e.current:n.current;p==null||p.pause(),p!=null&&p.currentTime&&(p.currentTime=0),h==null||h.play()},c=()=>{a(h=>h===1?2:1)},u=O.useCallback(()=>{localStorage.getItem("musicConsent")==="true"&&!t&&(l(),i(!0)),["click","keydown","touchstart"].forEach(p=>document.removeEventListener(p,u))},[t,o]);O.useEffect(()=>{const h=localStorage.getItem("musicConsent"),p=localStorage.getItem("consentTime");h&&p&&new Date(p).getTime()+3*24*60*60*1e3>Date.now()?(i(h==="true"),h==="true"&&["click","keydown","touchstart"].forEach(g=>document.addEventListener(g,u))):s(!0)},[u]),O.useEffect(()=>{const h=o===1?n.current:e.current,p=()=>c();return h&&h.addEventListener("ended",p),()=>{h==null||h.removeEventListener("ended",p)}},[o]),O.useEffect(()=>{t&&l()},[o,t]);const f=()=>{var p,g;const h=!t;i(!t),h?l():((p=n.current)==null||p.pause(),(g=e.current)==null||g.pause()),localStorage.setItem("musicConsent",String(h)),localStorage.setItem("consentTime",new Date().toISOString()),s(!1)};return ge.jsxs("div",{className:"music_div",children:[r&&ge.jsx(tLe,{onClose:()=>s(!1),toggle:f}),ge.jsxs("audio",{ref:n,children:[ge.jsx("source",{src:"/audio/Sahar El Layali Violin.mp3",type:"audio/mpeg"}),"your browser does not support the audio element."]}),ge.jsxs("audio",{ref:e,children:[ge.jsx("source",{src:"/audio/Fee Shi.mp3",type:"audio/mpeg"}),"your browser does not support the audio element."]}),ge.jsx(WIe.button,{onClick:f,initial:{scale:0},animate:{scale:1},transition:{delay:1},className:"music_button w-10 h-10 xs:w-14 xs:h-14 text-foreground rounded-full flex items-center justify-center cursor-pointer z-50 p-2.5 xs:p-4 custom-bg","aria-label":"Sound control button",name:"Sound control button",children:t?ge.jsx(QIe,{className:"music_icon",strokeWidth:1.5}):ge.jsx(eLe,{className:"music_icon",strokeWidth:1.5})})]})};function iLe(){const[n,e]=O.useState(!1);O.useRef();const t=8.882429021961798,i=1.1618082784116268*3.5,r=4.5,s=t/i,o=2*Math.atan(t/s/(2*r))*(180/Math.PI);return ge.jsxs(ge.Fragment,{children:[ge.jsx(yMe,{onFinish:()=>e(!0)}),n&&ge.jsx(nLe,{}),ge.jsxs(Vse,{shadows:!0,gl:{antialias:!0},camera:{position:[0,.5,5],fov:o},children:[ge.jsx("color",{attach:"background",args:["#f5f3ee"]}),ge.jsx("fog",{attach:"fog",args:["#f5f3ee",10,50]}),ge.jsx("ambientLight",{intensity:.3}),ge.jsx("directionalLight",{position:[2,4,2],intensity:.3,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-bias":-1e-4}),ge.jsxs(mae,{pages:aa.sections.length,damping:.1,maxSpeed:.2,children:[ge.jsx(H4,{transition:{duration:.6},children:ge.jsx("group",{"position-y":-1,"position-x":.2,children:ge.jsx(O.Suspense,{fallback:null,children:ge.jsx(gMe,{})})})}),ge.jsx(yae,{html:!0,children:ge.jsx(H4,{transition:{duration:1},children:ge.jsx("group",{"position-y":-1,children:ge.jsx(z_e,{})})})})]})]}),ge.jsx(vMe,{})]})}OD.createRoot(document.getElementById("root")).render(ge.jsx(O.StrictMode,{children:ge.jsx(iLe,{})}));
